{"version":3,"sources":["webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/node_modules/readable-stream/errors-browser.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/node_modules/readable-stream/lib/_stream_duplex.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/node_modules/readable-stream/errors-browser.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/node_modules/readable-stream/lib/_stream_duplex.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/node_modules/readable-stream/errors-browser.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/node_modules/readable-stream/lib/_stream_duplex.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/node_modules/lodash.isfinite/index.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/lib/_util.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/node_modules/readable-stream/lib/internal/streams/end-of-stream.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/lib/normalize-coord.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/node_modules/readable-stream/lib/internal/streams/end-of-stream.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/lib/_box.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/node_modules/readable-stream/lib/internal/streams/end-of-stream.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/node_modules/readable-stream/lib/_stream_readable.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/node_modules/readable-stream/lib/internal/streams/stream-browser.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/node_modules/readable-stream/lib/internal/streams/destroy.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/node_modules/readable-stream/lib/internal/streams/state.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/node_modules/readable-stream/lib/_stream_writable.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/node_modules/readable-stream/lib/_stream_transform.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/lib/_commands.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/lib/parse-coord.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/lib/_drill-mode.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/node_modules/readable-stream/lib/_stream_readable.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/node_modules/readable-stream/lib/internal/streams/stream-browser.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/node_modules/readable-stream/lib/internal/streams/destroy.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/node_modules/readable-stream/lib/internal/streams/state.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/node_modules/readable-stream/lib/_stream_writable.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/node_modules/readable-stream/lib/_stream_transform.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/node_modules/readable-stream/lib/_stream_readable.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/node_modules/readable-stream/lib/internal/streams/stream-browser.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/node_modules/readable-stream/lib/internal/streams/destroy.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/node_modules/readable-stream/lib/internal/streams/state.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/node_modules/readable-stream/lib/_stream_writable.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/node_modules/readable-stream/lib/_stream_transform.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/pcb-stackup-core/lib/board-color.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/node_modules/run-parallel/index.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/node_modules/run-waterfall/index.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/index.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/index.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/lib/parser.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/node_modules/readable-stream/readable-browser.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/node_modules/readable-stream/lib/internal/streams/buffer_list.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/node_modules/readable-stream/experimentalWarning.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/node_modules/readable-stream/lib/internal/streams/async_iterator.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/node_modules/readable-stream/lib/_stream_passthrough.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/node_modules/readable-stream/lib/internal/streams/pipeline.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/lib/_determine-filetype.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/lib/get-next-block.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/lib/_parse-gerber.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/node_modules/lodash.padstart/index.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/node_modules/lodash.padend/index.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/lib/_parse-macro-block.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/lib/_parse-macro-expression.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/lib/_parse-drill.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-parser/lib/_warning.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/index.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/lib/plotter.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/node_modules/readable-stream/readable-browser.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/node_modules/readable-stream/lib/internal/streams/buffer_list.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/node_modules/readable-stream/experimentalWarning.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/node_modules/readable-stream/lib/internal/streams/async_iterator.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/node_modules/readable-stream/lib/_stream_passthrough.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/node_modules/readable-stream/lib/internal/streams/pipeline.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/lib/path-graph.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/node_modules/lodash.fill/index.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/lib/_warning.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/lib/_pad-shape.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/node_modules/lodash.isfunction/index.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-plotter/lib/_operate.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/lib/plotter-to-svg.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/node_modules/readable-stream/readable-browser.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/node_modules/readable-stream/lib/internal/streams/buffer_list.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/node_modules/readable-stream/experimentalWarning.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/node_modules/readable-stream/lib/internal/streams/async_iterator.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/node_modules/readable-stream/lib/_stream_passthrough.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/node_modules/readable-stream/lib/internal/streams/pipeline.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/lib/_reduce-shape.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/lib/_flash-pad.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/gerber-to-svg/lib/_create-path.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/pcb-stackup-core/index.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/node_modules/color-string/index.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/node_modules/color-name/index.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/node_modules/simple-swizzle/index.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/node_modules/simple-swizzle/node_modules/is-arrayish/index.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/pcb-stackup-core/lib/parse-options.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/pcb-stackup-core/lib/sort-layers.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/pcb-stackup-core/lib/stack-layers.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/pcb-stackup-core/lib/_gather-layers.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/pcb-stackup-core/lib/wrap-layer.js","webpack:///C:/xampp/htdocs/PROYECTOS/tracespace/tracespace/packages/pcb-stackup/index.js"],"names":["codes","createErrorType","code","message","Base","Error","NodeError","_Base","subClass","superClass","arg1","arg2","arg3","call","this","getMessage","prototype","Object","create","constructor","__proto__","name","oneOf","expected","thing","Array","isArray","len","length","map","i","String","concat","slice","join","value","TypeError","actual","determiner","search","pos","msg","substr","replace","str","this_len","undefined","substring","endsWith","type","start","indexOf","includes","arg","module","exports","objectKeys","keys","obj","key","push","Duplex","Readable","Writable","v","method","options","allowHalfOpen","readable","writable","once","onend","_writableState","ended","process","nextTick","onEndNT","self","end","defineProperty","enumerable","get","highWaterMark","getBuffer","_readableState","destroyed","set","freeGlobal","global","freeSelf","nativeIsFinite","Function","isFinite","shift","number","Math","round","boundingRect","box","fill","element","x","y","width","height","maskLayer","maskId","layer","mask","createMask","children","id","stroke","ERR_STREAM_PREMATURE_CLOSE","noop","eos","stream","opts","callback","called","_len","arguments","args","_key","apply","onlegacyfinish","onfinish","writableEnded","finished","readableEnded","endEmitted","onerror","err","onclose","onrequest","req","on","setHeader","abort","isRequest","error","removeListener","numIsFinite","padLeft","padRight","format","NaN","numberString","sign","zero","Number","places","leading","trailing","before","after","add","target","min","max","translate","delta","dx","dy","new","Infinity","addPoint","point","addCircle","r","cx","cy","repeat","ReadableState","EventEmitter","EElistenerCount","emitter","listeners","Stream","Buffer","OurUint8Array","Uint8Array","debug","debugUtil","debuglog","StringDecoder","createReadableStreamAsyncIterator","BufferList","destroyImpl","getHighWaterMark","_require$codes","ERR_INVALID_ARG_TYPE","ERR_STREAM_PUSH_AFTER_EOF","ERR_METHOD_NOT_IMPLEMENTED","ERR_STREAM_UNSHIFT_AFTER_END_EVENT","emitExperimentalWarning","kProxyEvents","isDuplex","objectMode","readableObjectMode","buffer","pipes","pipesCount","flowing","reading","sync","needReadable","emittedReadable","readableListening","resumeScheduled","paused","emitClose","defaultEncoding","awaitDrain","readingMore","decoder","encoding","read","_read","destroy","_destroy","readableAddChunk","chunk","addToFront","skipChunkCheck","er","state","emitReadable","emitReadable_","onEofChunk","isBuffer","chunkInvalid","emit","getPrototypeOf","from","_uint8ArrayToBuffer","addChunk","write","maybeReadMore","unshift","_undestroy","undestroy","cb","isPaused","setEncoding","enc","howMuchToRead","n","head","data","computeNewHighWaterMark","flow","maybeReadMore_","updateReadableListening","listenerCount","resume","nReadingNextTick","resume_","fromList","ret","first","clear","consume","endReadable","endReadableNT","xs","l","parseInt","nOrig","doRead","pipe","dest","pipeOpts","src","endFn","stdout","stderr","unpipe","onunpipe","unpipeInfo","hasUnpiped","ondrain","ondata","cleanedUp","needDrain","pipeOnDrain","pause","event","fn","prependListener","_events","dests","index","splice","ev","res","addListener","removeAllListeners","wrap","_this","bind","Symbol","asyncIterator","_fromList","emitErrorAndCloseNT","emitErrorNT","emitCloseNT","readableDestroyed","writableDestroyed","errorEmitted","ending","finalCalled","prefinished","ERR_INVALID_OPT_VALUE","duplexKey","hwm","highWaterMarkFrom","floor","CorkedRequest","next","entry","finish","corkReq","pendingcb","corkedRequestsFree","onCorkedFinish","WritableState","internalUtil","deprecate","realHasInstance","ERR_MULTIPLE_CALLBACK","ERR_STREAM_CANNOT_PIPE","ERR_STREAM_DESTROYED","ERR_STREAM_NULL_VALUES","ERR_STREAM_WRITE_AFTER_END","ERR_UNKNOWN_ENCODING","nop","writableObjectMode","noDecode","decodeStrings","writing","corked","bufferProcessing","onwrite","writecb","writelen","onwriteStateUpdate","finishMaybe","onwriteError","needFinish","bufferedRequest","clearBuffer","afterWrite","lastBufferedRequest","bufferedRequestCount","_write","writev","_writev","final","_final","doWrite","onwriteDrain","holder","count","allBuffers","isBuf","callFinal","need","prefinish","current","out","_","hasInstance","object","writeAfterEnd","validChunk","newChunk","decodeChunk","last","writeOrBuffer","cork","uncork","setDefaultEncoding","toLowerCase","endWritable","Transform","ERR_TRANSFORM_ALREADY_TRANSFORMING","ERR_TRANSFORM_WITH_LENGTH_0","afterTransform","ts","_transformState","transforming","writechunk","rs","needTransform","writeencoding","transform","_transform","flush","_flush","done","err2","commandMap","property","line","prop","level","tool","op","operation","location","coord","macro","blocks","normalize","RE_TRAILING","RE_LEADING","MATCH","test","parse","reduce","result","matcher","coordMatch","match","detectZero","DRILL","MOVE","LINEAR","CW_ARC","CCW_ARC","colorString","LAYER_IDS","DEFAULTS","fr4","cu","cf","sm","ss","sp","getColor","overrides","color","getStyleElement","prefix","side","parsedColor","css","components","alpha","model","to","hex","colorToCssString","tasks","results","pending","isSync","each","forEach","task","xid","gerberParser","gerberPlotter","xmlElementString","PlotterToSvg","render","clone","gerber","inputOpts","ensure","attributes","createElement","parser","filetype","plotter","units","backupUnits","nota","backupNota","optimizePaths","plotAsOutline","callbackMode","converter","w","e","finishConversion","Parser","p","verifyPlaces","z","verifyZero","f","verifyFiletype","inherits","determineFiletype","getNext","parseGerber","parseDrill","warning","drillMode","_decoder","_stash","_index","_drillMode","_drillStash","_syncResult","_process","lines","rem","block","_push","_warn","parseSync","file","PassThrough","pipeline","_defineProperty","configurable","inspect","custom","tail","_proto","s","alloc","offset","allocUnsafe","copy","hasStrings","_getString","_getBuffer","c","nb","buf","source","ownKeys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","_objectSpread","depth","customInspect","experimentalWarnings","Set","emitWarning","feature","has","_Object$setPrototypeO","kLastResolve","kLastReject","kError","kEnded","kLastPromise","kHandlePromise","kStream","createIterResult","readAndResolve","iter","resolve","onReadable","AsyncIteratorPrototype","ReadableStreamAsyncIteratorPrototype","setPrototypeOf","Promise","reject","promise","lastPromise","then","wrapForNext","_this2","_Object$create","iterator","ERR_MISSING_ARGS","destroyer","closed","popCallback","streams","pop","destroys","LIMIT","limit","split","param","splitFound","paramStarted","paramFound","blockFound","found","trim","commands","parseCoord","parseMacroBlock","RE_MODE","RE_REGION","RE_ARC","RE_BKP_UNITS","RE_BKP_NOTA","RE_COMMENT","RE_TO","RE_TOOL","RE_OP","RE_COORD","RE_UNITS","RE_FORMAT","RE_POLARITY","RE_STEP_REP","RE_TOOL_DEF","RE_MACRO","RE_CADENCE_ALLEGRO_UNITS_IN_FORMAT","parseUnits","unitsMatch","region","arc","formatMatch","unknown","epsilon","pow","caUnitsMatch","polarity","stepRepeatMatch","j","sr","shape","maxArgs","val","toolMatch","shapeMatch","toolArgs","hole","toolDef","params","parseToolDef","macroMatch","Boolean","parseMacroDef","mode","opMatch","modeMatch","opCode","coordString","reTrim","reIsBadHex","reIsBinary","reIsOctal","rsAstral","rsCombo","rsFitz","rsNonAstral","rsRegional","rsSurrPair","reOptMod","rsSeq","rsSymbol","reUnicode","RegExp","reHasUnicode","freeParseInt","root","asciiSize","hasUnicode","string","stringSize","lastIndex","unicodeSize","stringToArray","unicodeToArray","asciiToArray","objectToString","toString","nativeCeil","ceil","nativeFloor","symbolProto","symbolToString","baseRepeat","baseToString","isSymbol","castSlice","array","baseSlice","isObject","isObjectLike","toFinite","other","valueOf","isBinary","toNumber","chars","strLength","remainder","toInteger","charsLength","createPadding","parseMacroExpr","RE_NUM","RE_VAR_DEF","varDefMatch","varName","varExpr","evaluate","mods","m","exp","dia","rot","x1","y1","x2","y2","points","vertices","ringThx","ringGap","maxRings","crossThx","crossLen","outerDia","innerDia","gap","RE_NUMBER","RE_TOKEN","expr","parseExpression","tokens","parsePrimary","t","parseMultiplication","left","right","tree","RE_ALTIUM_HINT","RE_ALTIUM_PLATING_HINT","RE_KI_HINT","RE_ZERO","RE_TOOL_SET","RE_ROUTE","parseBlock","toolCode","toolSet","coordToCommand","zeroMatch","keep","formatHints","kicadMatch","absolute","unitSet","suppressionSet","altiumMatch","holePlating","parseCommentForFormatHints","Plotter","verifyNota","verifyUnits","PathGraph","padShape","operate","boundingBox","_formatLock","_plotAsOutline","_optimizePaths","_line","_done","_tool","_outTool","_tools","_macros","_pos","_box","_mode","_arc","_region","_path","_epsilon","_lastOp","_stepRep","_finishPath","doNotOptimize","path","traverse","trace","_checkFormat","_updateBox","stepRepLen","repeatBox","a","shapeAndBox","pad","flashed","levelValue","offsets","find","collection","condition","findClosest","position","fillGaps","prev","d","distance","sqrt","pointsEqual","optimize","_edges","_optimize","_fillGaps","newSeg","edge","segment","_fillGapsAndOptimize","newSegs","seg","edges","startIndex","endIndex","otherPoints","newEdgeIndex","currentEdge","currentEnd","currentSegment","reversed","walked","discovered","lastEnd","center","radius","sweep","dir","reverse","reIsUint","baseFill","lower","upper","toLength","isIterateeCall","isLength","tag","isFunction","isArrayLike","isIndex","eq","roundToPrecision","rounded","rotatePointAboutOrigin","PI","sin","cos","circle","rotatedCenter","vect","hWidth","rect","hHeight","regularPolygon","nPoints","theta","step","ring","runMacro","emptyMacro","exposure","resolveValue","flatPoints","outlinePolygon","halfThx","gapAndHalfThx","horCross","verCross","moire","clip","thermal","macros","holeShape","toolShape","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","toStringTag","baseGetTag","isOwn","unmasked","getRawTag","HALF_PI","TWO_PI","THREE_HALF_PI","roundToZero","drawArc","pathGraph","validCenters","candidates","xCandidates","yCandidates","xAve","yAve","deltaX","deltaY","halfDistance","squareDifference","yOffset","arcCenterFromRadius","startDist","endDist","abs","cenAndAngles","centers","thetaStart","thetaEnd","candidate","atan2","findCenterAndAngles","startPoint","endPoint","mBox","arcBox","interpolate","strokableTool","arcableTool","startBox","endBox","drawLine","sXMin","sXMax","sYMin","sYMax","eXMin","eXMax","eYMin","eYMax","interpolateRect","flash","reduceShapeArray","flashPad","createPath","util","defs","viewBox","_maskId","_maskBox","_mask","_blockMode","_blockBox","_block","_blockCount","_blockLayerCount","_offsets","_clearCount","_lastLayer","_element","_draw","_handleNewPolarity","_handleNewRepeat","_handleSize","_finishBlockLayer","blockLayerId","_finishClearLayer","endOfBlock","wasClear","blockMode","blockLayers","blockIdStart","isDark","attr","every","rx","ry","poly","pointsAttr","shapeArray","maskIdPrefix","image","svg","clipNodes","shapes","maskUrl","circleNode","groupChildren","node","masks","nextMaskId","maskBox","maskChildren","layers","svgElement","lastCmd","half","reduceSegments","move","segments","extend","wtg","vb","boardColor","parseOptions","sortLayers","stackLayers","SIDES","SIDE_TOP","SIDE_BOTTOM","BASE_ATTRIBUTES","version","xmlns","getGroupAttributes","mechMaskId","outClipId","xTranslation","sorted","useOutline","stacks","drills","outline","stack","style","defsNode","layerNode","getLayerAttributes","sideAttributes","asString","colorNames","swizzle","reverseNames","cs","clamp","num","hexDouble","toUpperCase","hsl","hwb","rgb","hexAlpha","i2","parseFloat","isNaN","rgba","percent","g","b","hsla","hwba","keyword","isArrayish","input","acceptLayer","assignLayer","TYPE_DRILL","TYPE_OUTLINE","top","bottom","viewbox","gatherLayers","findLayerId","useLayer","className","class","createRect","classPrefix","idPrefix","layerProps","layerIds","drillIds","group","mechMask","cuLayerId","TYPE_COPPER","smLayerId","TYPE_SOLDERMASK","ssLayerId","TYPE_SILKSCREEN","spLayerId","TYPE_SOLDERPASTE","outLayerId","outlineId","cfMaskId","cfMaskGroup","smMaskId","smMaskGroup","smGroupAttr","smGroupShape","wrapLayer","getScale","layerUnits","unitsCount","in","mm","allLayers","drillCount","getUniqueId","externalId","layerBox","scale","wrapConverterLayer","runParallel","runWaterfall","gerberToSvg","createStackup","getLayerValidationError","validate","filename","valid","layerErrors","validateLayersInput","stackup","layerTypes","layerTasks","makeRenderLayerTask","stackupLayers","stackupLayer","layerSide","layerType","gerberId","layerOptions","outlineGapFill","makeBaseStackupLayer"],"mappings":"sEAIA,IAAIA,EAAQ,GAEZ,SAASC,EAAgBC,EAAMC,EAASC,GACjCA,IACHA,EAAOC,OAWT,IAAIC,EAEJ,SAAUC,GAnBZ,IAAwBC,EAAUC,EAsB9B,SAASH,EAAUI,EAAMC,EAAMC,GAC7B,OAAOL,EAAMM,KAAKC,KAdtB,SAAoBJ,EAAMC,EAAMC,GAC9B,MAAuB,iBAAZT,EACFA,EAEAA,EAAQO,EAAMC,EAAMC,GAUHG,CAAWL,EAAMC,EAAMC,KAAUE,KAG3D,OA1B8BL,EAoBJF,GApBNC,EAoBLF,GApBsCU,UAAYC,OAAOC,OAAOT,EAAWO,WAAYR,EAASQ,UAAUG,YAAcX,EAAUA,EAASY,UAAYX,EA0B/JH,EAPT,CAQEF,GAEFE,EAAUU,UAAUK,KAAOjB,EAAKiB,KAChCf,EAAUU,UAAUd,KAAOA,EAC3BF,EAAME,GAAQI,EAIhB,SAASgB,EAAMC,EAAUC,GACvB,GAAIC,MAAMC,QAAQH,GAAW,CAC3B,IAAII,EAAMJ,EAASK,OAKnB,OAJAL,EAAWA,EAASM,KAAI,SAAUC,GAChC,OAAOC,OAAOD,MAGZH,EAAM,EACD,UAAUK,OAAOR,EAAO,KAAKQ,OAAOT,EAASU,MAAM,EAAGN,EAAM,GAAGO,KAAK,MAAO,SAAWX,EAASI,EAAM,GAC3F,IAARA,EACF,UAAUK,OAAOR,EAAO,KAAKQ,OAAOT,EAAS,GAAI,QAAQS,OAAOT,EAAS,IAEzE,MAAMS,OAAOR,EAAO,KAAKQ,OAAOT,EAAS,IAGlD,MAAO,MAAMS,OAAOR,EAAO,KAAKQ,OAAOD,OAAOR,IA+BlDtB,EAAgB,yBAAyB,SAAUoB,EAAMc,GACvD,MAAO,cAAgBA,EAAQ,4BAA8Bd,EAAO,MACnEe,WACHnC,EAAgB,wBAAwB,SAAUoB,EAAME,EAAUc,GAEhE,IAAIC,EA/BmBC,EAAQC,EAwC3BC,EAEJ,GATwB,iBAAblB,IAjCYgB,EAiCkC,OAAVhB,EAhCpCmB,QAAQF,GAAOA,EAAM,EAAI,GAAKA,EAAKD,EAAOX,UAAYW,IAiC/DD,EAAa,cACbf,EAAWA,EAASoB,QAAQ,QAAS,KAErCL,EAAa,UAhCjB,SAAkBM,EAAKL,EAAQM,GAK7B,YAJiBC,IAAbD,GAA0BA,EAAWD,EAAIhB,UAC3CiB,EAAWD,EAAIhB,QAGVgB,EAAIG,UAAUF,EAAWN,EAAOX,OAAQiB,KAAcN,EAgCzDS,CAAS3B,EAAM,aAEjBoB,EAAM,OAAOT,OAAOX,EAAM,KAAKW,OAAOM,EAAY,KAAKN,OAAOV,EAAMC,EAAU,aACzE,CACL,IAAI0B,EAhCR,SAAkBL,EAAKL,EAAQW,GAK7B,MAJqB,iBAAVA,IACTA,EAAQ,KAGNA,EAAQX,EAAOX,OAASgB,EAAIhB,UAGS,IAAhCgB,EAAIO,QAAQZ,EAAQW,GAwBhBE,CAAS/B,EAAM,KAAO,WAAa,WAC9CoB,EAAM,QAAST,OAAOX,EAAM,MAAOW,OAAOiB,EAAM,KAAKjB,OAAOM,EAAY,KAAKN,OAAOV,EAAMC,EAAU,SAItG,OADAkB,GAAO,mBAAmBT,cAAcK,KAEvCD,WACHnC,EAAgB,4BAA6B,2BAC7CA,EAAgB,8BAA8B,SAAUoB,GACtD,MAAO,OAASA,EAAO,gCAEzBpB,EAAgB,6BAA8B,mBAC9CA,EAAgB,wBAAwB,SAAUoB,GAChD,MAAO,eAAiBA,EAAO,mCAEjCpB,EAAgB,wBAAyB,kCACzCA,EAAgB,yBAA0B,6BAC1CA,EAAgB,6BAA8B,mBAC9CA,EAAgB,yBAA0B,sCAAuCmC,WACjFnC,EAAgB,wBAAwB,SAAUoD,GAChD,MAAO,qBAAuBA,IAC7BjB,WACHnC,EAAgB,qCAAsC,oCACtDqD,EAAOC,QAAQvD,MAAQA,G,8BC9HvB,YA2BA,IAAIwD,EAAavC,OAAOwC,MAAQ,SAAUC,GACxC,IAAID,EAAO,GAEX,IAAK,IAAIE,KAAOD,EACdD,EAAKG,KAAKD,GAGZ,OAAOF,GAKTH,EAAOC,QAAUM,EAEjB,IAAIC,EAAW,EAAQ,KAEnBC,EAAW,EAAQ,KAEvB,EAAQ,GAAR,CAAoBF,EAAQC,GAM1B,IAFA,IAAIL,EAAOD,EAAWO,EAAS/C,WAEtBgD,EAAI,EAAGA,EAAIP,EAAK7B,OAAQoC,IAAK,CACpC,IAAIC,EAASR,EAAKO,GACbH,EAAO7C,UAAUiD,KAASJ,EAAO7C,UAAUiD,GAAUF,EAAS/C,UAAUiD,IAIjF,SAASJ,EAAOK,GACd,KAAMpD,gBAAgB+C,GAAS,OAAO,IAAIA,EAAOK,GACjDJ,EAASjD,KAAKC,KAAMoD,GACpBH,EAASlD,KAAKC,KAAMoD,GACpBpD,KAAKqD,eAAgB,EAEjBD,KACuB,IAArBA,EAAQE,WAAoBtD,KAAKsD,UAAW,IACvB,IAArBF,EAAQG,WAAoBvD,KAAKuD,UAAW,IAElB,IAA1BH,EAAQC,gBACVrD,KAAKqD,eAAgB,EACrBrD,KAAKwD,KAAK,MAAOC,KAiCvB,SAASA,IAEHzD,KAAK0D,eAAeC,OAGxBC,EAAQC,SAASC,EAAS9D,MAG5B,SAAS8D,EAAQC,GACfA,EAAKC,MArCP7D,OAAO8D,eAAelB,EAAO7C,UAAW,wBAAyB,CAI/DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,eAAeU,iBAG/BjE,OAAO8D,eAAelB,EAAO7C,UAAW,iBAAkB,CAIxDgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,gBAAkB1D,KAAK0D,eAAeW,eAGtDlE,OAAO8D,eAAelB,EAAO7C,UAAW,iBAAkB,CAIxDgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,eAAe5C,UAgB/BX,OAAO8D,eAAelB,EAAO7C,UAAW,YAAa,CAInDgE,YAAY,EACZC,IAAK,WACH,YAA4BnC,IAAxBhC,KAAKsE,qBAAwDtC,IAAxBhC,KAAK0D,iBAIvC1D,KAAKsE,eAAeC,WAAavE,KAAK0D,eAAea,YAE9DC,IAAK,SAAanD,QAGYW,IAAxBhC,KAAKsE,qBAAwDtC,IAAxBhC,KAAK0D,iBAM9C1D,KAAKsE,eAAeC,UAAYlD,EAChCrB,KAAK0D,eAAea,UAAYlD,Q,+CCpIpC,IAAInC,EAAQ,GAEZ,SAASC,EAAgBC,EAAMC,EAASC,GACjCA,IACHA,EAAOC,OAWT,IAAIC,EAEJ,SAAUC,GAnBZ,IAAwBC,EAAUC,EAsB9B,SAASH,EAAUI,EAAMC,EAAMC,GAC7B,OAAOL,EAAMM,KAAKC,KAdtB,SAAoBJ,EAAMC,EAAMC,GAC9B,MAAuB,iBAAZT,EACFA,EAEAA,EAAQO,EAAMC,EAAMC,GAUHG,CAAWL,EAAMC,EAAMC,KAAUE,KAG3D,OA1B8BL,EAoBJF,GApBNC,EAoBLF,GApBsCU,UAAYC,OAAOC,OAAOT,EAAWO,WAAYR,EAASQ,UAAUG,YAAcX,EAAUA,EAASY,UAAYX,EA0B/JH,EAPT,CAQEF,GAEFE,EAAUU,UAAUK,KAAOjB,EAAKiB,KAChCf,EAAUU,UAAUd,KAAOA,EAC3BF,EAAME,GAAQI,EAIhB,SAASgB,EAAMC,EAAUC,GACvB,GAAIC,MAAMC,QAAQH,GAAW,CAC3B,IAAII,EAAMJ,EAASK,OAKnB,OAJAL,EAAWA,EAASM,KAAI,SAAUC,GAChC,OAAOC,OAAOD,MAGZH,EAAM,EACD,UAAUK,OAAOR,EAAO,KAAKQ,OAAOT,EAASU,MAAM,EAAGN,EAAM,GAAGO,KAAK,MAAO,SAAWX,EAASI,EAAM,GAC3F,IAARA,EACF,UAAUK,OAAOR,EAAO,KAAKQ,OAAOT,EAAS,GAAI,QAAQS,OAAOT,EAAS,IAEzE,MAAMS,OAAOR,EAAO,KAAKQ,OAAOT,EAAS,IAGlD,MAAO,MAAMS,OAAOR,EAAO,KAAKQ,OAAOD,OAAOR,IA+BlDtB,EAAgB,yBAAyB,SAAUoB,EAAMc,GACvD,MAAO,cAAgBA,EAAQ,4BAA8Bd,EAAO,MACnEe,WACHnC,EAAgB,wBAAwB,SAAUoB,EAAME,EAAUc,GAEhE,IAAIC,EA/BmBC,EAAQC,EAwC3BC,EAEJ,GATwB,iBAAblB,IAjCYgB,EAiCkC,OAAVhB,EAhCpCmB,QAAQF,GAAOA,EAAM,EAAI,GAAKA,EAAKD,EAAOX,UAAYW,IAiC/DD,EAAa,cACbf,EAAWA,EAASoB,QAAQ,QAAS,KAErCL,EAAa,UAhCjB,SAAkBM,EAAKL,EAAQM,GAK7B,YAJiBC,IAAbD,GAA0BA,EAAWD,EAAIhB,UAC3CiB,EAAWD,EAAIhB,QAGVgB,EAAIG,UAAUF,EAAWN,EAAOX,OAAQiB,KAAcN,EAgCzDS,CAAS3B,EAAM,aAEjBoB,EAAM,OAAOT,OAAOX,EAAM,KAAKW,OAAOM,EAAY,KAAKN,OAAOV,EAAMC,EAAU,aACzE,CACL,IAAI0B,EAhCR,SAAkBL,EAAKL,EAAQW,GAK7B,MAJqB,iBAAVA,IACTA,EAAQ,KAGNA,EAAQX,EAAOX,OAASgB,EAAIhB,UAGS,IAAhCgB,EAAIO,QAAQZ,EAAQW,GAwBhBE,CAAS/B,EAAM,KAAO,WAAa,WAC9CoB,EAAM,QAAST,OAAOX,EAAM,MAAOW,OAAOiB,EAAM,KAAKjB,OAAOM,EAAY,KAAKN,OAAOV,EAAMC,EAAU,SAItG,OADAkB,GAAO,mBAAmBT,cAAcK,KAEvCD,WACHnC,EAAgB,4BAA6B,2BAC7CA,EAAgB,8BAA8B,SAAUoB,GACtD,MAAO,OAASA,EAAO,gCAEzBpB,EAAgB,6BAA8B,mBAC9CA,EAAgB,wBAAwB,SAAUoB,GAChD,MAAO,eAAiBA,EAAO,mCAEjCpB,EAAgB,wBAAyB,kCACzCA,EAAgB,yBAA0B,6BAC1CA,EAAgB,6BAA8B,mBAC9CA,EAAgB,yBAA0B,sCAAuCmC,WACjFnC,EAAgB,wBAAwB,SAAUoD,GAChD,MAAO,qBAAuBA,IAC7BjB,WACHnC,EAAgB,qCAAsC,oCACtDqD,EAAOC,QAAQvD,MAAQA,G,8BC9HvB,YA2BA,IAAIwD,EAAavC,OAAOwC,MAAQ,SAAUC,GACxC,IAAID,EAAO,GAEX,IAAK,IAAIE,KAAOD,EACdD,EAAKG,KAAKD,GAGZ,OAAOF,GAKTH,EAAOC,QAAUM,EAEjB,IAAIC,EAAW,EAAQ,KAEnBC,EAAW,EAAQ,KAEvB,EAAQ,GAAR,CAAoBF,EAAQC,GAM1B,IAFA,IAAIL,EAAOD,EAAWO,EAAS/C,WAEtBgD,EAAI,EAAGA,EAAIP,EAAK7B,OAAQoC,IAAK,CACpC,IAAIC,EAASR,EAAKO,GACbH,EAAO7C,UAAUiD,KAASJ,EAAO7C,UAAUiD,GAAUF,EAAS/C,UAAUiD,IAIjF,SAASJ,EAAOK,GACd,KAAMpD,gBAAgB+C,GAAS,OAAO,IAAIA,EAAOK,GACjDJ,EAASjD,KAAKC,KAAMoD,GACpBH,EAASlD,KAAKC,KAAMoD,GACpBpD,KAAKqD,eAAgB,EAEjBD,KACuB,IAArBA,EAAQE,WAAoBtD,KAAKsD,UAAW,IACvB,IAArBF,EAAQG,WAAoBvD,KAAKuD,UAAW,IAElB,IAA1BH,EAAQC,gBACVrD,KAAKqD,eAAgB,EACrBrD,KAAKwD,KAAK,MAAOC,KAiCvB,SAASA,IAEHzD,KAAK0D,eAAeC,OAGxBC,EAAQC,SAASC,EAAS9D,MAG5B,SAAS8D,EAAQC,GACfA,EAAKC,MArCP7D,OAAO8D,eAAelB,EAAO7C,UAAW,wBAAyB,CAI/DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,eAAeU,iBAG/BjE,OAAO8D,eAAelB,EAAO7C,UAAW,iBAAkB,CAIxDgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,gBAAkB1D,KAAK0D,eAAeW,eAGtDlE,OAAO8D,eAAelB,EAAO7C,UAAW,iBAAkB,CAIxDgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,eAAe5C,UAgB/BX,OAAO8D,eAAelB,EAAO7C,UAAW,YAAa,CAInDgE,YAAY,EACZC,IAAK,WACH,YAA4BnC,IAAxBhC,KAAKsE,qBAAwDtC,IAAxBhC,KAAK0D,iBAIvC1D,KAAKsE,eAAeC,WAAavE,KAAK0D,eAAea,YAE9DC,IAAK,SAAanD,QAGYW,IAAxBhC,KAAKsE,qBAAwDtC,IAAxBhC,KAAK0D,iBAM9C1D,KAAKsE,eAAeC,UAAYlD,EAChCrB,KAAK0D,eAAea,UAAYlD,Q,+CCpIpC,IAAInC,EAAQ,GAEZ,SAASC,EAAgBC,EAAMC,EAASC,GACjCA,IACHA,EAAOC,OAWT,IAAIC,EAEJ,SAAUC,GAnBZ,IAAwBC,EAAUC,EAsB9B,SAASH,EAAUI,EAAMC,EAAMC,GAC7B,OAAOL,EAAMM,KAAKC,KAdtB,SAAoBJ,EAAMC,EAAMC,GAC9B,MAAuB,iBAAZT,EACFA,EAEAA,EAAQO,EAAMC,EAAMC,GAUHG,CAAWL,EAAMC,EAAMC,KAAUE,KAG3D,OA1B8BL,EAoBJF,GApBNC,EAoBLF,GApBsCU,UAAYC,OAAOC,OAAOT,EAAWO,WAAYR,EAASQ,UAAUG,YAAcX,EAAUA,EAASY,UAAYX,EA0B/JH,EAPT,CAQEF,GAEFE,EAAUU,UAAUK,KAAOjB,EAAKiB,KAChCf,EAAUU,UAAUd,KAAOA,EAC3BF,EAAME,GAAQI,EAIhB,SAASgB,EAAMC,EAAUC,GACvB,GAAIC,MAAMC,QAAQH,GAAW,CAC3B,IAAII,EAAMJ,EAASK,OAKnB,OAJAL,EAAWA,EAASM,KAAI,SAAUC,GAChC,OAAOC,OAAOD,MAGZH,EAAM,EACD,UAAUK,OAAOR,EAAO,KAAKQ,OAAOT,EAASU,MAAM,EAAGN,EAAM,GAAGO,KAAK,MAAO,SAAWX,EAASI,EAAM,GAC3F,IAARA,EACF,UAAUK,OAAOR,EAAO,KAAKQ,OAAOT,EAAS,GAAI,QAAQS,OAAOT,EAAS,IAEzE,MAAMS,OAAOR,EAAO,KAAKQ,OAAOT,EAAS,IAGlD,MAAO,MAAMS,OAAOR,EAAO,KAAKQ,OAAOD,OAAOR,IA+BlDtB,EAAgB,yBAAyB,SAAUoB,EAAMc,GACvD,MAAO,cAAgBA,EAAQ,4BAA8Bd,EAAO,MACnEe,WACHnC,EAAgB,wBAAwB,SAAUoB,EAAME,EAAUc,GAEhE,IAAIC,EA/BmBC,EAAQC,EAwC3BC,EAEJ,GATwB,iBAAblB,IAjCYgB,EAiCkC,OAAVhB,EAhCpCmB,QAAQF,GAAOA,EAAM,EAAI,GAAKA,EAAKD,EAAOX,UAAYW,IAiC/DD,EAAa,cACbf,EAAWA,EAASoB,QAAQ,QAAS,KAErCL,EAAa,UAhCjB,SAAkBM,EAAKL,EAAQM,GAK7B,YAJiBC,IAAbD,GAA0BA,EAAWD,EAAIhB,UAC3CiB,EAAWD,EAAIhB,QAGVgB,EAAIG,UAAUF,EAAWN,EAAOX,OAAQiB,KAAcN,EAgCzDS,CAAS3B,EAAM,aAEjBoB,EAAM,OAAOT,OAAOX,EAAM,KAAKW,OAAOM,EAAY,KAAKN,OAAOV,EAAMC,EAAU,aACzE,CACL,IAAI0B,EAhCR,SAAkBL,EAAKL,EAAQW,GAK7B,MAJqB,iBAAVA,IACTA,EAAQ,KAGNA,EAAQX,EAAOX,OAASgB,EAAIhB,UAGS,IAAhCgB,EAAIO,QAAQZ,EAAQW,GAwBhBE,CAAS/B,EAAM,KAAO,WAAa,WAC9CoB,EAAM,QAAST,OAAOX,EAAM,MAAOW,OAAOiB,EAAM,KAAKjB,OAAOM,EAAY,KAAKN,OAAOV,EAAMC,EAAU,SAItG,OADAkB,GAAO,mBAAmBT,cAAcK,KAEvCD,WACHnC,EAAgB,4BAA6B,2BAC7CA,EAAgB,8BAA8B,SAAUoB,GACtD,MAAO,OAASA,EAAO,gCAEzBpB,EAAgB,6BAA8B,mBAC9CA,EAAgB,wBAAwB,SAAUoB,GAChD,MAAO,eAAiBA,EAAO,mCAEjCpB,EAAgB,wBAAyB,kCACzCA,EAAgB,yBAA0B,6BAC1CA,EAAgB,6BAA8B,mBAC9CA,EAAgB,yBAA0B,sCAAuCmC,WACjFnC,EAAgB,wBAAwB,SAAUoD,GAChD,MAAO,qBAAuBA,IAC7BjB,WACHnC,EAAgB,qCAAsC,oCACtDqD,EAAOC,QAAQvD,MAAQA,G,8BC9HvB,YA2BA,IAAIwD,EAAavC,OAAOwC,MAAQ,SAAUC,GACxC,IAAID,EAAO,GAEX,IAAK,IAAIE,KAAOD,EACdD,EAAKG,KAAKD,GAGZ,OAAOF,GAKTH,EAAOC,QAAUM,EAEjB,IAAIC,EAAW,EAAQ,KAEnBC,EAAW,EAAQ,KAEvB,EAAQ,GAAR,CAAoBF,EAAQC,GAM1B,IAFA,IAAIL,EAAOD,EAAWO,EAAS/C,WAEtBgD,EAAI,EAAGA,EAAIP,EAAK7B,OAAQoC,IAAK,CACpC,IAAIC,EAASR,EAAKO,GACbH,EAAO7C,UAAUiD,KAASJ,EAAO7C,UAAUiD,GAAUF,EAAS/C,UAAUiD,IAIjF,SAASJ,EAAOK,GACd,KAAMpD,gBAAgB+C,GAAS,OAAO,IAAIA,EAAOK,GACjDJ,EAASjD,KAAKC,KAAMoD,GACpBH,EAASlD,KAAKC,KAAMoD,GACpBpD,KAAKqD,eAAgB,EAEjBD,KACuB,IAArBA,EAAQE,WAAoBtD,KAAKsD,UAAW,IACvB,IAArBF,EAAQG,WAAoBvD,KAAKuD,UAAW,IAElB,IAA1BH,EAAQC,gBACVrD,KAAKqD,eAAgB,EACrBrD,KAAKwD,KAAK,MAAOC,KAiCvB,SAASA,IAEHzD,KAAK0D,eAAeC,OAGxBC,EAAQC,SAASC,EAAS9D,MAG5B,SAAS8D,EAAQC,GACfA,EAAKC,MArCP7D,OAAO8D,eAAelB,EAAO7C,UAAW,wBAAyB,CAI/DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,eAAeU,iBAG/BjE,OAAO8D,eAAelB,EAAO7C,UAAW,iBAAkB,CAIxDgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,gBAAkB1D,KAAK0D,eAAeW,eAGtDlE,OAAO8D,eAAelB,EAAO7C,UAAW,iBAAkB,CAIxDgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,eAAe5C,UAgB/BX,OAAO8D,eAAelB,EAAO7C,UAAW,YAAa,CAInDgE,YAAY,EACZC,IAAK,WACH,YAA4BnC,IAAxBhC,KAAKsE,qBAAwDtC,IAAxBhC,KAAK0D,iBAIvC1D,KAAKsE,eAAeC,WAAavE,KAAK0D,eAAea,YAE9DC,IAAK,SAAanD,QAGYW,IAAxBhC,KAAKsE,qBAAwDtC,IAAxBhC,KAAK0D,iBAM9C1D,KAAKsE,eAAeC,UAAYlD,EAChCrB,KAAK0D,eAAea,UAAYlD,Q,oCCxIpC,YAUA,IAAIoD,EAA8B,iBAAVC,GAAsBA,GAAUA,EAAOvE,SAAWA,QAAUuE,EAGhFC,EAA0B,iBAARZ,MAAoBA,MAAQA,KAAK5D,SAAWA,QAAU4D,KAMxEa,GAHOH,GAAcE,GAAYE,SAAS,cAATA,IAGXC,SAiC1BtC,EAAOC,QAJP,SAAkBpB,GAChB,MAAuB,iBAATA,GAAqBuD,EAAevD,M,gDC5CpD,IAAI0D,EAAQ,SAASC,GACnB,OAAOC,KAAKC,MAAM,KAAcF,GAAU,KAGxCG,EAAe,SAASC,EAAKC,EAAMC,GACrC,OAAOA,EAAQ,OAAQ,CACrBC,EAAGR,EAAMK,EAAI,IACbI,EAAGT,EAAMK,EAAI,IACbK,MAAOV,EAAMK,EAAI,GAAKA,EAAI,IAC1BM,OAAQX,EAAMK,EAAI,GAAKA,EAAI,IAC3BC,KAAMA,KAiBV7C,EAAOC,QAAU,CACfsC,MAAOA,EACPY,UAfc,SAASC,EAAQC,EAAOP,GAGtC,OAAOA,EAAQ,IAAK,CAACQ,KAFP,QAAUF,EAAS,KAEIC,IAarCE,WAVe,SAASH,EAAQR,EAAKY,EAAUV,GAI/C,OAAOA,EAAQ,OAFE,CAACW,GAAIL,EAAQP,KAAM,OAAQa,OAAQ,QAEjB,CAACZ,EAAQ,IAAK,GAHjDU,EAAW,CAACb,EAAaC,EAAK,OAAQE,IAAUpE,OAAO8E,S,8BCtBzD,IAAIG,EAA6B,EAAQ,KAAmBjH,MAAMiH,2BAgBlE,SAASC,KAmFT5D,EAAOC,QA7EP,SAAS4D,EAAIC,EAAQC,EAAMC,GACzB,GAAoB,mBAATD,EAAqB,OAAOF,EAAIC,EAAQ,KAAMC,GACpDA,IAAMA,EAAO,IAClBC,EAvBF,SAAcA,GACZ,IAAIC,GAAS,EACb,OAAO,WACL,IAAIA,EAAJ,CACAA,GAAS,EAET,IAAK,IAAIC,EAAOC,UAAU7F,OAAQ8F,EAAO,IAAIjG,MAAM+F,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAC/ED,EAAKC,GAAQF,UAAUE,GAGzBL,EAASM,MAAM9G,KAAM4G,KAaZpD,CAAKgD,GAAYJ,GAC5B,IAAI9C,EAAWiD,EAAKjD,WAA8B,IAAlBiD,EAAKjD,UAAsBgD,EAAOhD,SAC9DC,EAAWgD,EAAKhD,WAA8B,IAAlBgD,EAAKhD,UAAsB+C,EAAO/C,SAE9DwD,EAAiB,WACdT,EAAO/C,UAAUyD,KAGpBC,EAAgBX,EAAO5C,gBAAkB4C,EAAO5C,eAAewD,SAE/DF,EAAW,WACbzD,GAAW,EACX0D,GAAgB,EACX3D,GAAUkD,EAASzG,KAAKuG,IAG3Ba,EAAgBb,EAAOhC,gBAAkBgC,EAAOhC,eAAe8C,WAE/D3D,EAAQ,WACVH,GAAW,EACX6D,GAAgB,EACX5D,GAAUiD,EAASzG,KAAKuG,IAG3Be,EAAU,SAAiBC,GAC7Bd,EAASzG,KAAKuG,EAAQgB,IAGpBC,EAAU,WACZ,IAAID,EAEJ,OAAIhE,IAAa6D,GACVb,EAAOhC,gBAAmBgC,EAAOhC,eAAeX,QAAO2D,EAAM,IAAInB,GAC/DK,EAASzG,KAAKuG,EAAQgB,IAG3B/D,IAAa0D,GACVX,EAAO5C,gBAAmB4C,EAAO5C,eAAeC,QAAO2D,EAAM,IAAInB,GAC/DK,EAASzG,KAAKuG,EAAQgB,SAF/B,GAMEE,EAAY,WACdlB,EAAOmB,IAAIC,GAAG,SAAUV,IAiB1B,OAnEF,SAAmBV,GACjB,OAAOA,EAAOqB,WAAqC,mBAAjBrB,EAAOsB,MAoDrCC,CAAUvB,GAIH/C,IAAa+C,EAAO5C,iBAE7B4C,EAAOoB,GAAG,MAAOX,GACjBT,EAAOoB,GAAG,QAASX,KANnBT,EAAOoB,GAAG,WAAYV,GACtBV,EAAOoB,GAAG,QAASH,GACfjB,EAAOmB,IAAKD,IAAiBlB,EAAOoB,GAAG,UAAWF,IAOxDlB,EAAOoB,GAAG,MAAOjE,GACjB6C,EAAOoB,GAAG,SAAUV,IACD,IAAfT,EAAKuB,OAAiBxB,EAAOoB,GAAG,QAASL,GAC7Cf,EAAOoB,GAAG,QAASH,GACZ,WACLjB,EAAOyB,eAAe,WAAYf,GAClCV,EAAOyB,eAAe,QAASR,GAC/BjB,EAAOyB,eAAe,UAAWP,GAC7BlB,EAAOmB,KAAKnB,EAAOmB,IAAIM,eAAe,SAAUf,GACpDV,EAAOyB,eAAe,MAAOhB,GAC7BT,EAAOyB,eAAe,QAAShB,GAC/BT,EAAOyB,eAAe,SAAUf,GAChCV,EAAOyB,eAAe,MAAOtE,GAC7B6C,EAAOyB,eAAe,QAASV,GAC/Bf,EAAOyB,eAAe,QAASR,M,6BC/FnC,IAAIS,EAAc,EAAQ,KACtBC,EAAU,EAAQ,KAClBC,EAAW,EAAQ,KAoDvB1F,EAAOC,QAjDc,SAASuC,EAAQmD,GAEpC,GAAc,MAAVnD,EACF,OAAOoD,IAGT,IAAIC,EAAe,GAAKrD,EAGpBsD,EAAO,IASX,GARwB,MAApBD,EAAa,IAAkC,MAApBA,EAAa,KAC1CC,EAAOD,EAAa,GACpBA,EAAeA,EAAalH,MAAM,KAKY,IAA/BkH,EAAahG,QAAQ,MACV,MAAV8F,GAAiC,MAAfA,EAAOI,KACzC,OAAOC,OAAOF,EAAOD,GAIrB,GAAqB,MAAjBF,EAAOM,QAA2C,IAAzBN,EAAOM,OAAO3H,OACzC,OAAOsH,IAGT,IAAIM,EAAUP,EAAOM,OAAO,GACxBE,EAAWR,EAAOM,OAAO,GAC7B,IAAKT,EAAYU,KAAaV,EAAYW,GACxC,OAAOP,IAIT,GAAoB,MAAhBD,EAAOI,KACTF,EAAeH,EAASG,EAAcK,EAAUC,EAAU,SACrD,IAAoB,MAAhBR,EAAOI,KAGhB,OAAOH,IAFPC,EAAeJ,EAAQI,EAAcK,EAAUC,EAAU,KAO7D,IAAIC,EAASP,EAAalH,MAAM,EAAGuH,GAC/BG,EAAQR,EAAalH,MAAMuH,EAASA,EAAUC,GAClD,OAAOH,OAAOF,EAAOM,EAAS,IAAMC,K,6BCnDtC,IAAI1C,EAA6B,EAAQ,KAAmBjH,MAAMiH,2BAgBlE,SAASC,KAmFT5D,EAAOC,QA7EP,SAAS4D,EAAIC,EAAQC,EAAMC,GACzB,GAAoB,mBAATD,EAAqB,OAAOF,EAAIC,EAAQ,KAAMC,GACpDA,IAAMA,EAAO,IAClBC,EAvBF,SAAcA,GACZ,IAAIC,GAAS,EACb,OAAO,WACL,IAAIA,EAAJ,CACAA,GAAS,EAET,IAAK,IAAIC,EAAOC,UAAU7F,OAAQ8F,EAAO,IAAIjG,MAAM+F,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAC/ED,EAAKC,GAAQF,UAAUE,GAGzBL,EAASM,MAAM9G,KAAM4G,KAaZpD,CAAKgD,GAAYJ,GAC5B,IAAI9C,EAAWiD,EAAKjD,WAA8B,IAAlBiD,EAAKjD,UAAsBgD,EAAOhD,SAC9DC,EAAWgD,EAAKhD,WAA8B,IAAlBgD,EAAKhD,UAAsB+C,EAAO/C,SAE9DwD,EAAiB,WACdT,EAAO/C,UAAUyD,KAGpBC,EAAgBX,EAAO5C,gBAAkB4C,EAAO5C,eAAewD,SAE/DF,EAAW,WACbzD,GAAW,EACX0D,GAAgB,EACX3D,GAAUkD,EAASzG,KAAKuG,IAG3Ba,EAAgBb,EAAOhC,gBAAkBgC,EAAOhC,eAAe8C,WAE/D3D,EAAQ,WACVH,GAAW,EACX6D,GAAgB,EACX5D,GAAUiD,EAASzG,KAAKuG,IAG3Be,EAAU,SAAiBC,GAC7Bd,EAASzG,KAAKuG,EAAQgB,IAGpBC,EAAU,WACZ,IAAID,EAEJ,OAAIhE,IAAa6D,GACVb,EAAOhC,gBAAmBgC,EAAOhC,eAAeX,QAAO2D,EAAM,IAAInB,GAC/DK,EAASzG,KAAKuG,EAAQgB,IAG3B/D,IAAa0D,GACVX,EAAO5C,gBAAmB4C,EAAO5C,eAAeC,QAAO2D,EAAM,IAAInB,GAC/DK,EAASzG,KAAKuG,EAAQgB,SAF/B,GAMEE,EAAY,WACdlB,EAAOmB,IAAIC,GAAG,SAAUV,IAiB1B,OAnEF,SAAmBV,GACjB,OAAOA,EAAOqB,WAAqC,mBAAjBrB,EAAOsB,MAoDrCC,CAAUvB,GAIH/C,IAAa+C,EAAO5C,iBAE7B4C,EAAOoB,GAAG,MAAOX,GACjBT,EAAOoB,GAAG,QAASX,KANnBT,EAAOoB,GAAG,WAAYV,GACtBV,EAAOoB,GAAG,QAASH,GACfjB,EAAOmB,IAAKD,IAAiBlB,EAAOoB,GAAG,UAAWF,IAOxDlB,EAAOoB,GAAG,MAAOjE,GACjB6C,EAAOoB,GAAG,SAAUV,IACD,IAAfT,EAAKuB,OAAiBxB,EAAOoB,GAAG,QAASL,GAC7Cf,EAAOoB,GAAG,QAASH,GACZ,WACLjB,EAAOyB,eAAe,WAAYf,GAClCV,EAAOyB,eAAe,QAASR,GAC/BjB,EAAOyB,eAAe,UAAWP,GAC7BlB,EAAOmB,KAAKnB,EAAOmB,IAAIM,eAAe,SAAUf,GACpDV,EAAOyB,eAAe,MAAOhB,GAC7BT,EAAOyB,eAAe,QAAShB,GAC/BT,EAAOyB,eAAe,SAAUf,GAChCV,EAAOyB,eAAe,MAAOtE,GAC7B6C,EAAOyB,eAAe,QAASV,GAC/Bf,EAAOyB,eAAe,QAASR,M,6BC9FnC,IAKIuB,EAAM,SAAS1D,EAAK2D,GACtB,MAAO,CACL9D,KAAK+D,IAAI5D,EAAI,GAAI2D,EAAO,IACxB9D,KAAK+D,IAAI5D,EAAI,GAAI2D,EAAO,IACxB9D,KAAKgE,IAAI7D,EAAI,GAAI2D,EAAO,IACxB9D,KAAKgE,IAAI7D,EAAI,GAAI2D,EAAO,MAyBxBG,EAAY,SAAS9D,EAAK+D,GAC5B,IAAIC,EAAKD,EAAM,GACXE,EAAKF,EAAM,GAEf,MAAO,CAAC/D,EAAI,GAAKgE,EAAIhE,EAAI,GAAKiE,EAAIjE,EAAI,GAAKgE,EAAIhE,EAAI,GAAKiE,IAQ1D7G,EAAOC,QAAU,CACf6G,IAhDW,WACX,MAAO,CAACC,IAAUA,KAAWA,KAAWA,MAgDxCT,IAAKA,EACLU,SAnCa,SAASpE,EAAKqE,GAC3B,MAAO,CACLxE,KAAK+D,IAAI5D,EAAI,GAAIqE,EAAM,IACvBxE,KAAK+D,IAAI5D,EAAI,GAAIqE,EAAM,IACvBxE,KAAKgE,IAAI7D,EAAI,GAAIqE,EAAM,IACvBxE,KAAKgE,IAAI7D,EAAI,GAAIqE,EAAM,MA+BzBC,UA1Bc,SAAStE,EAAKuE,EAAGC,EAAIC,GACnC,MAAO,CACL5E,KAAK+D,IAAI5D,EAAI,GAAIwE,EAAKD,GACtB1E,KAAK+D,IAAI5D,EAAI,GAAIyE,EAAKF,GACtB1E,KAAKgE,IAAI7D,EAAI,GAAIwE,EAAKD,GACtB1E,KAAKgE,IAAI7D,EAAI,GAAIyE,EAAKF,KAsBxBT,UAAWA,EACXY,OAVW,SAAS1E,EAAK0E,GACzB,OAAOhB,EAAI1D,EAAK8D,EAAU9D,EAAK0E,O,6BC7CjC,IAAI3D,EAA6B,EAAQ,KAAmBjH,MAAMiH,2BAgBlE,SAASC,KAmFT5D,EAAOC,QA7EP,SAAS4D,EAAIC,EAAQC,EAAMC,GACzB,GAAoB,mBAATD,EAAqB,OAAOF,EAAIC,EAAQ,KAAMC,GACpDA,IAAMA,EAAO,IAClBC,EAvBF,SAAcA,GACZ,IAAIC,GAAS,EACb,OAAO,WACL,IAAIA,EAAJ,CACAA,GAAS,EAET,IAAK,IAAIC,EAAOC,UAAU7F,OAAQ8F,EAAO,IAAIjG,MAAM+F,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAC/ED,EAAKC,GAAQF,UAAUE,GAGzBL,EAASM,MAAM9G,KAAM4G,KAaZpD,CAAKgD,GAAYJ,GAC5B,IAAI9C,EAAWiD,EAAKjD,WAA8B,IAAlBiD,EAAKjD,UAAsBgD,EAAOhD,SAC9DC,EAAWgD,EAAKhD,WAA8B,IAAlBgD,EAAKhD,UAAsB+C,EAAO/C,SAE9DwD,EAAiB,WACdT,EAAO/C,UAAUyD,KAGpBC,EAAgBX,EAAO5C,gBAAkB4C,EAAO5C,eAAewD,SAE/DF,EAAW,WACbzD,GAAW,EACX0D,GAAgB,EACX3D,GAAUkD,EAASzG,KAAKuG,IAG3Ba,EAAgBb,EAAOhC,gBAAkBgC,EAAOhC,eAAe8C,WAE/D3D,EAAQ,WACVH,GAAW,EACX6D,GAAgB,EACX5D,GAAUiD,EAASzG,KAAKuG,IAG3Be,EAAU,SAAiBC,GAC7Bd,EAASzG,KAAKuG,EAAQgB,IAGpBC,EAAU,WACZ,IAAID,EAEJ,OAAIhE,IAAa6D,GACVb,EAAOhC,gBAAmBgC,EAAOhC,eAAeX,QAAO2D,EAAM,IAAInB,GAC/DK,EAASzG,KAAKuG,EAAQgB,IAG3B/D,IAAa0D,GACVX,EAAO5C,gBAAmB4C,EAAO5C,eAAeC,QAAO2D,EAAM,IAAInB,GAC/DK,EAASzG,KAAKuG,EAAQgB,SAF/B,GAMEE,EAAY,WACdlB,EAAOmB,IAAIC,GAAG,SAAUV,IAiB1B,OAnEF,SAAmBV,GACjB,OAAOA,EAAOqB,WAAqC,mBAAjBrB,EAAOsB,MAoDrCC,CAAUvB,GAIH/C,IAAa+C,EAAO5C,iBAE7B4C,EAAOoB,GAAG,MAAOX,GACjBT,EAAOoB,GAAG,QAASX,KANnBT,EAAOoB,GAAG,WAAYV,GACtBV,EAAOoB,GAAG,QAASH,GACfjB,EAAOmB,IAAKD,IAAiBlB,EAAOoB,GAAG,UAAWF,IAOxDlB,EAAOoB,GAAG,MAAOjE,GACjB6C,EAAOoB,GAAG,SAAUV,IACD,IAAfT,EAAKuB,OAAiBxB,EAAOoB,GAAG,QAASL,GAC7Cf,EAAOoB,GAAG,QAASH,GACZ,WACLjB,EAAOyB,eAAe,WAAYf,GAClCV,EAAOyB,eAAe,QAASR,GAC/BjB,EAAOyB,eAAe,UAAWP,GAC7BlB,EAAOmB,KAAKnB,EAAOmB,IAAIM,eAAe,SAAUf,GACpDV,EAAOyB,eAAe,MAAOhB,GAC7BT,EAAOyB,eAAe,QAAShB,GAC/BT,EAAOyB,eAAe,SAAUf,GAChCV,EAAOyB,eAAe,MAAOtE,GAC7B6C,EAAOyB,eAAe,QAASV,GAC/Bf,EAAOyB,eAAe,QAASR,M,iCCnGnC,cAyBA,IAAIxE,EAHJP,EAAOC,QAAUO,EAMjBA,EAAS+G,cAAgBA,EAGhB,EAAQ,IAAUC,aAA3B,IAEIC,EAAkB,SAAyBC,EAAS/H,GACtD,OAAO+H,EAAQC,UAAUhI,GAAMrB,QAO7BsJ,EAAS,EAAQ,KAIjBC,EAAS,EAAQ,IAAUA,OAE3BC,EAAgB5F,EAAO6F,YAAc,aAYzC,IAEIC,EAFAC,EAAY,EAAQ,KAKtBD,EADEC,GAAaA,EAAUC,SACjBD,EAAUC,SAAS,UAEnB,aAKV,IAiBIC,EACAC,EAlBAC,EAAa,EAAQ,KAErBC,EAAc,EAAQ,KAGtBC,EADW,EAAQ,KACSA,iBAE5BC,EAAiB,EAAQ,KAAa9L,MACtC+L,EAAuBD,EAAeC,qBACtCC,EAA4BF,EAAeE,0BAC3CC,EAA6BH,EAAeG,2BAC5CC,EAAqCJ,EAAeI,mCAGpDC,EADY,EAAQ,KACgBA,wBAMxC,EAAQ,GAAR,CAAoBrI,EAAUoH,GAE9B,IAAIkB,EAAe,CAAC,QAAS,QAAS,UAAW,QAAS,UAa1D,SAASvB,EAAc3G,EAASkD,EAAQiF,GACtCxI,EAASA,GAAU,EAAQ,KAC3BK,EAAUA,GAAW,GAMG,kBAAbmI,IAAwBA,EAAWjF,aAAkBvD,GAGhE/C,KAAKwL,aAAepI,EAAQoI,WACxBD,IAAUvL,KAAKwL,WAAaxL,KAAKwL,cAAgBpI,EAAQqI,oBAG7DzL,KAAKoE,cAAgB2G,EAAiB/K,KAAMoD,EAAS,wBAAyBmI,GAI9EvL,KAAK0L,OAAS,IAAIb,EAClB7K,KAAKc,OAAS,EACdd,KAAK2L,MAAQ,KACb3L,KAAK4L,WAAa,EAClB5L,KAAK6L,QAAU,KACf7L,KAAK2D,OAAQ,EACb3D,KAAKoH,YAAa,EAClBpH,KAAK8L,SAAU,EAKf9L,KAAK+L,MAAO,EAGZ/L,KAAKgM,cAAe,EACpBhM,KAAKiM,iBAAkB,EACvBjM,KAAKkM,mBAAoB,EACzBlM,KAAKmM,iBAAkB,EACvBnM,KAAKoM,QAAS,EAEdpM,KAAKqM,WAAkC,IAAtBjJ,EAAQiJ,UAEzBrM,KAAKuE,WAAY,EAIjBvE,KAAKsM,gBAAkBlJ,EAAQkJ,iBAAmB,OAElDtM,KAAKuM,WAAa,EAElBvM,KAAKwM,aAAc,EACnBxM,KAAKyM,QAAU,KACfzM,KAAK0M,SAAW,KAEZtJ,EAAQsJ,WACL/B,IAAeA,EAAgB,EAAQ,IAAmBA,eAC/D3K,KAAKyM,QAAU,IAAI9B,EAAcvH,EAAQsJ,UACzC1M,KAAK0M,SAAWtJ,EAAQsJ,UAI5B,SAAS1J,EAASI,GAEhB,GADAL,EAASA,GAAU,EAAQ,OACrB/C,gBAAgBgD,GAAW,OAAO,IAAIA,EAASI,GAGrD,IAAImI,EAAWvL,gBAAgB+C,EAC/B/C,KAAKsE,eAAiB,IAAIyF,EAAc3G,EAASpD,KAAMuL,GAEvDvL,KAAKsD,UAAW,EAEZF,IAC0B,mBAAjBA,EAAQuJ,OAAqB3M,KAAK4M,MAAQxJ,EAAQuJ,MAC9B,mBAApBvJ,EAAQyJ,UAAwB7M,KAAK8M,SAAW1J,EAAQyJ,UAGrEzC,EAAOrK,KAAKC,MAiEd,SAAS+M,EAAiBzG,EAAQ0G,EAAON,EAAUO,EAAYC,GAC7D1C,EAAM,mBAAoBwC,GAC1B,IAMMG,EANFC,EAAQ9G,EAAOhC,eAEnB,GAAc,OAAV0I,EACFI,EAAMtB,SAAU,EA0NpB,SAAoBxF,EAAQ8G,GAC1B,GAAIA,EAAMzJ,MAAO,OAEjB,GAAIyJ,EAAMX,QAAS,CACjB,IAAIO,EAAQI,EAAMX,QAAQzI,MAEtBgJ,GAASA,EAAMlM,SACjBsM,EAAM1B,OAAO5I,KAAKkK,GAClBI,EAAMtM,QAAUsM,EAAM5B,WAAa,EAAIwB,EAAMlM,QAIjDsM,EAAMzJ,OAAQ,EAEVyJ,EAAMrB,KAIRsB,EAAa/G,IAGb8G,EAAMpB,cAAe,EAEhBoB,EAAMnB,kBACTmB,EAAMnB,iBAAkB,EACxBqB,EAAchH,KAlPhBiH,CAAWjH,EAAQ8G,QAKnB,GAFKF,IAAgBC,EAmDzB,SAAsBC,EAAOJ,GAC3B,IAAIG,EA/PiBvK,EAiQFoK,EAhQZ3C,EAAOmD,SAAS5K,IAAQA,aAAe0H,GAgQA,iBAAV0C,QAAgChL,IAAVgL,GAAwBI,EAAM5B,aACtF2B,EAAK,IAAIlC,EAAqB,QAAS,CAAC,SAAU,SAAU,cAAe+B,IAlQ/E,IAAuBpK,EAqQrB,OAAOuK,EA1DqBM,CAAaL,EAAOJ,IAE1CG,EACF7G,EAAOoH,KAAK,QAASP,QAChB,GAAIC,EAAM5B,YAAcwB,GAASA,EAAMlM,OAAS,EAKrD,GAJqB,iBAAVkM,GAAuBI,EAAM5B,YAAcrL,OAAOwN,eAAeX,KAAW3C,EAAOnK,YAC5F8M,EArNR,SAA6BA,GAC3B,OAAO3C,EAAOuD,KAAKZ,GAoNLa,CAAoBb,IAG1BC,EACEG,EAAMhG,WAAYd,EAAOoH,KAAK,QAAS,IAAItC,GAA2C0C,EAASxH,EAAQ8G,EAAOJ,GAAO,QACpH,GAAII,EAAMzJ,MACf2C,EAAOoH,KAAK,QAAS,IAAIxC,OACpB,IAAIkC,EAAM7I,UACf,OAAO,EAEP6I,EAAMtB,SAAU,EAEZsB,EAAMX,UAAYC,GACpBM,EAAQI,EAAMX,QAAQsB,MAAMf,GACxBI,EAAM5B,YAA+B,IAAjBwB,EAAMlM,OAAcgN,EAASxH,EAAQ8G,EAAOJ,GAAO,GAAYgB,EAAc1H,EAAQ8G,IAE7GU,EAASxH,EAAQ8G,EAAOJ,GAAO,QAGzBC,IACVG,EAAMtB,SAAU,EAChBkC,EAAc1H,EAAQ8G,IAO1B,OAAQA,EAAMzJ,QAAUyJ,EAAMtM,OAASsM,EAAMhJ,eAAkC,IAAjBgJ,EAAMtM,QAGtE,SAASgN,EAASxH,EAAQ8G,EAAOJ,EAAOC,GAClCG,EAAMvB,SAA4B,IAAjBuB,EAAMtM,SAAiBsM,EAAMrB,MAChDqB,EAAMb,WAAa,EACnBjG,EAAOoH,KAAK,OAAQV,KAGpBI,EAAMtM,QAAUsM,EAAM5B,WAAa,EAAIwB,EAAMlM,OACzCmM,EAAYG,EAAM1B,OAAOuC,QAAQjB,GAAYI,EAAM1B,OAAO5I,KAAKkK,GAC/DI,EAAMpB,cAAcqB,EAAa/G,IAGvC0H,EAAc1H,EAAQ8G,GAvHxBjN,OAAO8D,eAAejB,EAAS9C,UAAW,YAAa,CAIrDgE,YAAY,EACZC,IAAK,WACH,YAA4BnC,IAAxBhC,KAAKsE,gBAIFtE,KAAKsE,eAAeC,WAE7BC,IAAK,SAAanD,GAGXrB,KAAKsE,iBAMVtE,KAAKsE,eAAeC,UAAYlD,MAGpC2B,EAAS9C,UAAU2M,QAAU/B,EAAY+B,QACzC7J,EAAS9C,UAAUgO,WAAapD,EAAYqD,UAE5CnL,EAAS9C,UAAU4M,SAAW,SAAUxF,EAAK8G,GAC3CA,EAAG9G,IAOLtE,EAAS9C,UAAU4C,KAAO,SAAUkK,EAAON,GACzC,IACIQ,EADAE,EAAQpN,KAAKsE,eAkBjB,OAfK8I,EAAM5B,WAYT0B,GAAiB,EAXI,iBAAVF,KACTN,EAAWA,GAAYU,EAAMd,mBAEZc,EAAMV,WACrBM,EAAQ3C,EAAOuD,KAAKZ,EAAON,GAC3BA,EAAW,IAGbQ,GAAiB,GAMdH,EAAiB/M,KAAMgN,EAAON,GAAU,EAAOQ,IAIxDlK,EAAS9C,UAAU+N,QAAU,SAAUjB,GACrC,OAAOD,EAAiB/M,KAAMgN,EAAO,MAAM,GAAM,IAyEnDhK,EAAS9C,UAAUmO,SAAW,WAC5B,OAAuC,IAAhCrO,KAAKsE,eAAeuH,SAI7B7I,EAAS9C,UAAUoO,YAAc,SAAUC,GAKzC,OAJK5D,IAAeA,EAAgB,EAAQ,IAAmBA,eAC/D3K,KAAKsE,eAAemI,QAAU,IAAI9B,EAAc4D,GAEhDvO,KAAKsE,eAAeoI,SAAW1M,KAAKsE,eAAemI,QAAQC,SACpD1M,MA0BT,SAASwO,EAAcC,EAAGrB,GACxB,OAAIqB,GAAK,GAAsB,IAAjBrB,EAAMtM,QAAgBsM,EAAMzJ,MAAc,EACpDyJ,EAAM5B,WAAmB,EAEzBiD,GAAMA,EAEJrB,EAAMvB,SAAWuB,EAAMtM,OAAesM,EAAM1B,OAAOgD,KAAKC,KAAK7N,OAAmBsM,EAAMtM,QAIxF2N,EAAIrB,EAAMhJ,gBAAegJ,EAAMhJ,cA9BrC,SAAiCqK,GAe/B,OAdIA,GAHQ,QAIVA,EAJU,SAQVA,IACAA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,GACXA,KAGKA,EAe4CG,CAAwBH,IACvEA,GAAKrB,EAAMtM,OAAe2N,EAEzBrB,EAAMzJ,MAKJyJ,EAAMtM,QAJXsM,EAAMpB,cAAe,EACd,IAuIX,SAASqB,EAAa/G,GACpB,IAAI8G,EAAQ9G,EAAOhC,eACnB8I,EAAMpB,cAAe,EAEhBoB,EAAMnB,kBACTzB,EAAM,eAAgB4C,EAAMvB,SAC5BuB,EAAMnB,iBAAkB,EACxBrI,EAAQC,SAASyJ,EAAehH,IAIpC,SAASgH,EAAchH,GACrB,IAAI8G,EAAQ9G,EAAOhC,eACnBkG,EAAM,gBAAiB4C,EAAM7I,UAAW6I,EAAMtM,OAAQsM,EAAMzJ,OAEvDyJ,EAAM7I,YAAc6I,EAAMtM,SAAUsM,EAAMzJ,OAC7C2C,EAAOoH,KAAK,YASdN,EAAMpB,cAAgBoB,EAAMvB,UAAYuB,EAAMzJ,OAASyJ,EAAMtM,QAAUsM,EAAMhJ,cAC7EyK,EAAKvI,GASP,SAAS0H,EAAc1H,EAAQ8G,GACxBA,EAAMZ,cACTY,EAAMZ,aAAc,EACpB5I,EAAQC,SAASiL,EAAgBxI,EAAQ8G,IAI7C,SAAS0B,EAAexI,EAAQ8G,GAwB9B,MAAQA,EAAMtB,UAAYsB,EAAMzJ,QAAUyJ,EAAMtM,OAASsM,EAAMhJ,eAAiBgJ,EAAMvB,SAA4B,IAAjBuB,EAAMtM,SAAe,CACpH,IAAID,EAAMuM,EAAMtM,OAGhB,GAFA0J,EAAM,wBACNlE,EAAOqG,KAAK,GACR9L,IAAQuM,EAAMtM,OAChB,MAGJsM,EAAMZ,aAAc,EA6QtB,SAASuC,EAAwBhL,GAC/B,IAAIqJ,EAAQrJ,EAAKO,eACjB8I,EAAMlB,kBAAoBnI,EAAKiL,cAAc,YAAc,EAEvD5B,EAAMjB,kBAAoBiB,EAAMhB,OAGlCgB,EAAMvB,SAAU,EACP9H,EAAKiL,cAAc,QAAU,GACtCjL,EAAKkL,SAIT,SAASC,EAAiBnL,GACxByG,EAAM,4BACNzG,EAAK4I,KAAK,GA4BZ,SAASwC,EAAQ7I,EAAQ8G,GACvB5C,EAAM,SAAU4C,EAAMtB,SAEjBsB,EAAMtB,SACTxF,EAAOqG,KAAK,GAGdS,EAAMjB,iBAAkB,EACxB7F,EAAOoH,KAAK,UACZmB,EAAKvI,GACD8G,EAAMvB,UAAYuB,EAAMtB,SAASxF,EAAOqG,KAAK,GAgBnD,SAASkC,EAAKvI,GACZ,IAAI8G,EAAQ9G,EAAOhC,eAGnB,IAFAkG,EAAM,OAAQ4C,EAAMvB,SAEbuB,EAAMvB,SAA6B,OAAlBvF,EAAOqG,UA8HjC,SAASyC,EAASX,EAAGrB,GAEnB,OAAqB,IAAjBA,EAAMtM,OAAqB,MAE3BsM,EAAM5B,WAAY6D,EAAMjC,EAAM1B,OAAO3G,SAAkB0J,GAAKA,GAAKrB,EAAMtM,QAEtDuO,EAAfjC,EAAMX,QAAeW,EAAM1B,OAAOtK,KAAK,IAAqC,IAAxBgM,EAAM1B,OAAO5K,OAAoBsM,EAAM1B,OAAO4D,QAAmBlC,EAAM1B,OAAOxK,OAAOkM,EAAMtM,QACnJsM,EAAM1B,OAAO6D,SAGbF,EAAMjC,EAAM1B,OAAO8D,QAAQf,EAAGrB,EAAMX,SAE/B4C,GATP,IAAIA,EAYN,SAASI,EAAYnJ,GACnB,IAAI8G,EAAQ9G,EAAOhC,eACnBkG,EAAM,cAAe4C,EAAMhG,YAEtBgG,EAAMhG,aACTgG,EAAMzJ,OAAQ,EACdC,EAAQC,SAAS6L,EAAetC,EAAO9G,IAI3C,SAASoJ,EAActC,EAAO9G,GAC5BkE,EAAM,gBAAiB4C,EAAMhG,WAAYgG,EAAMtM,QAE1CsM,EAAMhG,YAA+B,IAAjBgG,EAAMtM,SAC7BsM,EAAMhG,YAAa,EACnBd,EAAOhD,UAAW,EAClBgD,EAAOoH,KAAK,QAIhB,SAASrL,EAAQsN,EAAIpK,GACnB,IAAK,IAAIvE,EAAI,EAAG4O,EAAID,EAAG7O,OAAQE,EAAI4O,EAAG5O,IACpC,GAAI2O,EAAG3O,KAAOuE,EAAG,OAAOvE,EAG1B,OAAQ,EAtsBVgC,EAAS9C,UAAUyM,KAAO,SAAU8B,GAClCjE,EAAM,OAAQiE,GACdA,EAAIoB,SAASpB,EAAG,IAChB,IAAIrB,EAAQpN,KAAKsE,eACbwL,EAAQrB,EAKZ,GAJU,IAANA,IAASrB,EAAMnB,iBAAkB,GAI3B,IAANwC,GAAWrB,EAAMpB,gBAA0C,IAAxBoB,EAAMhJ,cAAsBgJ,EAAMtM,QAAUsM,EAAMhJ,cAAgBgJ,EAAMtM,OAAS,IAAMsM,EAAMzJ,OAGlI,OAFA6G,EAAM,qBAAsB4C,EAAMtM,OAAQsM,EAAMzJ,OAC3B,IAAjByJ,EAAMtM,QAAgBsM,EAAMzJ,MAAO8L,EAAYzP,MAAWqN,EAAarN,MACpE,KAKT,GAAU,KAFVyO,EAAID,EAAcC,EAAGrB,KAENA,EAAMzJ,MAEnB,OADqB,IAAjByJ,EAAMtM,QAAc2O,EAAYzP,MAC7B,KAyBT,IA4BIqP,EA5BAU,EAAS3C,EAAMpB,aAgDnB,OA/CAxB,EAAM,gBAAiBuF,IAEF,IAAjB3C,EAAMtM,QAAgBsM,EAAMtM,OAAS2N,EAAIrB,EAAMhJ,gBAEjDoG,EAAM,6BADNuF,GAAS,GAMP3C,EAAMzJ,OAASyJ,EAAMtB,QAEvBtB,EAAM,mBADNuF,GAAS,GAEAA,IACTvF,EAAM,WACN4C,EAAMtB,SAAU,EAChBsB,EAAMrB,MAAO,EAEQ,IAAjBqB,EAAMtM,SAAcsM,EAAMpB,cAAe,GAE7ChM,KAAK4M,MAAMQ,EAAMhJ,eAEjBgJ,EAAMrB,MAAO,EAGRqB,EAAMtB,UAAS2C,EAAID,EAAcsB,EAAO1C,KAMnC,QAFDiC,EAAPZ,EAAI,EAASW,EAASX,EAAGrB,GAAkB,OAG7CA,EAAMpB,cAAe,EACrByC,EAAI,IAEJrB,EAAMtM,QAAU2N,EAChBrB,EAAMb,WAAa,GAGA,IAAjBa,EAAMtM,SAGHsM,EAAMzJ,QAAOyJ,EAAMpB,cAAe,GAEnC8D,IAAUrB,GAAKrB,EAAMzJ,OAAO8L,EAAYzP,OAGlC,OAARqP,GAAcrP,KAAK0N,KAAK,OAAQ2B,GAC7BA,GAqHTrM,EAAS9C,UAAU0M,MAAQ,SAAU6B,GACnCzO,KAAK0N,KAAK,QAAS,IAAIvC,EAA2B,aAGpDnI,EAAS9C,UAAU8P,KAAO,SAAUC,EAAMC,GACxC,IAAIC,EAAMnQ,KACNoN,EAAQpN,KAAKsE,eAEjB,OAAQ8I,EAAMxB,YACZ,KAAK,EACHwB,EAAMzB,MAAQsE,EACd,MAEF,KAAK,EACH7C,EAAMzB,MAAQ,CAACyB,EAAMzB,MAAOsE,GAC5B,MAEF,QACE7C,EAAMzB,MAAM7I,KAAKmN,GAIrB7C,EAAMxB,YAAc,EACpBpB,EAAM,wBAAyB4C,EAAMxB,WAAYsE,GACjD,IACIE,IADUF,IAA6B,IAAjBA,EAASlM,MAAkBiM,IAASrM,EAAQyM,QAAUJ,IAASrM,EAAQ0M,OAC7E7M,EAAQ8M,EAI5B,SAASC,EAASlN,EAAUmN,GAC1BjG,EAAM,YAEFlH,IAAa6M,GACXM,IAAwC,IAA1BA,EAAWC,aAC3BD,EAAWC,YAAa,EAoB5BlG,EAAM,WAENyF,EAAKlI,eAAe,QAASR,GAC7B0I,EAAKlI,eAAe,SAAUf,GAC9BiJ,EAAKlI,eAAe,QAAS4I,GAC7BV,EAAKlI,eAAe,QAASV,GAC7B4I,EAAKlI,eAAe,SAAUyI,GAC9BL,EAAIpI,eAAe,MAAOtE,GAC1B0M,EAAIpI,eAAe,MAAOwI,GAC1BJ,EAAIpI,eAAe,OAAQ6I,GAC3BC,GAAY,GAMRzD,EAAMb,YAAgB0D,EAAKvM,iBAAkBuM,EAAKvM,eAAeoN,WAAYH,KA9BnF,SAASlN,IACP+G,EAAM,SACNyF,EAAKjM,MAhBHoJ,EAAMhG,WAAYxD,EAAQC,SAASuM,GAAYD,EAAI3M,KAAK,MAAO4M,GACnEH,EAAKvI,GAAG,SAAU8I,GAsBlB,IAAIG,EAwFN,SAAqBR,GACnB,OAAO,WACL,IAAI/C,EAAQ+C,EAAI7L,eAChBkG,EAAM,cAAe4C,EAAMb,YACvBa,EAAMb,YAAYa,EAAMb,aAEH,IAArBa,EAAMb,YAAoBtC,EAAgBkG,EAAK,UACjD/C,EAAMvB,SAAU,EAChBgD,EAAKsB,KAhGKY,CAAYZ,GAC1BF,EAAKvI,GAAG,QAASiJ,GACjB,IAAIE,GAAY,EAwBhB,SAASD,EAAO5D,GACdxC,EAAM,UACN,IAAI6E,EAAMY,EAAKlC,MAAMf,GACrBxC,EAAM,aAAc6E,IAER,IAARA,KAKwB,IAArBjC,EAAMxB,YAAoBwB,EAAMzB,QAAUsE,GAAQ7C,EAAMxB,WAAa,IAAqC,IAAhCvJ,EAAQ+K,EAAMzB,MAAOsE,MAAkBY,IACpHrG,EAAM,8BAA+B4C,EAAMb,YAC3Ca,EAAMb,cAGR4D,EAAIa,SAMR,SAAS3J,EAAQ8F,GACf3C,EAAM,UAAW2C,GACjBoD,IACAN,EAAKlI,eAAe,QAASV,GACU,IAAnC4C,EAAgBgG,EAAM,UAAgBA,EAAKvC,KAAK,QAASP,GAM/D,SAAS5F,IACP0I,EAAKlI,eAAe,SAAUf,GAC9BuJ,IAKF,SAASvJ,IACPwD,EAAM,YACNyF,EAAKlI,eAAe,QAASR,GAC7BgJ,IAKF,SAASA,IACP/F,EAAM,UACN2F,EAAII,OAAON,GAWb,OA7DAE,EAAIzI,GAAG,OAAQkJ,GAljBjB,SAAyB1G,EAAS+G,EAAOC,GAGvC,GAAuC,mBAA5BhH,EAAQiH,gBAAgC,OAAOjH,EAAQiH,gBAAgBF,EAAOC,GAKpFhH,EAAQkH,SAAYlH,EAAQkH,QAAQH,GAAuCtQ,MAAMC,QAAQsJ,EAAQkH,QAAQH,IAAS/G,EAAQkH,QAAQH,GAAOhD,QAAQiD,GAAShH,EAAQkH,QAAQH,GAAS,CAACC,EAAIhH,EAAQkH,QAAQH,IAA5J/G,EAAQxC,GAAGuJ,EAAOC,GAykBnEC,CAAgBlB,EAAM,QAAS5I,GAO/B4I,EAAKzM,KAAK,QAAS+D,GAQnB0I,EAAKzM,KAAK,SAAUwD,GAQpBiJ,EAAKvC,KAAK,OAAQyC,GAEb/C,EAAMvB,UACTrB,EAAM,eACN2F,EAAIlB,UAGCgB,GAgBTjN,EAAS9C,UAAUqQ,OAAS,SAAUN,GACpC,IAAI7C,EAAQpN,KAAKsE,eACbmM,EAAa,CACfC,YAAY,GAGd,GAAyB,IAArBtD,EAAMxB,WAAkB,OAAO5L,KAEnC,GAAyB,IAArBoN,EAAMxB,WAER,OAAIqE,GAAQA,IAAS7C,EAAMzB,QACtBsE,IAAMA,EAAO7C,EAAMzB,OAExByB,EAAMzB,MAAQ,KACdyB,EAAMxB,WAAa,EACnBwB,EAAMvB,SAAU,EACZoE,GAAMA,EAAKvC,KAAK,SAAU1N,KAAMyQ,IANKzQ,KAW3C,IAAKiQ,EAAM,CAET,IAAIoB,EAAQjE,EAAMzB,MACd9K,EAAMuM,EAAMxB,WAChBwB,EAAMzB,MAAQ,KACdyB,EAAMxB,WAAa,EACnBwB,EAAMvB,SAAU,EAEhB,IAAK,IAAI7K,EAAI,EAAGA,EAAIH,EAAKG,IACvBqQ,EAAMrQ,GAAG0M,KAAK,SAAU1N,KAAM,CAC5B0Q,YAAY,IAIhB,OAAO1Q,KAIT,IAAIsR,EAAQjP,EAAQ+K,EAAMzB,MAAOsE,GACjC,OAAe,IAAXqB,IACJlE,EAAMzB,MAAM4F,OAAOD,EAAO,GAC1BlE,EAAMxB,YAAc,EACK,IAArBwB,EAAMxB,aAAkBwB,EAAMzB,MAAQyB,EAAMzB,MAAM,IACtDsE,EAAKvC,KAAK,SAAU1N,KAAMyQ,IAJDzQ,MAU3BgD,EAAS9C,UAAUwH,GAAK,SAAU8J,EAAIN,GACpC,IAAIO,EAAMrH,EAAOlK,UAAUwH,GAAG3H,KAAKC,KAAMwR,EAAIN,GACzC9D,EAAQpN,KAAKsE,eAuBjB,MArBW,SAAPkN,GAGFpE,EAAMlB,kBAAoBlM,KAAKgP,cAAc,YAAc,GAErC,IAAlB5B,EAAMvB,SAAmB7L,KAAKiP,UAClB,aAAPuC,IACJpE,EAAMhG,YAAegG,EAAMlB,oBAC9BkB,EAAMlB,kBAAoBkB,EAAMpB,cAAe,EAC/CoB,EAAMvB,SAAU,EAChBuB,EAAMnB,iBAAkB,EACxBzB,EAAM,cAAe4C,EAAMtM,OAAQsM,EAAMtB,SAErCsB,EAAMtM,OACRuM,EAAarN,MACHoN,EAAMtB,SAChBlI,EAAQC,SAASqL,EAAkBlP,QAKlCyR,GAGTzO,EAAS9C,UAAUwR,YAAc1O,EAAS9C,UAAUwH,GAEpD1E,EAAS9C,UAAU6H,eAAiB,SAAUyJ,EAAIN,GAChD,IAAIO,EAAMrH,EAAOlK,UAAU6H,eAAehI,KAAKC,KAAMwR,EAAIN,GAYzD,MAVW,aAAPM,GAOF5N,EAAQC,SAASkL,EAAyB/O,MAGrCyR,GAGTzO,EAAS9C,UAAUyR,mBAAqB,SAAUH,GAChD,IAAIC,EAAMrH,EAAOlK,UAAUyR,mBAAmB7K,MAAM9G,KAAM2G,WAY1D,MAVW,aAAP6K,QAA4BxP,IAAPwP,GAOvB5N,EAAQC,SAASkL,EAAyB/O,MAGrCyR,GAuBTzO,EAAS9C,UAAU+O,OAAS,WAC1B,IAAI7B,EAAQpN,KAAKsE,eAYjB,OAVK8I,EAAMvB,UACTrB,EAAM,UAIN4C,EAAMvB,SAAWuB,EAAMlB,kBAQ3B,SAAgB5F,EAAQ8G,GACjBA,EAAMjB,kBACTiB,EAAMjB,iBAAkB,EACxBvI,EAAQC,SAASsL,EAAS7I,EAAQ8G,IAVlC6B,CAAOjP,KAAMoN,IAGfA,EAAMhB,QAAS,EACRpM,MAuBTgD,EAAS9C,UAAU8Q,MAAQ,WAUzB,OATAxG,EAAM,wBAAyBxK,KAAKsE,eAAeuH,UAEf,IAAhC7L,KAAKsE,eAAeuH,UACtBrB,EAAM,SACNxK,KAAKsE,eAAeuH,SAAU,EAC9B7L,KAAK0N,KAAK,UAGZ1N,KAAKsE,eAAe8H,QAAS,EACtBpM,MAeTgD,EAAS9C,UAAU0R,KAAO,SAAUtL,GAClC,IAAIuL,EAAQ7R,KAERoN,EAAQpN,KAAKsE,eACb8H,GAAS,EA0Bb,IAAK,IAAIpL,KAzBTsF,EAAOoB,GAAG,OAAO,WAGf,GAFA8C,EAAM,eAEF4C,EAAMX,UAAYW,EAAMzJ,MAAO,CACjC,IAAIqJ,EAAQI,EAAMX,QAAQzI,MACtBgJ,GAASA,EAAMlM,QAAQ+Q,EAAM/O,KAAKkK,GAGxC6E,EAAM/O,KAAK,SAEbwD,EAAOoB,GAAG,QAAQ,SAAUsF,IAC1BxC,EAAM,gBACF4C,EAAMX,UAASO,EAAQI,EAAMX,QAAQsB,MAAMf,IAE3CI,EAAM5B,YAAc,MAACwB,KAAyDI,EAAM5B,YAAgBwB,GAAUA,EAAMlM,UAE9G+Q,EAAM/O,KAAKkK,KAGnBZ,GAAS,EACT9F,EAAO0K,aAKG1K,OACItE,IAAZhC,KAAKgB,IAAyC,mBAAdsF,EAAOtF,KACzChB,KAAKgB,GAAK,SAAoBmC,GAC5B,OAAO,WACL,OAAOmD,EAAOnD,GAAQ2D,MAAMR,EAAQK,YAF9B,CAIR3F,IAKN,IAAK,IAAIyN,EAAI,EAAGA,EAAInD,EAAaxK,OAAQ2N,IACvCnI,EAAOoB,GAAG4D,EAAamD,GAAIzO,KAAK0N,KAAKoE,KAAK9R,KAAMsL,EAAamD,KAc/D,OATAzO,KAAK4M,MAAQ,SAAU6B,GACrBjE,EAAM,gBAAiBiE,GAEnBrC,IACFA,GAAS,EACT9F,EAAO2I,WAIJjP,MAGa,mBAAX+R,SACT/O,EAAS9C,UAAU6R,OAAOC,eAAiB,WAOzC,OANA3G,EAAwB,uCAEkBrJ,IAAtC4I,IACFA,EAAoC,EAAQ,MAGvCA,EAAkC5K,QAI7CG,OAAO8D,eAAejB,EAAS9C,UAAW,wBAAyB,CAIjEgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAKsE,eAAeF,iBAG/BjE,OAAO8D,eAAejB,EAAS9C,UAAW,iBAAkB,CAI1DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAKsE,gBAAkBtE,KAAKsE,eAAeoH,UAGtDvL,OAAO8D,eAAejB,EAAS9C,UAAW,kBAAmB,CAI3DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAKsE,eAAeuH,SAE7BrH,IAAK,SAAa4I,GACZpN,KAAKsE,iBACPtE,KAAKsE,eAAeuH,QAAUuB,MAKpCpK,EAASiP,UAAY7C,EACrBjP,OAAO8D,eAAejB,EAAS9C,UAAW,iBAAkB,CAI1DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAKsE,eAAexD,Y,wCC9gC/B0B,EAAOC,QAAU,EAAQ,IAAUuH,c,8BCAnC,YA+CA,SAASkI,EAAoBnO,EAAMuD,GACjC6K,EAAYpO,EAAMuD,GAClB8K,EAAYrO,GAGd,SAASqO,EAAYrO,GACfA,EAAKL,iBAAmBK,EAAKL,eAAe2I,WAC5CtI,EAAKO,iBAAmBP,EAAKO,eAAe+H,WAChDtI,EAAK2J,KAAK,SAsBZ,SAASyE,EAAYpO,EAAMuD,GACzBvD,EAAK2J,KAAK,QAASpG,GAGrB9E,EAAOC,QAAU,CACfoK,QAhFF,SAAiBvF,EAAK8G,GACpB,IAAIyD,EAAQ7R,KAERqS,EAAoBrS,KAAKsE,gBAAkBtE,KAAKsE,eAAeC,UAC/D+N,EAAoBtS,KAAK0D,gBAAkB1D,KAAK0D,eAAea,UAEnE,OAAI8N,GAAqBC,GACnBlE,EACFA,EAAG9G,IACMA,GAAStH,KAAK0D,gBAAmB1D,KAAK0D,eAAe6O,cAC9D3O,EAAQC,SAASsO,EAAanS,KAAMsH,GAG/BtH,OAKLA,KAAKsE,iBACPtE,KAAKsE,eAAeC,WAAY,GAI9BvE,KAAK0D,iBACP1D,KAAK0D,eAAea,WAAY,GAGlCvE,KAAK8M,SAASxF,GAAO,MAAM,SAAUA,IAC9B8G,GAAM9G,GACT1D,EAAQC,SAASqO,EAAqBL,EAAOvK,GAEzCuK,EAAMnO,iBACRmO,EAAMnO,eAAe6O,cAAe,IAE7BnE,GACTxK,EAAQC,SAASuO,EAAaP,GAC9BzD,EAAG9G,IAEH1D,EAAQC,SAASuO,EAAaP,MAI3B7R,OAuCPmO,UAzBF,WACMnO,KAAKsE,iBACPtE,KAAKsE,eAAeC,WAAY,EAChCvE,KAAKsE,eAAewH,SAAU,EAC9B9L,KAAKsE,eAAeX,OAAQ,EAC5B3D,KAAKsE,eAAe8C,YAAa,GAG/BpH,KAAK0D,iBACP1D,KAAK0D,eAAea,WAAY,EAChCvE,KAAK0D,eAAeC,OAAQ,EAC5B3D,KAAK0D,eAAe8O,QAAS,EAC7BxS,KAAK0D,eAAe+O,aAAc,EAClCzS,KAAK0D,eAAegP,aAAc,EAClC1S,KAAK0D,eAAewD,UAAW,EAC/BlH,KAAK0D,eAAe6O,cAAe,O,+CCvEvC,IAAII,EAAwB,EAAQ,KAAmBzT,MAAMyT,sBAsB7DnQ,EAAOC,QAAU,CACfsI,iBAjBF,SAA0BqC,EAAOhK,EAASwP,EAAWrH,GACnD,IAAIsH,EALN,SAA2BzP,EAASmI,EAAUqH,GAC5C,OAAgC,MAAzBxP,EAAQgB,cAAwBhB,EAAQgB,cAAgBmH,EAAWnI,EAAQwP,GAAa,KAIrFE,CAAkB1P,EAASmI,EAAUqH,GAE/C,GAAW,MAAPC,EAAa,CACf,IAAM/N,SAAS+N,IAAQ5N,KAAK8N,MAAMF,KAASA,GAAQA,EAAM,EAEvD,MAAM,IAAIF,EADCpH,EAAWqH,EAAY,gBACIC,GAGxC,OAAO5N,KAAK8N,MAAMF,GAIpB,OAAOzF,EAAM5B,WAAa,GAAK,S,8BCrBjC,cAqCA,SAASwH,EAAc5F,GACrB,IAAIyE,EAAQ7R,KAEZA,KAAKiT,KAAO,KACZjT,KAAKkT,MAAQ,KAEblT,KAAKmT,OAAS,YAmlBhB,SAAwBC,EAAShG,EAAO9F,GACtC,IAAI4L,EAAQE,EAAQF,MACpBE,EAAQF,MAAQ,KAEhB,KAAOA,GAAO,CACZ,IAAI9E,EAAK8E,EAAM1M,SACf4G,EAAMiG,YACNjF,EAAG9G,GACH4L,EAAQA,EAAMD,KAIhB7F,EAAMkG,mBAAmBL,KAAOG,EA9lB9BG,CAAe1B,EAAOzE,IAQ1B,IAAIrK,EA3BJP,EAAOC,QAAUQ,EA8BjBA,EAASuQ,cAAgBA,EAGzB,IAAIC,EAAe,CACjBC,UAAW,EAAQ,MAMjBtJ,EAAS,EAAQ,KAIjBC,EAAS,EAAQ,IAAUA,OAE3BC,EAAgB5F,EAAO6F,YAAc,aAUzC,IA8HIoJ,EA9HA7I,EAAc,EAAQ,KAGtBC,EADW,EAAQ,KACSA,iBAE5BC,EAAiB,EAAQ,KAAa9L,MACtC+L,EAAuBD,EAAeC,qBACtCE,EAA6BH,EAAeG,2BAC5CyI,EAAwB5I,EAAe4I,sBACvCC,EAAyB7I,EAAe6I,uBACxCC,EAAuB9I,EAAe8I,qBACtCC,EAAyB/I,EAAe+I,uBACxCC,EAA6BhJ,EAAegJ,2BAC5CC,EAAuBjJ,EAAeiJ,qBAI1C,SAASC,KAET,SAASV,EAAcpQ,EAASkD,EAAQiF,GACtCxI,EAASA,GAAU,EAAQ,KAC3BK,EAAUA,GAAW,GAMG,kBAAbmI,IAAwBA,EAAWjF,aAAkBvD,GAGhE/C,KAAKwL,aAAepI,EAAQoI,WACxBD,IAAUvL,KAAKwL,WAAaxL,KAAKwL,cAAgBpI,EAAQ+Q,oBAI7DnU,KAAKoE,cAAgB2G,EAAiB/K,KAAMoD,EAAS,wBAAyBmI,GAE9EvL,KAAKyS,aAAc,EAEnBzS,KAAK8Q,WAAY,EAEjB9Q,KAAKwS,QAAS,EAEdxS,KAAK2D,OAAQ,EAEb3D,KAAKkH,UAAW,EAEhBlH,KAAKuE,WAAY,EAIjB,IAAI6P,GAAqC,IAA1BhR,EAAQiR,cACvBrU,KAAKqU,eAAiBD,EAItBpU,KAAKsM,gBAAkBlJ,EAAQkJ,iBAAmB,OAIlDtM,KAAKc,OAAS,EAEdd,KAAKsU,SAAU,EAEftU,KAAKuU,OAAS,EAKdvU,KAAK+L,MAAO,EAIZ/L,KAAKwU,kBAAmB,EAExBxU,KAAKyU,QAAU,SAAUtH,IA2R3B,SAAiB7G,EAAQ6G,GACvB,IAAIC,EAAQ9G,EAAO5C,eACfqI,EAAOqB,EAAMrB,KACbqC,EAAKhB,EAAMsH,QACf,GAAkB,mBAAPtG,EAAmB,MAAM,IAAIwF,EAExC,GAbF,SAA4BxG,GAC1BA,EAAMkH,SAAU,EAChBlH,EAAMsH,QAAU,KAChBtH,EAAMtM,QAAUsM,EAAMuH,SACtBvH,EAAMuH,SAAW,EAQjBC,CAAmBxH,GACfD,GArCN,SAAsB7G,EAAQ8G,EAAOrB,EAAMoB,EAAIiB,KAC3ChB,EAAMiG,UAEJtH,GAGFnI,EAAQC,SAASuK,EAAIjB,GAGrBvJ,EAAQC,SAASgR,EAAavO,EAAQ8G,GACtC9G,EAAO5C,eAAe6O,cAAe,EACrCjM,EAAOoH,KAAK,QAASP,KAIrBiB,EAAGjB,GACH7G,EAAO5C,eAAe6O,cAAe,EACrCjM,EAAOoH,KAAK,QAASP,GAGrB0H,EAAYvO,EAAQ8G,IAiBd0H,CAAaxO,EAAQ8G,EAAOrB,EAAMoB,EAAIiB,OAAS,CAErD,IAAIlH,EAAW6N,EAAW3H,IAAU9G,EAAO/B,UAEtC2C,GAAakG,EAAMmH,QAAWnH,EAAMoH,mBAAoBpH,EAAM4H,iBACjEC,EAAY3O,EAAQ8G,GAGlBrB,EACFnI,EAAQC,SAASqR,EAAY5O,EAAQ8G,EAAOlG,EAAUkH,GAEtD8G,EAAW5O,EAAQ8G,EAAOlG,EAAUkH,IA3StCqG,CAAQnO,EAAQ6G,IAIlBnN,KAAK0U,QAAU,KAEf1U,KAAK2U,SAAW,EAChB3U,KAAKgV,gBAAkB,KACvBhV,KAAKmV,oBAAsB,KAG3BnV,KAAKqT,UAAY,EAGjBrT,KAAK0S,aAAc,EAEnB1S,KAAKuS,cAAe,EAEpBvS,KAAKqM,WAAkC,IAAtBjJ,EAAQiJ,UAEzBrM,KAAKoV,qBAAuB,EAG5BpV,KAAKsT,mBAAqB,IAAIN,EAAchT,MA4C9C,SAASiD,EAASG,GAUhB,IAAImI,EAAWvL,gBATf+C,EAASA,GAAU,EAAQ,MAU3B,IAAKwI,IAAaoI,EAAgB5T,KAAKkD,EAAUjD,MAAO,OAAO,IAAIiD,EAASG,GAC5EpD,KAAK0D,eAAiB,IAAI8P,EAAcpQ,EAASpD,KAAMuL,GAEvDvL,KAAKuD,UAAW,EAEZH,IAC2B,mBAAlBA,EAAQ2K,QAAsB/N,KAAKqV,OAASjS,EAAQ2K,OACjC,mBAAnB3K,EAAQkS,SAAuBtV,KAAKuV,QAAUnS,EAAQkS,QAClC,mBAApBlS,EAAQyJ,UAAwB7M,KAAK8M,SAAW1J,EAAQyJ,SACtC,mBAAlBzJ,EAAQoS,QAAsBxV,KAAKyV,OAASrS,EAAQoS,QAGjEpL,EAAOrK,KAAKC,MAwJd,SAAS0V,EAAQpP,EAAQ8G,EAAOkI,EAAQzU,EAAKmM,EAAON,EAAU0B,GAC5DhB,EAAMuH,SAAW9T,EACjBuM,EAAMsH,QAAUtG,EAChBhB,EAAMkH,SAAU,EAChBlH,EAAMrB,MAAO,EACTqB,EAAM7I,UAAW6I,EAAMqH,QAAQ,IAAIX,EAAqB,UAAmBwB,EAAQhP,EAAOiP,QAAQvI,EAAOI,EAAMqH,SAAcnO,EAAO+O,OAAOrI,EAAON,EAAUU,EAAMqH,SACtKrH,EAAMrB,MAAO,EAwDf,SAASmJ,EAAW5O,EAAQ8G,EAAOlG,EAAUkH,GACtClH,GASP,SAAsBZ,EAAQ8G,GACP,IAAjBA,EAAMtM,QAAgBsM,EAAM0D,YAC9B1D,EAAM0D,WAAY,EAClBxK,EAAOoH,KAAK,UAZCiI,CAAarP,EAAQ8G,GACpCA,EAAMiG,YACNjF,IACAyG,EAAYvO,EAAQ8G,GActB,SAAS6H,EAAY3O,EAAQ8G,GAC3BA,EAAMoH,kBAAmB,EACzB,IAAItB,EAAQ9F,EAAM4H,gBAElB,GAAI1O,EAAOiP,SAAWrC,GAASA,EAAMD,KAAM,CAEzC,IAAIrD,EAAIxC,EAAMgI,qBACV1J,EAAS,IAAI/K,MAAMiP,GACnBgG,EAASxI,EAAMkG,mBACnBsC,EAAO1C,MAAQA,EAIf,IAHA,IAAI2C,EAAQ,EACRC,GAAa,EAEV5C,GACLxH,EAAOmK,GAAS3C,EACXA,EAAM6C,QAAOD,GAAa,GAC/B5C,EAAQA,EAAMD,KACd4C,GAAS,EAGXnK,EAAOoK,WAAaA,EACpBJ,EAAQpP,EAAQ8G,GAAO,EAAMA,EAAMtM,OAAQ4K,EAAQ,GAAIkK,EAAOzC,QAG9D/F,EAAMiG,YACNjG,EAAM+H,oBAAsB,KAExBS,EAAO3C,MACT7F,EAAMkG,mBAAqBsC,EAAO3C,KAClC2C,EAAO3C,KAAO,MAEd7F,EAAMkG,mBAAqB,IAAIN,EAAc5F,GAG/CA,EAAMgI,qBAAuB,MACxB,CAEL,KAAOlC,GAAO,CACZ,IAAIlG,EAAQkG,EAAMlG,MACdN,EAAWwG,EAAMxG,SACjB0B,EAAK8E,EAAM1M,SASf,GAPAkP,EAAQpP,EAAQ8G,GAAO,EADbA,EAAM5B,WAAa,EAAIwB,EAAMlM,OACJkM,EAAON,EAAU0B,GACpD8E,EAAQA,EAAMD,KACd7F,EAAMgI,uBAKFhI,EAAMkH,QACR,MAIU,OAAVpB,IAAgB9F,EAAM+H,oBAAsB,MAGlD/H,EAAM4H,gBAAkB9B,EACxB9F,EAAMoH,kBAAmB,EA2C3B,SAASO,EAAW3H,GAClB,OAAOA,EAAMoF,QAA2B,IAAjBpF,EAAMtM,QAA0C,OAA1BsM,EAAM4H,kBAA6B5H,EAAMlG,WAAakG,EAAMkH,QAG3G,SAAS0B,EAAU1P,EAAQ8G,GACzB9G,EAAOmP,QAAO,SAAUnO,GACtB8F,EAAMiG,YAEF/L,GACFhB,EAAOoH,KAAK,QAASpG,GAGvB8F,EAAMsF,aAAc,EACpBpM,EAAOoH,KAAK,aACZmH,EAAYvO,EAAQ8G,MAiBxB,SAASyH,EAAYvO,EAAQ8G,GAC3B,IAAI6I,EAAOlB,EAAW3H,GAWtB,OATI6I,KAhBN,SAAmB3P,EAAQ8G,GACpBA,EAAMsF,aAAgBtF,EAAMqF,cACF,mBAAlBnM,EAAOmP,QAA0BrI,EAAM7I,WAKhD6I,EAAMsF,aAAc,EACpBpM,EAAOoH,KAAK,eALZN,EAAMiG,YACNjG,EAAMqF,aAAc,EACpB7O,EAAQC,SAASmS,EAAW1P,EAAQ8G,KAYtC8I,CAAU5P,EAAQ8G,GAEM,IAApBA,EAAMiG,YACRjG,EAAMlG,UAAW,EACjBZ,EAAOoH,KAAK,YAITuI,EA/gBT,EAAQ,GAAR,CAAoBhT,EAAUmH,GAuF9BoJ,EAActT,UAAUmE,UAAY,WAIlC,IAHA,IAAI8R,EAAUnW,KAAKgV,gBACfoB,EAAM,GAEHD,GACLC,EAAItT,KAAKqT,GACTA,EAAUA,EAAQlD,KAGpB,OAAOmD,GAGT,WACE,IACEjW,OAAO8D,eAAeuP,EAActT,UAAW,SAAU,CACvDiE,IAAKsP,EAAaC,WAAU,WAC1B,OAAO1T,KAAKqE,cACX,6EAAmF,aAExF,MAAOgS,KAPX,GAcsB,mBAAXtE,QAAyBA,OAAOuE,aAAiE,mBAA3CzR,SAAS3E,UAAU6R,OAAOuE,cACzF3C,EAAkB9O,SAAS3E,UAAU6R,OAAOuE,aAC5CnW,OAAO8D,eAAehB,EAAU8O,OAAOuE,YAAa,CAClDjV,MAAO,SAAekV,GACpB,QAAI5C,EAAgB5T,KAAKC,KAAMuW,IAC3BvW,OAASiD,IACNsT,GAAUA,EAAO7S,0BAA0B8P,OAItDG,EAAkB,SAAyB4C,GACzC,OAAOA,aAAkBvW,MA+B7BiD,EAAS/C,UAAU8P,KAAO,WACxBhQ,KAAK0N,KAAK,QAAS,IAAImG,IA+BzB5Q,EAAS/C,UAAU6N,MAAQ,SAAUf,EAAON,EAAU0B,GACpD,IA/MqBxL,EA+MjBwK,EAAQpN,KAAK0D,eACb2L,GAAM,EAEN0G,GAAS3I,EAAM5B,aAlNE5I,EAkN0BoK,EAjNxC3C,EAAOmD,SAAS5K,IAAQA,aAAe0H,GAkO9C,OAfIyL,IAAU1L,EAAOmD,SAASR,KAC5BA,EAzNJ,SAA6BA,GAC3B,OAAO3C,EAAOuD,KAAKZ,GAwNTa,CAAoBb,IAGN,mBAAbN,IACT0B,EAAK1B,EACLA,EAAW,MAGTqJ,EAAOrJ,EAAW,SAAmBA,IAAUA,EAAWU,EAAMd,iBAClD,mBAAP8B,IAAmBA,EAAK8F,GAC/B9G,EAAMoF,OA7CZ,SAAuBlM,EAAQ8H,GAC7B,IAAIjB,EAAK,IAAI6G,EAEb1N,EAAOoH,KAAK,QAASP,GACrBvJ,EAAQC,SAASuK,EAAIjB,GAyCHqJ,CAAcxW,KAAMoO,IAAa2H,GAnCrD,SAAoBzP,EAAQ8G,EAAOJ,EAAOoB,GACxC,IAAIjB,EAQJ,OANc,OAAVH,EACFG,EAAK,IAAI4G,EACiB,iBAAV/G,GAAuBI,EAAM5B,aAC7C2B,EAAK,IAAIlC,EAAqB,QAAS,CAAC,SAAU,UAAW+B,KAG3DG,IACF7G,EAAOoH,KAAK,QAASP,GACrBvJ,EAAQC,SAASuK,EAAIjB,IACd,GAuBmDsJ,CAAWzW,KAAMoN,EAAOJ,EAAOoB,MACzFhB,EAAMiG,YACNhE,EAwDJ,SAAuB/I,EAAQ8G,EAAO2I,EAAO/I,EAAON,EAAU0B,GAC5D,IAAK2H,EAAO,CACV,IAAIW,EAtBR,SAAqBtJ,EAAOJ,EAAON,GAC5BU,EAAM5B,aAAsC,IAAxB4B,EAAMiH,eAA4C,iBAAVrH,IAC/DA,EAAQ3C,EAAOuD,KAAKZ,EAAON,IAG7B,OAAOM,EAiBU2J,CAAYvJ,EAAOJ,EAAON,GAErCM,IAAU0J,IACZX,GAAQ,EACRrJ,EAAW,SACXM,EAAQ0J,GAIZ,IAAI7V,EAAMuM,EAAM5B,WAAa,EAAIwB,EAAMlM,OACvCsM,EAAMtM,QAAUD,EAChB,IAAIwO,EAAMjC,EAAMtM,OAASsM,EAAMhJ,cAE1BiL,IAAKjC,EAAM0D,WAAY,GAE5B,GAAI1D,EAAMkH,SAAWlH,EAAMmH,OAAQ,CACjC,IAAIqC,EAAOxJ,EAAM+H,oBACjB/H,EAAM+H,oBAAsB,CAC1BnI,MAAOA,EACPN,SAAUA,EACVqJ,MAAOA,EACPvP,SAAU4H,EACV6E,KAAM,MAGJ2D,EACFA,EAAK3D,KAAO7F,EAAM+H,oBAElB/H,EAAM4H,gBAAkB5H,EAAM+H,oBAGhC/H,EAAMgI,sBAAwB,OAE9BM,EAAQpP,EAAQ8G,GAAO,EAAOvM,EAAKmM,EAAON,EAAU0B,GAGtD,OAAOiB,EA9FCwH,CAAc7W,KAAMoN,EAAO2I,EAAO/I,EAAON,EAAU0B,IAEpDiB,GAGTpM,EAAS/C,UAAU4W,KAAO,WACxB9W,KAAK0D,eAAe6Q,UAGtBtR,EAAS/C,UAAU6W,OAAS,WAC1B,IAAI3J,EAAQpN,KAAK0D,eAEb0J,EAAMmH,SACRnH,EAAMmH,SACDnH,EAAMkH,SAAYlH,EAAMmH,QAAWnH,EAAMoH,mBAAoBpH,EAAM4H,iBAAiBC,EAAYjV,KAAMoN,KAI/GnK,EAAS/C,UAAU8W,mBAAqB,SAA4BtK,GAGlE,GADwB,iBAAbA,IAAuBA,EAAWA,EAASuK,iBAChD,CAAC,MAAO,OAAQ,QAAS,QAAS,SAAU,SAAU,OAAQ,QAAS,UAAW,WAAY,OAAO5U,SAASqK,EAAW,IAAIuK,gBAAkB,GAAI,MAAM,IAAIhD,EAAqBvH,GAExL,OADA1M,KAAK0D,eAAe4I,gBAAkBI,EAC/B1M,MAGTG,OAAO8D,eAAehB,EAAS/C,UAAW,iBAAkB,CAI1DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,gBAAkB1D,KAAK0D,eAAeW,eAYtDlE,OAAO8D,eAAehB,EAAS/C,UAAW,wBAAyB,CAIjEgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,eAAeU,iBA4L/BnB,EAAS/C,UAAUmV,OAAS,SAAUrI,EAAON,EAAU0B,GACrDA,EAAG,IAAIjD,EAA2B,cAGpClI,EAAS/C,UAAUqV,QAAU,KAE7BtS,EAAS/C,UAAU8D,IAAM,SAAUgJ,EAAON,EAAU0B,GAClD,IAAIhB,EAAQpN,KAAK0D,eAoBjB,MAlBqB,mBAAVsJ,GACToB,EAAKpB,EACLA,EAAQ,KACRN,EAAW,MACkB,mBAAbA,IAChB0B,EAAK1B,EACLA,EAAW,MAGTM,SAAuChN,KAAK+N,MAAMf,EAAON,GAEzDU,EAAMmH,SACRnH,EAAMmH,OAAS,EACfvU,KAAK+W,UAIF3J,EAAMoF,QA4Db,SAAqBlM,EAAQ8G,EAAOgB,GAClChB,EAAMoF,QAAS,EACfqC,EAAYvO,EAAQ8G,GAEhBgB,IACEhB,EAAMlG,SAAUtD,EAAQC,SAASuK,GAAS9H,EAAO9C,KAAK,SAAU4K,IAGtEhB,EAAMzJ,OAAQ,EACd2C,EAAO/C,UAAW,EArEC2T,CAAYlX,KAAMoN,EAAOgB,GACrCpO,MAGTG,OAAO8D,eAAehB,EAAS/C,UAAW,iBAAkB,CAI1DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,eAAe5C,UA6E/BX,OAAO8D,eAAehB,EAAS/C,UAAW,YAAa,CAIrDgE,YAAY,EACZC,IAAK,WACH,YAA4BnC,IAAxBhC,KAAK0D,gBAIF1D,KAAK0D,eAAea,WAE7BC,IAAK,SAAanD,GAGXrB,KAAK0D,iBAMV1D,KAAK0D,eAAea,UAAYlD,MAGpC4B,EAAS/C,UAAU2M,QAAU/B,EAAY+B,QACzC5J,EAAS/C,UAAUgO,WAAapD,EAAYqD,UAE5ClL,EAAS/C,UAAU4M,SAAW,SAAUxF,EAAK8G,GAC3CA,EAAG9G,M,qDC1mBL9E,EAAOC,QAAU0U,EAEjB,IAAInM,EAAiB,EAAQ,KAAa9L,MACtCiM,EAA6BH,EAAeG,2BAC5CyI,EAAwB5I,EAAe4I,sBACvCwD,EAAqCpM,EAAeoM,mCACpDC,EAA8BrM,EAAeqM,4BAE7CtU,EAAS,EAAQ,KAIrB,SAASuU,EAAenK,EAAIwB,GAC1B,IAAI4I,EAAKvX,KAAKwX,gBACdD,EAAGE,cAAe,EAClB,IAAIrJ,EAAKmJ,EAAG7C,QAEZ,GAAW,OAAPtG,EACF,OAAOpO,KAAK0N,KAAK,QAAS,IAAIkG,GAGhC2D,EAAGG,WAAa,KAChBH,EAAG7C,QAAU,KACD,MAAR/F,GACF3O,KAAK8C,KAAK6L,GACZP,EAAGjB,GACH,IAAIwK,EAAK3X,KAAKsE,eACdqT,EAAG7L,SAAU,GAET6L,EAAG3L,cAAgB2L,EAAG7W,OAAS6W,EAAGvT,gBACpCpE,KAAK4M,MAAM+K,EAAGvT,eAIlB,SAAS+S,EAAU/T,GACjB,KAAMpD,gBAAgBmX,GAAY,OAAO,IAAIA,EAAU/T,GACvDL,EAAOhD,KAAKC,KAAMoD,GAClBpD,KAAKwX,gBAAkB,CACrBF,eAAgBA,EAAexF,KAAK9R,MACpC4X,eAAe,EACfH,cAAc,EACd/C,QAAS,KACTgD,WAAY,KACZG,cAAe,MAGjB7X,KAAKsE,eAAe0H,cAAe,EAInChM,KAAKsE,eAAeyH,MAAO,EAEvB3I,IAC+B,mBAAtBA,EAAQ0U,YAA0B9X,KAAK+X,WAAa3U,EAAQ0U,WAC1C,mBAAlB1U,EAAQ4U,QAAsBhY,KAAKiY,OAAS7U,EAAQ4U,QAIjEhY,KAAK0H,GAAG,YAAawO,GAGvB,SAASA,IACP,IAAIrE,EAAQ7R,KAEe,mBAAhBA,KAAKiY,QAA0BjY,KAAKsE,eAAeC,UAK5D2T,EAAKlY,KAAM,KAAM,MAJjBA,KAAKiY,QAAO,SAAU9K,EAAIwB,GACxBuJ,EAAKrG,EAAO1E,EAAIwB,MA6DtB,SAASuJ,EAAK5R,EAAQ6G,EAAIwB,GACxB,GAAIxB,EAAI,OAAO7G,EAAOoH,KAAK,QAASP,GAMpC,GALY,MAARwB,GACFrI,EAAOxD,KAAK6L,GAIVrI,EAAO5C,eAAe5C,OAAQ,MAAM,IAAIuW,EAC5C,GAAI/Q,EAAOkR,gBAAgBC,aAAc,MAAM,IAAIL,EACnD,OAAO9Q,EAAOxD,KAAK,MA9HrB,EAAQ,GAAR,CAAoBqU,EAAWpU,GA+D/BoU,EAAUjX,UAAU4C,KAAO,SAAUkK,EAAON,GAE1C,OADA1M,KAAKwX,gBAAgBI,eAAgB,EAC9B7U,EAAO7C,UAAU4C,KAAK/C,KAAKC,KAAMgN,EAAON,IAajDyK,EAAUjX,UAAU6X,WAAa,SAAU/K,EAAON,EAAU0B,GAC1DA,EAAG,IAAIjD,EAA2B,kBAGpCgM,EAAUjX,UAAUmV,OAAS,SAAUrI,EAAON,EAAU0B,GACtD,IAAImJ,EAAKvX,KAAKwX,gBAKd,GAJAD,EAAG7C,QAAUtG,EACbmJ,EAAGG,WAAa1K,EAChBuK,EAAGM,cAAgBnL,GAEd6K,EAAGE,aAAc,CACpB,IAAIE,EAAK3X,KAAKsE,gBACViT,EAAGK,eAAiBD,EAAG3L,cAAgB2L,EAAG7W,OAAS6W,EAAGvT,gBAAepE,KAAK4M,MAAM+K,EAAGvT,iBAO3F+S,EAAUjX,UAAU0M,MAAQ,SAAU6B,GACpC,IAAI8I,EAAKvX,KAAKwX,gBAEQ,OAAlBD,EAAGG,YAAwBH,EAAGE,aAOhCF,EAAGK,eAAgB,GANnBL,EAAGE,cAAe,EAElBzX,KAAK+X,WAAWR,EAAGG,WAAYH,EAAGM,cAAeN,EAAGD,kBAQxDH,EAAUjX,UAAU4M,SAAW,SAAUxF,EAAK8G,GAC5CrL,EAAO7C,UAAU4M,SAAS/M,KAAKC,KAAMsH,GAAK,SAAU6Q,GAClD/J,EAAG+J,Q,6BCvLP,IAwBIC,EAAa,CACf5T,IArBQ,SAAS6T,EAAUhX,EAAOiX,GAClC,MAAO,CAACnW,KAAM,MAAOmW,KAAMA,IAAS,EAAGC,KAAMF,EAAUhX,MAAOA,IAqB9D6W,KA1BS,SAASI,GAClB,MAAO,CAACnW,KAAM,OAAQmW,KAAMA,IAAS,IA0BrCE,MAnBU,SAASA,EAAOnX,EAAOiX,GACjC,MAAO,CAACnW,KAAM,QAASmW,KAAMA,IAAS,EAAGE,MAAOA,EAAOnX,MAAOA,IAmB9DoX,KAhBS,SAASrZ,EAAMqZ,EAAMH,GAC9B,MAAO,CAACnW,KAAM,OAAQmW,KAAMA,IAAS,EAAGlZ,KAAMA,EAAMqZ,KAAMA,IAgB1DC,GAbO,SAASC,EAAWC,EAAUN,GACrC,MAAO,CAACnW,KAAM,KAAMmW,KAAMA,IAAS,EAAGI,GAAIC,EAAWE,MAAOD,IAa5DE,MAVU,SAASvY,EAAMwY,EAAQT,GACjC,MAAO,CAACnW,KAAM,QAASmW,KAAMA,IAAS,EAAG/X,KAAMA,EAAMwY,OAAQA,KAW/DvW,EAAOC,QAAU2V,G,6BC7BjB,IAAIY,EAAY,EAAQ,KAEpBC,EAAc,WACdC,EAAa,mBACbC,EAAQ,CACV,CAACN,MAAO,IAAKO,KAAM,kBACnB,CAACP,MAAO,IAAKO,KAAM,kBACnB,CAACP,MAAO,IAAKO,KAAM,kBACnB,CAACP,MAAO,IAAKO,KAAM,kBACnB,CAACP,MAAO,IAAKO,KAAM,cAsCrB5W,EAAOC,QAAU,CAAC4W,MAnCN,SAASR,EAAO1Q,GAC1B,GAAa,MAAT0Q,EACF,MAAO,GAGT,GAAmB,MAAf1Q,EAAOI,MAAiC,MAAjBJ,EAAOM,OAChC,MAAM,IAAIlJ,MAAM,iDAclB,OAVa4Z,EAAMG,QAAO,SAASC,EAAQC,GACzC,IAAIC,EAAaZ,EAAMa,MAAMF,EAAQJ,MAMrC,OAJIK,IACFF,EAAOC,EAAQX,OAASG,EAAUS,EAAW,GAAItR,IAG5CoR,IACN,KAiB2BI,WAZf,SAASd,GACxB,OAAIK,EAAWE,KAAKP,GACX,IAGLI,EAAYG,KAAKP,GACZ,IAGF,Q,6BC/CTrW,EAAOC,QAAU,CACfmX,MAAO,IACPC,KAAM,IACNC,OAAQ,IACRC,OAAQ,IACRC,QAAS,M,8BCRX,cAyBA,IAAIjX,EAHJP,EAAOC,QAAUO,EAMjBA,EAAS+G,cAAgBA,EAGhB,EAAQ,IAAUC,aAA3B,IAEIC,EAAkB,SAAyBC,EAAS/H,GACtD,OAAO+H,EAAQC,UAAUhI,GAAMrB,QAO7BsJ,EAAS,EAAQ,KAIjBC,EAAS,EAAQ,IAAUA,OAE3BC,EAAgB5F,EAAO6F,YAAc,aAYzC,IAEIC,EAFAC,EAAY,EAAQ,KAKtBD,EADEC,GAAaA,EAAUC,SACjBD,EAAUC,SAAS,UAEnB,aAKV,IAiBIC,EACAC,EAlBAC,EAAa,EAAQ,KAErBC,EAAc,EAAQ,KAGtBC,EADW,EAAQ,KACSA,iBAE5BC,EAAiB,EAAQ,KAAa9L,MACtC+L,EAAuBD,EAAeC,qBACtCC,EAA4BF,EAAeE,0BAC3CC,EAA6BH,EAAeG,2BAC5CC,EAAqCJ,EAAeI,mCAGpDC,EADY,EAAQ,KACgBA,wBAMxC,EAAQ,GAAR,CAAoBrI,EAAUoH,GAE9B,IAAIkB,EAAe,CAAC,QAAS,QAAS,UAAW,QAAS,UAa1D,SAASvB,EAAc3G,EAASkD,EAAQiF,GACtCxI,EAASA,GAAU,EAAQ,KAC3BK,EAAUA,GAAW,GAMG,kBAAbmI,IAAwBA,EAAWjF,aAAkBvD,GAGhE/C,KAAKwL,aAAepI,EAAQoI,WACxBD,IAAUvL,KAAKwL,WAAaxL,KAAKwL,cAAgBpI,EAAQqI,oBAG7DzL,KAAKoE,cAAgB2G,EAAiB/K,KAAMoD,EAAS,wBAAyBmI,GAI9EvL,KAAK0L,OAAS,IAAIb,EAClB7K,KAAKc,OAAS,EACdd,KAAK2L,MAAQ,KACb3L,KAAK4L,WAAa,EAClB5L,KAAK6L,QAAU,KACf7L,KAAK2D,OAAQ,EACb3D,KAAKoH,YAAa,EAClBpH,KAAK8L,SAAU,EAKf9L,KAAK+L,MAAO,EAGZ/L,KAAKgM,cAAe,EACpBhM,KAAKiM,iBAAkB,EACvBjM,KAAKkM,mBAAoB,EACzBlM,KAAKmM,iBAAkB,EACvBnM,KAAKoM,QAAS,EAEdpM,KAAKqM,WAAkC,IAAtBjJ,EAAQiJ,UAEzBrM,KAAKuE,WAAY,EAIjBvE,KAAKsM,gBAAkBlJ,EAAQkJ,iBAAmB,OAElDtM,KAAKuM,WAAa,EAElBvM,KAAKwM,aAAc,EACnBxM,KAAKyM,QAAU,KACfzM,KAAK0M,SAAW,KAEZtJ,EAAQsJ,WACL/B,IAAeA,EAAgB,EAAQ,IAAmBA,eAC/D3K,KAAKyM,QAAU,IAAI9B,EAAcvH,EAAQsJ,UACzC1M,KAAK0M,SAAWtJ,EAAQsJ,UAI5B,SAAS1J,EAASI,GAEhB,GADAL,EAASA,GAAU,EAAQ,OACrB/C,gBAAgBgD,GAAW,OAAO,IAAIA,EAASI,GAGrD,IAAImI,EAAWvL,gBAAgB+C,EAC/B/C,KAAKsE,eAAiB,IAAIyF,EAAc3G,EAASpD,KAAMuL,GAEvDvL,KAAKsD,UAAW,EAEZF,IAC0B,mBAAjBA,EAAQuJ,OAAqB3M,KAAK4M,MAAQxJ,EAAQuJ,MAC9B,mBAApBvJ,EAAQyJ,UAAwB7M,KAAK8M,SAAW1J,EAAQyJ,UAGrEzC,EAAOrK,KAAKC,MAiEd,SAAS+M,EAAiBzG,EAAQ0G,EAAON,EAAUO,EAAYC,GAC7D1C,EAAM,mBAAoBwC,GAC1B,IAMMG,EANFC,EAAQ9G,EAAOhC,eAEnB,GAAc,OAAV0I,EACFI,EAAMtB,SAAU,EA0NpB,SAAoBxF,EAAQ8G,GAC1B,GAAIA,EAAMzJ,MAAO,OAEjB,GAAIyJ,EAAMX,QAAS,CACjB,IAAIO,EAAQI,EAAMX,QAAQzI,MAEtBgJ,GAASA,EAAMlM,SACjBsM,EAAM1B,OAAO5I,KAAKkK,GAClBI,EAAMtM,QAAUsM,EAAM5B,WAAa,EAAIwB,EAAMlM,QAIjDsM,EAAMzJ,OAAQ,EAEVyJ,EAAMrB,KAIRsB,EAAa/G,IAGb8G,EAAMpB,cAAe,EAEhBoB,EAAMnB,kBACTmB,EAAMnB,iBAAkB,EACxBqB,EAAchH,KAlPhBiH,CAAWjH,EAAQ8G,QAKnB,GAFKF,IAAgBC,EAmDzB,SAAsBC,EAAOJ,GAC3B,IAAIG,EA/PiBvK,EAiQFoK,EAhQZ3C,EAAOmD,SAAS5K,IAAQA,aAAe0H,GAgQA,iBAAV0C,QAAgChL,IAAVgL,GAAwBI,EAAM5B,aACtF2B,EAAK,IAAIlC,EAAqB,QAAS,CAAC,SAAU,SAAU,cAAe+B,IAlQ/E,IAAuBpK,EAqQrB,OAAOuK,EA1DqBM,CAAaL,EAAOJ,IAE1CG,EACF7G,EAAOoH,KAAK,QAASP,QAChB,GAAIC,EAAM5B,YAAcwB,GAASA,EAAMlM,OAAS,EAKrD,GAJqB,iBAAVkM,GAAuBI,EAAM5B,YAAcrL,OAAOwN,eAAeX,KAAW3C,EAAOnK,YAC5F8M,EArNR,SAA6BA,GAC3B,OAAO3C,EAAOuD,KAAKZ,GAoNLa,CAAoBb,IAG1BC,EACEG,EAAMhG,WAAYd,EAAOoH,KAAK,QAAS,IAAItC,GAA2C0C,EAASxH,EAAQ8G,EAAOJ,GAAO,QACpH,GAAII,EAAMzJ,MACf2C,EAAOoH,KAAK,QAAS,IAAIxC,OACpB,IAAIkC,EAAM7I,UACf,OAAO,EAEP6I,EAAMtB,SAAU,EAEZsB,EAAMX,UAAYC,GACpBM,EAAQI,EAAMX,QAAQsB,MAAMf,GACxBI,EAAM5B,YAA+B,IAAjBwB,EAAMlM,OAAcgN,EAASxH,EAAQ8G,EAAOJ,GAAO,GAAYgB,EAAc1H,EAAQ8G,IAE7GU,EAASxH,EAAQ8G,EAAOJ,GAAO,QAGzBC,IACVG,EAAMtB,SAAU,EAChBkC,EAAc1H,EAAQ8G,IAO1B,OAAQA,EAAMzJ,QAAUyJ,EAAMtM,OAASsM,EAAMhJ,eAAkC,IAAjBgJ,EAAMtM,QAGtE,SAASgN,EAASxH,EAAQ8G,EAAOJ,EAAOC,GAClCG,EAAMvB,SAA4B,IAAjBuB,EAAMtM,SAAiBsM,EAAMrB,MAChDqB,EAAMb,WAAa,EACnBjG,EAAOoH,KAAK,OAAQV,KAGpBI,EAAMtM,QAAUsM,EAAM5B,WAAa,EAAIwB,EAAMlM,OACzCmM,EAAYG,EAAM1B,OAAOuC,QAAQjB,GAAYI,EAAM1B,OAAO5I,KAAKkK,GAC/DI,EAAMpB,cAAcqB,EAAa/G,IAGvC0H,EAAc1H,EAAQ8G,GAvHxBjN,OAAO8D,eAAejB,EAAS9C,UAAW,YAAa,CAIrDgE,YAAY,EACZC,IAAK,WACH,YAA4BnC,IAAxBhC,KAAKsE,gBAIFtE,KAAKsE,eAAeC,WAE7BC,IAAK,SAAanD,GAGXrB,KAAKsE,iBAMVtE,KAAKsE,eAAeC,UAAYlD,MAGpC2B,EAAS9C,UAAU2M,QAAU/B,EAAY+B,QACzC7J,EAAS9C,UAAUgO,WAAapD,EAAYqD,UAE5CnL,EAAS9C,UAAU4M,SAAW,SAAUxF,EAAK8G,GAC3CA,EAAG9G,IAOLtE,EAAS9C,UAAU4C,KAAO,SAAUkK,EAAON,GACzC,IACIQ,EADAE,EAAQpN,KAAKsE,eAkBjB,OAfK8I,EAAM5B,WAYT0B,GAAiB,EAXI,iBAAVF,KACTN,EAAWA,GAAYU,EAAMd,mBAEZc,EAAMV,WACrBM,EAAQ3C,EAAOuD,KAAKZ,EAAON,GAC3BA,EAAW,IAGbQ,GAAiB,GAMdH,EAAiB/M,KAAMgN,EAAON,GAAU,EAAOQ,IAIxDlK,EAAS9C,UAAU+N,QAAU,SAAUjB,GACrC,OAAOD,EAAiB/M,KAAMgN,EAAO,MAAM,GAAM,IAyEnDhK,EAAS9C,UAAUmO,SAAW,WAC5B,OAAuC,IAAhCrO,KAAKsE,eAAeuH,SAI7B7I,EAAS9C,UAAUoO,YAAc,SAAUC,GAKzC,OAJK5D,IAAeA,EAAgB,EAAQ,IAAmBA,eAC/D3K,KAAKsE,eAAemI,QAAU,IAAI9B,EAAc4D,GAEhDvO,KAAKsE,eAAeoI,SAAW1M,KAAKsE,eAAemI,QAAQC,SACpD1M,MA0BT,SAASwO,EAAcC,EAAGrB,GACxB,OAAIqB,GAAK,GAAsB,IAAjBrB,EAAMtM,QAAgBsM,EAAMzJ,MAAc,EACpDyJ,EAAM5B,WAAmB,EAEzBiD,GAAMA,EAEJrB,EAAMvB,SAAWuB,EAAMtM,OAAesM,EAAM1B,OAAOgD,KAAKC,KAAK7N,OAAmBsM,EAAMtM,QAIxF2N,EAAIrB,EAAMhJ,gBAAegJ,EAAMhJ,cA9BrC,SAAiCqK,GAe/B,OAdIA,GAHQ,QAIVA,EAJU,SAQVA,IACAA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,GACXA,KAGKA,EAe4CG,CAAwBH,IACvEA,GAAKrB,EAAMtM,OAAe2N,EAEzBrB,EAAMzJ,MAKJyJ,EAAMtM,QAJXsM,EAAMpB,cAAe,EACd,IAuIX,SAASqB,EAAa/G,GACpB,IAAI8G,EAAQ9G,EAAOhC,eACnB8I,EAAMpB,cAAe,EAEhBoB,EAAMnB,kBACTzB,EAAM,eAAgB4C,EAAMvB,SAC5BuB,EAAMnB,iBAAkB,EACxBrI,EAAQC,SAASyJ,EAAehH,IAIpC,SAASgH,EAAchH,GACrB,IAAI8G,EAAQ9G,EAAOhC,eACnBkG,EAAM,gBAAiB4C,EAAM7I,UAAW6I,EAAMtM,OAAQsM,EAAMzJ,OAEvDyJ,EAAM7I,YAAc6I,EAAMtM,SAAUsM,EAAMzJ,OAC7C2C,EAAOoH,KAAK,YASdN,EAAMpB,cAAgBoB,EAAMvB,UAAYuB,EAAMzJ,OAASyJ,EAAMtM,QAAUsM,EAAMhJ,cAC7EyK,EAAKvI,GASP,SAAS0H,EAAc1H,EAAQ8G,GACxBA,EAAMZ,cACTY,EAAMZ,aAAc,EACpB5I,EAAQC,SAASiL,EAAgBxI,EAAQ8G,IAI7C,SAAS0B,EAAexI,EAAQ8G,GAwB9B,MAAQA,EAAMtB,UAAYsB,EAAMzJ,QAAUyJ,EAAMtM,OAASsM,EAAMhJ,eAAiBgJ,EAAMvB,SAA4B,IAAjBuB,EAAMtM,SAAe,CACpH,IAAID,EAAMuM,EAAMtM,OAGhB,GAFA0J,EAAM,wBACNlE,EAAOqG,KAAK,GACR9L,IAAQuM,EAAMtM,OAChB,MAGJsM,EAAMZ,aAAc,EA6QtB,SAASuC,EAAwBhL,GAC/B,IAAIqJ,EAAQrJ,EAAKO,eACjB8I,EAAMlB,kBAAoBnI,EAAKiL,cAAc,YAAc,EAEvD5B,EAAMjB,kBAAoBiB,EAAMhB,OAGlCgB,EAAMvB,SAAU,EACP9H,EAAKiL,cAAc,QAAU,GACtCjL,EAAKkL,SAIT,SAASC,EAAiBnL,GACxByG,EAAM,4BACNzG,EAAK4I,KAAK,GA4BZ,SAASwC,EAAQ7I,EAAQ8G,GACvB5C,EAAM,SAAU4C,EAAMtB,SAEjBsB,EAAMtB,SACTxF,EAAOqG,KAAK,GAGdS,EAAMjB,iBAAkB,EACxB7F,EAAOoH,KAAK,UACZmB,EAAKvI,GACD8G,EAAMvB,UAAYuB,EAAMtB,SAASxF,EAAOqG,KAAK,GAgBnD,SAASkC,EAAKvI,GACZ,IAAI8G,EAAQ9G,EAAOhC,eAGnB,IAFAkG,EAAM,OAAQ4C,EAAMvB,SAEbuB,EAAMvB,SAA6B,OAAlBvF,EAAOqG,UA8HjC,SAASyC,EAASX,EAAGrB,GAEnB,OAAqB,IAAjBA,EAAMtM,OAAqB,MAE3BsM,EAAM5B,WAAY6D,EAAMjC,EAAM1B,OAAO3G,SAAkB0J,GAAKA,GAAKrB,EAAMtM,QAEtDuO,EAAfjC,EAAMX,QAAeW,EAAM1B,OAAOtK,KAAK,IAAqC,IAAxBgM,EAAM1B,OAAO5K,OAAoBsM,EAAM1B,OAAO4D,QAAmBlC,EAAM1B,OAAOxK,OAAOkM,EAAMtM,QACnJsM,EAAM1B,OAAO6D,SAGbF,EAAMjC,EAAM1B,OAAO8D,QAAQf,EAAGrB,EAAMX,SAE/B4C,GATP,IAAIA,EAYN,SAASI,EAAYnJ,GACnB,IAAI8G,EAAQ9G,EAAOhC,eACnBkG,EAAM,cAAe4C,EAAMhG,YAEtBgG,EAAMhG,aACTgG,EAAMzJ,OAAQ,EACdC,EAAQC,SAAS6L,EAAetC,EAAO9G,IAI3C,SAASoJ,EAActC,EAAO9G,GAC5BkE,EAAM,gBAAiB4C,EAAMhG,WAAYgG,EAAMtM,QAE1CsM,EAAMhG,YAA+B,IAAjBgG,EAAMtM,SAC7BsM,EAAMhG,YAAa,EACnBd,EAAOhD,UAAW,EAClBgD,EAAOoH,KAAK,QAIhB,SAASrL,EAAQsN,EAAIpK,GACnB,IAAK,IAAIvE,EAAI,EAAG4O,EAAID,EAAG7O,OAAQE,EAAI4O,EAAG5O,IACpC,GAAI2O,EAAG3O,KAAOuE,EAAG,OAAOvE,EAG1B,OAAQ,EAtsBVgC,EAAS9C,UAAUyM,KAAO,SAAU8B,GAClCjE,EAAM,OAAQiE,GACdA,EAAIoB,SAASpB,EAAG,IAChB,IAAIrB,EAAQpN,KAAKsE,eACbwL,EAAQrB,EAKZ,GAJU,IAANA,IAASrB,EAAMnB,iBAAkB,GAI3B,IAANwC,GAAWrB,EAAMpB,gBAA0C,IAAxBoB,EAAMhJ,cAAsBgJ,EAAMtM,QAAUsM,EAAMhJ,cAAgBgJ,EAAMtM,OAAS,IAAMsM,EAAMzJ,OAGlI,OAFA6G,EAAM,qBAAsB4C,EAAMtM,OAAQsM,EAAMzJ,OAC3B,IAAjByJ,EAAMtM,QAAgBsM,EAAMzJ,MAAO8L,EAAYzP,MAAWqN,EAAarN,MACpE,KAKT,GAAU,KAFVyO,EAAID,EAAcC,EAAGrB,KAENA,EAAMzJ,MAEnB,OADqB,IAAjByJ,EAAMtM,QAAc2O,EAAYzP,MAC7B,KAyBT,IA4BIqP,EA5BAU,EAAS3C,EAAMpB,aAgDnB,OA/CAxB,EAAM,gBAAiBuF,IAEF,IAAjB3C,EAAMtM,QAAgBsM,EAAMtM,OAAS2N,EAAIrB,EAAMhJ,gBAEjDoG,EAAM,6BADNuF,GAAS,GAMP3C,EAAMzJ,OAASyJ,EAAMtB,QAEvBtB,EAAM,mBADNuF,GAAS,GAEAA,IACTvF,EAAM,WACN4C,EAAMtB,SAAU,EAChBsB,EAAMrB,MAAO,EAEQ,IAAjBqB,EAAMtM,SAAcsM,EAAMpB,cAAe,GAE7ChM,KAAK4M,MAAMQ,EAAMhJ,eAEjBgJ,EAAMrB,MAAO,EAGRqB,EAAMtB,UAAS2C,EAAID,EAAcsB,EAAO1C,KAMnC,QAFDiC,EAAPZ,EAAI,EAASW,EAASX,EAAGrB,GAAkB,OAG7CA,EAAMpB,cAAe,EACrByC,EAAI,IAEJrB,EAAMtM,QAAU2N,EAChBrB,EAAMb,WAAa,GAGA,IAAjBa,EAAMtM,SAGHsM,EAAMzJ,QAAOyJ,EAAMpB,cAAe,GAEnC8D,IAAUrB,GAAKrB,EAAMzJ,OAAO8L,EAAYzP,OAGlC,OAARqP,GAAcrP,KAAK0N,KAAK,OAAQ2B,GAC7BA,GAqHTrM,EAAS9C,UAAU0M,MAAQ,SAAU6B,GACnCzO,KAAK0N,KAAK,QAAS,IAAIvC,EAA2B,aAGpDnI,EAAS9C,UAAU8P,KAAO,SAAUC,EAAMC,GACxC,IAAIC,EAAMnQ,KACNoN,EAAQpN,KAAKsE,eAEjB,OAAQ8I,EAAMxB,YACZ,KAAK,EACHwB,EAAMzB,MAAQsE,EACd,MAEF,KAAK,EACH7C,EAAMzB,MAAQ,CAACyB,EAAMzB,MAAOsE,GAC5B,MAEF,QACE7C,EAAMzB,MAAM7I,KAAKmN,GAIrB7C,EAAMxB,YAAc,EACpBpB,EAAM,wBAAyB4C,EAAMxB,WAAYsE,GACjD,IACIE,IADUF,IAA6B,IAAjBA,EAASlM,MAAkBiM,IAASrM,EAAQyM,QAAUJ,IAASrM,EAAQ0M,OAC7E7M,EAAQ8M,EAI5B,SAASC,EAASlN,EAAUmN,GAC1BjG,EAAM,YAEFlH,IAAa6M,GACXM,IAAwC,IAA1BA,EAAWC,aAC3BD,EAAWC,YAAa,EAoB5BlG,EAAM,WAENyF,EAAKlI,eAAe,QAASR,GAC7B0I,EAAKlI,eAAe,SAAUf,GAC9BiJ,EAAKlI,eAAe,QAAS4I,GAC7BV,EAAKlI,eAAe,QAASV,GAC7B4I,EAAKlI,eAAe,SAAUyI,GAC9BL,EAAIpI,eAAe,MAAOtE,GAC1B0M,EAAIpI,eAAe,MAAOwI,GAC1BJ,EAAIpI,eAAe,OAAQ6I,GAC3BC,GAAY,GAMRzD,EAAMb,YAAgB0D,EAAKvM,iBAAkBuM,EAAKvM,eAAeoN,WAAYH,KA9BnF,SAASlN,IACP+G,EAAM,SACNyF,EAAKjM,MAhBHoJ,EAAMhG,WAAYxD,EAAQC,SAASuM,GAAYD,EAAI3M,KAAK,MAAO4M,GACnEH,EAAKvI,GAAG,SAAU8I,GAsBlB,IAAIG,EAwFN,SAAqBR,GACnB,OAAO,WACL,IAAI/C,EAAQ+C,EAAI7L,eAChBkG,EAAM,cAAe4C,EAAMb,YACvBa,EAAMb,YAAYa,EAAMb,aAEH,IAArBa,EAAMb,YAAoBtC,EAAgBkG,EAAK,UACjD/C,EAAMvB,SAAU,EAChBgD,EAAKsB,KAhGKY,CAAYZ,GAC1BF,EAAKvI,GAAG,QAASiJ,GACjB,IAAIE,GAAY,EAwBhB,SAASD,EAAO5D,GACdxC,EAAM,UACN,IAAI6E,EAAMY,EAAKlC,MAAMf,GACrBxC,EAAM,aAAc6E,IAER,IAARA,KAKwB,IAArBjC,EAAMxB,YAAoBwB,EAAMzB,QAAUsE,GAAQ7C,EAAMxB,WAAa,IAAqC,IAAhCvJ,EAAQ+K,EAAMzB,MAAOsE,MAAkBY,IACpHrG,EAAM,8BAA+B4C,EAAMb,YAC3Ca,EAAMb,cAGR4D,EAAIa,SAMR,SAAS3J,EAAQ8F,GACf3C,EAAM,UAAW2C,GACjBoD,IACAN,EAAKlI,eAAe,QAASV,GACU,IAAnC4C,EAAgBgG,EAAM,UAAgBA,EAAKvC,KAAK,QAASP,GAM/D,SAAS5F,IACP0I,EAAKlI,eAAe,SAAUf,GAC9BuJ,IAKF,SAASvJ,IACPwD,EAAM,YACNyF,EAAKlI,eAAe,QAASR,GAC7BgJ,IAKF,SAASA,IACP/F,EAAM,UACN2F,EAAII,OAAON,GAWb,OA7DAE,EAAIzI,GAAG,OAAQkJ,GAljBjB,SAAyB1G,EAAS+G,EAAOC,GAGvC,GAAuC,mBAA5BhH,EAAQiH,gBAAgC,OAAOjH,EAAQiH,gBAAgBF,EAAOC,GAKpFhH,EAAQkH,SAAYlH,EAAQkH,QAAQH,GAAuCtQ,MAAMC,QAAQsJ,EAAQkH,QAAQH,IAAS/G,EAAQkH,QAAQH,GAAOhD,QAAQiD,GAAShH,EAAQkH,QAAQH,GAAS,CAACC,EAAIhH,EAAQkH,QAAQH,IAA5J/G,EAAQxC,GAAGuJ,EAAOC,GAykBnEC,CAAgBlB,EAAM,QAAS5I,GAO/B4I,EAAKzM,KAAK,QAAS+D,GAQnB0I,EAAKzM,KAAK,SAAUwD,GAQpBiJ,EAAKvC,KAAK,OAAQyC,GAEb/C,EAAMvB,UACTrB,EAAM,eACN2F,EAAIlB,UAGCgB,GAgBTjN,EAAS9C,UAAUqQ,OAAS,SAAUN,GACpC,IAAI7C,EAAQpN,KAAKsE,eACbmM,EAAa,CACfC,YAAY,GAGd,GAAyB,IAArBtD,EAAMxB,WAAkB,OAAO5L,KAEnC,GAAyB,IAArBoN,EAAMxB,WAER,OAAIqE,GAAQA,IAAS7C,EAAMzB,QACtBsE,IAAMA,EAAO7C,EAAMzB,OAExByB,EAAMzB,MAAQ,KACdyB,EAAMxB,WAAa,EACnBwB,EAAMvB,SAAU,EACZoE,GAAMA,EAAKvC,KAAK,SAAU1N,KAAMyQ,IANKzQ,KAW3C,IAAKiQ,EAAM,CAET,IAAIoB,EAAQjE,EAAMzB,MACd9K,EAAMuM,EAAMxB,WAChBwB,EAAMzB,MAAQ,KACdyB,EAAMxB,WAAa,EACnBwB,EAAMvB,SAAU,EAEhB,IAAK,IAAI7K,EAAI,EAAGA,EAAIH,EAAKG,IACvBqQ,EAAMrQ,GAAG0M,KAAK,SAAU1N,KAAM,CAC5B0Q,YAAY,IAIhB,OAAO1Q,KAIT,IAAIsR,EAAQjP,EAAQ+K,EAAMzB,MAAOsE,GACjC,OAAe,IAAXqB,IACJlE,EAAMzB,MAAM4F,OAAOD,EAAO,GAC1BlE,EAAMxB,YAAc,EACK,IAArBwB,EAAMxB,aAAkBwB,EAAMzB,MAAQyB,EAAMzB,MAAM,IACtDsE,EAAKvC,KAAK,SAAU1N,KAAMyQ,IAJDzQ,MAU3BgD,EAAS9C,UAAUwH,GAAK,SAAU8J,EAAIN,GACpC,IAAIO,EAAMrH,EAAOlK,UAAUwH,GAAG3H,KAAKC,KAAMwR,EAAIN,GACzC9D,EAAQpN,KAAKsE,eAuBjB,MArBW,SAAPkN,GAGFpE,EAAMlB,kBAAoBlM,KAAKgP,cAAc,YAAc,GAErC,IAAlB5B,EAAMvB,SAAmB7L,KAAKiP,UAClB,aAAPuC,IACJpE,EAAMhG,YAAegG,EAAMlB,oBAC9BkB,EAAMlB,kBAAoBkB,EAAMpB,cAAe,EAC/CoB,EAAMvB,SAAU,EAChBuB,EAAMnB,iBAAkB,EACxBzB,EAAM,cAAe4C,EAAMtM,OAAQsM,EAAMtB,SAErCsB,EAAMtM,OACRuM,EAAarN,MACHoN,EAAMtB,SAChBlI,EAAQC,SAASqL,EAAkBlP,QAKlCyR,GAGTzO,EAAS9C,UAAUwR,YAAc1O,EAAS9C,UAAUwH,GAEpD1E,EAAS9C,UAAU6H,eAAiB,SAAUyJ,EAAIN,GAChD,IAAIO,EAAMrH,EAAOlK,UAAU6H,eAAehI,KAAKC,KAAMwR,EAAIN,GAYzD,MAVW,aAAPM,GAOF5N,EAAQC,SAASkL,EAAyB/O,MAGrCyR,GAGTzO,EAAS9C,UAAUyR,mBAAqB,SAAUH,GAChD,IAAIC,EAAMrH,EAAOlK,UAAUyR,mBAAmB7K,MAAM9G,KAAM2G,WAY1D,MAVW,aAAP6K,QAA4BxP,IAAPwP,GAOvB5N,EAAQC,SAASkL,EAAyB/O,MAGrCyR,GAuBTzO,EAAS9C,UAAU+O,OAAS,WAC1B,IAAI7B,EAAQpN,KAAKsE,eAYjB,OAVK8I,EAAMvB,UACTrB,EAAM,UAIN4C,EAAMvB,SAAWuB,EAAMlB,kBAQ3B,SAAgB5F,EAAQ8G,GACjBA,EAAMjB,kBACTiB,EAAMjB,iBAAkB,EACxBvI,EAAQC,SAASsL,EAAS7I,EAAQ8G,IAVlC6B,CAAOjP,KAAMoN,IAGfA,EAAMhB,QAAS,EACRpM,MAuBTgD,EAAS9C,UAAU8Q,MAAQ,WAUzB,OATAxG,EAAM,wBAAyBxK,KAAKsE,eAAeuH,UAEf,IAAhC7L,KAAKsE,eAAeuH,UACtBrB,EAAM,SACNxK,KAAKsE,eAAeuH,SAAU,EAC9B7L,KAAK0N,KAAK,UAGZ1N,KAAKsE,eAAe8H,QAAS,EACtBpM,MAeTgD,EAAS9C,UAAU0R,KAAO,SAAUtL,GAClC,IAAIuL,EAAQ7R,KAERoN,EAAQpN,KAAKsE,eACb8H,GAAS,EA0Bb,IAAK,IAAIpL,KAzBTsF,EAAOoB,GAAG,OAAO,WAGf,GAFA8C,EAAM,eAEF4C,EAAMX,UAAYW,EAAMzJ,MAAO,CACjC,IAAIqJ,EAAQI,EAAMX,QAAQzI,MACtBgJ,GAASA,EAAMlM,QAAQ+Q,EAAM/O,KAAKkK,GAGxC6E,EAAM/O,KAAK,SAEbwD,EAAOoB,GAAG,QAAQ,SAAUsF,IAC1BxC,EAAM,gBACF4C,EAAMX,UAASO,EAAQI,EAAMX,QAAQsB,MAAMf,IAE3CI,EAAM5B,YAAc,MAACwB,KAAyDI,EAAM5B,YAAgBwB,GAAUA,EAAMlM,UAE9G+Q,EAAM/O,KAAKkK,KAGnBZ,GAAS,EACT9F,EAAO0K,aAKG1K,OACItE,IAAZhC,KAAKgB,IAAyC,mBAAdsF,EAAOtF,KACzChB,KAAKgB,GAAK,SAAoBmC,GAC5B,OAAO,WACL,OAAOmD,EAAOnD,GAAQ2D,MAAMR,EAAQK,YAF9B,CAIR3F,IAKN,IAAK,IAAIyN,EAAI,EAAGA,EAAInD,EAAaxK,OAAQ2N,IACvCnI,EAAOoB,GAAG4D,EAAamD,GAAIzO,KAAK0N,KAAKoE,KAAK9R,KAAMsL,EAAamD,KAc/D,OATAzO,KAAK4M,MAAQ,SAAU6B,GACrBjE,EAAM,gBAAiBiE,GAEnBrC,IACFA,GAAS,EACT9F,EAAO2I,WAIJjP,MAGa,mBAAX+R,SACT/O,EAAS9C,UAAU6R,OAAOC,eAAiB,WAOzC,OANA3G,EAAwB,uCAEkBrJ,IAAtC4I,IACFA,EAAoC,EAAQ,MAGvCA,EAAkC5K,QAI7CG,OAAO8D,eAAejB,EAAS9C,UAAW,wBAAyB,CAIjEgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAKsE,eAAeF,iBAG/BjE,OAAO8D,eAAejB,EAAS9C,UAAW,iBAAkB,CAI1DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAKsE,gBAAkBtE,KAAKsE,eAAeoH,UAGtDvL,OAAO8D,eAAejB,EAAS9C,UAAW,kBAAmB,CAI3DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAKsE,eAAeuH,SAE7BrH,IAAK,SAAa4I,GACZpN,KAAKsE,iBACPtE,KAAKsE,eAAeuH,QAAUuB,MAKpCpK,EAASiP,UAAY7C,EACrBjP,OAAO8D,eAAejB,EAAS9C,UAAW,iBAAkB,CAI1DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAKsE,eAAexD,Y,wCC9gC/B0B,EAAOC,QAAU,EAAQ,IAAUuH,c,8BCAnC,YA+CA,SAASkI,EAAoBnO,EAAMuD,GACjC6K,EAAYpO,EAAMuD,GAClB8K,EAAYrO,GAGd,SAASqO,EAAYrO,GACfA,EAAKL,iBAAmBK,EAAKL,eAAe2I,WAC5CtI,EAAKO,iBAAmBP,EAAKO,eAAe+H,WAChDtI,EAAK2J,KAAK,SAsBZ,SAASyE,EAAYpO,EAAMuD,GACzBvD,EAAK2J,KAAK,QAASpG,GAGrB9E,EAAOC,QAAU,CACfoK,QAhFF,SAAiBvF,EAAK8G,GACpB,IAAIyD,EAAQ7R,KAERqS,EAAoBrS,KAAKsE,gBAAkBtE,KAAKsE,eAAeC,UAC/D+N,EAAoBtS,KAAK0D,gBAAkB1D,KAAK0D,eAAea,UAEnE,OAAI8N,GAAqBC,GACnBlE,EACFA,EAAG9G,IACMA,GAAStH,KAAK0D,gBAAmB1D,KAAK0D,eAAe6O,cAC9D3O,EAAQC,SAASsO,EAAanS,KAAMsH,GAG/BtH,OAKLA,KAAKsE,iBACPtE,KAAKsE,eAAeC,WAAY,GAI9BvE,KAAK0D,iBACP1D,KAAK0D,eAAea,WAAY,GAGlCvE,KAAK8M,SAASxF,GAAO,MAAM,SAAUA,IAC9B8G,GAAM9G,GACT1D,EAAQC,SAASqO,EAAqBL,EAAOvK,GAEzCuK,EAAMnO,iBACRmO,EAAMnO,eAAe6O,cAAe,IAE7BnE,GACTxK,EAAQC,SAASuO,EAAaP,GAC9BzD,EAAG9G,IAEH1D,EAAQC,SAASuO,EAAaP,MAI3B7R,OAuCPmO,UAzBF,WACMnO,KAAKsE,iBACPtE,KAAKsE,eAAeC,WAAY,EAChCvE,KAAKsE,eAAewH,SAAU,EAC9B9L,KAAKsE,eAAeX,OAAQ,EAC5B3D,KAAKsE,eAAe8C,YAAa,GAG/BpH,KAAK0D,iBACP1D,KAAK0D,eAAea,WAAY,EAChCvE,KAAK0D,eAAeC,OAAQ,EAC5B3D,KAAK0D,eAAe8O,QAAS,EAC7BxS,KAAK0D,eAAe+O,aAAc,EAClCzS,KAAK0D,eAAegP,aAAc,EAClC1S,KAAK0D,eAAewD,UAAW,EAC/BlH,KAAK0D,eAAe6O,cAAe,O,+CCvEvC,IAAII,EAAwB,EAAQ,KAAmBzT,MAAMyT,sBAsB7DnQ,EAAOC,QAAU,CACfsI,iBAjBF,SAA0BqC,EAAOhK,EAASwP,EAAWrH,GACnD,IAAIsH,EALN,SAA2BzP,EAASmI,EAAUqH,GAC5C,OAAgC,MAAzBxP,EAAQgB,cAAwBhB,EAAQgB,cAAgBmH,EAAWnI,EAAQwP,GAAa,KAIrFE,CAAkB1P,EAASmI,EAAUqH,GAE/C,GAAW,MAAPC,EAAa,CACf,IAAM/N,SAAS+N,IAAQ5N,KAAK8N,MAAMF,KAASA,GAAQA,EAAM,EAEvD,MAAM,IAAIF,EADCpH,EAAWqH,EAAY,gBACIC,GAGxC,OAAO5N,KAAK8N,MAAMF,GAIpB,OAAOzF,EAAM5B,WAAa,GAAK,S,8BCrBjC,cAqCA,SAASwH,EAAc5F,GACrB,IAAIyE,EAAQ7R,KAEZA,KAAKiT,KAAO,KACZjT,KAAKkT,MAAQ,KAEblT,KAAKmT,OAAS,YAmlBhB,SAAwBC,EAAShG,EAAO9F,GACtC,IAAI4L,EAAQE,EAAQF,MACpBE,EAAQF,MAAQ,KAEhB,KAAOA,GAAO,CACZ,IAAI9E,EAAK8E,EAAM1M,SACf4G,EAAMiG,YACNjF,EAAG9G,GACH4L,EAAQA,EAAMD,KAIhB7F,EAAMkG,mBAAmBL,KAAOG,EA9lB9BG,CAAe1B,EAAOzE,IAQ1B,IAAIrK,EA3BJP,EAAOC,QAAUQ,EA8BjBA,EAASuQ,cAAgBA,EAGzB,IAAIC,EAAe,CACjBC,UAAW,EAAQ,MAMjBtJ,EAAS,EAAQ,KAIjBC,EAAS,EAAQ,IAAUA,OAE3BC,EAAgB5F,EAAO6F,YAAc,aAUzC,IA8HIoJ,EA9HA7I,EAAc,EAAQ,KAGtBC,EADW,EAAQ,KACSA,iBAE5BC,EAAiB,EAAQ,KAAa9L,MACtC+L,EAAuBD,EAAeC,qBACtCE,EAA6BH,EAAeG,2BAC5CyI,EAAwB5I,EAAe4I,sBACvCC,EAAyB7I,EAAe6I,uBACxCC,EAAuB9I,EAAe8I,qBACtCC,EAAyB/I,EAAe+I,uBACxCC,EAA6BhJ,EAAegJ,2BAC5CC,EAAuBjJ,EAAeiJ,qBAI1C,SAASC,KAET,SAASV,EAAcpQ,EAASkD,EAAQiF,GACtCxI,EAASA,GAAU,EAAQ,KAC3BK,EAAUA,GAAW,GAMG,kBAAbmI,IAAwBA,EAAWjF,aAAkBvD,GAGhE/C,KAAKwL,aAAepI,EAAQoI,WACxBD,IAAUvL,KAAKwL,WAAaxL,KAAKwL,cAAgBpI,EAAQ+Q,oBAI7DnU,KAAKoE,cAAgB2G,EAAiB/K,KAAMoD,EAAS,wBAAyBmI,GAE9EvL,KAAKyS,aAAc,EAEnBzS,KAAK8Q,WAAY,EAEjB9Q,KAAKwS,QAAS,EAEdxS,KAAK2D,OAAQ,EAEb3D,KAAKkH,UAAW,EAEhBlH,KAAKuE,WAAY,EAIjB,IAAI6P,GAAqC,IAA1BhR,EAAQiR,cACvBrU,KAAKqU,eAAiBD,EAItBpU,KAAKsM,gBAAkBlJ,EAAQkJ,iBAAmB,OAIlDtM,KAAKc,OAAS,EAEdd,KAAKsU,SAAU,EAEftU,KAAKuU,OAAS,EAKdvU,KAAK+L,MAAO,EAIZ/L,KAAKwU,kBAAmB,EAExBxU,KAAKyU,QAAU,SAAUtH,IA2R3B,SAAiB7G,EAAQ6G,GACvB,IAAIC,EAAQ9G,EAAO5C,eACfqI,EAAOqB,EAAMrB,KACbqC,EAAKhB,EAAMsH,QACf,GAAkB,mBAAPtG,EAAmB,MAAM,IAAIwF,EAExC,GAbF,SAA4BxG,GAC1BA,EAAMkH,SAAU,EAChBlH,EAAMsH,QAAU,KAChBtH,EAAMtM,QAAUsM,EAAMuH,SACtBvH,EAAMuH,SAAW,EAQjBC,CAAmBxH,GACfD,GArCN,SAAsB7G,EAAQ8G,EAAOrB,EAAMoB,EAAIiB,KAC3ChB,EAAMiG,UAEJtH,GAGFnI,EAAQC,SAASuK,EAAIjB,GAGrBvJ,EAAQC,SAASgR,EAAavO,EAAQ8G,GACtC9G,EAAO5C,eAAe6O,cAAe,EACrCjM,EAAOoH,KAAK,QAASP,KAIrBiB,EAAGjB,GACH7G,EAAO5C,eAAe6O,cAAe,EACrCjM,EAAOoH,KAAK,QAASP,GAGrB0H,EAAYvO,EAAQ8G,IAiBd0H,CAAaxO,EAAQ8G,EAAOrB,EAAMoB,EAAIiB,OAAS,CAErD,IAAIlH,EAAW6N,EAAW3H,IAAU9G,EAAO/B,UAEtC2C,GAAakG,EAAMmH,QAAWnH,EAAMoH,mBAAoBpH,EAAM4H,iBACjEC,EAAY3O,EAAQ8G,GAGlBrB,EACFnI,EAAQC,SAASqR,EAAY5O,EAAQ8G,EAAOlG,EAAUkH,GAEtD8G,EAAW5O,EAAQ8G,EAAOlG,EAAUkH,IA3StCqG,CAAQnO,EAAQ6G,IAIlBnN,KAAK0U,QAAU,KAEf1U,KAAK2U,SAAW,EAChB3U,KAAKgV,gBAAkB,KACvBhV,KAAKmV,oBAAsB,KAG3BnV,KAAKqT,UAAY,EAGjBrT,KAAK0S,aAAc,EAEnB1S,KAAKuS,cAAe,EAEpBvS,KAAKqM,WAAkC,IAAtBjJ,EAAQiJ,UAEzBrM,KAAKoV,qBAAuB,EAG5BpV,KAAKsT,mBAAqB,IAAIN,EAAchT,MA4C9C,SAASiD,EAASG,GAUhB,IAAImI,EAAWvL,gBATf+C,EAASA,GAAU,EAAQ,MAU3B,IAAKwI,IAAaoI,EAAgB5T,KAAKkD,EAAUjD,MAAO,OAAO,IAAIiD,EAASG,GAC5EpD,KAAK0D,eAAiB,IAAI8P,EAAcpQ,EAASpD,KAAMuL,GAEvDvL,KAAKuD,UAAW,EAEZH,IAC2B,mBAAlBA,EAAQ2K,QAAsB/N,KAAKqV,OAASjS,EAAQ2K,OACjC,mBAAnB3K,EAAQkS,SAAuBtV,KAAKuV,QAAUnS,EAAQkS,QAClC,mBAApBlS,EAAQyJ,UAAwB7M,KAAK8M,SAAW1J,EAAQyJ,SACtC,mBAAlBzJ,EAAQoS,QAAsBxV,KAAKyV,OAASrS,EAAQoS,QAGjEpL,EAAOrK,KAAKC,MAwJd,SAAS0V,EAAQpP,EAAQ8G,EAAOkI,EAAQzU,EAAKmM,EAAON,EAAU0B,GAC5DhB,EAAMuH,SAAW9T,EACjBuM,EAAMsH,QAAUtG,EAChBhB,EAAMkH,SAAU,EAChBlH,EAAMrB,MAAO,EACTqB,EAAM7I,UAAW6I,EAAMqH,QAAQ,IAAIX,EAAqB,UAAmBwB,EAAQhP,EAAOiP,QAAQvI,EAAOI,EAAMqH,SAAcnO,EAAO+O,OAAOrI,EAAON,EAAUU,EAAMqH,SACtKrH,EAAMrB,MAAO,EAwDf,SAASmJ,EAAW5O,EAAQ8G,EAAOlG,EAAUkH,GACtClH,GASP,SAAsBZ,EAAQ8G,GACP,IAAjBA,EAAMtM,QAAgBsM,EAAM0D,YAC9B1D,EAAM0D,WAAY,EAClBxK,EAAOoH,KAAK,UAZCiI,CAAarP,EAAQ8G,GACpCA,EAAMiG,YACNjF,IACAyG,EAAYvO,EAAQ8G,GActB,SAAS6H,EAAY3O,EAAQ8G,GAC3BA,EAAMoH,kBAAmB,EACzB,IAAItB,EAAQ9F,EAAM4H,gBAElB,GAAI1O,EAAOiP,SAAWrC,GAASA,EAAMD,KAAM,CAEzC,IAAIrD,EAAIxC,EAAMgI,qBACV1J,EAAS,IAAI/K,MAAMiP,GACnBgG,EAASxI,EAAMkG,mBACnBsC,EAAO1C,MAAQA,EAIf,IAHA,IAAI2C,EAAQ,EACRC,GAAa,EAEV5C,GACLxH,EAAOmK,GAAS3C,EACXA,EAAM6C,QAAOD,GAAa,GAC/B5C,EAAQA,EAAMD,KACd4C,GAAS,EAGXnK,EAAOoK,WAAaA,EACpBJ,EAAQpP,EAAQ8G,GAAO,EAAMA,EAAMtM,OAAQ4K,EAAQ,GAAIkK,EAAOzC,QAG9D/F,EAAMiG,YACNjG,EAAM+H,oBAAsB,KAExBS,EAAO3C,MACT7F,EAAMkG,mBAAqBsC,EAAO3C,KAClC2C,EAAO3C,KAAO,MAEd7F,EAAMkG,mBAAqB,IAAIN,EAAc5F,GAG/CA,EAAMgI,qBAAuB,MACxB,CAEL,KAAOlC,GAAO,CACZ,IAAIlG,EAAQkG,EAAMlG,MACdN,EAAWwG,EAAMxG,SACjB0B,EAAK8E,EAAM1M,SASf,GAPAkP,EAAQpP,EAAQ8G,GAAO,EADbA,EAAM5B,WAAa,EAAIwB,EAAMlM,OACJkM,EAAON,EAAU0B,GACpD8E,EAAQA,EAAMD,KACd7F,EAAMgI,uBAKFhI,EAAMkH,QACR,MAIU,OAAVpB,IAAgB9F,EAAM+H,oBAAsB,MAGlD/H,EAAM4H,gBAAkB9B,EACxB9F,EAAMoH,kBAAmB,EA2C3B,SAASO,EAAW3H,GAClB,OAAOA,EAAMoF,QAA2B,IAAjBpF,EAAMtM,QAA0C,OAA1BsM,EAAM4H,kBAA6B5H,EAAMlG,WAAakG,EAAMkH,QAG3G,SAAS0B,EAAU1P,EAAQ8G,GACzB9G,EAAOmP,QAAO,SAAUnO,GACtB8F,EAAMiG,YAEF/L,GACFhB,EAAOoH,KAAK,QAASpG,GAGvB8F,EAAMsF,aAAc,EACpBpM,EAAOoH,KAAK,aACZmH,EAAYvO,EAAQ8G,MAiBxB,SAASyH,EAAYvO,EAAQ8G,GAC3B,IAAI6I,EAAOlB,EAAW3H,GAWtB,OATI6I,KAhBN,SAAmB3P,EAAQ8G,GACpBA,EAAMsF,aAAgBtF,EAAMqF,cACF,mBAAlBnM,EAAOmP,QAA0BrI,EAAM7I,WAKhD6I,EAAMsF,aAAc,EACpBpM,EAAOoH,KAAK,eALZN,EAAMiG,YACNjG,EAAMqF,aAAc,EACpB7O,EAAQC,SAASmS,EAAW1P,EAAQ8G,KAYtC8I,CAAU5P,EAAQ8G,GAEM,IAApBA,EAAMiG,YACRjG,EAAMlG,UAAW,EACjBZ,EAAOoH,KAAK,YAITuI,EA/gBT,EAAQ,GAAR,CAAoBhT,EAAUmH,GAuF9BoJ,EAActT,UAAUmE,UAAY,WAIlC,IAHA,IAAI8R,EAAUnW,KAAKgV,gBACfoB,EAAM,GAEHD,GACLC,EAAItT,KAAKqT,GACTA,EAAUA,EAAQlD,KAGpB,OAAOmD,GAGT,WACE,IACEjW,OAAO8D,eAAeuP,EAActT,UAAW,SAAU,CACvDiE,IAAKsP,EAAaC,WAAU,WAC1B,OAAO1T,KAAKqE,cACX,6EAAmF,aAExF,MAAOgS,KAPX,GAcsB,mBAAXtE,QAAyBA,OAAOuE,aAAiE,mBAA3CzR,SAAS3E,UAAU6R,OAAOuE,cACzF3C,EAAkB9O,SAAS3E,UAAU6R,OAAOuE,aAC5CnW,OAAO8D,eAAehB,EAAU8O,OAAOuE,YAAa,CAClDjV,MAAO,SAAekV,GACpB,QAAI5C,EAAgB5T,KAAKC,KAAMuW,IAC3BvW,OAASiD,IACNsT,GAAUA,EAAO7S,0BAA0B8P,OAItDG,EAAkB,SAAyB4C,GACzC,OAAOA,aAAkBvW,MA+B7BiD,EAAS/C,UAAU8P,KAAO,WACxBhQ,KAAK0N,KAAK,QAAS,IAAImG,IA+BzB5Q,EAAS/C,UAAU6N,MAAQ,SAAUf,EAAON,EAAU0B,GACpD,IA/MqBxL,EA+MjBwK,EAAQpN,KAAK0D,eACb2L,GAAM,EAEN0G,GAAS3I,EAAM5B,aAlNE5I,EAkN0BoK,EAjNxC3C,EAAOmD,SAAS5K,IAAQA,aAAe0H,GAkO9C,OAfIyL,IAAU1L,EAAOmD,SAASR,KAC5BA,EAzNJ,SAA6BA,GAC3B,OAAO3C,EAAOuD,KAAKZ,GAwNTa,CAAoBb,IAGN,mBAAbN,IACT0B,EAAK1B,EACLA,EAAW,MAGTqJ,EAAOrJ,EAAW,SAAmBA,IAAUA,EAAWU,EAAMd,iBAClD,mBAAP8B,IAAmBA,EAAK8F,GAC/B9G,EAAMoF,OA7CZ,SAAuBlM,EAAQ8H,GAC7B,IAAIjB,EAAK,IAAI6G,EAEb1N,EAAOoH,KAAK,QAASP,GACrBvJ,EAAQC,SAASuK,EAAIjB,GAyCHqJ,CAAcxW,KAAMoO,IAAa2H,GAnCrD,SAAoBzP,EAAQ8G,EAAOJ,EAAOoB,GACxC,IAAIjB,EAQJ,OANc,OAAVH,EACFG,EAAK,IAAI4G,EACiB,iBAAV/G,GAAuBI,EAAM5B,aAC7C2B,EAAK,IAAIlC,EAAqB,QAAS,CAAC,SAAU,UAAW+B,KAG3DG,IACF7G,EAAOoH,KAAK,QAASP,GACrBvJ,EAAQC,SAASuK,EAAIjB,IACd,GAuBmDsJ,CAAWzW,KAAMoN,EAAOJ,EAAOoB,MACzFhB,EAAMiG,YACNhE,EAwDJ,SAAuB/I,EAAQ8G,EAAO2I,EAAO/I,EAAON,EAAU0B,GAC5D,IAAK2H,EAAO,CACV,IAAIW,EAtBR,SAAqBtJ,EAAOJ,EAAON,GAC5BU,EAAM5B,aAAsC,IAAxB4B,EAAMiH,eAA4C,iBAAVrH,IAC/DA,EAAQ3C,EAAOuD,KAAKZ,EAAON,IAG7B,OAAOM,EAiBU2J,CAAYvJ,EAAOJ,EAAON,GAErCM,IAAU0J,IACZX,GAAQ,EACRrJ,EAAW,SACXM,EAAQ0J,GAIZ,IAAI7V,EAAMuM,EAAM5B,WAAa,EAAIwB,EAAMlM,OACvCsM,EAAMtM,QAAUD,EAChB,IAAIwO,EAAMjC,EAAMtM,OAASsM,EAAMhJ,cAE1BiL,IAAKjC,EAAM0D,WAAY,GAE5B,GAAI1D,EAAMkH,SAAWlH,EAAMmH,OAAQ,CACjC,IAAIqC,EAAOxJ,EAAM+H,oBACjB/H,EAAM+H,oBAAsB,CAC1BnI,MAAOA,EACPN,SAAUA,EACVqJ,MAAOA,EACPvP,SAAU4H,EACV6E,KAAM,MAGJ2D,EACFA,EAAK3D,KAAO7F,EAAM+H,oBAElB/H,EAAM4H,gBAAkB5H,EAAM+H,oBAGhC/H,EAAMgI,sBAAwB,OAE9BM,EAAQpP,EAAQ8G,GAAO,EAAOvM,EAAKmM,EAAON,EAAU0B,GAGtD,OAAOiB,EA9FCwH,CAAc7W,KAAMoN,EAAO2I,EAAO/I,EAAON,EAAU0B,IAEpDiB,GAGTpM,EAAS/C,UAAU4W,KAAO,WACxB9W,KAAK0D,eAAe6Q,UAGtBtR,EAAS/C,UAAU6W,OAAS,WAC1B,IAAI3J,EAAQpN,KAAK0D,eAEb0J,EAAMmH,SACRnH,EAAMmH,SACDnH,EAAMkH,SAAYlH,EAAMmH,QAAWnH,EAAMoH,mBAAoBpH,EAAM4H,iBAAiBC,EAAYjV,KAAMoN,KAI/GnK,EAAS/C,UAAU8W,mBAAqB,SAA4BtK,GAGlE,GADwB,iBAAbA,IAAuBA,EAAWA,EAASuK,iBAChD,CAAC,MAAO,OAAQ,QAAS,QAAS,SAAU,SAAU,OAAQ,QAAS,UAAW,WAAY,OAAO5U,SAASqK,EAAW,IAAIuK,gBAAkB,GAAI,MAAM,IAAIhD,EAAqBvH,GAExL,OADA1M,KAAK0D,eAAe4I,gBAAkBI,EAC/B1M,MAGTG,OAAO8D,eAAehB,EAAS/C,UAAW,iBAAkB,CAI1DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,gBAAkB1D,KAAK0D,eAAeW,eAYtDlE,OAAO8D,eAAehB,EAAS/C,UAAW,wBAAyB,CAIjEgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,eAAeU,iBA4L/BnB,EAAS/C,UAAUmV,OAAS,SAAUrI,EAAON,EAAU0B,GACrDA,EAAG,IAAIjD,EAA2B,cAGpClI,EAAS/C,UAAUqV,QAAU,KAE7BtS,EAAS/C,UAAU8D,IAAM,SAAUgJ,EAAON,EAAU0B,GAClD,IAAIhB,EAAQpN,KAAK0D,eAoBjB,MAlBqB,mBAAVsJ,GACToB,EAAKpB,EACLA,EAAQ,KACRN,EAAW,MACkB,mBAAbA,IAChB0B,EAAK1B,EACLA,EAAW,MAGTM,SAAuChN,KAAK+N,MAAMf,EAAON,GAEzDU,EAAMmH,SACRnH,EAAMmH,OAAS,EACfvU,KAAK+W,UAIF3J,EAAMoF,QA4Db,SAAqBlM,EAAQ8G,EAAOgB,GAClChB,EAAMoF,QAAS,EACfqC,EAAYvO,EAAQ8G,GAEhBgB,IACEhB,EAAMlG,SAAUtD,EAAQC,SAASuK,GAAS9H,EAAO9C,KAAK,SAAU4K,IAGtEhB,EAAMzJ,OAAQ,EACd2C,EAAO/C,UAAW,EArEC2T,CAAYlX,KAAMoN,EAAOgB,GACrCpO,MAGTG,OAAO8D,eAAehB,EAAS/C,UAAW,iBAAkB,CAI1DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,eAAe5C,UA6E/BX,OAAO8D,eAAehB,EAAS/C,UAAW,YAAa,CAIrDgE,YAAY,EACZC,IAAK,WACH,YAA4BnC,IAAxBhC,KAAK0D,gBAIF1D,KAAK0D,eAAea,WAE7BC,IAAK,SAAanD,GAGXrB,KAAK0D,iBAMV1D,KAAK0D,eAAea,UAAYlD,MAGpC4B,EAAS/C,UAAU2M,QAAU/B,EAAY+B,QACzC5J,EAAS/C,UAAUgO,WAAapD,EAAYqD,UAE5ClL,EAAS/C,UAAU4M,SAAW,SAAUxF,EAAK8G,GAC3CA,EAAG9G,M,qDC1mBL9E,EAAOC,QAAU0U,EAEjB,IAAInM,EAAiB,EAAQ,KAAa9L,MACtCiM,EAA6BH,EAAeG,2BAC5CyI,EAAwB5I,EAAe4I,sBACvCwD,EAAqCpM,EAAeoM,mCACpDC,EAA8BrM,EAAeqM,4BAE7CtU,EAAS,EAAQ,KAIrB,SAASuU,EAAenK,EAAIwB,GAC1B,IAAI4I,EAAKvX,KAAKwX,gBACdD,EAAGE,cAAe,EAClB,IAAIrJ,EAAKmJ,EAAG7C,QAEZ,GAAW,OAAPtG,EACF,OAAOpO,KAAK0N,KAAK,QAAS,IAAIkG,GAGhC2D,EAAGG,WAAa,KAChBH,EAAG7C,QAAU,KACD,MAAR/F,GACF3O,KAAK8C,KAAK6L,GACZP,EAAGjB,GACH,IAAIwK,EAAK3X,KAAKsE,eACdqT,EAAG7L,SAAU,GAET6L,EAAG3L,cAAgB2L,EAAG7W,OAAS6W,EAAGvT,gBACpCpE,KAAK4M,MAAM+K,EAAGvT,eAIlB,SAAS+S,EAAU/T,GACjB,KAAMpD,gBAAgBmX,GAAY,OAAO,IAAIA,EAAU/T,GACvDL,EAAOhD,KAAKC,KAAMoD,GAClBpD,KAAKwX,gBAAkB,CACrBF,eAAgBA,EAAexF,KAAK9R,MACpC4X,eAAe,EACfH,cAAc,EACd/C,QAAS,KACTgD,WAAY,KACZG,cAAe,MAGjB7X,KAAKsE,eAAe0H,cAAe,EAInChM,KAAKsE,eAAeyH,MAAO,EAEvB3I,IAC+B,mBAAtBA,EAAQ0U,YAA0B9X,KAAK+X,WAAa3U,EAAQ0U,WAC1C,mBAAlB1U,EAAQ4U,QAAsBhY,KAAKiY,OAAS7U,EAAQ4U,QAIjEhY,KAAK0H,GAAG,YAAawO,GAGvB,SAASA,IACP,IAAIrE,EAAQ7R,KAEe,mBAAhBA,KAAKiY,QAA0BjY,KAAKsE,eAAeC,UAK5D2T,EAAKlY,KAAM,KAAM,MAJjBA,KAAKiY,QAAO,SAAU9K,EAAIwB,GACxBuJ,EAAKrG,EAAO1E,EAAIwB,MA6DtB,SAASuJ,EAAK5R,EAAQ6G,EAAIwB,GACxB,GAAIxB,EAAI,OAAO7G,EAAOoH,KAAK,QAASP,GAMpC,GALY,MAARwB,GACFrI,EAAOxD,KAAK6L,GAIVrI,EAAO5C,eAAe5C,OAAQ,MAAM,IAAIuW,EAC5C,GAAI/Q,EAAOkR,gBAAgBC,aAAc,MAAM,IAAIL,EACnD,OAAO9Q,EAAOxD,KAAK,MA9HrB,EAAQ,GAAR,CAAoBqU,EAAWpU,GA+D/BoU,EAAUjX,UAAU4C,KAAO,SAAUkK,EAAON,GAE1C,OADA1M,KAAKwX,gBAAgBI,eAAgB,EAC9B7U,EAAO7C,UAAU4C,KAAK/C,KAAKC,KAAMgN,EAAON,IAajDyK,EAAUjX,UAAU6X,WAAa,SAAU/K,EAAON,EAAU0B,GAC1DA,EAAG,IAAIjD,EAA2B,kBAGpCgM,EAAUjX,UAAUmV,OAAS,SAAUrI,EAAON,EAAU0B,GACtD,IAAImJ,EAAKvX,KAAKwX,gBAKd,GAJAD,EAAG7C,QAAUtG,EACbmJ,EAAGG,WAAa1K,EAChBuK,EAAGM,cAAgBnL,GAEd6K,EAAGE,aAAc,CACpB,IAAIE,EAAK3X,KAAKsE,gBACViT,EAAGK,eAAiBD,EAAG3L,cAAgB2L,EAAG7W,OAAS6W,EAAGvT,gBAAepE,KAAK4M,MAAM+K,EAAGvT,iBAO3F+S,EAAUjX,UAAU0M,MAAQ,SAAU6B,GACpC,IAAI8I,EAAKvX,KAAKwX,gBAEQ,OAAlBD,EAAGG,YAAwBH,EAAGE,aAOhCF,EAAGK,eAAgB,GANnBL,EAAGE,cAAe,EAElBzX,KAAK+X,WAAWR,EAAGG,WAAYH,EAAGM,cAAeN,EAAGD,kBAQxDH,EAAUjX,UAAU4M,SAAW,SAAUxF,EAAK8G,GAC5CrL,EAAO7C,UAAU4M,SAAS/M,KAAKC,KAAMsH,GAAK,SAAU6Q,GAClD/J,EAAG+J,Q,8BC1LP,cAyBA,IAAIpV,EAHJP,EAAOC,QAAUO,EAMjBA,EAAS+G,cAAgBA,EAGhB,EAAQ,IAAUC,aAA3B,IAEIC,EAAkB,SAAyBC,EAAS/H,GACtD,OAAO+H,EAAQC,UAAUhI,GAAMrB,QAO7BsJ,EAAS,EAAQ,KAIjBC,EAAS,EAAQ,IAAUA,OAE3BC,EAAgB5F,EAAO6F,YAAc,aAYzC,IAEIC,EAFAC,EAAY,EAAQ,KAKtBD,EADEC,GAAaA,EAAUC,SACjBD,EAAUC,SAAS,UAEnB,aAKV,IAiBIC,EACAC,EAlBAC,EAAa,EAAQ,KAErBC,EAAc,EAAQ,KAGtBC,EADW,EAAQ,KACSA,iBAE5BC,EAAiB,EAAQ,KAAa9L,MACtC+L,EAAuBD,EAAeC,qBACtCC,EAA4BF,EAAeE,0BAC3CC,EAA6BH,EAAeG,2BAC5CC,EAAqCJ,EAAeI,mCAGpDC,EADY,EAAQ,KACgBA,wBAMxC,EAAQ,GAAR,CAAoBrI,EAAUoH,GAE9B,IAAIkB,EAAe,CAAC,QAAS,QAAS,UAAW,QAAS,UAa1D,SAASvB,EAAc3G,EAASkD,EAAQiF,GACtCxI,EAASA,GAAU,EAAQ,KAC3BK,EAAUA,GAAW,GAMG,kBAAbmI,IAAwBA,EAAWjF,aAAkBvD,GAGhE/C,KAAKwL,aAAepI,EAAQoI,WACxBD,IAAUvL,KAAKwL,WAAaxL,KAAKwL,cAAgBpI,EAAQqI,oBAG7DzL,KAAKoE,cAAgB2G,EAAiB/K,KAAMoD,EAAS,wBAAyBmI,GAI9EvL,KAAK0L,OAAS,IAAIb,EAClB7K,KAAKc,OAAS,EACdd,KAAK2L,MAAQ,KACb3L,KAAK4L,WAAa,EAClB5L,KAAK6L,QAAU,KACf7L,KAAK2D,OAAQ,EACb3D,KAAKoH,YAAa,EAClBpH,KAAK8L,SAAU,EAKf9L,KAAK+L,MAAO,EAGZ/L,KAAKgM,cAAe,EACpBhM,KAAKiM,iBAAkB,EACvBjM,KAAKkM,mBAAoB,EACzBlM,KAAKmM,iBAAkB,EACvBnM,KAAKoM,QAAS,EAEdpM,KAAKqM,WAAkC,IAAtBjJ,EAAQiJ,UAEzBrM,KAAKuE,WAAY,EAIjBvE,KAAKsM,gBAAkBlJ,EAAQkJ,iBAAmB,OAElDtM,KAAKuM,WAAa,EAElBvM,KAAKwM,aAAc,EACnBxM,KAAKyM,QAAU,KACfzM,KAAK0M,SAAW,KAEZtJ,EAAQsJ,WACL/B,IAAeA,EAAgB,EAAQ,IAAmBA,eAC/D3K,KAAKyM,QAAU,IAAI9B,EAAcvH,EAAQsJ,UACzC1M,KAAK0M,SAAWtJ,EAAQsJ,UAI5B,SAAS1J,EAASI,GAEhB,GADAL,EAASA,GAAU,EAAQ,OACrB/C,gBAAgBgD,GAAW,OAAO,IAAIA,EAASI,GAGrD,IAAImI,EAAWvL,gBAAgB+C,EAC/B/C,KAAKsE,eAAiB,IAAIyF,EAAc3G,EAASpD,KAAMuL,GAEvDvL,KAAKsD,UAAW,EAEZF,IAC0B,mBAAjBA,EAAQuJ,OAAqB3M,KAAK4M,MAAQxJ,EAAQuJ,MAC9B,mBAApBvJ,EAAQyJ,UAAwB7M,KAAK8M,SAAW1J,EAAQyJ,UAGrEzC,EAAOrK,KAAKC,MAiEd,SAAS+M,EAAiBzG,EAAQ0G,EAAON,EAAUO,EAAYC,GAC7D1C,EAAM,mBAAoBwC,GAC1B,IAMMG,EANFC,EAAQ9G,EAAOhC,eAEnB,GAAc,OAAV0I,EACFI,EAAMtB,SAAU,EA0NpB,SAAoBxF,EAAQ8G,GAC1B,GAAIA,EAAMzJ,MAAO,OAEjB,GAAIyJ,EAAMX,QAAS,CACjB,IAAIO,EAAQI,EAAMX,QAAQzI,MAEtBgJ,GAASA,EAAMlM,SACjBsM,EAAM1B,OAAO5I,KAAKkK,GAClBI,EAAMtM,QAAUsM,EAAM5B,WAAa,EAAIwB,EAAMlM,QAIjDsM,EAAMzJ,OAAQ,EAEVyJ,EAAMrB,KAIRsB,EAAa/G,IAGb8G,EAAMpB,cAAe,EAEhBoB,EAAMnB,kBACTmB,EAAMnB,iBAAkB,EACxBqB,EAAchH,KAlPhBiH,CAAWjH,EAAQ8G,QAKnB,GAFKF,IAAgBC,EAmDzB,SAAsBC,EAAOJ,GAC3B,IAAIG,EA/PiBvK,EAiQFoK,EAhQZ3C,EAAOmD,SAAS5K,IAAQA,aAAe0H,GAgQA,iBAAV0C,QAAgChL,IAAVgL,GAAwBI,EAAM5B,aACtF2B,EAAK,IAAIlC,EAAqB,QAAS,CAAC,SAAU,SAAU,cAAe+B,IAlQ/E,IAAuBpK,EAqQrB,OAAOuK,EA1DqBM,CAAaL,EAAOJ,IAE1CG,EACF7G,EAAOoH,KAAK,QAASP,QAChB,GAAIC,EAAM5B,YAAcwB,GAASA,EAAMlM,OAAS,EAKrD,GAJqB,iBAAVkM,GAAuBI,EAAM5B,YAAcrL,OAAOwN,eAAeX,KAAW3C,EAAOnK,YAC5F8M,EArNR,SAA6BA,GAC3B,OAAO3C,EAAOuD,KAAKZ,GAoNLa,CAAoBb,IAG1BC,EACEG,EAAMhG,WAAYd,EAAOoH,KAAK,QAAS,IAAItC,GAA2C0C,EAASxH,EAAQ8G,EAAOJ,GAAO,QACpH,GAAII,EAAMzJ,MACf2C,EAAOoH,KAAK,QAAS,IAAIxC,OACpB,IAAIkC,EAAM7I,UACf,OAAO,EAEP6I,EAAMtB,SAAU,EAEZsB,EAAMX,UAAYC,GACpBM,EAAQI,EAAMX,QAAQsB,MAAMf,GACxBI,EAAM5B,YAA+B,IAAjBwB,EAAMlM,OAAcgN,EAASxH,EAAQ8G,EAAOJ,GAAO,GAAYgB,EAAc1H,EAAQ8G,IAE7GU,EAASxH,EAAQ8G,EAAOJ,GAAO,QAGzBC,IACVG,EAAMtB,SAAU,EAChBkC,EAAc1H,EAAQ8G,IAO1B,OAAQA,EAAMzJ,QAAUyJ,EAAMtM,OAASsM,EAAMhJ,eAAkC,IAAjBgJ,EAAMtM,QAGtE,SAASgN,EAASxH,EAAQ8G,EAAOJ,EAAOC,GAClCG,EAAMvB,SAA4B,IAAjBuB,EAAMtM,SAAiBsM,EAAMrB,MAChDqB,EAAMb,WAAa,EACnBjG,EAAOoH,KAAK,OAAQV,KAGpBI,EAAMtM,QAAUsM,EAAM5B,WAAa,EAAIwB,EAAMlM,OACzCmM,EAAYG,EAAM1B,OAAOuC,QAAQjB,GAAYI,EAAM1B,OAAO5I,KAAKkK,GAC/DI,EAAMpB,cAAcqB,EAAa/G,IAGvC0H,EAAc1H,EAAQ8G,GAvHxBjN,OAAO8D,eAAejB,EAAS9C,UAAW,YAAa,CAIrDgE,YAAY,EACZC,IAAK,WACH,YAA4BnC,IAAxBhC,KAAKsE,gBAIFtE,KAAKsE,eAAeC,WAE7BC,IAAK,SAAanD,GAGXrB,KAAKsE,iBAMVtE,KAAKsE,eAAeC,UAAYlD,MAGpC2B,EAAS9C,UAAU2M,QAAU/B,EAAY+B,QACzC7J,EAAS9C,UAAUgO,WAAapD,EAAYqD,UAE5CnL,EAAS9C,UAAU4M,SAAW,SAAUxF,EAAK8G,GAC3CA,EAAG9G,IAOLtE,EAAS9C,UAAU4C,KAAO,SAAUkK,EAAON,GACzC,IACIQ,EADAE,EAAQpN,KAAKsE,eAkBjB,OAfK8I,EAAM5B,WAYT0B,GAAiB,EAXI,iBAAVF,KACTN,EAAWA,GAAYU,EAAMd,mBAEZc,EAAMV,WACrBM,EAAQ3C,EAAOuD,KAAKZ,EAAON,GAC3BA,EAAW,IAGbQ,GAAiB,GAMdH,EAAiB/M,KAAMgN,EAAON,GAAU,EAAOQ,IAIxDlK,EAAS9C,UAAU+N,QAAU,SAAUjB,GACrC,OAAOD,EAAiB/M,KAAMgN,EAAO,MAAM,GAAM,IAyEnDhK,EAAS9C,UAAUmO,SAAW,WAC5B,OAAuC,IAAhCrO,KAAKsE,eAAeuH,SAI7B7I,EAAS9C,UAAUoO,YAAc,SAAUC,GAKzC,OAJK5D,IAAeA,EAAgB,EAAQ,IAAmBA,eAC/D3K,KAAKsE,eAAemI,QAAU,IAAI9B,EAAc4D,GAEhDvO,KAAKsE,eAAeoI,SAAW1M,KAAKsE,eAAemI,QAAQC,SACpD1M,MA0BT,SAASwO,EAAcC,EAAGrB,GACxB,OAAIqB,GAAK,GAAsB,IAAjBrB,EAAMtM,QAAgBsM,EAAMzJ,MAAc,EACpDyJ,EAAM5B,WAAmB,EAEzBiD,GAAMA,EAEJrB,EAAMvB,SAAWuB,EAAMtM,OAAesM,EAAM1B,OAAOgD,KAAKC,KAAK7N,OAAmBsM,EAAMtM,QAIxF2N,EAAIrB,EAAMhJ,gBAAegJ,EAAMhJ,cA9BrC,SAAiCqK,GAe/B,OAdIA,GAHQ,QAIVA,EAJU,SAQVA,IACAA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,GACXA,KAGKA,EAe4CG,CAAwBH,IACvEA,GAAKrB,EAAMtM,OAAe2N,EAEzBrB,EAAMzJ,MAKJyJ,EAAMtM,QAJXsM,EAAMpB,cAAe,EACd,IAuIX,SAASqB,EAAa/G,GACpB,IAAI8G,EAAQ9G,EAAOhC,eACnB8I,EAAMpB,cAAe,EAEhBoB,EAAMnB,kBACTzB,EAAM,eAAgB4C,EAAMvB,SAC5BuB,EAAMnB,iBAAkB,EACxBrI,EAAQC,SAASyJ,EAAehH,IAIpC,SAASgH,EAAchH,GACrB,IAAI8G,EAAQ9G,EAAOhC,eACnBkG,EAAM,gBAAiB4C,EAAM7I,UAAW6I,EAAMtM,OAAQsM,EAAMzJ,OAEvDyJ,EAAM7I,YAAc6I,EAAMtM,SAAUsM,EAAMzJ,OAC7C2C,EAAOoH,KAAK,YASdN,EAAMpB,cAAgBoB,EAAMvB,UAAYuB,EAAMzJ,OAASyJ,EAAMtM,QAAUsM,EAAMhJ,cAC7EyK,EAAKvI,GASP,SAAS0H,EAAc1H,EAAQ8G,GACxBA,EAAMZ,cACTY,EAAMZ,aAAc,EACpB5I,EAAQC,SAASiL,EAAgBxI,EAAQ8G,IAI7C,SAAS0B,EAAexI,EAAQ8G,GAwB9B,MAAQA,EAAMtB,UAAYsB,EAAMzJ,QAAUyJ,EAAMtM,OAASsM,EAAMhJ,eAAiBgJ,EAAMvB,SAA4B,IAAjBuB,EAAMtM,SAAe,CACpH,IAAID,EAAMuM,EAAMtM,OAGhB,GAFA0J,EAAM,wBACNlE,EAAOqG,KAAK,GACR9L,IAAQuM,EAAMtM,OAChB,MAGJsM,EAAMZ,aAAc,EA6QtB,SAASuC,EAAwBhL,GAC/B,IAAIqJ,EAAQrJ,EAAKO,eACjB8I,EAAMlB,kBAAoBnI,EAAKiL,cAAc,YAAc,EAEvD5B,EAAMjB,kBAAoBiB,EAAMhB,OAGlCgB,EAAMvB,SAAU,EACP9H,EAAKiL,cAAc,QAAU,GACtCjL,EAAKkL,SAIT,SAASC,EAAiBnL,GACxByG,EAAM,4BACNzG,EAAK4I,KAAK,GA4BZ,SAASwC,EAAQ7I,EAAQ8G,GACvB5C,EAAM,SAAU4C,EAAMtB,SAEjBsB,EAAMtB,SACTxF,EAAOqG,KAAK,GAGdS,EAAMjB,iBAAkB,EACxB7F,EAAOoH,KAAK,UACZmB,EAAKvI,GACD8G,EAAMvB,UAAYuB,EAAMtB,SAASxF,EAAOqG,KAAK,GAgBnD,SAASkC,EAAKvI,GACZ,IAAI8G,EAAQ9G,EAAOhC,eAGnB,IAFAkG,EAAM,OAAQ4C,EAAMvB,SAEbuB,EAAMvB,SAA6B,OAAlBvF,EAAOqG,UA8HjC,SAASyC,EAASX,EAAGrB,GAEnB,OAAqB,IAAjBA,EAAMtM,OAAqB,MAE3BsM,EAAM5B,WAAY6D,EAAMjC,EAAM1B,OAAO3G,SAAkB0J,GAAKA,GAAKrB,EAAMtM,QAEtDuO,EAAfjC,EAAMX,QAAeW,EAAM1B,OAAOtK,KAAK,IAAqC,IAAxBgM,EAAM1B,OAAO5K,OAAoBsM,EAAM1B,OAAO4D,QAAmBlC,EAAM1B,OAAOxK,OAAOkM,EAAMtM,QACnJsM,EAAM1B,OAAO6D,SAGbF,EAAMjC,EAAM1B,OAAO8D,QAAQf,EAAGrB,EAAMX,SAE/B4C,GATP,IAAIA,EAYN,SAASI,EAAYnJ,GACnB,IAAI8G,EAAQ9G,EAAOhC,eACnBkG,EAAM,cAAe4C,EAAMhG,YAEtBgG,EAAMhG,aACTgG,EAAMzJ,OAAQ,EACdC,EAAQC,SAAS6L,EAAetC,EAAO9G,IAI3C,SAASoJ,EAActC,EAAO9G,GAC5BkE,EAAM,gBAAiB4C,EAAMhG,WAAYgG,EAAMtM,QAE1CsM,EAAMhG,YAA+B,IAAjBgG,EAAMtM,SAC7BsM,EAAMhG,YAAa,EACnBd,EAAOhD,UAAW,EAClBgD,EAAOoH,KAAK,QAIhB,SAASrL,EAAQsN,EAAIpK,GACnB,IAAK,IAAIvE,EAAI,EAAG4O,EAAID,EAAG7O,OAAQE,EAAI4O,EAAG5O,IACpC,GAAI2O,EAAG3O,KAAOuE,EAAG,OAAOvE,EAG1B,OAAQ,EAtsBVgC,EAAS9C,UAAUyM,KAAO,SAAU8B,GAClCjE,EAAM,OAAQiE,GACdA,EAAIoB,SAASpB,EAAG,IAChB,IAAIrB,EAAQpN,KAAKsE,eACbwL,EAAQrB,EAKZ,GAJU,IAANA,IAASrB,EAAMnB,iBAAkB,GAI3B,IAANwC,GAAWrB,EAAMpB,gBAA0C,IAAxBoB,EAAMhJ,cAAsBgJ,EAAMtM,QAAUsM,EAAMhJ,cAAgBgJ,EAAMtM,OAAS,IAAMsM,EAAMzJ,OAGlI,OAFA6G,EAAM,qBAAsB4C,EAAMtM,OAAQsM,EAAMzJ,OAC3B,IAAjByJ,EAAMtM,QAAgBsM,EAAMzJ,MAAO8L,EAAYzP,MAAWqN,EAAarN,MACpE,KAKT,GAAU,KAFVyO,EAAID,EAAcC,EAAGrB,KAENA,EAAMzJ,MAEnB,OADqB,IAAjByJ,EAAMtM,QAAc2O,EAAYzP,MAC7B,KAyBT,IA4BIqP,EA5BAU,EAAS3C,EAAMpB,aAgDnB,OA/CAxB,EAAM,gBAAiBuF,IAEF,IAAjB3C,EAAMtM,QAAgBsM,EAAMtM,OAAS2N,EAAIrB,EAAMhJ,gBAEjDoG,EAAM,6BADNuF,GAAS,GAMP3C,EAAMzJ,OAASyJ,EAAMtB,QAEvBtB,EAAM,mBADNuF,GAAS,GAEAA,IACTvF,EAAM,WACN4C,EAAMtB,SAAU,EAChBsB,EAAMrB,MAAO,EAEQ,IAAjBqB,EAAMtM,SAAcsM,EAAMpB,cAAe,GAE7ChM,KAAK4M,MAAMQ,EAAMhJ,eAEjBgJ,EAAMrB,MAAO,EAGRqB,EAAMtB,UAAS2C,EAAID,EAAcsB,EAAO1C,KAMnC,QAFDiC,EAAPZ,EAAI,EAASW,EAASX,EAAGrB,GAAkB,OAG7CA,EAAMpB,cAAe,EACrByC,EAAI,IAEJrB,EAAMtM,QAAU2N,EAChBrB,EAAMb,WAAa,GAGA,IAAjBa,EAAMtM,SAGHsM,EAAMzJ,QAAOyJ,EAAMpB,cAAe,GAEnC8D,IAAUrB,GAAKrB,EAAMzJ,OAAO8L,EAAYzP,OAGlC,OAARqP,GAAcrP,KAAK0N,KAAK,OAAQ2B,GAC7BA,GAqHTrM,EAAS9C,UAAU0M,MAAQ,SAAU6B,GACnCzO,KAAK0N,KAAK,QAAS,IAAIvC,EAA2B,aAGpDnI,EAAS9C,UAAU8P,KAAO,SAAUC,EAAMC,GACxC,IAAIC,EAAMnQ,KACNoN,EAAQpN,KAAKsE,eAEjB,OAAQ8I,EAAMxB,YACZ,KAAK,EACHwB,EAAMzB,MAAQsE,EACd,MAEF,KAAK,EACH7C,EAAMzB,MAAQ,CAACyB,EAAMzB,MAAOsE,GAC5B,MAEF,QACE7C,EAAMzB,MAAM7I,KAAKmN,GAIrB7C,EAAMxB,YAAc,EACpBpB,EAAM,wBAAyB4C,EAAMxB,WAAYsE,GACjD,IACIE,IADUF,IAA6B,IAAjBA,EAASlM,MAAkBiM,IAASrM,EAAQyM,QAAUJ,IAASrM,EAAQ0M,OAC7E7M,EAAQ8M,EAI5B,SAASC,EAASlN,EAAUmN,GAC1BjG,EAAM,YAEFlH,IAAa6M,GACXM,IAAwC,IAA1BA,EAAWC,aAC3BD,EAAWC,YAAa,EAoB5BlG,EAAM,WAENyF,EAAKlI,eAAe,QAASR,GAC7B0I,EAAKlI,eAAe,SAAUf,GAC9BiJ,EAAKlI,eAAe,QAAS4I,GAC7BV,EAAKlI,eAAe,QAASV,GAC7B4I,EAAKlI,eAAe,SAAUyI,GAC9BL,EAAIpI,eAAe,MAAOtE,GAC1B0M,EAAIpI,eAAe,MAAOwI,GAC1BJ,EAAIpI,eAAe,OAAQ6I,GAC3BC,GAAY,GAMRzD,EAAMb,YAAgB0D,EAAKvM,iBAAkBuM,EAAKvM,eAAeoN,WAAYH,KA9BnF,SAASlN,IACP+G,EAAM,SACNyF,EAAKjM,MAhBHoJ,EAAMhG,WAAYxD,EAAQC,SAASuM,GAAYD,EAAI3M,KAAK,MAAO4M,GACnEH,EAAKvI,GAAG,SAAU8I,GAsBlB,IAAIG,EAwFN,SAAqBR,GACnB,OAAO,WACL,IAAI/C,EAAQ+C,EAAI7L,eAChBkG,EAAM,cAAe4C,EAAMb,YACvBa,EAAMb,YAAYa,EAAMb,aAEH,IAArBa,EAAMb,YAAoBtC,EAAgBkG,EAAK,UACjD/C,EAAMvB,SAAU,EAChBgD,EAAKsB,KAhGKY,CAAYZ,GAC1BF,EAAKvI,GAAG,QAASiJ,GACjB,IAAIE,GAAY,EAwBhB,SAASD,EAAO5D,GACdxC,EAAM,UACN,IAAI6E,EAAMY,EAAKlC,MAAMf,GACrBxC,EAAM,aAAc6E,IAER,IAARA,KAKwB,IAArBjC,EAAMxB,YAAoBwB,EAAMzB,QAAUsE,GAAQ7C,EAAMxB,WAAa,IAAqC,IAAhCvJ,EAAQ+K,EAAMzB,MAAOsE,MAAkBY,IACpHrG,EAAM,8BAA+B4C,EAAMb,YAC3Ca,EAAMb,cAGR4D,EAAIa,SAMR,SAAS3J,EAAQ8F,GACf3C,EAAM,UAAW2C,GACjBoD,IACAN,EAAKlI,eAAe,QAASV,GACU,IAAnC4C,EAAgBgG,EAAM,UAAgBA,EAAKvC,KAAK,QAASP,GAM/D,SAAS5F,IACP0I,EAAKlI,eAAe,SAAUf,GAC9BuJ,IAKF,SAASvJ,IACPwD,EAAM,YACNyF,EAAKlI,eAAe,QAASR,GAC7BgJ,IAKF,SAASA,IACP/F,EAAM,UACN2F,EAAII,OAAON,GAWb,OA7DAE,EAAIzI,GAAG,OAAQkJ,GAljBjB,SAAyB1G,EAAS+G,EAAOC,GAGvC,GAAuC,mBAA5BhH,EAAQiH,gBAAgC,OAAOjH,EAAQiH,gBAAgBF,EAAOC,GAKpFhH,EAAQkH,SAAYlH,EAAQkH,QAAQH,GAAuCtQ,MAAMC,QAAQsJ,EAAQkH,QAAQH,IAAS/G,EAAQkH,QAAQH,GAAOhD,QAAQiD,GAAShH,EAAQkH,QAAQH,GAAS,CAACC,EAAIhH,EAAQkH,QAAQH,IAA5J/G,EAAQxC,GAAGuJ,EAAOC,GAykBnEC,CAAgBlB,EAAM,QAAS5I,GAO/B4I,EAAKzM,KAAK,QAAS+D,GAQnB0I,EAAKzM,KAAK,SAAUwD,GAQpBiJ,EAAKvC,KAAK,OAAQyC,GAEb/C,EAAMvB,UACTrB,EAAM,eACN2F,EAAIlB,UAGCgB,GAgBTjN,EAAS9C,UAAUqQ,OAAS,SAAUN,GACpC,IAAI7C,EAAQpN,KAAKsE,eACbmM,EAAa,CACfC,YAAY,GAGd,GAAyB,IAArBtD,EAAMxB,WAAkB,OAAO5L,KAEnC,GAAyB,IAArBoN,EAAMxB,WAER,OAAIqE,GAAQA,IAAS7C,EAAMzB,QACtBsE,IAAMA,EAAO7C,EAAMzB,OAExByB,EAAMzB,MAAQ,KACdyB,EAAMxB,WAAa,EACnBwB,EAAMvB,SAAU,EACZoE,GAAMA,EAAKvC,KAAK,SAAU1N,KAAMyQ,IANKzQ,KAW3C,IAAKiQ,EAAM,CAET,IAAIoB,EAAQjE,EAAMzB,MACd9K,EAAMuM,EAAMxB,WAChBwB,EAAMzB,MAAQ,KACdyB,EAAMxB,WAAa,EACnBwB,EAAMvB,SAAU,EAEhB,IAAK,IAAI7K,EAAI,EAAGA,EAAIH,EAAKG,IACvBqQ,EAAMrQ,GAAG0M,KAAK,SAAU1N,KAAM,CAC5B0Q,YAAY,IAIhB,OAAO1Q,KAIT,IAAIsR,EAAQjP,EAAQ+K,EAAMzB,MAAOsE,GACjC,OAAe,IAAXqB,IACJlE,EAAMzB,MAAM4F,OAAOD,EAAO,GAC1BlE,EAAMxB,YAAc,EACK,IAArBwB,EAAMxB,aAAkBwB,EAAMzB,MAAQyB,EAAMzB,MAAM,IACtDsE,EAAKvC,KAAK,SAAU1N,KAAMyQ,IAJDzQ,MAU3BgD,EAAS9C,UAAUwH,GAAK,SAAU8J,EAAIN,GACpC,IAAIO,EAAMrH,EAAOlK,UAAUwH,GAAG3H,KAAKC,KAAMwR,EAAIN,GACzC9D,EAAQpN,KAAKsE,eAuBjB,MArBW,SAAPkN,GAGFpE,EAAMlB,kBAAoBlM,KAAKgP,cAAc,YAAc,GAErC,IAAlB5B,EAAMvB,SAAmB7L,KAAKiP,UAClB,aAAPuC,IACJpE,EAAMhG,YAAegG,EAAMlB,oBAC9BkB,EAAMlB,kBAAoBkB,EAAMpB,cAAe,EAC/CoB,EAAMvB,SAAU,EAChBuB,EAAMnB,iBAAkB,EACxBzB,EAAM,cAAe4C,EAAMtM,OAAQsM,EAAMtB,SAErCsB,EAAMtM,OACRuM,EAAarN,MACHoN,EAAMtB,SAChBlI,EAAQC,SAASqL,EAAkBlP,QAKlCyR,GAGTzO,EAAS9C,UAAUwR,YAAc1O,EAAS9C,UAAUwH,GAEpD1E,EAAS9C,UAAU6H,eAAiB,SAAUyJ,EAAIN,GAChD,IAAIO,EAAMrH,EAAOlK,UAAU6H,eAAehI,KAAKC,KAAMwR,EAAIN,GAYzD,MAVW,aAAPM,GAOF5N,EAAQC,SAASkL,EAAyB/O,MAGrCyR,GAGTzO,EAAS9C,UAAUyR,mBAAqB,SAAUH,GAChD,IAAIC,EAAMrH,EAAOlK,UAAUyR,mBAAmB7K,MAAM9G,KAAM2G,WAY1D,MAVW,aAAP6K,QAA4BxP,IAAPwP,GAOvB5N,EAAQC,SAASkL,EAAyB/O,MAGrCyR,GAuBTzO,EAAS9C,UAAU+O,OAAS,WAC1B,IAAI7B,EAAQpN,KAAKsE,eAYjB,OAVK8I,EAAMvB,UACTrB,EAAM,UAIN4C,EAAMvB,SAAWuB,EAAMlB,kBAQ3B,SAAgB5F,EAAQ8G,GACjBA,EAAMjB,kBACTiB,EAAMjB,iBAAkB,EACxBvI,EAAQC,SAASsL,EAAS7I,EAAQ8G,IAVlC6B,CAAOjP,KAAMoN,IAGfA,EAAMhB,QAAS,EACRpM,MAuBTgD,EAAS9C,UAAU8Q,MAAQ,WAUzB,OATAxG,EAAM,wBAAyBxK,KAAKsE,eAAeuH,UAEf,IAAhC7L,KAAKsE,eAAeuH,UACtBrB,EAAM,SACNxK,KAAKsE,eAAeuH,SAAU,EAC9B7L,KAAK0N,KAAK,UAGZ1N,KAAKsE,eAAe8H,QAAS,EACtBpM,MAeTgD,EAAS9C,UAAU0R,KAAO,SAAUtL,GAClC,IAAIuL,EAAQ7R,KAERoN,EAAQpN,KAAKsE,eACb8H,GAAS,EA0Bb,IAAK,IAAIpL,KAzBTsF,EAAOoB,GAAG,OAAO,WAGf,GAFA8C,EAAM,eAEF4C,EAAMX,UAAYW,EAAMzJ,MAAO,CACjC,IAAIqJ,EAAQI,EAAMX,QAAQzI,MACtBgJ,GAASA,EAAMlM,QAAQ+Q,EAAM/O,KAAKkK,GAGxC6E,EAAM/O,KAAK,SAEbwD,EAAOoB,GAAG,QAAQ,SAAUsF,IAC1BxC,EAAM,gBACF4C,EAAMX,UAASO,EAAQI,EAAMX,QAAQsB,MAAMf,IAE3CI,EAAM5B,YAAc,MAACwB,KAAyDI,EAAM5B,YAAgBwB,GAAUA,EAAMlM,UAE9G+Q,EAAM/O,KAAKkK,KAGnBZ,GAAS,EACT9F,EAAO0K,aAKG1K,OACItE,IAAZhC,KAAKgB,IAAyC,mBAAdsF,EAAOtF,KACzChB,KAAKgB,GAAK,SAAoBmC,GAC5B,OAAO,WACL,OAAOmD,EAAOnD,GAAQ2D,MAAMR,EAAQK,YAF9B,CAIR3F,IAKN,IAAK,IAAIyN,EAAI,EAAGA,EAAInD,EAAaxK,OAAQ2N,IACvCnI,EAAOoB,GAAG4D,EAAamD,GAAIzO,KAAK0N,KAAKoE,KAAK9R,KAAMsL,EAAamD,KAc/D,OATAzO,KAAK4M,MAAQ,SAAU6B,GACrBjE,EAAM,gBAAiBiE,GAEnBrC,IACFA,GAAS,EACT9F,EAAO2I,WAIJjP,MAGa,mBAAX+R,SACT/O,EAAS9C,UAAU6R,OAAOC,eAAiB,WAOzC,OANA3G,EAAwB,uCAEkBrJ,IAAtC4I,IACFA,EAAoC,EAAQ,MAGvCA,EAAkC5K,QAI7CG,OAAO8D,eAAejB,EAAS9C,UAAW,wBAAyB,CAIjEgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAKsE,eAAeF,iBAG/BjE,OAAO8D,eAAejB,EAAS9C,UAAW,iBAAkB,CAI1DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAKsE,gBAAkBtE,KAAKsE,eAAeoH,UAGtDvL,OAAO8D,eAAejB,EAAS9C,UAAW,kBAAmB,CAI3DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAKsE,eAAeuH,SAE7BrH,IAAK,SAAa4I,GACZpN,KAAKsE,iBACPtE,KAAKsE,eAAeuH,QAAUuB,MAKpCpK,EAASiP,UAAY7C,EACrBjP,OAAO8D,eAAejB,EAAS9C,UAAW,iBAAkB,CAI1DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAKsE,eAAexD,Y,wCC9gC/B0B,EAAOC,QAAU,EAAQ,IAAUuH,c,8BCAnC,YA+CA,SAASkI,EAAoBnO,EAAMuD,GACjC6K,EAAYpO,EAAMuD,GAClB8K,EAAYrO,GAGd,SAASqO,EAAYrO,GACfA,EAAKL,iBAAmBK,EAAKL,eAAe2I,WAC5CtI,EAAKO,iBAAmBP,EAAKO,eAAe+H,WAChDtI,EAAK2J,KAAK,SAsBZ,SAASyE,EAAYpO,EAAMuD,GACzBvD,EAAK2J,KAAK,QAASpG,GAGrB9E,EAAOC,QAAU,CACfoK,QAhFF,SAAiBvF,EAAK8G,GACpB,IAAIyD,EAAQ7R,KAERqS,EAAoBrS,KAAKsE,gBAAkBtE,KAAKsE,eAAeC,UAC/D+N,EAAoBtS,KAAK0D,gBAAkB1D,KAAK0D,eAAea,UAEnE,OAAI8N,GAAqBC,GACnBlE,EACFA,EAAG9G,IACMA,GAAStH,KAAK0D,gBAAmB1D,KAAK0D,eAAe6O,cAC9D3O,EAAQC,SAASsO,EAAanS,KAAMsH,GAG/BtH,OAKLA,KAAKsE,iBACPtE,KAAKsE,eAAeC,WAAY,GAI9BvE,KAAK0D,iBACP1D,KAAK0D,eAAea,WAAY,GAGlCvE,KAAK8M,SAASxF,GAAO,MAAM,SAAUA,IAC9B8G,GAAM9G,GACT1D,EAAQC,SAASqO,EAAqBL,EAAOvK,GAEzCuK,EAAMnO,iBACRmO,EAAMnO,eAAe6O,cAAe,IAE7BnE,GACTxK,EAAQC,SAASuO,EAAaP,GAC9BzD,EAAG9G,IAEH1D,EAAQC,SAASuO,EAAaP,MAI3B7R,OAuCPmO,UAzBF,WACMnO,KAAKsE,iBACPtE,KAAKsE,eAAeC,WAAY,EAChCvE,KAAKsE,eAAewH,SAAU,EAC9B9L,KAAKsE,eAAeX,OAAQ,EAC5B3D,KAAKsE,eAAe8C,YAAa,GAG/BpH,KAAK0D,iBACP1D,KAAK0D,eAAea,WAAY,EAChCvE,KAAK0D,eAAeC,OAAQ,EAC5B3D,KAAK0D,eAAe8O,QAAS,EAC7BxS,KAAK0D,eAAe+O,aAAc,EAClCzS,KAAK0D,eAAegP,aAAc,EAClC1S,KAAK0D,eAAewD,UAAW,EAC/BlH,KAAK0D,eAAe6O,cAAe,O,+CCvEvC,IAAII,EAAwB,EAAQ,KAAmBzT,MAAMyT,sBAsB7DnQ,EAAOC,QAAU,CACfsI,iBAjBF,SAA0BqC,EAAOhK,EAASwP,EAAWrH,GACnD,IAAIsH,EALN,SAA2BzP,EAASmI,EAAUqH,GAC5C,OAAgC,MAAzBxP,EAAQgB,cAAwBhB,EAAQgB,cAAgBmH,EAAWnI,EAAQwP,GAAa,KAIrFE,CAAkB1P,EAASmI,EAAUqH,GAE/C,GAAW,MAAPC,EAAa,CACf,IAAM/N,SAAS+N,IAAQ5N,KAAK8N,MAAMF,KAASA,GAAQA,EAAM,EAEvD,MAAM,IAAIF,EADCpH,EAAWqH,EAAY,gBACIC,GAGxC,OAAO5N,KAAK8N,MAAMF,GAIpB,OAAOzF,EAAM5B,WAAa,GAAK,S,8BCrBjC,cAqCA,SAASwH,EAAc5F,GACrB,IAAIyE,EAAQ7R,KAEZA,KAAKiT,KAAO,KACZjT,KAAKkT,MAAQ,KAEblT,KAAKmT,OAAS,YAmlBhB,SAAwBC,EAAShG,EAAO9F,GACtC,IAAI4L,EAAQE,EAAQF,MACpBE,EAAQF,MAAQ,KAEhB,KAAOA,GAAO,CACZ,IAAI9E,EAAK8E,EAAM1M,SACf4G,EAAMiG,YACNjF,EAAG9G,GACH4L,EAAQA,EAAMD,KAIhB7F,EAAMkG,mBAAmBL,KAAOG,EA9lB9BG,CAAe1B,EAAOzE,IAQ1B,IAAIrK,EA3BJP,EAAOC,QAAUQ,EA8BjBA,EAASuQ,cAAgBA,EAGzB,IAAIC,EAAe,CACjBC,UAAW,EAAQ,MAMjBtJ,EAAS,EAAQ,KAIjBC,EAAS,EAAQ,IAAUA,OAE3BC,EAAgB5F,EAAO6F,YAAc,aAUzC,IA8HIoJ,EA9HA7I,EAAc,EAAQ,KAGtBC,EADW,EAAQ,KACSA,iBAE5BC,EAAiB,EAAQ,KAAa9L,MACtC+L,EAAuBD,EAAeC,qBACtCE,EAA6BH,EAAeG,2BAC5CyI,EAAwB5I,EAAe4I,sBACvCC,EAAyB7I,EAAe6I,uBACxCC,EAAuB9I,EAAe8I,qBACtCC,EAAyB/I,EAAe+I,uBACxCC,EAA6BhJ,EAAegJ,2BAC5CC,EAAuBjJ,EAAeiJ,qBAI1C,SAASC,KAET,SAASV,EAAcpQ,EAASkD,EAAQiF,GACtCxI,EAASA,GAAU,EAAQ,KAC3BK,EAAUA,GAAW,GAMG,kBAAbmI,IAAwBA,EAAWjF,aAAkBvD,GAGhE/C,KAAKwL,aAAepI,EAAQoI,WACxBD,IAAUvL,KAAKwL,WAAaxL,KAAKwL,cAAgBpI,EAAQ+Q,oBAI7DnU,KAAKoE,cAAgB2G,EAAiB/K,KAAMoD,EAAS,wBAAyBmI,GAE9EvL,KAAKyS,aAAc,EAEnBzS,KAAK8Q,WAAY,EAEjB9Q,KAAKwS,QAAS,EAEdxS,KAAK2D,OAAQ,EAEb3D,KAAKkH,UAAW,EAEhBlH,KAAKuE,WAAY,EAIjB,IAAI6P,GAAqC,IAA1BhR,EAAQiR,cACvBrU,KAAKqU,eAAiBD,EAItBpU,KAAKsM,gBAAkBlJ,EAAQkJ,iBAAmB,OAIlDtM,KAAKc,OAAS,EAEdd,KAAKsU,SAAU,EAEftU,KAAKuU,OAAS,EAKdvU,KAAK+L,MAAO,EAIZ/L,KAAKwU,kBAAmB,EAExBxU,KAAKyU,QAAU,SAAUtH,IA2R3B,SAAiB7G,EAAQ6G,GACvB,IAAIC,EAAQ9G,EAAO5C,eACfqI,EAAOqB,EAAMrB,KACbqC,EAAKhB,EAAMsH,QACf,GAAkB,mBAAPtG,EAAmB,MAAM,IAAIwF,EAExC,GAbF,SAA4BxG,GAC1BA,EAAMkH,SAAU,EAChBlH,EAAMsH,QAAU,KAChBtH,EAAMtM,QAAUsM,EAAMuH,SACtBvH,EAAMuH,SAAW,EAQjBC,CAAmBxH,GACfD,GArCN,SAAsB7G,EAAQ8G,EAAOrB,EAAMoB,EAAIiB,KAC3ChB,EAAMiG,UAEJtH,GAGFnI,EAAQC,SAASuK,EAAIjB,GAGrBvJ,EAAQC,SAASgR,EAAavO,EAAQ8G,GACtC9G,EAAO5C,eAAe6O,cAAe,EACrCjM,EAAOoH,KAAK,QAASP,KAIrBiB,EAAGjB,GACH7G,EAAO5C,eAAe6O,cAAe,EACrCjM,EAAOoH,KAAK,QAASP,GAGrB0H,EAAYvO,EAAQ8G,IAiBd0H,CAAaxO,EAAQ8G,EAAOrB,EAAMoB,EAAIiB,OAAS,CAErD,IAAIlH,EAAW6N,EAAW3H,IAAU9G,EAAO/B,UAEtC2C,GAAakG,EAAMmH,QAAWnH,EAAMoH,mBAAoBpH,EAAM4H,iBACjEC,EAAY3O,EAAQ8G,GAGlBrB,EACFnI,EAAQC,SAASqR,EAAY5O,EAAQ8G,EAAOlG,EAAUkH,GAEtD8G,EAAW5O,EAAQ8G,EAAOlG,EAAUkH,IA3StCqG,CAAQnO,EAAQ6G,IAIlBnN,KAAK0U,QAAU,KAEf1U,KAAK2U,SAAW,EAChB3U,KAAKgV,gBAAkB,KACvBhV,KAAKmV,oBAAsB,KAG3BnV,KAAKqT,UAAY,EAGjBrT,KAAK0S,aAAc,EAEnB1S,KAAKuS,cAAe,EAEpBvS,KAAKqM,WAAkC,IAAtBjJ,EAAQiJ,UAEzBrM,KAAKoV,qBAAuB,EAG5BpV,KAAKsT,mBAAqB,IAAIN,EAAchT,MA4C9C,SAASiD,EAASG,GAUhB,IAAImI,EAAWvL,gBATf+C,EAASA,GAAU,EAAQ,MAU3B,IAAKwI,IAAaoI,EAAgB5T,KAAKkD,EAAUjD,MAAO,OAAO,IAAIiD,EAASG,GAC5EpD,KAAK0D,eAAiB,IAAI8P,EAAcpQ,EAASpD,KAAMuL,GAEvDvL,KAAKuD,UAAW,EAEZH,IAC2B,mBAAlBA,EAAQ2K,QAAsB/N,KAAKqV,OAASjS,EAAQ2K,OACjC,mBAAnB3K,EAAQkS,SAAuBtV,KAAKuV,QAAUnS,EAAQkS,QAClC,mBAApBlS,EAAQyJ,UAAwB7M,KAAK8M,SAAW1J,EAAQyJ,SACtC,mBAAlBzJ,EAAQoS,QAAsBxV,KAAKyV,OAASrS,EAAQoS,QAGjEpL,EAAOrK,KAAKC,MAwJd,SAAS0V,EAAQpP,EAAQ8G,EAAOkI,EAAQzU,EAAKmM,EAAON,EAAU0B,GAC5DhB,EAAMuH,SAAW9T,EACjBuM,EAAMsH,QAAUtG,EAChBhB,EAAMkH,SAAU,EAChBlH,EAAMrB,MAAO,EACTqB,EAAM7I,UAAW6I,EAAMqH,QAAQ,IAAIX,EAAqB,UAAmBwB,EAAQhP,EAAOiP,QAAQvI,EAAOI,EAAMqH,SAAcnO,EAAO+O,OAAOrI,EAAON,EAAUU,EAAMqH,SACtKrH,EAAMrB,MAAO,EAwDf,SAASmJ,EAAW5O,EAAQ8G,EAAOlG,EAAUkH,GACtClH,GASP,SAAsBZ,EAAQ8G,GACP,IAAjBA,EAAMtM,QAAgBsM,EAAM0D,YAC9B1D,EAAM0D,WAAY,EAClBxK,EAAOoH,KAAK,UAZCiI,CAAarP,EAAQ8G,GACpCA,EAAMiG,YACNjF,IACAyG,EAAYvO,EAAQ8G,GActB,SAAS6H,EAAY3O,EAAQ8G,GAC3BA,EAAMoH,kBAAmB,EACzB,IAAItB,EAAQ9F,EAAM4H,gBAElB,GAAI1O,EAAOiP,SAAWrC,GAASA,EAAMD,KAAM,CAEzC,IAAIrD,EAAIxC,EAAMgI,qBACV1J,EAAS,IAAI/K,MAAMiP,GACnBgG,EAASxI,EAAMkG,mBACnBsC,EAAO1C,MAAQA,EAIf,IAHA,IAAI2C,EAAQ,EACRC,GAAa,EAEV5C,GACLxH,EAAOmK,GAAS3C,EACXA,EAAM6C,QAAOD,GAAa,GAC/B5C,EAAQA,EAAMD,KACd4C,GAAS,EAGXnK,EAAOoK,WAAaA,EACpBJ,EAAQpP,EAAQ8G,GAAO,EAAMA,EAAMtM,OAAQ4K,EAAQ,GAAIkK,EAAOzC,QAG9D/F,EAAMiG,YACNjG,EAAM+H,oBAAsB,KAExBS,EAAO3C,MACT7F,EAAMkG,mBAAqBsC,EAAO3C,KAClC2C,EAAO3C,KAAO,MAEd7F,EAAMkG,mBAAqB,IAAIN,EAAc5F,GAG/CA,EAAMgI,qBAAuB,MACxB,CAEL,KAAOlC,GAAO,CACZ,IAAIlG,EAAQkG,EAAMlG,MACdN,EAAWwG,EAAMxG,SACjB0B,EAAK8E,EAAM1M,SASf,GAPAkP,EAAQpP,EAAQ8G,GAAO,EADbA,EAAM5B,WAAa,EAAIwB,EAAMlM,OACJkM,EAAON,EAAU0B,GACpD8E,EAAQA,EAAMD,KACd7F,EAAMgI,uBAKFhI,EAAMkH,QACR,MAIU,OAAVpB,IAAgB9F,EAAM+H,oBAAsB,MAGlD/H,EAAM4H,gBAAkB9B,EACxB9F,EAAMoH,kBAAmB,EA2C3B,SAASO,EAAW3H,GAClB,OAAOA,EAAMoF,QAA2B,IAAjBpF,EAAMtM,QAA0C,OAA1BsM,EAAM4H,kBAA6B5H,EAAMlG,WAAakG,EAAMkH,QAG3G,SAAS0B,EAAU1P,EAAQ8G,GACzB9G,EAAOmP,QAAO,SAAUnO,GACtB8F,EAAMiG,YAEF/L,GACFhB,EAAOoH,KAAK,QAASpG,GAGvB8F,EAAMsF,aAAc,EACpBpM,EAAOoH,KAAK,aACZmH,EAAYvO,EAAQ8G,MAiBxB,SAASyH,EAAYvO,EAAQ8G,GAC3B,IAAI6I,EAAOlB,EAAW3H,GAWtB,OATI6I,KAhBN,SAAmB3P,EAAQ8G,GACpBA,EAAMsF,aAAgBtF,EAAMqF,cACF,mBAAlBnM,EAAOmP,QAA0BrI,EAAM7I,WAKhD6I,EAAMsF,aAAc,EACpBpM,EAAOoH,KAAK,eALZN,EAAMiG,YACNjG,EAAMqF,aAAc,EACpB7O,EAAQC,SAASmS,EAAW1P,EAAQ8G,KAYtC8I,CAAU5P,EAAQ8G,GAEM,IAApBA,EAAMiG,YACRjG,EAAMlG,UAAW,EACjBZ,EAAOoH,KAAK,YAITuI,EA/gBT,EAAQ,GAAR,CAAoBhT,EAAUmH,GAuF9BoJ,EAActT,UAAUmE,UAAY,WAIlC,IAHA,IAAI8R,EAAUnW,KAAKgV,gBACfoB,EAAM,GAEHD,GACLC,EAAItT,KAAKqT,GACTA,EAAUA,EAAQlD,KAGpB,OAAOmD,GAGT,WACE,IACEjW,OAAO8D,eAAeuP,EAActT,UAAW,SAAU,CACvDiE,IAAKsP,EAAaC,WAAU,WAC1B,OAAO1T,KAAKqE,cACX,6EAAmF,aAExF,MAAOgS,KAPX,GAcsB,mBAAXtE,QAAyBA,OAAOuE,aAAiE,mBAA3CzR,SAAS3E,UAAU6R,OAAOuE,cACzF3C,EAAkB9O,SAAS3E,UAAU6R,OAAOuE,aAC5CnW,OAAO8D,eAAehB,EAAU8O,OAAOuE,YAAa,CAClDjV,MAAO,SAAekV,GACpB,QAAI5C,EAAgB5T,KAAKC,KAAMuW,IAC3BvW,OAASiD,IACNsT,GAAUA,EAAO7S,0BAA0B8P,OAItDG,EAAkB,SAAyB4C,GACzC,OAAOA,aAAkBvW,MA+B7BiD,EAAS/C,UAAU8P,KAAO,WACxBhQ,KAAK0N,KAAK,QAAS,IAAImG,IA+BzB5Q,EAAS/C,UAAU6N,MAAQ,SAAUf,EAAON,EAAU0B,GACpD,IA/MqBxL,EA+MjBwK,EAAQpN,KAAK0D,eACb2L,GAAM,EAEN0G,GAAS3I,EAAM5B,aAlNE5I,EAkN0BoK,EAjNxC3C,EAAOmD,SAAS5K,IAAQA,aAAe0H,GAkO9C,OAfIyL,IAAU1L,EAAOmD,SAASR,KAC5BA,EAzNJ,SAA6BA,GAC3B,OAAO3C,EAAOuD,KAAKZ,GAwNTa,CAAoBb,IAGN,mBAAbN,IACT0B,EAAK1B,EACLA,EAAW,MAGTqJ,EAAOrJ,EAAW,SAAmBA,IAAUA,EAAWU,EAAMd,iBAClD,mBAAP8B,IAAmBA,EAAK8F,GAC/B9G,EAAMoF,OA7CZ,SAAuBlM,EAAQ8H,GAC7B,IAAIjB,EAAK,IAAI6G,EAEb1N,EAAOoH,KAAK,QAASP,GACrBvJ,EAAQC,SAASuK,EAAIjB,GAyCHqJ,CAAcxW,KAAMoO,IAAa2H,GAnCrD,SAAoBzP,EAAQ8G,EAAOJ,EAAOoB,GACxC,IAAIjB,EAQJ,OANc,OAAVH,EACFG,EAAK,IAAI4G,EACiB,iBAAV/G,GAAuBI,EAAM5B,aAC7C2B,EAAK,IAAIlC,EAAqB,QAAS,CAAC,SAAU,UAAW+B,KAG3DG,IACF7G,EAAOoH,KAAK,QAASP,GACrBvJ,EAAQC,SAASuK,EAAIjB,IACd,GAuBmDsJ,CAAWzW,KAAMoN,EAAOJ,EAAOoB,MACzFhB,EAAMiG,YACNhE,EAwDJ,SAAuB/I,EAAQ8G,EAAO2I,EAAO/I,EAAON,EAAU0B,GAC5D,IAAK2H,EAAO,CACV,IAAIW,EAtBR,SAAqBtJ,EAAOJ,EAAON,GAC5BU,EAAM5B,aAAsC,IAAxB4B,EAAMiH,eAA4C,iBAAVrH,IAC/DA,EAAQ3C,EAAOuD,KAAKZ,EAAON,IAG7B,OAAOM,EAiBU2J,CAAYvJ,EAAOJ,EAAON,GAErCM,IAAU0J,IACZX,GAAQ,EACRrJ,EAAW,SACXM,EAAQ0J,GAIZ,IAAI7V,EAAMuM,EAAM5B,WAAa,EAAIwB,EAAMlM,OACvCsM,EAAMtM,QAAUD,EAChB,IAAIwO,EAAMjC,EAAMtM,OAASsM,EAAMhJ,cAE1BiL,IAAKjC,EAAM0D,WAAY,GAE5B,GAAI1D,EAAMkH,SAAWlH,EAAMmH,OAAQ,CACjC,IAAIqC,EAAOxJ,EAAM+H,oBACjB/H,EAAM+H,oBAAsB,CAC1BnI,MAAOA,EACPN,SAAUA,EACVqJ,MAAOA,EACPvP,SAAU4H,EACV6E,KAAM,MAGJ2D,EACFA,EAAK3D,KAAO7F,EAAM+H,oBAElB/H,EAAM4H,gBAAkB5H,EAAM+H,oBAGhC/H,EAAMgI,sBAAwB,OAE9BM,EAAQpP,EAAQ8G,GAAO,EAAOvM,EAAKmM,EAAON,EAAU0B,GAGtD,OAAOiB,EA9FCwH,CAAc7W,KAAMoN,EAAO2I,EAAO/I,EAAON,EAAU0B,IAEpDiB,GAGTpM,EAAS/C,UAAU4W,KAAO,WACxB9W,KAAK0D,eAAe6Q,UAGtBtR,EAAS/C,UAAU6W,OAAS,WAC1B,IAAI3J,EAAQpN,KAAK0D,eAEb0J,EAAMmH,SACRnH,EAAMmH,SACDnH,EAAMkH,SAAYlH,EAAMmH,QAAWnH,EAAMoH,mBAAoBpH,EAAM4H,iBAAiBC,EAAYjV,KAAMoN,KAI/GnK,EAAS/C,UAAU8W,mBAAqB,SAA4BtK,GAGlE,GADwB,iBAAbA,IAAuBA,EAAWA,EAASuK,iBAChD,CAAC,MAAO,OAAQ,QAAS,QAAS,SAAU,SAAU,OAAQ,QAAS,UAAW,WAAY,OAAO5U,SAASqK,EAAW,IAAIuK,gBAAkB,GAAI,MAAM,IAAIhD,EAAqBvH,GAExL,OADA1M,KAAK0D,eAAe4I,gBAAkBI,EAC/B1M,MAGTG,OAAO8D,eAAehB,EAAS/C,UAAW,iBAAkB,CAI1DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,gBAAkB1D,KAAK0D,eAAeW,eAYtDlE,OAAO8D,eAAehB,EAAS/C,UAAW,wBAAyB,CAIjEgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,eAAeU,iBA4L/BnB,EAAS/C,UAAUmV,OAAS,SAAUrI,EAAON,EAAU0B,GACrDA,EAAG,IAAIjD,EAA2B,cAGpClI,EAAS/C,UAAUqV,QAAU,KAE7BtS,EAAS/C,UAAU8D,IAAM,SAAUgJ,EAAON,EAAU0B,GAClD,IAAIhB,EAAQpN,KAAK0D,eAoBjB,MAlBqB,mBAAVsJ,GACToB,EAAKpB,EACLA,EAAQ,KACRN,EAAW,MACkB,mBAAbA,IAChB0B,EAAK1B,EACLA,EAAW,MAGTM,SAAuChN,KAAK+N,MAAMf,EAAON,GAEzDU,EAAMmH,SACRnH,EAAMmH,OAAS,EACfvU,KAAK+W,UAIF3J,EAAMoF,QA4Db,SAAqBlM,EAAQ8G,EAAOgB,GAClChB,EAAMoF,QAAS,EACfqC,EAAYvO,EAAQ8G,GAEhBgB,IACEhB,EAAMlG,SAAUtD,EAAQC,SAASuK,GAAS9H,EAAO9C,KAAK,SAAU4K,IAGtEhB,EAAMzJ,OAAQ,EACd2C,EAAO/C,UAAW,EArEC2T,CAAYlX,KAAMoN,EAAOgB,GACrCpO,MAGTG,OAAO8D,eAAehB,EAAS/C,UAAW,iBAAkB,CAI1DgE,YAAY,EACZC,IAAK,WACH,OAAOnE,KAAK0D,eAAe5C,UA6E/BX,OAAO8D,eAAehB,EAAS/C,UAAW,YAAa,CAIrDgE,YAAY,EACZC,IAAK,WACH,YAA4BnC,IAAxBhC,KAAK0D,gBAIF1D,KAAK0D,eAAea,WAE7BC,IAAK,SAAanD,GAGXrB,KAAK0D,iBAMV1D,KAAK0D,eAAea,UAAYlD,MAGpC4B,EAAS/C,UAAU2M,QAAU/B,EAAY+B,QACzC5J,EAAS/C,UAAUgO,WAAapD,EAAYqD,UAE5ClL,EAAS/C,UAAU4M,SAAW,SAAUxF,EAAK8G,GAC3CA,EAAG9G,M,qDC1mBL9E,EAAOC,QAAU0U,EAEjB,IAAInM,EAAiB,EAAQ,KAAa9L,MACtCiM,EAA6BH,EAAeG,2BAC5CyI,EAAwB5I,EAAe4I,sBACvCwD,EAAqCpM,EAAeoM,mCACpDC,EAA8BrM,EAAeqM,4BAE7CtU,EAAS,EAAQ,KAIrB,SAASuU,EAAenK,EAAIwB,GAC1B,IAAI4I,EAAKvX,KAAKwX,gBACdD,EAAGE,cAAe,EAClB,IAAIrJ,EAAKmJ,EAAG7C,QAEZ,GAAW,OAAPtG,EACF,OAAOpO,KAAK0N,KAAK,QAAS,IAAIkG,GAGhC2D,EAAGG,WAAa,KAChBH,EAAG7C,QAAU,KACD,MAAR/F,GACF3O,KAAK8C,KAAK6L,GACZP,EAAGjB,GACH,IAAIwK,EAAK3X,KAAKsE,eACdqT,EAAG7L,SAAU,GAET6L,EAAG3L,cAAgB2L,EAAG7W,OAAS6W,EAAGvT,gBACpCpE,KAAK4M,MAAM+K,EAAGvT,eAIlB,SAAS+S,EAAU/T,GACjB,KAAMpD,gBAAgBmX,GAAY,OAAO,IAAIA,EAAU/T,GACvDL,EAAOhD,KAAKC,KAAMoD,GAClBpD,KAAKwX,gBAAkB,CACrBF,eAAgBA,EAAexF,KAAK9R,MACpC4X,eAAe,EACfH,cAAc,EACd/C,QAAS,KACTgD,WAAY,KACZG,cAAe,MAGjB7X,KAAKsE,eAAe0H,cAAe,EAInChM,KAAKsE,eAAeyH,MAAO,EAEvB3I,IAC+B,mBAAtBA,EAAQ0U,YAA0B9X,KAAK+X,WAAa3U,EAAQ0U,WAC1C,mBAAlB1U,EAAQ4U,QAAsBhY,KAAKiY,OAAS7U,EAAQ4U,QAIjEhY,KAAK0H,GAAG,YAAawO,GAGvB,SAASA,IACP,IAAIrE,EAAQ7R,KAEe,mBAAhBA,KAAKiY,QAA0BjY,KAAKsE,eAAeC,UAK5D2T,EAAKlY,KAAM,KAAM,MAJjBA,KAAKiY,QAAO,SAAU9K,EAAIwB,GACxBuJ,EAAKrG,EAAO1E,EAAIwB,MA6DtB,SAASuJ,EAAK5R,EAAQ6G,EAAIwB,GACxB,GAAIxB,EAAI,OAAO7G,EAAOoH,KAAK,QAASP,GAMpC,GALY,MAARwB,GACFrI,EAAOxD,KAAK6L,GAIVrI,EAAO5C,eAAe5C,OAAQ,MAAM,IAAIuW,EAC5C,GAAI/Q,EAAOkR,gBAAgBC,aAAc,MAAM,IAAIL,EACnD,OAAO9Q,EAAOxD,KAAK,MA9HrB,EAAQ,GAAR,CAAoBqU,EAAWpU,GA+D/BoU,EAAUjX,UAAU4C,KAAO,SAAUkK,EAAON,GAE1C,OADA1M,KAAKwX,gBAAgBI,eAAgB,EAC9B7U,EAAO7C,UAAU4C,KAAK/C,KAAKC,KAAMgN,EAAON,IAajDyK,EAAUjX,UAAU6X,WAAa,SAAU/K,EAAON,EAAU0B,GAC1DA,EAAG,IAAIjD,EAA2B,kBAGpCgM,EAAUjX,UAAUmV,OAAS,SAAUrI,EAAON,EAAU0B,GACtD,IAAImJ,EAAKvX,KAAKwX,gBAKd,GAJAD,EAAG7C,QAAUtG,EACbmJ,EAAGG,WAAa1K,EAChBuK,EAAGM,cAAgBnL,GAEd6K,EAAGE,aAAc,CACpB,IAAIE,EAAK3X,KAAKsE,gBACViT,EAAGK,eAAiBD,EAAG3L,cAAgB2L,EAAG7W,OAAS6W,EAAGvT,gBAAepE,KAAK4M,MAAM+K,EAAGvT,iBAO3F+S,EAAUjX,UAAU0M,MAAQ,SAAU6B,GACpC,IAAI8I,EAAKvX,KAAKwX,gBAEQ,OAAlBD,EAAGG,YAAwBH,EAAGE,aAOhCF,EAAGK,eAAgB,GANnBL,EAAGE,cAAe,EAElBzX,KAAK+X,WAAWR,EAAGG,WAAYH,EAAGM,cAAeN,EAAGD,kBAQxDH,EAAUjX,UAAU4M,SAAW,SAAUxF,EAAK8G,GAC5CrL,EAAO7C,UAAU4M,SAAS/M,KAAKC,KAAMsH,GAAK,SAAU6Q,GAClD/J,EAAG+J,Q,6BCvLP,IAAI8B,EAAc,EAAQ,KAEtBC,EAAY,CAAC,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,OAElDC,EAAW,CACbC,IAAK,UACLC,GAAI,UACJC,GAAI,UACJC,GAAI,YACJC,GAAI,UACJC,GAAI,UACJrE,IAAK,WA4CP5T,EAAOC,QAAU,CAACiY,SAzClB,SAAkBC,GAGhB,OAFAA,EAAYA,GAAa,GAElBT,EAAUZ,QAAO,SAASsB,EAAO3U,GAEtC,OADA2U,EAAM3U,GAAM0U,EAAU1U,IAAOkU,EAASlU,GAC/B2U,IACN,KAmCiCC,gBAhCtC,SAAyBvV,EAASwV,EAAQC,EAAMH,GAC9C,OAAOtV,EAAQ,QAAS,GAAI,CAC1B4U,EAAUnZ,KAAI,SAASkF,GAGrB,MAFe,IAAM6U,EAAS7U,EAEZ,KAKxB,SAA0B2U,GACxB,IAAII,EAAcf,EAAY9V,IAAIyW,GAElC,IAAKI,EAAa,MAAO,GAEzB,IAAIC,EAAM,UACNC,EAAaF,EAAY3Z,MAAMF,MAAM,EAAG,GACxCga,EAAgC,MAAxBH,EAAY3Z,MAAM,GAAa2Z,EAAY3Z,MAAM,GAAK,EAExC,QAAtB2Z,EAAYI,MACdH,GAAOhB,EAAYoB,GAAGC,IAAIJ,GAAYjE,cAEtCgE,GAAOhB,EAAYoB,GAAGL,EAAYI,OAAOF,GAAYjE,cAGzC,IAAVkE,IACFF,GAAO,cAAgBE,GAGzB,OAAOF,EAAM,IAzBGM,CAAiBX,EAAM3U,IACF,OAChC7E,KAAK,W,mCChCZ,YAAAoB,EAAA,QAEA,SAAsBgZ,EAAOpN,GAC3B,IAAIqN,EAASC,EAAS/Y,EAClBgZ,GAAS,EAEThb,MAAMC,QAAQ4a,IAChBC,EAAU,GACVC,EAAUF,EAAM1a,SAEhB6B,EAAOxC,OAAOwC,KAAK6Y,GACnBC,EAAU,GACVC,EAAU/Y,EAAK7B,QAGjB,SAASoX,EAAM5Q,GACb,SAAStD,IACHoK,GAAIA,EAAG9G,EAAKmU,GAChBrN,EAAK,KAEHuN,EAAQ/X,EAAQC,SAASG,GACxBA,IAGP,SAAS4X,EAAM5a,EAAGsG,EAAKiS,GACrBkC,EAAQza,GAAKuY,GACK,KAAZmC,GAAiBpU,IACrB4Q,EAAK5Q,GAIJoU,EAGM/Y,EAETA,EAAKkZ,SAAQ,SAAUhZ,GACrB2Y,EAAM3Y,IAAK,SAAUyE,EAAKiS,GAAUqC,EAAK/Y,EAAKyE,EAAKiS,SAIrDiC,EAAMK,SAAQ,SAAUC,EAAM9a,GAC5B8a,GAAK,SAAUxU,EAAKiS,GAAUqC,EAAK5a,EAAGsG,EAAKiS,SAT7CrB,EAAK,MAaPyD,GAAS,K,mCC9CX,YAAAnZ,EAAA,QAEA,SAAuBgZ,EAAOpN,GAC5B,IAAI+H,EAAU,EACVwF,GAAS,EAEb,SAASzD,EAAM5Q,EAAKV,GAClB,SAAS5C,IACP4C,EAAOA,EAAO,GAAG1F,OAAOoG,EAAKV,GAAQ,CAAEU,GACnC8G,GAAIA,EAAGtH,WAAM9E,EAAW4E,GAE1B+U,EAAQ/X,EAAQC,SAASG,GACxBA,IAYHwX,EAAM1a,OACR0a,EAAM,IAVR,SAASI,EAAMtU,GACb,IAAIV,EAAOjG,MAAMT,UAAUiB,MAAMpB,KAAK4G,UAAW,KAC3CwP,GAAWqF,EAAM1a,QAAUwG,EAC/B4Q,EAAK5Q,EAAKV,GAEV4U,EAAMrF,GAASrP,WAAM9E,EAAW,GAAGd,OAAO0F,EAAMgV,OAOlD1D,EAAK,MAGPyD,GAAS,K,gDC9BX,YAGA,IAAII,EAAM,EAAQ,IACdC,EAAe,EAAQ,KACvBC,EAAgB,EAAQ,KACxBC,EAAmB,EAAQ,KAE3BC,EAAe,EAAQ,KACvBC,EAAS,EAAQ,KACjBC,EAAQ,EAAQ,KAgCpB7Z,EAAOC,QAAU,SAAgC6Z,EAAQC,EAAWrE,GACzC,mBAAdqE,IACTrE,EAAOqE,EACPA,EAAY,MAGd,IApC0BnZ,EAoCtBmD,GAnCmB,iBADGnD,EAoCFmZ,GAlCtBnZ,EAAU,CAAC6C,GAAI7C,GACLA,IACVA,EAAU,IAGD,CACT6C,GAAI8V,EAAIS,OAAOpZ,EAAQ6C,IACvBwW,WAAYrZ,EAAQqZ,YAAc,GAClCC,cAAetZ,EAAQsZ,eAAiBR,EACxC1Q,WAAkC,MAAtBpI,EAAQoI,YAA6BpI,EAAQoI,WACzDmR,OAAQ,CACNlU,OAAQrF,EAAQqF,OAChBF,KAAMnF,EAAQmF,KACdqU,SAAUxZ,EAAQwZ,UAEpBC,QAAS,CACPC,MAAO1Z,EAAQ0Z,MACfC,YAAa3Z,EAAQ2Z,YACrBC,KAAM5Z,EAAQ4Z,KACdC,WAAY7Z,EAAQ6Z,WACpBC,cAAe9Z,EAAQ8Z,cACvBC,cAAe/Z,EAAQ+Z,iBAcvBC,EAAuB,MAARlF,EAEfmF,EAAY,IAAIlB,EAClB5V,EAAKN,GACLM,EAAKkW,WACLlW,EAAKmW,cACLnW,EAAKiF,YAGHmR,EAASX,EAAazV,EAAKoW,QAC3BE,EAAUZ,EAAc1V,EAAKsW,SAqCjC,GAnCAQ,EAAUV,OAASA,EACnBU,EAAUR,QAAUA,EAEpBF,EAAOjV,GAAG,WAAW,SAA6B4V,GAChDD,EAAU3P,KAAK,UAAW4P,MAE5BT,EAAQnV,GAAG,WAAW,SAA8B4V,GAClDD,EAAU3P,KAAK,UAAW4P,MAE5BX,EAAOnZ,KAAK,SAAS,SAA2B+Z,GAC9CF,EAAU3P,KAAK,QAAS6P,MAE1BV,EAAQrZ,KAAK,SAAS,SAA4B+Z,GAChDF,EAAU3P,KAAK,QAAS6P,MAI1BZ,EAAOnZ,KAAK,OAAO,WACjB6Z,EAAUT,SAAWD,EAAOxU,OAAOyU,YAGjCN,EAAOtM,MACTsM,EAAOhO,YAAY,QACnBgO,EAAOtM,KAAK2M,IAGZ/Y,EAAQC,UAAS,WACf8Y,EAAO5O,MAAMuO,GACbK,EAAO3Y,SAIX2Y,EAAO3M,KAAK6M,GAAS7M,KAAKqN,GAGtBD,EAAc,CAChB,IAAI7D,EAAS,GAETiE,EAAmB,WACrB,OAAOtF,EAAK,KAAMqB,IAGpB8D,EAAU3V,GAAG,YAAY,WACvB,IAAIiH,EAEJ,GACEA,EAAO0O,EAAU1Q,QAAU,GAC3B4M,GAAU5K,QACHA,MAGX0O,EAAU7Z,KAAK,MAAOga,GAEtBH,EAAU7Z,KAAK,SAAS,SAASsE,GAG/B,OAFAuV,EAAUtV,eAAe,MAAOyV,GAEzBtF,EAAKpQ,MAIhB,OAAOuV,GAGT7a,EAAOC,QAAQ2Z,OAASA,EACxB5Z,EAAOC,QAAQ4Z,MAAQA,I,+CC1HvB,IAAIvX,EAAW,EAAQ,KAEnB2Y,EAAS,EAAQ,KA0BrBjb,EAAOC,QAAU,SAASW,GAGxB,IAAIqF,GAFJrF,EAAUA,GAAW,IAEAqF,OA3BJ,SAASiV,GAC1B,GAAI/c,MAAMC,QAAQ8c,IAAmB,IAAbA,EAAE5c,QAAgBgE,EAAS4Y,EAAE,KAAO5Y,EAAS4Y,EAAE,IACrE,OAAOA,EAGT,MAAM,IAAIne,MAAM,gDAsBcoe,CAAava,EAAQqF,QAAU,KACzDF,EAAOnF,EAAQmF,KApBJ,SAASqV,GACxB,GAAU,MAANA,GAAmB,MAANA,EACf,OAAOA,EAGT,MAAM,IAAIre,MAAM,uCAeUse,CAAWza,EAAQmF,MAAQ,KACjDqU,EAAWxZ,EAAQwZ,SAbJ,SAASkB,GAC5B,GAAU,WAANA,GAAwB,UAANA,EACpB,OAAOA,EAGT,MAAM,IAAIve,MAAM,wCAQkBwe,CAAe3a,EAAQwZ,UAAY,KAErE,OAAO,IAAIa,EAAOhV,EAAQF,EAAMqU,K,6BCnClC,IAAIjS,EAAgB,EAAQ,IAAkBA,cAC1CqT,EAAW,EAAQ,IACnB7G,EAAY,EAAQ,KAAmBA,UAEvC8G,EAAoB,EAAQ,KAC5BC,EAAU,EAAQ,KAClBC,EAAc,EAAQ,KACtBC,EAAa,EAAQ,KACrBC,EAAU,EAAQ,KAClBC,EAAY,EAAQ,KAIpBb,EAAS,SAAShV,EAAQF,EAAMqU,GAClCzF,EAAUpX,KAAKC,KAAM,CAACyL,oBAAoB,IAG1CzL,KAAKue,SAAW,IAAI5T,EAAc,QAClC3K,KAAKwe,OAAS,GACdxe,KAAKye,OAAS,EACdze,KAAK0e,WAAaJ,EAAU1E,MAC5B5Z,KAAK2e,YAAc,GACnB3e,KAAK4e,YAAc,KACnB5e,KAAKsY,KAAO,EACZtY,KAAKmI,OAAS,CAACM,OAAQA,EAAQF,KAAMA,EAAMqU,SAAUA,IAGvDoB,EAASP,EAAQtG,GAEjBsG,EAAOvd,UAAU2e,SAAW,SAAS7R,EAAO4P,GAC1C,KAAO5c,KAAKye,OAASzR,EAAMlM,QAAQ,CACjC,IAAImS,EAAOiL,EAAQtB,EAAU5P,EAAOhN,KAAKye,QACzCze,KAAKye,QAAUxL,EAAKtG,KACpB3M,KAAKsY,MAAQrF,EAAK6L,MAClB9e,KAAKwe,QAAUvL,EAAK8L,IAEhB9L,EAAK+L,QACU,WAAbpC,EACFuB,EAAYne,KAAMiT,EAAK+L,OAEvBZ,EAAW/E,MAAMrZ,KAAMiT,EAAK+L,UAMpCvB,EAAOvd,UAAU6X,WAAa,SAAS/K,EAAON,EAAUwL,GACtD,IAAI0E,EAAW5c,KAAKmI,OAAOyU,SAM3B,GAHA5P,EAAQhN,KAAKue,SAASxQ,MAAMf,IAGvB4P,EAAU,CAIb,GAHAA,EAAWqB,EAAkBjR,EAAOhN,KAAKye,OA3CjC,OA4CRze,KAAKye,QAAUzR,EAAMlM,QAEhB8b,EACH,OAAI5c,KAAKye,QA/CH,MAgDGvG,EAAK,IAAI3Y,MAAM,kCAExBS,KAAKwe,QAAUxR,EACRkL,KAEPlY,KAAKmI,OAAOyU,SAAWA,EACvB5c,KAAKye,OAAS,EAIlBzR,EAAQhN,KAAKwe,OAASxR,EACtBhN,KAAKwe,OAAS,GAEdxe,KAAK6e,SAAS7R,EAAO4P,GAErB5c,KAAKye,OAAS,EACdvG,KAGFuF,EAAOvd,UAAU+X,OAAS,SAASC,GAKjC,MAJ6B,UAAzBlY,KAAKmI,OAAOyU,UACdwB,EAAWpG,MAAMhY,MAGZkY,GAAQA,KAGjBuF,EAAOvd,UAAU+e,MAAQ,SAAStQ,IACb,IAAfA,EAAK2J,OACP3J,EAAK2J,KAAOtY,KAAKsY,OAGDtY,KAAK4e,YAAqB5e,KAAK4e,YAAZ5e,MAC1B8C,KAAK6L,IAGlB8O,EAAOvd,UAAUgf,MAAQ,SAAS7f,GAChCW,KAAK0N,KAAK,UAAW2Q,EAAQhf,EAASW,KAAKsY,QAG7CmF,EAAOvd,UAAUif,UAAY,SAASC,GACpC,IAAIxC,EAAWqB,EAAkBmB,EAAMpf,KAAKye,OAAQ,SAMpD,OALAze,KAAKmI,OAAOyU,SAAWA,EACvB5c,KAAK4e,YAAc,GACnB5e,KAAK6e,SAASO,EAAMxC,GACpB5c,KAAKiY,SAEEjY,KAAK4e,aAGdpc,EAAOC,QAAUgb,G,iBChHjBhb,EAAUD,EAAOC,QAAU,EAAQ,MAC3B2H,OAAS3H,EACjBA,EAAQO,SAAWP,EACnBA,EAAQQ,SAAW,EAAQ,KAC3BR,EAAQM,OAAS,EAAQ,KACzBN,EAAQ0U,UAAY,EAAQ,KAC5B1U,EAAQ4c,YAAc,EAAQ,KAC9B5c,EAAQyE,SAAW,EAAQ,KAC3BzE,EAAQ6c,SAAW,EAAQ,M,6CCJ3B,SAASC,EAAgB3c,EAAKC,EAAKxB,GAAiK,OAApJwB,KAAOD,EAAOzC,OAAO8D,eAAerB,EAAKC,EAAK,CAAExB,MAAOA,EAAO6C,YAAY,EAAMsb,cAAc,EAAMjc,UAAU,IAAkBX,EAAIC,GAAOxB,EAAgBuB,EAE3M,IACIyH,EADW,EAAQ,IACDA,OAGlBoV,EADY,EAAQ,KACAA,QAEpBC,EAASD,GAAWA,EAAQC,QAAU,UAM1Cld,EAAOC,QAEP,WACE,SAASoI,IACP7K,KAAK0O,KAAO,KACZ1O,KAAK2f,KAAO,KACZ3f,KAAKc,OAAS,EAGhB,IAAI8e,EAAS/U,EAAW3K,UAgKxB,OA9JA0f,EAAO9c,KAAO,SAAcI,GAC1B,IAAIgQ,EAAQ,CACVvE,KAAMzL,EACN+P,KAAM,MAEJjT,KAAKc,OAAS,EAAGd,KAAK2f,KAAK1M,KAAOC,EAAWlT,KAAK0O,KAAOwE,EAC7DlT,KAAK2f,KAAOzM,IACVlT,KAAKc,QAGT8e,EAAO3R,QAAU,SAAiB/K,GAChC,IAAIgQ,EAAQ,CACVvE,KAAMzL,EACN+P,KAAMjT,KAAK0O,MAEO,IAAhB1O,KAAKc,SAAcd,KAAK2f,KAAOzM,GACnClT,KAAK0O,KAAOwE,IACVlT,KAAKc,QAGT8e,EAAO7a,MAAQ,WACb,GAAoB,IAAhB/E,KAAKc,OAAT,CACA,IAAIuO,EAAMrP,KAAK0O,KAAKC,KAGpB,OAFoB,IAAhB3O,KAAKc,OAAcd,KAAK0O,KAAO1O,KAAK2f,KAAO,KAAU3f,KAAK0O,KAAO1O,KAAK0O,KAAKuE,OAC7EjT,KAAKc,OACAuO,IAGTuQ,EAAOrQ,MAAQ,WACbvP,KAAK0O,KAAO1O,KAAK2f,KAAO,KACxB3f,KAAKc,OAAS,GAGhB8e,EAAOxe,KAAO,SAAcye,GAC1B,GAAoB,IAAhB7f,KAAKc,OAAc,MAAO,GAI9B,IAHA,IAAI4c,EAAI1d,KAAK0O,KACTW,EAAM,GAAKqO,EAAE/O,KAEV+O,EAAIA,EAAEzK,MACX5D,GAAOwQ,EAAInC,EAAE/O,KAGf,OAAOU,GAGTuQ,EAAO1e,OAAS,SAAgBuN,GAC9B,GAAoB,IAAhBzO,KAAKc,OAAc,OAAOuJ,EAAOyV,MAAM,GAK3C,IAJA,IA9DgB3P,EAAKpH,EAAQgX,EA8DzB1Q,EAAMhF,EAAO2V,YAAYvR,IAAM,GAC/BiP,EAAI1d,KAAK0O,KACT1N,EAAI,EAED0c,GAlESvN,EAmEHuN,EAAE/O,KAnEM5F,EAmEAsG,EAnEQ0Q,EAmEH/e,EAlE5BqJ,EAAOnK,UAAU+f,KAAKlgB,KAAKoQ,EAAKpH,EAAQgX,GAmEpC/e,GAAK0c,EAAE/O,KAAK7N,OACZ4c,EAAIA,EAAEzK,KAGR,OAAO5D,GAITuQ,EAAOpQ,QAAU,SAAiBf,EAAGyR,GACnC,IAAI7Q,EAcJ,OAZIZ,EAAIzO,KAAK0O,KAAKC,KAAK7N,QAErBuO,EAAMrP,KAAK0O,KAAKC,KAAKxN,MAAM,EAAGsN,GAC9BzO,KAAK0O,KAAKC,KAAO3O,KAAK0O,KAAKC,KAAKxN,MAAMsN,IAGtCY,EAFSZ,IAAMzO,KAAK0O,KAAKC,KAAK7N,OAExBd,KAAK+E,QAGLmb,EAAalgB,KAAKmgB,WAAW1R,GAAKzO,KAAKogB,WAAW3R,GAGnDY,GAGTuQ,EAAOtQ,MAAQ,WACb,OAAOtP,KAAK0O,KAAKC,MAInBiR,EAAOO,WAAa,SAAoB1R,GACtC,IAAIiP,EAAI1d,KAAK0O,KACT2R,EAAI,EACJhR,EAAMqO,EAAE/O,KAGZ,IAFAF,GAAKY,EAAIvO,OAEF4c,EAAIA,EAAEzK,MAAM,CACjB,IAAInR,EAAM4b,EAAE/O,KACR2R,EAAK7R,EAAI3M,EAAIhB,OAASgB,EAAIhB,OAAS2N,EAIvC,GAHI6R,IAAOxe,EAAIhB,OAAQuO,GAAOvN,EAASuN,GAAOvN,EAAIX,MAAM,EAAGsN,GAGjD,KAFVA,GAAK6R,GAEQ,CACPA,IAAOxe,EAAIhB,UACXuf,EACE3C,EAAEzK,KAAMjT,KAAK0O,KAAOgP,EAAEzK,KAAUjT,KAAK0O,KAAO1O,KAAK2f,KAAO,OAE5D3f,KAAK0O,KAAOgP,EACZA,EAAE/O,KAAO7M,EAAIX,MAAMmf,IAGrB,QAGAD,EAIJ,OADArgB,KAAKc,QAAUuf,EACRhR,GAITuQ,EAAOQ,WAAa,SAAoB3R,GACtC,IAAIY,EAAMhF,EAAO2V,YAAYvR,GACzBiP,EAAI1d,KAAK0O,KACT2R,EAAI,EAIR,IAHA3C,EAAE/O,KAAKsR,KAAK5Q,GACZZ,GAAKiP,EAAE/O,KAAK7N,OAEL4c,EAAIA,EAAEzK,MAAM,CACjB,IAAIsN,EAAM7C,EAAE/O,KACR2R,EAAK7R,EAAI8R,EAAIzf,OAASyf,EAAIzf,OAAS2N,EAIvC,GAHA8R,EAAIN,KAAK5Q,EAAKA,EAAIvO,OAAS2N,EAAG,EAAG6R,GAGvB,KAFV7R,GAAK6R,GAEQ,CACPA,IAAOC,EAAIzf,UACXuf,EACE3C,EAAEzK,KAAMjT,KAAK0O,KAAOgP,EAAEzK,KAAUjT,KAAK0O,KAAO1O,KAAK2f,KAAO,OAE5D3f,KAAK0O,KAAOgP,EACZA,EAAE/O,KAAO4R,EAAIpf,MAAMmf,IAGrB,QAGAD,EAIJ,OADArgB,KAAKc,QAAUuf,EACRhR,GAITuQ,EAAOF,GAAU,SAAUrJ,EAAGjT,GAC5B,OAAOqc,EAAQzf,KAjLnB,SAAuB+I,GAAU,IAAK,IAAI/H,EAAI,EAAGA,EAAI2F,UAAU7F,OAAQE,IAAK,CAAE,IAAIwf,EAAyB,MAAhB7Z,UAAU3F,GAAa2F,UAAU3F,GAAK,GAAQyf,EAAUtgB,OAAOwC,KAAK6d,GAAqD,mBAAjCrgB,OAAOugB,wBAAwCD,EAAUA,EAAQvf,OAAOf,OAAOugB,sBAAsBF,GAAQG,QAAO,SAAUC,GAAO,OAAOzgB,OAAO0gB,yBAAyBL,EAAQI,GAAK1c,gBAAmBuc,EAAQ5E,SAAQ,SAAUhZ,GAAO0c,EAAgBxW,EAAQlG,EAAK2d,EAAO3d,OAAa,OAAOkG,EAiL/b+X,CAAc,GAAI1d,EAAS,CAE9C2d,MAAO,EAEPC,eAAe,MAIZnW,EAvKT,I,8CCpBA,YAEA,IAAIoW,EAAuB,IAAIC,IAY/B1e,EAAOC,QAAQ4I,wBAA0BzH,EAAQud,YAVjD,SAAiCC,GAC/B,IAAIH,EAAqBI,IAAID,GAA7B,CACA,IAAIzf,EAAMyf,uEAEVH,EAAqBnY,IAAIsY,GACzBxd,EAAQud,YAAYxf,EAAK,yBAG3B,e,gDCZA,YAEA,IAAI2f,EAEJ,SAAS/B,EAAgB3c,EAAKC,EAAKxB,GAAiK,OAApJwB,KAAOD,EAAOzC,OAAO8D,eAAerB,EAAKC,EAAK,CAAExB,MAAOA,EAAO6C,YAAY,EAAMsb,cAAc,EAAMjc,UAAU,IAAkBX,EAAIC,GAAOxB,EAAgBuB,EAE3M,IAAIsE,EAAW,EAAQ,KAEnBqa,EAAexP,OAAO,eACtByP,EAAczP,OAAO,cACrB0P,EAAS1P,OAAO,SAChB2P,EAAS3P,OAAO,SAChB4P,EAAe5P,OAAO,eACtB6P,EAAiB7P,OAAO,iBACxB8P,EAAU9P,OAAO,UAErB,SAAS+P,EAAiBzgB,EAAO6W,GAC/B,MAAO,CACL7W,MAAOA,EACP6W,KAAMA,GAIV,SAAS6J,EAAeC,GACtB,IAAIC,EAAUD,EAAKT,GAEnB,GAAgB,OAAZU,EAAkB,CACpB,IAAItT,EAAOqT,EAAKH,GAASlV,OAIZ,OAATgC,IACFqT,EAAKL,GAAgB,KACrBK,EAAKT,GAAgB,KACrBS,EAAKR,GAAe,KACpBS,EAAQH,EAAiBnT,GAAM,MAKrC,SAASuT,EAAWF,GAGlBpe,EAAQC,SAASke,EAAgBC,GAgBnC,IAAIG,EAAyBhiB,OAAOwN,gBAAe,eAC/CyU,EAAuCjiB,OAAOkiB,gBA4D/C9C,EA5D+D+B,EAAwB,CACxF,aACE,OAAOthB,KAAK6hB,IAGd5O,KAAM,WACJ,IAAIpB,EAAQ7R,KAIR8H,EAAQ9H,KAAKyhB,GAEjB,GAAc,OAAV3Z,EACF,OAAOwa,QAAQC,OAAOza,GAGxB,GAAI9H,KAAK0hB,GACP,OAAOY,QAAQL,QAAQH,OAAiB9f,GAAW,IAGrD,GAAIhC,KAAK6hB,GAAStd,UAKhB,OAAO,IAAI+d,SAAQ,SAAUL,EAASM,GACpC3e,EAAQC,UAAS,WACXgO,EAAM4P,GACRc,EAAO1Q,EAAM4P,IAEbQ,EAAQH,OAAiB9f,GAAW,UAU5C,IACIwgB,EADAC,EAAcziB,KAAK2hB,GAGvB,GAAIc,EACFD,EAAU,IAAIF,QA1DpB,SAAqBG,EAAaT,GAChC,OAAO,SAAUC,EAASM,GACxBE,EAAYC,MAAK,WACXV,EAAKN,GACPO,EAAQH,OAAiB9f,GAAW,IAItCggB,EAAKJ,GAAgBK,EAASM,KAC7BA,IAiDqBI,CAAYF,EAAaziB,WAC1C,CAGL,IAAI2O,EAAO3O,KAAK6hB,GAASlV,OAEzB,GAAa,OAATgC,EACF,OAAO2T,QAAQL,QAAQH,EAAiBnT,GAAM,IAGhD6T,EAAU,IAAIF,QAAQtiB,KAAK4hB,IAI7B,OADA5hB,KAAK2hB,GAAgBa,EACdA,IAE+BzQ,OAAOC,eAAe,WAC9D,OAAOhS,QACLuf,EAAgB+B,EAAuB,UAAU,WACnD,IAAIsB,EAAS5iB,KAKb,OAAO,IAAIsiB,SAAQ,SAAUL,EAASM,GACpCK,EAAOf,GAAShV,QAAQ,MAAM,SAAUvF,GAClCA,EACFib,EAAOjb,GAIT2a,EAAQH,OAAiB9f,GAAW,aAGtCsf,GAAwBa,GAoE5B3f,EAAOC,QAlEiC,SAA2C6D,GACjF,IAAIuc,EAEAC,EAAW3iB,OAAOC,OAAOgiB,GAA4D7C,EAArBsD,EAAiB,GAAoChB,EAAS,CAChIxgB,MAAOiF,EACP/C,UAAU,IACRgc,EAAgBsD,EAAgBtB,EAAc,CAChDlgB,MAAO,KACPkC,UAAU,IACRgc,EAAgBsD,EAAgBrB,EAAa,CAC/CngB,MAAO,KACPkC,UAAU,IACRgc,EAAgBsD,EAAgBpB,EAAQ,CAC1CpgB,MAAO,KACPkC,UAAU,IACRgc,EAAgBsD,EAAgBnB,EAAQ,CAC1CrgB,MAAOiF,EAAOhC,eAAe8C,WAC7B7D,UAAU,IACRgc,EAAgBsD,EAAgBjB,EAAgB,CAClDvgB,MAAO,SAAe4gB,EAASM,GAC7B,IAAI5T,EAAOmU,EAASjB,GAASlV,OAEzBgC,GACFmU,EAASnB,GAAgB,KACzBmB,EAASvB,GAAgB,KACzBuB,EAAStB,GAAe,KACxBS,EAAQH,EAAiBnT,GAAM,MAE/BmU,EAASvB,GAAgBU,EACzBa,EAAStB,GAAee,IAG5Bhf,UAAU,IACRsf,IA8BJ,OA7BAC,EAASnB,GAAgB,KACzBza,EAASZ,GAAQ,SAAUgB,GACzB,GAAIA,GAAoB,+BAAbA,EAAIlI,KAAuC,CACpD,IAAImjB,EAASO,EAAStB,GAWtB,OARe,OAAXe,IACFO,EAASnB,GAAgB,KACzBmB,EAASvB,GAAgB,KACzBuB,EAAStB,GAAe,KACxBe,EAAOjb,SAGTwb,EAASrB,GAAUna,GAIrB,IAAI2a,EAAUa,EAASvB,GAEP,OAAZU,IACFa,EAASnB,GAAgB,KACzBmB,EAASvB,GAAgB,KACzBuB,EAAStB,GAAe,KACxBS,EAAQH,OAAiB9f,GAAW,KAGtC8gB,EAASpB,IAAU,KAErBpb,EAAOoB,GAAG,WAAYwa,EAAWpQ,KAAK,KAAMgR,IACrCA,K,+CClLTtgB,EAAOC,QAAU4c,EAEjB,IAAIlI,EAAY,EAAQ,KAIxB,SAASkI,EAAYjc,GACnB,KAAMpD,gBAAgBqf,GAAc,OAAO,IAAIA,EAAYjc,GAC3D+T,EAAUpX,KAAKC,KAAMoD,GAJvB,EAAQ,GAAR,CAAoBic,EAAalI,GAOjCkI,EAAYnf,UAAU6X,WAAa,SAAU/K,EAAON,EAAU0B,GAC5DA,EAAG,KAAMpB,K,6BCjCX,IAAI3G,EAWJ,IAAI2E,EAAiB,EAAQ,KAAmB9L,MAC5C6jB,EAAmB/X,EAAe+X,iBAClCjP,EAAuB9I,EAAe8I,qBAE1C,SAAS1N,EAAKkB,GAEZ,GAAIA,EAAK,MAAMA,EAOjB,SAAS0b,EAAU1c,EAAQwF,EAASwI,EAAS9N,GAC3CA,EAvBF,SAAcA,GACZ,IAAIC,GAAS,EACb,OAAO,WACDA,IACJA,GAAS,EACTD,EAASM,WAAM,EAAQH,aAkBdnD,CAAKgD,GAChB,IAAIyc,GAAS,EACb3c,EAAOoB,GAAG,SAAS,WACjBub,GAAS,UAECjhB,IAARqE,IAAmBA,EAAM,EAAQ,MACrCA,EAAIC,EAAQ,CACVhD,SAAUwI,EACVvI,SAAU+Q,IACT,SAAUhN,GACX,GAAIA,EAAK,OAAOd,EAASc,GACzB2b,GAAS,EACTzc,OAEF,IAAIjC,GAAY,EAChB,OAAO,SAAU+C,GACf,IAAI2b,IACA1e,EAGJ,OAFAA,GAAY,EAvBhB,SAAmB+B,GACjB,OAAOA,EAAOqB,WAAqC,mBAAjBrB,EAAOsB,MAwBnCC,CAAUvB,GAAgBA,EAAOsB,QACP,mBAAnBtB,EAAOuG,QAA+BvG,EAAOuG,eACxDrG,EAASc,GAAO,IAAIwM,EAAqB,UAI7C,SAAS/T,EAAKmR,GACZA,IAGF,SAASlB,EAAKpC,EAAMyN,GAClB,OAAOzN,EAAKoC,KAAKqL,GAGnB,SAAS6H,EAAYC,GACnB,OAAKA,EAAQriB,OAC8B,mBAAhCqiB,EAAQA,EAAQriB,OAAS,GAA0BsF,EACvD+c,EAAQC,MAFahd,EAgC9B5D,EAAOC,QA3BP,WACE,IAAK,IAAIiE,EAAOC,UAAU7F,OAAQqiB,EAAU,IAAIxiB,MAAM+F,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAClFsc,EAAQtc,GAAQF,UAAUE,GAG5B,IAOIiB,EAPAtB,EAAW0c,EAAYC,GAG3B,GAFIxiB,MAAMC,QAAQuiB,EAAQ,MAAKA,EAAUA,EAAQ,IAE7CA,EAAQriB,OAAS,EACnB,MAAM,IAAIiiB,EAAiB,WAI7B,IAAIM,EAAWF,EAAQpiB,KAAI,SAAUuF,EAAQtF,GAC3C,IAAI8K,EAAU9K,EAAImiB,EAAQriB,OAAS,EAEnC,OAAOkiB,EAAU1c,EAAQwF,EADX9K,EAAI,GACyB,SAAUsG,GAC9CQ,IAAOA,EAAQR,GAChBA,GAAK+b,EAASxH,QAAQ9b,GACtB+L,IACJuX,EAASxH,QAAQ9b,GACjByG,EAASsB,UAGb,OAAOqb,EAAQ7J,OAAOtJ,K,6BCjExBxN,EAAOC,QAzBS,SAASuK,EAAO5K,EAAOkhB,GAMrC,IALA,IAAIC,EAAQte,KAAK+D,IAAIsa,EAAQlhB,EAAO4K,EAAMlM,QACtCqV,EAAU,GACVyG,EAAW,KACXtL,GAAS,GAELsL,KAActL,EAAQiS,GAAO,CACnC,IAAIlD,EAAIrT,EAAMsE,GACJ,OAAN+O,EACElK,EAAQrV,OAASwQ,IACnBsL,EAAW,QACXzG,EAAU,KAGZA,EAAQrT,KAAKud,GACH,MAANA,GAA4B,MAAflK,EAAQ,KACvByG,EAAW,SACXzG,EAAU,KAKhB,OAAOyG,I,6BCmCTpa,EAAOC,QAxDO,SAASN,EAAM6K,EAAO5K,GAClC,GAAa,WAATD,GAA8B,UAATA,EACvB,MAAM,IAAI5C,MAAM,0DAmBlB,IAfA,IAAIgkB,EAAQvW,EAAMlM,OAASsB,EACvBohB,EAAiB,WAATrhB,EAAoB,IAAM,KAClCshB,EAAiB,WAATthB,EAAoB,IAAM,GAGlCuhB,GAAa,EACbC,GAAe,EACfC,GAAa,EACbC,GAAa,EAGbC,EAAQ,GACRnX,EAAO,EACPmS,EAAQ,GAEJ+E,GAAclX,EAAO4W,GAAO,CAClC,IAAIlD,EAAIrT,EAAM5K,EAAQuK,GAGZ,OAAN0T,GACFvB,IAIEuB,IAAMoD,EACHE,GAIHC,GAAa,EACbE,EAAMV,QAJNO,GAAe,EACfG,EAAMhhB,KAAKud,IAKJA,IAAMmD,GACfE,GAAa,EACTC,GACFG,EAAMhhB,KAAKud,IAEJA,GAAK,KAAOA,GAAK,KAC1ByD,EAAMhhB,KAAKud,GAGb1T,IACAkX,EAAaH,KAAgBC,GAAgBC,GAK/C,MAAO,CAAC9E,MAAOA,EAAOnS,KAAMA,EAAMqS,MAFtB6E,EAAaC,EAAM1iB,KAAK,IAAI2iB,OAAS,GAEDhF,IADrC8E,EAA8B,GAAjBC,EAAM1iB,KAAK,O,6BCpDrC,IAAI4iB,EAAW,EAAQ,KACnBhL,EAAY,EAAQ,KACpBiL,EAAa,EAAQ,KACrBC,EAAkB,EAAQ,KAG1BC,EAAU,cACVC,EAAY,YACZC,EAAS,YACTC,EAAe,YACfC,EAAc,YACdC,EAAa,QAGbC,EAAQ,aAGRC,EAAU,yBAGVC,EAAQ,cACRC,EAAW,wDAGXC,EAAW,cAEXC,EAAY,6CACZC,EAAc,aACdC,EAAc,0CACdC,EAAc,4DACdC,EAAW,kCAaXC,EAAqC,eAErCC,EAAa,SAASzI,EAAQ0I,GAChC,IAAIvI,EAAuB,OAAfuI,EAAsB,KAAO,KACzC,OAAO1I,EAAOsC,MAAM+E,EAASxf,IAAI,QAASsY,KAiO5Cta,EAAOC,QA1JK,SAASka,EAAQqC,GAE3B,IAAIwF,EAAWpL,KAAK4F,KAAUyF,EAAMrL,KAAK4F,GAAzC,CAIA,GAAc,QAAVA,EACF,OAAOrC,EAAOsC,MAAM+E,EAAS9L,QAG/B,GAAIkM,EAAUhL,KAAK4F,GAAQ,CACzB,IACIsG,EAAyB,MADXtG,EAAMtF,MAAM0K,GAAW,GAEzC,OAAOzH,EAAOsC,MAAM+E,EAASxf,IAAI,SAAU8gB,IAG7C,GAAIjB,EAAOjL,KAAK4F,GAAQ,CACtB,IACIuG,EAAmB,MADRvG,EAAMtF,MAAM2K,GAAQ,GACN,IAAM,IACnC,OAAO1H,EAAOsC,MAAM+E,EAASxf,IAAI,MAAO+gB,IAG1C,GAAIV,EAASzL,KAAK4F,GAAQ,CACxB,IAAIqG,EAAarG,EAAMtF,MAAMmL,GAAU,GACvC,OAAOO,EAAWzI,EAAQ0I,GAG5B,GAAIf,EAAalL,KAAK4F,GAAQ,CAC5B,IACIjC,EAAgC,MADhBiC,EAAMtF,MAAM4K,GAAc,GACJ,KAAO,KACjD,OAAO3H,EAAOsC,MAAM+E,EAASxf,IAAI,cAAeuY,IAGlD,GAAI+H,EAAU1L,KAAK4F,GAAnB,CACE,IAAIwG,EAAcxG,EAAMtF,MAAMoL,GAC1Bvc,EAAOid,EAAY,GACnBxI,EAAOwI,EAAY,GACnBC,EAAUD,EAAY,GACtB9c,EAAUF,OAAOgd,EAAY,IAC7B7c,EAAWH,OAAOgd,EAAY,IAC9Brd,EAASwU,EAAOxU,OAEpBA,EAAOI,KAAOJ,EAAOI,MAAQA,EACxBJ,EAAOM,SACVN,EAAOM,OAAS,CAACC,EAASC,IAIvBR,EAAOI,KAGe,MAAhBJ,EAAOI,MAChBoU,EAAOuC,MAAM,kDAHb/W,EAAOI,KAAO,IACdoU,EAAOuC,MAAM,2DAMXuG,GACF9I,EAAOuC,MACL,uBAAyBuG,EAAU,SAAWzG,EAAQ,kBAI1D,IAAI0G,EAAU,IAAMzgB,KAAK0gB,IAAI,IAAKxd,EAAOM,OAAO,IAIhD,GAHAkU,EAAOsC,MAAM+E,EAASxf,IAAI,OAAQwY,IAClCL,EAAOsC,MAAM+E,EAASxf,IAAI,UAAWkhB,IAEjCP,EAAmC/L,KAAK4F,GAAQ,CAClD,IAAI4G,EAAe5G,EAAMtF,MAAMyL,GAAoC,GACnEC,EAAWzI,EAAQiJ,QAnCvB,CAyCA,GAAIrB,EAAYnL,KAAK4F,GAAQ,CAC3B,IACI/B,EAA8B,MADf+B,EAAMtF,MAAM6K,GAAa,GACJ,IAAM,IAC9C,OAAO5H,EAAOsC,MAAM+E,EAASxf,IAAI,aAAcyY,IAGjD,GAAI8H,EAAY3L,KAAK4F,GAAQ,CAC3B,IAAI6G,EAAW7G,EAAMtF,MAAMqL,GAAa,GACxC,OAAOpI,EAAOsC,MAAM+E,EAASxL,MAAM,WAAYqN,IAGjD,GAAIb,EAAY5L,KAAK4F,GAAQ,CAC3B,IAAI8G,EAAkB9G,EAAMtF,MAAMsL,GAC9Bzf,EAAIugB,EAAgB,IAAM,EAC1BtgB,EAAIsgB,EAAgB,IAAM,EAC1B9kB,EAAI8kB,EAAgB,IAAM,EAC1BC,EAAID,EAAgB,IAAM,EAC1BE,EAAK,CAACzgB,EAAGiD,OAAOjD,GAAIC,EAAGgD,OAAOhD,GAAIxE,EAAGwH,OAAOxH,GAAI+kB,EAAGvd,OAAOud,IAC9D,OAAOpJ,EAAOsC,MAAM+E,EAASxL,MAAM,UAAWwN,IAGhD,GAAItB,EAAQtL,KAAK4F,GAAQ,CACvB,IAAIvG,EAAOuG,EAAMtF,MAAMgL,GAAS,GAChC,OAAO/H,EAAOsC,MAAM+E,EAASxf,IAAI,OAAQiU,IAG3C,GAAIwM,EAAY7L,KAAK4F,GACnB,OAzKe,SAASrC,EAAQqC,GAClC,IAOIiH,EACAC,EAkBAC,EA1BAhe,EAAS,CAACM,OAAQkU,EAAOxU,OAAOM,QAChC2d,EAAYpH,EAAMtF,MAAMuL,GACxBxM,EAAO2N,EAAU,GACjBC,EAAaD,EAAU,GACvBE,EAAWF,EAAU,GAAKA,EAAU,GAAG5C,MAAM,KAAO,GAKrC,MAAf6C,GACFJ,EAAQ,SACRC,EAAU,GACc,MAAfG,GACTJ,EAAQ,OACRC,EAAU,GACc,MAAfG,GACTJ,EAAQ,UACRC,EAAU,GACc,MAAfG,GACTJ,EAAQ,OACRC,EAAU,IAEVD,EAAQI,EACRH,EAAU,GAIE,WAAVD,EACFE,EAAM,CAACnN,EAAUsN,EAAS,GAAIne,IACX,SAAV8d,GAA8B,YAAVA,EAC7BE,EAAM,CAACnN,EAAUsN,EAAS,GAAIne,GAAS6Q,EAAUsN,EAAS,GAAIne,IAC3C,SAAV8d,GACTE,EAAM,CAACnN,EAAUsN,EAAS,GAAIne,GAASK,OAAO8d,EAAS,IAAK,GACxDA,EAAS,KACXH,EAAI,GAAK3d,OAAO8d,EAAS,MAG3BH,EAAMG,EAASvlB,IAAIyH,QAGrB,IAAI+d,EAAO,GACPD,EAASJ,EAAU,GACrBK,EAAO,CACLvN,EAAUsN,EAASJ,EAAU,GAAI/d,GACjC6Q,EAAUsN,EAASJ,EAAU,GAAI/d,IAE1Bme,EAASJ,EAAU,KAC5BK,EAAO,CAACvN,EAAUsN,EAASJ,EAAU,GAAI/d,KAE3C,IAAIqe,EAAU,CAACP,MAAOA,EAAOQ,OAAQN,EAAKI,KAAMA,GAChD,OAAO5J,EAAOsC,MAAM+E,EAASvL,KAAKA,EAAM+N,IAsH/BE,CAAa/J,EAAQqC,GAG9B,GAAIkG,EAAS9L,KAAK4F,GAChB,OAvHgB,SAASrC,EAAQqC,GACnC,IAAI2H,EAAa3H,EAAMtF,MAAMwL,GACzB3kB,EAAOomB,EAAW,GAClBpmB,EAAKmZ,MAAM,MACbiD,EAAOuC,MAAM,sCAAwC3e,GAEvD,IACIwY,GADa4N,EAAW,GAAG7lB,OAAS6lB,EAAW,GAAGnD,MAAM,KAAO,IAC3C7C,OAAOiG,SAAS7lB,KAAI,SAASie,GACnD,OAAOkF,EAAgBvH,EAAQqC,MAGjC,OAAOrC,EAAOsC,MAAM+E,EAASlL,MAAMvY,EAAMwY,IA4GhC8N,CAAclK,EAAQqC,GAK/B,KAAI2F,EAAMvL,KAAK4F,IAAUmF,EAAQ/K,KAAK4F,IAAU4F,EAASxL,KAAK4F,IAuC9D,OAAOrC,EAAOuC,MACZ,UAAYF,EAAQ,wCAvCpB,IAGI8H,EAHAC,EAAU/H,EAAMtF,MAAMiL,GACtBqC,EAAYhI,EAAMtF,MAAMyK,GACxB1K,EAAauF,EAAMtF,MAAMkL,GAe7B,GAZIoC,IAEAF,EADmB,MAAjBE,EAAU,GACL,IACmB,MAAjBA,EAAU,GACZ,KAEA,MAGTrK,EAAOsC,MAAM+E,EAASxf,IAAI,OAAQsiB,KAGhCC,GAAWtN,EAAY,CACzB,IAAIwN,EAASF,EAAUA,EAAQ,GAAK,GAChCG,EAAczN,EAAaA,EAAW,GAAK,GAC3CZ,EAAQoL,EAAW5K,MAAM6N,EAAavK,EAAOxU,QAE7CuQ,EAAK,OACM,MAAXuO,EACFvO,EAAK,MACe,MAAXuO,EACTvO,EAAK,OACe,MAAXuO,IACTvO,EAAK,SAGPiE,EAAOsC,MAAM+E,EAAStL,GAAGA,EAAIG,S,iBCxQnC,YAUA,IAwFsBhW,EA/ElBskB,EAAS,aAGTC,EAAa,qBAGbC,EAAa,aAGbC,EAAY,cASZC,EAAW,oBACXC,EAAU,kDACVC,EAAS,2BAETC,EAAc,qBACdC,EAAa,kCACbC,EAAa,qCAIbC,EAPa,MAAQL,EAAU,IAAMC,EAAS,IAOtB,IAGxBK,EAFW,oBAEQD,GADP,gBAAwB,CAACH,EAAaC,EAAYC,GAAYxmB,KAAK,KAAnE,qBAA2FymB,EAAW,MAElHE,EAAW,MAAQ,CAACL,EAAcF,EAAU,IAAKA,EAASG,EAAYC,EAAYL,GAAUnmB,KAAK,KAAO,IAGxG4mB,EAAYC,OAAOR,EAAS,MAAQA,EAAS,KAAOM,EAAWD,EAAO,KAGtEI,EAAeD,OAAO,uFAGtBE,EAAetY,SAGfpL,EAA8B,iBAAVC,GAAsBA,GAAUA,EAAOvE,SAAWA,QAAUuE,EAGhFC,EAA0B,iBAARZ,MAAoBA,MAAQA,KAAK5D,SAAWA,QAAU4D,KAGxEqkB,EAAO3jB,GAAcE,GAAYE,SAAS,cAATA,GASjCwjB,GAoBkBxlB,EApBO,SAqBpB,SAAS0T,GACd,OAAiB,MAAVA,OAAiBvU,EAAYuU,EAAO1T,KAW/C,SAASylB,EAAWC,GAClB,OAAOL,EAAa9O,KAAKmP,GAU3B,SAASC,EAAWD,GAClB,OAAOD,EAAWC,GAyBpB,SAAqBA,GACnB,IAAIhP,EAASyO,EAAUS,UAAY,EACnC,KAAOT,EAAU5O,KAAKmP,IACpBhP,IAEF,OAAOA,EA7BHmP,CAAYH,GACZF,EAAUE,GAUhB,SAASI,EAAcJ,GACrB,OAAOD,EAAWC,GA2BpB,SAAwBA,GACtB,OAAOA,EAAO7O,MAAMsO,IAAc,GA3B9BY,CAAeL,GAlDrB,SAAsBA,GACpB,OAAOA,EAAO/E,MAAM,IAkDhBqF,CAAaN,GA8BnB,IAOIO,EAPc3oB,OAAOD,UAOQ6oB,SAG7BhX,EAASqW,EAAKrW,OAGdiX,EAAa/jB,KAAKgkB,KAClBC,EAAcjkB,KAAK8N,MAGnBoW,EAAcpX,EAASA,EAAO7R,eAAY8B,EAC1ConB,EAAiBD,EAAcA,EAAYJ,cAAW/mB,EAU1D,SAASqnB,EAAWd,EAAQ9Z,GAC1B,IAAI8K,EAAS,GACb,IAAKgP,GAAU9Z,EAAI,GAAKA,EA3LH,iBA4LnB,OAAO8K,EAIT,GACM9K,EAAI,IACN8K,GAAUgP,IAEZ9Z,EAAIya,EAAYza,EAAI,MAElB8Z,GAAUA,SAEL9Z,GAET,OAAO8K,EAyCT,SAAS+P,EAAajoB,GAEpB,GAAoB,iBAATA,EACT,OAAOA,EAET,GAAIkoB,EAASloB,GACX,OAAO+nB,EAAiBA,EAAerpB,KAAKsB,GAAS,GAEvD,IAAIkY,EAAUlY,EAAQ,GACtB,MAAkB,KAAVkY,GAAkB,EAAIlY,IA7PjB,IA6PwC,KAAOkY,EAY9D,SAASiQ,EAAUC,EAAOrnB,EAAO4B,GAC/B,IAAIlD,EAAS2oB,EAAM3oB,OAEnB,OADAkD,OAAchC,IAARgC,EAAoBlD,EAASkD,GAC1B5B,GAAS4B,GAAOlD,EAAU2oB,EArDrC,SAAmBA,EAAOrnB,EAAO4B,GAC/B,IAAIsN,GAAS,EACTxQ,EAAS2oB,EAAM3oB,OAEfsB,EAAQ,IACVA,GAASA,EAAQtB,EAAS,EAAKA,EAASsB,IAE1C4B,EAAMA,EAAMlD,EAASA,EAASkD,GACpB,IACRA,GAAOlD,GAETA,EAASsB,EAAQ4B,EAAM,EAAMA,EAAM5B,IAAW,EAC9CA,KAAW,EAGX,IADA,IAAImX,EAAS5Y,MAAMG,KACVwQ,EAAQxQ,GACfyY,EAAOjI,GAASmY,EAAMnY,EAAQlP,GAEhC,OAAOmX,EAmCoCmQ,CAAUD,EAAOrnB,EAAO4B,GAkDrE,SAAS2lB,EAAStoB,GAChB,IAAIc,SAAcd,EAClB,QAASA,IAAkB,UAARc,GAA4B,YAARA,GAgDzC,SAASonB,EAASloB,GAChB,MAAuB,iBAATA,GAtBhB,SAAsBA,GACpB,QAASA,GAAyB,iBAATA,EAsBtBuoB,CAAavoB,IA5WF,mBA4WYynB,EAAe/oB,KAAKsB,GA0BhD,SAASwoB,EAASxoB,GAChB,OAAKA,GAGLA,EAgEF,SAAkBA,GAChB,GAAoB,iBAATA,EACT,OAAOA,EAET,GAAIkoB,EAASloB,GACX,OAldM,IAodR,GAAIsoB,EAAStoB,GAAQ,CACnB,IAAIyoB,EAAgC,mBAAjBzoB,EAAM0oB,QAAwB1oB,EAAM0oB,UAAY1oB,EACnEA,EAAQsoB,EAASG,GAAUA,EAAQ,GAAMA,EAE3C,GAAoB,iBAATzoB,EACT,OAAiB,IAAVA,EAAcA,GAASA,EAEhCA,EAAQA,EAAMQ,QAAQslB,EAAQ,IAC9B,IAAI6C,EAAW3C,EAAWjO,KAAK/X,GAC/B,OAAQ2oB,GAAY1C,EAAUlO,KAAK/X,GAC/B8mB,EAAa9mB,EAAMF,MAAM,GAAI6oB,EAAW,EAAI,GAC3C5C,EAAWhO,KAAK/X,GA/db,KA+d6BA,EAlF7B4oB,CAAS5oB,MAhZJ,KAiZaA,KAjZb,IAEG,uBAgZFA,EAAQ,GAAK,EAAI,GAGxBA,GAAUA,EAAQA,EAAQ,EAPd,IAAVA,EAAcA,EAAQ,EAiJjCmB,EAAOC,QAVP,SAAkB8lB,EAAQznB,EAAQopB,GA3BlC,IAAkB7oB,EA4BhBknB,EA3BgB,OADAlnB,EA4BEknB,GA3BK,GAAKe,EAAajoB,GA8BzC,IAAI8oB,GAFJrpB,EArGF,SAAmBO,GACjB,IAAIkY,EAASsQ,EAASxoB,GAClB+oB,EAAY7Q,EAAS,EAEzB,OAAOA,GAAWA,EAAU6Q,EAAY7Q,EAAS6Q,EAAY7Q,EAAU,EAiG9D8Q,CAAUvpB,IAEM0nB,EAAWD,GAAU,EAC9C,OAAQznB,GAAUqpB,EAAYrpB,EAlQhC,SAAuBA,EAAQopB,GAG7B,IAAII,GAFJJ,OAAkBloB,IAAVkoB,EAAsB,IAAMZ,EAAaY,IAEzBppB,OACxB,GAAIwpB,EAAc,EAChB,OAAOA,EAAcjB,EAAWa,EAAOppB,GAAUopB,EAEnD,IAAI3Q,EAAS8P,EAAWa,EAAOlB,EAAWloB,EAAS0nB,EAAW0B,KAC9D,OAAO5B,EAAW4B,GACdV,EAAUb,EAAcpP,GAAS,EAAGzY,GAAQM,KAAK,IACjDmY,EAAOpY,MAAM,EAAGL,GAyPfypB,CAAczpB,EAASqpB,EAAWD,GAAS3B,EAC5CA,K,mCCtiBN,YAUA,IAwFsB1lB,EA/ElBskB,EAAS,aAGTC,EAAa,qBAGbC,EAAa,aAGbC,EAAY,cASZC,EAAW,oBACXC,EAAU,kDACVC,EAAS,2BAETC,EAAc,qBACdC,EAAa,kCACbC,EAAa,qCAIbC,EAPa,MAAQL,EAAU,IAAMC,EAAS,IAOtB,IAGxBK,EAFW,oBAEQD,GADP,gBAAwB,CAACH,EAAaC,EAAYC,GAAYxmB,KAAK,KAAnE,qBAA2FymB,EAAW,MAElHE,EAAW,MAAQ,CAACL,EAAcF,EAAU,IAAKA,EAASG,EAAYC,EAAYL,GAAUnmB,KAAK,KAAO,IAGxG4mB,EAAYC,OAAOR,EAAS,MAAQA,EAAS,KAAOM,EAAWD,EAAO,KAGtEI,EAAeD,OAAO,uFAGtBE,EAAetY,SAGfpL,EAA8B,iBAAVC,GAAsBA,GAAUA,EAAOvE,SAAWA,QAAUuE,EAGhFC,EAA0B,iBAARZ,MAAoBA,MAAQA,KAAK5D,SAAWA,QAAU4D,KAGxEqkB,EAAO3jB,GAAcE,GAAYE,SAAS,cAATA,GASjCwjB,GAoBkBxlB,EApBO,SAqBpB,SAAS0T,GACd,OAAiB,MAAVA,OAAiBvU,EAAYuU,EAAO1T,KAW/C,SAASylB,EAAWC,GAClB,OAAOL,EAAa9O,KAAKmP,GAU3B,SAASC,EAAWD,GAClB,OAAOD,EAAWC,GAyBpB,SAAqBA,GACnB,IAAIhP,EAASyO,EAAUS,UAAY,EACnC,KAAOT,EAAU5O,KAAKmP,IACpBhP,IAEF,OAAOA,EA7BHmP,CAAYH,GACZF,EAAUE,GAUhB,SAASI,EAAcJ,GACrB,OAAOD,EAAWC,GA2BpB,SAAwBA,GACtB,OAAOA,EAAO7O,MAAMsO,IAAc,GA3B9BY,CAAeL,GAlDrB,SAAsBA,GACpB,OAAOA,EAAO/E,MAAM,IAkDhBqF,CAAaN,GA8BnB,IAOIO,EAPc3oB,OAAOD,UAOQ6oB,SAG7BhX,EAASqW,EAAKrW,OAGdiX,EAAa/jB,KAAKgkB,KAClBC,EAAcjkB,KAAK8N,MAGnBoW,EAAcpX,EAASA,EAAO7R,eAAY8B,EAC1ConB,EAAiBD,EAAcA,EAAYJ,cAAW/mB,EAU1D,SAASqnB,EAAWd,EAAQ9Z,GAC1B,IAAI8K,EAAS,GACb,IAAKgP,GAAU9Z,EAAI,GAAKA,EA3LH,iBA4LnB,OAAO8K,EAIT,GACM9K,EAAI,IACN8K,GAAUgP,IAEZ9Z,EAAIya,EAAYza,EAAI,MAElB8Z,GAAUA,SAEL9Z,GAET,OAAO8K,EAyCT,SAAS+P,EAAajoB,GAEpB,GAAoB,iBAATA,EACT,OAAOA,EAET,GAAIkoB,EAASloB,GACX,OAAO+nB,EAAiBA,EAAerpB,KAAKsB,GAAS,GAEvD,IAAIkY,EAAUlY,EAAQ,GACtB,MAAkB,KAAVkY,GAAkB,EAAIlY,IA7PjB,IA6PwC,KAAOkY,EAY9D,SAASiQ,EAAUC,EAAOrnB,EAAO4B,GAC/B,IAAIlD,EAAS2oB,EAAM3oB,OAEnB,OADAkD,OAAchC,IAARgC,EAAoBlD,EAASkD,GAC1B5B,GAAS4B,GAAOlD,EAAU2oB,EArDrC,SAAmBA,EAAOrnB,EAAO4B,GAC/B,IAAIsN,GAAS,EACTxQ,EAAS2oB,EAAM3oB,OAEfsB,EAAQ,IACVA,GAASA,EAAQtB,EAAS,EAAKA,EAASsB,IAE1C4B,EAAMA,EAAMlD,EAASA,EAASkD,GACpB,IACRA,GAAOlD,GAETA,EAASsB,EAAQ4B,EAAM,EAAMA,EAAM5B,IAAW,EAC9CA,KAAW,EAGX,IADA,IAAImX,EAAS5Y,MAAMG,KACVwQ,EAAQxQ,GACfyY,EAAOjI,GAASmY,EAAMnY,EAAQlP,GAEhC,OAAOmX,EAmCoCmQ,CAAUD,EAAOrnB,EAAO4B,GAkDrE,SAAS2lB,EAAStoB,GAChB,IAAIc,SAAcd,EAClB,QAASA,IAAkB,UAARc,GAA4B,YAARA,GAgDzC,SAASonB,EAASloB,GAChB,MAAuB,iBAATA,GAtBhB,SAAsBA,GACpB,QAASA,GAAyB,iBAATA,EAsBtBuoB,CAAavoB,IA5WF,mBA4WYynB,EAAe/oB,KAAKsB,GA0BhD,SAASwoB,EAASxoB,GAChB,OAAKA,GAGLA,EAgEF,SAAkBA,GAChB,GAAoB,iBAATA,EACT,OAAOA,EAET,GAAIkoB,EAASloB,GACX,OAldM,IAodR,GAAIsoB,EAAStoB,GAAQ,CACnB,IAAIyoB,EAAgC,mBAAjBzoB,EAAM0oB,QAAwB1oB,EAAM0oB,UAAY1oB,EACnEA,EAAQsoB,EAASG,GAAUA,EAAQ,GAAMA,EAE3C,GAAoB,iBAATzoB,EACT,OAAiB,IAAVA,EAAcA,GAASA,EAEhCA,EAAQA,EAAMQ,QAAQslB,EAAQ,IAC9B,IAAI6C,EAAW3C,EAAWjO,KAAK/X,GAC/B,OAAQ2oB,GAAY1C,EAAUlO,KAAK/X,GAC/B8mB,EAAa9mB,EAAMF,MAAM,GAAI6oB,EAAW,EAAI,GAC3C5C,EAAWhO,KAAK/X,GA/db,KA+d6BA,EAlF7B4oB,CAAS5oB,MAhZJ,KAiZaA,KAjZb,IAEG,uBAgZFA,EAAQ,GAAK,EAAI,GAGxBA,GAAUA,EAAQA,EAAQ,EAPd,IAAVA,EAAcA,EAAQ,EAiJjCmB,EAAOC,QAVP,SAAgB8lB,EAAQznB,EAAQopB,GA3BhC,IAAkB7oB,EA4BhBknB,EA3BgB,OADAlnB,EA4BEknB,GA3BK,GAAKe,EAAajoB,GA8BzC,IAAI8oB,GAFJrpB,EArGF,SAAmBO,GACjB,IAAIkY,EAASsQ,EAASxoB,GAClB+oB,EAAY7Q,EAAS,EAEzB,OAAOA,GAAWA,EAAU6Q,EAAY7Q,EAAS6Q,EAAY7Q,EAAU,EAiG9D8Q,CAAUvpB,IAEM0nB,EAAWD,GAAU,EAC9C,OAAQznB,GAAUqpB,EAAYrpB,EACzBynB,EAnQP,SAAuBznB,EAAQopB,GAG7B,IAAII,GAFJJ,OAAkBloB,IAAVkoB,EAAsB,IAAMZ,EAAaY,IAEzBppB,OACxB,GAAIwpB,EAAc,EAChB,OAAOA,EAAcjB,EAAWa,EAAOppB,GAAUopB,EAEnD,IAAI3Q,EAAS8P,EAAWa,EAAOlB,EAAWloB,EAAS0nB,EAAW0B,KAC9D,OAAO5B,EAAW4B,GACdV,EAAUb,EAAcpP,GAAS,EAAGzY,GAAQM,KAAK,IACjDmY,EAAOpY,MAAM,EAAGL,GAyPNypB,CAAczpB,EAASqpB,EAAWD,GAC5C3B,K,+CCniBN,IAAIiC,EAAiB,EAAQ,KAEzBC,EAAS,aACTC,EAAa,kBAqJjBloB,EAAOC,QAnJe,SAASka,EAAQqC,GAErC,GAAiB,MAAbA,EAAM,GACR,MAAO,CAAC7c,KAAM,WAIhB,GAAIuoB,EAAWtR,KAAK4F,GAAQ,CAC1B,IAAI2L,EAAc3L,EAAMtF,MAAMgR,GAC1BE,EAAUD,EAAY,GACtBE,EAAUF,EAAY,GACtBG,EAAWN,EAAe7N,EAAQkO,GAOtC,MAAO,CAAC1oB,KAAM,WAAYqC,IALZ,SAASumB,GAGrB,OAFAA,EAAKH,GAAWE,EAASC,GAElBA,IAMX,IAOIA,EAAO/L,EAAMwE,MAAM,KAAKziB,KAPf,SAASiqB,GACpB,OAAIP,EAAOrR,KAAK4R,GACPxiB,OAAOwiB,GAETR,EAAe7N,EAAQqO,MAI5B5rB,EAAO2rB,EAAK,GACZE,EAAMF,EAAK,GAGf,OAAa,IAAT3rB,EACK,CACL+C,KAAM,SACN8oB,IAAKA,EACLC,IAAKH,EAAK,GACVnhB,GAAImhB,EAAK,GACTlhB,GAAIkhB,EAAK,GAETI,IAAKJ,EAAK,IAAM,IAKP,IAAT3rB,GACFud,EAAOuC,MAAM,+DAGF,IAAT9f,GAAuB,KAATA,EACT,CACL+C,KAAM,OACN8oB,IAAKA,EACLxlB,MAAOslB,EAAK,GACZK,GAAIL,EAAK,GACTM,GAAIN,EAAK,GACTO,GAAIP,EAAK,GACTQ,GAAIR,EAAK,GACTI,IAAKJ,EAAK,IAKD,KAAT3rB,EACK,CACL+C,KAAM,OACN8oB,IAAKA,EACLxlB,MAAOslB,EAAK,GACZrlB,OAAQqlB,EAAK,GACbnhB,GAAImhB,EAAK,GACTlhB,GAAIkhB,EAAK,GACTI,IAAKJ,EAAK,IAID,KAAT3rB,GACFud,EAAOuC,MACL,iEAEK,CACL/c,KAAM,SACN8oB,IAAKA,EACLxlB,MAAOslB,EAAK,GACZrlB,OAAQqlB,EAAK,GACbxlB,EAAGwlB,EAAK,GACRvlB,EAAGulB,EAAK,GACRI,IAAKJ,EAAK,KAID,IAAT3rB,EACK,CACL+C,KAAM,UACN8oB,IAAKA,EACLO,OAAQT,EAAK5pB,MAAM,GAAI,GACvBgqB,IAAKJ,EAAKA,EAAKjqB,OAAS,IAIf,IAAT1B,EACK,CACL+C,KAAM,OACN8oB,IAAKA,EACLQ,SAAUV,EAAK,GACfnhB,GAAImhB,EAAK,GACTlhB,GAAIkhB,EAAK,GACTG,IAAKH,EAAK,GACVI,IAAKJ,EAAK,IAID,IAAT3rB,EAEK,CACL+C,KAAM,QACN8oB,IAAK,EACLrhB,GAAImhB,EAAK,GACTlhB,GAAIkhB,EAAK,GACTG,IAAKH,EAAK,GACVW,QAASX,EAAK,GACdY,QAASZ,EAAK,GACda,SAAUb,EAAK,GACfc,SAAUd,EAAK,GACfe,SAAUf,EAAK,GACfI,IAAKJ,EAAK,IAID,IAAT3rB,EAEK,CACL+C,KAAM,UACN8oB,IAAK,EACLrhB,GAAImhB,EAAK,GACTlhB,GAAIkhB,EAAK,GACTgB,SAAUhB,EAAK,GACfiB,SAAUjB,EAAK,GACfkB,IAAKlB,EAAK,GACVI,IAAKJ,EAAK,SAGZpO,EAAOuC,MAAM9f,EAAO,yD,6BCpJxB,IACI8sB,EAAY,UACZC,EAAW,IAAIlE,OAAO,CAFd,aAEqBzH,OAAQ0L,EAAU1L,QAAQpf,KAAK,KAAM,KAEtEoB,EAAOC,QAAU,SAA8Bka,EAAQyP,GAErD,IAGIC,EAHAC,EAASF,EAAK1S,MAAMyS,GAMpBI,EAAe,WACjB,IACItB,EADAuB,EAAIF,EAAOvnB,QASf,OANImnB,EAAU9S,KAAKoT,GACjBvB,EAAM,CAAC9oB,KAAM,IAAKgkB,IAAKqG,IAEvBvB,EAAMoB,IACNC,EAAOvnB,SAEFkmB,GAILwB,EAAsB,WACxB,IAAIxB,EAAMsB,IACNC,EAAIF,EAAO,GAMf,IAJU,MAANE,IACF7P,EAAOuC,MAAM,oDACbsN,EAAI,KAEO,MAANA,GAAmB,MAANA,GAAW,CAC7BF,EAAOvnB,QAEPkmB,EAAM,CAAC9oB,KAAMqqB,EAAGE,KAAMzB,EAAK0B,MADfJ,KAEZC,EAAIF,EAAO,GAEb,OAAOrB,GAiBL2B,GAbJP,EAAkB,WAGhB,IAFA,IAAIpB,EAAMwB,IACND,EAAIF,EAAO,GACF,MAANE,GAAmB,MAANA,GAAW,CAC7BF,EAAOvnB,QAEPkmB,EAAM,CAAC9oB,KAAMqqB,EAAGE,KAAMzB,EAAK0B,MADfF,KAEZD,EAAIF,EAAO,GAEb,OAAOrB,MAOLH,EAAW,SAASpS,EAAIqS,GAC1B,IAAwByB,EAOpBrqB,EAAOuW,EAAGvW,KACd,MAAa,MAATA,EAPW,OADSqqB,EASN9T,EAAGyN,KARb,GACG3d,OAAOuiB,EAAKyB,IAEdhkB,OAAOgkB,GAOH,MAATrqB,EACK2oB,EAASpS,EAAGgU,KAAM3B,GAAQD,EAASpS,EAAGiU,MAAO5B,GAEzC,MAAT5oB,EACK2oB,EAASpS,EAAGgU,KAAM3B,GAAQD,EAASpS,EAAGiU,MAAO5B,GAEzC,MAAT5oB,EACK2oB,EAASpS,EAAGgU,KAAM3B,GAAQD,EAASpS,EAAGiU,MAAO5B,GAG/CD,EAASpS,EAAGgU,KAAM3B,GAAQD,EAASpS,EAAGiU,MAAO5B,IAItD,OAAO,SAASA,GACd,OAAOD,EAAS8B,EAAM7B,M,6BCtF1B,IAAI/iB,EAAc,EAAQ,KAEtBgc,EAAW,EAAQ,KACnB1F,EAAY,EAAQ,KACpBtF,EAAY,EAAQ,KACpBiL,EAAa,EAAQ,KAErB4I,EAAiB,yBACjBC,EAAyB,4BACzBC,EAAa,yFAEblI,EAAW,yBACXmI,EAAU,WACVlI,EAAY,sBACZG,EAAc,yBACdgI,EAAc,qBACdrI,EAAW,kEACXsI,EAAW,eAuHXC,EAAa,SAASxQ,EAAQqC,EAAO1G,GACvC,GAAI2M,EAAY7L,KAAK4F,GAAQ,CAC3B,IAAIoH,EAAYpH,EAAMtF,MAAMuL,GACxBmI,EAAWhH,EAAU,GAErBI,EAAU,CAACP,MAAO,SAAUQ,OAAQ,CAD1BzN,EAAUoN,EAAU,KACiBG,KAAM,IAEzD,OAAO5J,EAAOsC,MAAM+E,EAASvL,KAAK2U,EAAU5G,EAASlO,IAIvD,GAAI2U,EAAY7T,KAAK4F,GAAQ,CAC3B,IAAIqO,EAAUrO,EAAMtF,MAAMuT,GAAa,GAIvCtQ,EAAOsC,MAAM+E,EAASxf,IAAI,OAAQ6oB,EAAS/U,IAG7C,OAAIsM,EAASxL,KAAK4F,IACXrC,EAAOxU,OAAOM,SACjBkU,EAAOxU,OAAOM,OAAS,CAAC,EAAG,GAC3BkU,EAAOuC,MAAM,2CAGVvC,EAAOxU,OAAOI,OACjBoU,EAAOxU,OAAOI,KAAO,IACrBoU,EAAOuC,MAAM,4DAlEE,SAASvC,EAAQqC,EAAO1G,GAC3C,IAAImB,EAAauF,EAAMtF,MAAMkL,GACzB/L,EAAQoL,EAAW5K,MAAMI,EAAW,GAAIkD,EAAOxU,QAGnD,GAAIsR,EAAW,GAKb,OAJAkD,EAAOsC,MAAM+E,EAAStL,GAAG,OAAQG,EAAOP,IACxCqE,EAAOsC,MAAM+E,EAASxf,IAAI,OAAQ,IAAK8T,IACvCO,EAAQoL,EAAW5K,MAAMI,EAAW,GAAIkD,EAAOxU,QAExCwU,EAAOsC,MAAM+E,EAAStL,GAAG,MAAOG,EAAOP,IAQhD,OAJI4U,EAAS9T,KAAK4F,KAChBrC,EAAO+B,WAAaM,EAAMtF,MAAMwT,GAAU,IAGpCvQ,EAAO+B,YACb,KAAKJ,EAAU1E,MACb,OAAO+C,EAAOsC,MAAM+E,EAAStL,GAAG,QAASG,EAAOP,IAElD,KAAKgG,EAAUzE,KACb,OAAO8C,EAAOsC,MAAM+E,EAAStL,GAAG,OAAQG,EAAOP,IAEjD,KAAKgG,EAAUxE,OAEb,OADA6C,EAAOsC,MAAM+E,EAASxf,IAAI,OAAQ,IAAK8T,IAChCqE,EAAOsC,MAAM+E,EAAStL,GAAG,MAAOG,EAAOP,IAEhD,KAAKgG,EAAUvE,OAEb,OADA4C,EAAOsC,MAAM+E,EAASxf,IAAI,OAAQ,KAAM8T,IACjCqE,EAAOsC,MAAM+E,EAAStL,GAAG,MAAOG,EAAOP,IAEhD,KAAKgG,EAAUtE,QAEb,OADA2C,EAAOsC,MAAM+E,EAASxf,IAAI,OAAQ,MAAO8T,IAClCqE,EAAOsC,MAAM+E,EAAStL,GAAG,MAAOG,EAAOP,KAkCzCgV,CAAe3Q,EAAQqC,EAAO1G,IAGzB,QAAV0G,GAA6B,QAAVA,EACdrC,EAAOsC,MAAM+E,EAAS9L,KAAKI,IAGtB,QAAV0G,EACKrC,EAAOsC,MAAM+E,EAASxf,IAAI,OAAQ,IAAK8T,IAGlC,QAAV0G,EACKrC,EAAOsC,MAAM+E,EAASxf,IAAI,OAAQ,IAAK8T,IAG5CuM,EAASzL,KAAK4F,GA9GH,SAASrC,EAAQqC,EAAO1G,GACvC,IAAI+M,EAAarG,EAAMtF,MAAMmL,GACzB0I,EAAYvO,EAAMtF,MAAMsT,GACxBxH,EAAcxG,EAAMtF,MAAMoL,GAC1BhI,EACgB,WAAlBuI,EAAW,IAAqC,QAAlBA,EAAW,GAAe,KAAO,KAE7DmI,EAAOD,GAAaA,EAAU,GAER,MAAtB5Q,EAAOxU,OAAOI,MAAgBilB,IAEhC7Q,EAAOxU,OAAOI,KAAgB,MAATilB,EAAe,IAAM,KAGhB,MAAxB7Q,EAAOxU,OAAOM,SAEdkU,EAAOxU,OAAOM,OADZ+c,EACqB,CAACA,EAAY,GAAG1kB,OAAQ0kB,EAAY,GAAG1kB,QAG7B,OAAVgc,EAAiB,CAAC,EAAG,GAAK,CAAC,EAAG,IAIzDH,EAAOsC,MAAM+E,EAASxf,IAAI,QAASsY,EAAOxE,IAwFjC8M,CAAWzI,EAAQqC,EAAO1G,QADnC,GAKEN,EAAQ,SAAS2E,GACnBA,EAAOgC,YAAY9C,SAAQ,SAASlN,GAClCwe,EAAWxQ,EAAQhO,EAAKqQ,MAAOrQ,EAAK2J,SAEtCqE,EAAOgC,YAAc,IA0CvBnc,EAAOC,QAAU,CAAC4W,MAvCN,SAASsD,EAAQqC,GAC3B,GAAiB,MAAbA,EAAM,GAAY,CAEpB,IAAIyO,EAjLyB,SAAS9Q,EAAQqC,EAAO1G,GACvD,IAAIiB,EAAS,GAEb,GAAIwT,EAAW3T,KAAK4F,GAAQ,CAC1B,IAAI0O,EAAa1O,EAAMtF,MAAMqT,GACzBrkB,EAAUF,OAAOklB,EAAW,IAC5B/kB,EAAWH,OAAOklB,EAAW,IAC7BC,EAAWD,EAAW,GACtBE,EAAUF,EAAW,GACrBG,EAAiBH,EAAW,GAG5B1lB,EAAYU,IAAYV,EAAYW,KACtC4Q,EAAO9Q,OAAS,CAACC,EAASC,IAIX,aAAbglB,EACFhR,EAAOsC,MAAM+E,EAASxf,IAAI,aAAc,IAAK8T,IAE7CqE,EAAOsC,MAAM+E,EAASxf,IAAI,aAAc,IAAK8T,IAI/B,WAAZsV,EACFjR,EAAOsC,MAAM+E,EAASxf,IAAI,cAAe,KAAM8T,IAE/CqE,EAAOsC,MAAM+E,EAASxf,IAAI,cAAe,KAAM8T,IAK/CiB,EAAOhR,KADc,YAAnBslB,GAAmD,SAAnBA,EACpB,IACc,aAAnBA,EACK,IAEA,SAEX,GAAIhB,EAAezT,KAAK4F,GAAQ,CAErC,IAAI8O,EAAc9O,EAAMtF,MAAMmT,GAE9BtT,EAAO9Q,OAAS,CAACD,OAAOslB,EAAY,IAAKtlB,OAAOslB,EAAY,UACvD,GAAIhB,EAAuB1T,KAAK4F,GAAQ,CAC7C,IACI+O,EAAkC,WADnB/O,EAAMtF,MAAMoT,GACA,GAAkB,MAAQ,OACzDnQ,EAAOsC,MAAM+E,EAASxf,IAAI,cAAeupB,EAAazV,IAGxD,OAAOiB,EAgIayU,CAA2BrR,EAAQqC,EAAOrC,EAAOrE,MAEnEnY,OAAOwC,KAAK8qB,GAAa5R,SAAQ,SAAShZ,GACnC8Z,EAAOxU,OAAOtF,KACjB8Z,EAAOxU,OAAOtF,GAAO4qB,EAAY5qB,YAG3B8Z,EAAOxU,OAAOI,KAyBxB4kB,EAAWxQ,EAAQqC,EAAOrC,EAAOrE,OAvBjCqE,EAAOgC,YAAY7b,KAAK,CAACwV,KAAMqE,EAAOrE,KAAM0G,MAAOA,IAE/C4F,EAASxL,KAAK4F,KAChBrC,EAAOxU,OAAOI,KAAO0b,EAAWtK,WAAWqF,GAEvCrC,EAAOxU,OAAOI,MAChBoU,EAAOuC,MACL,uCAC0B,MAAvBvC,EAAOxU,OAAOI,KAAe,UAAY,YAC1C,kBAMNoU,EAAOxU,OAAOI,MACdykB,EAAQ5T,KAAK4F,IACbrC,EAAOgC,YAAY7d,QAAU,MAE7BkX,EAAM2E,KAQoB3E,MAAOA,I,6BCrOvCxV,EAAOC,QAJO,SAASpD,EAASiZ,GAC9B,MAAO,CAACjZ,QAASA,EAASiZ,KAAMA,K,6BCDlC,IAAI2V,EAAU,EAAQ,KAElBC,EAAa,SAASlR,GACxB,GAAa,MAATA,GAAyB,MAATA,EAClB,OAAOA,EAGT,MAAM,IAAIzd,MAAM,kCAGd4uB,EAAc,SAASrR,GACzB,GAAc,OAAVA,GAA4B,OAAVA,EACpB,OAAOA,EAGT,MAAM,IAAIvd,MAAM,+BAGlBiD,EAAOC,QAAU,SAAwBW,GAGvC,IAAI0Z,GAFJ1Z,EAAUA,GAAW,IAED0Z,MAAQqR,EAAY/qB,EAAQ0Z,OAAS,KACrDC,EAAc3Z,EAAQ2Z,YACtBoR,EAAY/qB,EAAQ2Z,aACpB,KAEAC,EAAO5Z,EAAQ4Z,KAAOkR,EAAW9qB,EAAQ4Z,MAAQ,KACjDC,EAAa7Z,EAAQ6Z,WAAaiR,EAAW9qB,EAAQ6Z,YAAc,KAEvE,OAAO,IAAIgR,EACTnR,EACAC,EACAC,EACAC,EACA7Z,EAAQ8Z,cACR9Z,EAAQ+Z,iB,6BCnCZ,IAAIhG,EAAY,EAAQ,KAAmBA,UACvC6G,EAAW,EAAQ,IAEnBoQ,EAAY,EAAQ,KACpB/P,EAAU,EAAQ,KAClBgQ,EAAW,EAAQ,KACnBC,EAAU,EAAQ,KAClBC,EAAc,EAAQ,KAatBN,EAAU,SACZnR,EACAC,EACAC,EACAC,EACAC,EACAC,GAEAhG,EAAUpX,KAAKC,KAAM,CACnByL,oBAAoB,EACpB0I,oBAAoB,IAGtBnU,KAAKmI,OAAS,CACZ2U,MAAOA,EACPC,YAAaA,GAAe,KAC5BC,KAAMA,EACNC,WAAYA,GAAc,KAG5Bjd,KAAKwuB,YAAc,CACjB1R,MAAgB,MAATA,EACPC,YAA4B,MAAfA,EACbC,KAAc,MAARA,EACNC,WAA0B,MAAdA,GAGdjd,KAAKyuB,gBAAmC,IAAlBtR,EAtCV,MAsC6CA,EAGd,QAAtCL,GAAS9c,KAAKmI,OAAO4U,eACxB/c,KAAKyuB,eAAiBzuB,KAAKyuB,eAAiB,MAG9CzuB,KAAK0uB,eAAiBxR,GAAiBC,EAEvCnd,KAAK2uB,MAAQ,EACb3uB,KAAK4uB,OAAQ,EACb5uB,KAAK6uB,MAAQ,KACb7uB,KAAK8uB,SAAW,KAChB9uB,KAAK+uB,OAAS,GACd/uB,KAAKgvB,QAAU,GACfhvB,KAAKivB,KAAO,CAAC,EAAG,GAChBjvB,KAAKkvB,KAAOX,EAAYjlB,MACxBtJ,KAAKmvB,MAAQ,KACbnvB,KAAKovB,KAAO,KACZpvB,KAAKqvB,SAAU,EACfrvB,KAAKsvB,MAAQ,IAAIlB,EAAUpuB,KAAK0uB,eAAgB1uB,KAAKyuB,gBACrDzuB,KAAKuvB,SAAW,KAChBvvB,KAAKwvB,QAAU,KACfxvB,KAAKyvB,SAAW,IAGlBzR,EAASiQ,EAAS9W,GAElB8W,EAAQ/tB,UAAUwvB,YAAc,SAASC,GACvC,IAAIC,EAAO5vB,KAAKsvB,MAAMO,WAMtB,GALA7vB,KAAKsvB,MAAQ,IAAIlB,GACduB,GAAiB3vB,KAAK0uB,eACvB1uB,KAAKyuB,gBAGHmB,EAAK9uB,OAAQ,CAEf,IAAI2X,EAAQzY,KAAKyuB,eAA8BzuB,KAAK8uB,SAAlB9uB,KAAK6uB,MAElC7uB,KAAKqvB,SAAiC,IAAtB5W,EAAKqX,MAAMhvB,OAG9Bd,KAAK8C,KAAK,CAACX,KAAM,OAAQytB,KAAMA,IAF/B5vB,KAAK8C,KAAK,CAACX,KAAM,SAAUsD,MAAOgT,EAAKqX,MAAM,GAAIF,KAAMA,MAO7D3B,EAAQ/tB,UAAUgf,MAAQ,SAAS7f,GACjCW,KAAK0N,KAAK,UAAW2Q,EAAQhf,EAASW,KAAK2uB,SAG7CV,EAAQ/tB,UAAU6vB,aAAe,WAC1B/vB,KAAKmI,OAAO2U,QACf9c,KAAKmI,OAAO2U,MAAQ9c,KAAKmI,OAAO4U,YAChC/c,KAAKkf,MAAM,sCAAwClf,KAAKmI,OAAO2U,QAG5D9c,KAAKmI,OAAO6U,OACfhd,KAAKmI,OAAO6U,KAAOhd,KAAKmI,OAAO8U,WAC/Bjd,KAAKkf,MAAM,4CAA8Clf,KAAKmI,OAAO6U,QAIzEiR,EAAQ/tB,UAAU8vB,WAAa,SAAS5qB,GACtC,IAAI6qB,EAAajwB,KAAKyvB,SAAS3uB,OAC/B,GAAKmvB,EAEE,CACL,IAAIC,EAAY3B,EAAYzkB,OAAO1E,EAAKpF,KAAKyvB,SAASQ,EAAa,IACnEjwB,KAAKkvB,KAAOX,EAAYzlB,IAAI9I,KAAKkvB,KAAMgB,QAHvClwB,KAAKkvB,KAAOX,EAAYzlB,IAAI9I,KAAKkvB,KAAM9pB,IAO3C6oB,EAAQ/tB,UAAU6X,WAAa,SAAS/K,EAAON,EAAUwL,GACvD,IA9GyBrV,EA8GrBV,EAAO6K,EAAM7K,KAGjB,GAFAnC,KAAK2uB,MAAQ3hB,EAAMsL,KAEftY,KAAK4uB,MAGP,OAFA5uB,KAAKkf,MAAM,sDAEJhH,IAIT,GAAa,OAAT/V,EAAe,CACjBnC,KAAK+vB,eAEL,IAAIrX,EAAK1L,EAAM0L,GACXG,EAAQ7L,EAAM6L,MAElB,GAAkB,MAAd7Y,KAAKgd,KAAc,CACrB,IAAInL,EAAQ7R,KAEZ6Y,EAAQ1Y,OAAOwC,KAAKkW,GAAOS,QAAO,SAASC,EAAQ1W,GACjD,IAAIxB,EAAQwX,EAAMhW,GAUlB,OAPE0W,EAAO1W,GADG,MAARA,EACYgP,EAAMod,KAAK,GAAK5tB,EACb,MAARwB,EACKgP,EAAMod,KAAK,GAAK5tB,EAEhBA,EAGTkY,IACN,IAGM,SAAPb,IACF1Y,KAAKkf,MAAM,2CACXxG,EAAK1Y,KAAKwvB,SAGD,QAAP9W,IACgB,MAAd1Y,KAAKmvB,QACPnvB,KAAKkf,MAAM,oDACXlf,KAAKmvB,MAAQ,KAGE,MAAbnvB,KAAKovB,MAAyC,OAAzBpvB,KAAKmvB,MAAMhuB,OAAO,IAAgB0X,EAAMsX,IAC/DnwB,KAAKkf,MAAM,uDACXlf,KAAKovB,KAAO,MAIZpvB,KAAKyuB,iBACPzuB,KAAK8uB,SAAW9uB,KAAK6uB,OAGvB,IAAItV,EAAS+U,EACX5V,EACAG,EACA7Y,KAAKivB,KACLjvB,KAAK6uB,MACL7uB,KAAKmvB,MACLnvB,KAAKovB,KACLpvB,KAAKqvB,SAAWrvB,KAAKyuB,eACrBzuB,KAAKsvB,MACLtvB,KAAKuvB,SACLvvB,MAGFA,KAAKwvB,QAAU9W,EACf1Y,KAAKivB,KAAO1V,EAAO7X,IACnB1B,KAAKgwB,WAAWzW,EAAOnU,UAClB,GAAa,QAATjD,EAAgB,CACzB,IAAIoW,EAAOvL,EAAMuL,KACblX,EAAQ2L,EAAM3L,MAGL,WAATkX,GACFvY,KAAK0vB,YAAYruB,GACjBrB,KAAKqvB,QAAUhuB,GA1LT,WAFewB,EA6LA0V,IA1Lf,gBAAR1V,GACQ,SAARA,GACQ,eAARA,GAwLiC7C,KAAKwuB,YAAYjW,GAM9B,SAATA,EAELvY,KAAKqvB,QACPrvB,KAAKkf,MAAM,8CACDlf,KAAK+uB,OAAO1tB,GAEZrB,KAAK8uB,WACf9uB,KAAK0vB,cACL1vB,KAAK6uB,MAAQ7uB,KAAK+uB,OAAO1tB,IAHzBrB,KAAKkf,MAAM,QAAU7d,EAAQ,mBAO/BrB,KAAK,IAAMuY,GAAQlX,GAhBnBrB,KAAKmI,OAAOoQ,GAAQlX,EACP,UAATkX,GAA6B,SAATA,IACtBvY,KAAKwuB,YAAYjW,IAAQ,SAgBxB,GAAa,SAATpW,EAAiB,CAE1B,IAAI/C,EAAO4N,EAAM5N,KACbonB,EAAUxZ,EAAMyL,KAEhBzY,KAAK+uB,OAAO3vB,IACdY,KAAKkf,MAAM,QAAU9f,EAAO,+CAG9B,IAAIgxB,EAAc/B,EAAS7H,EAASxmB,KAAKgvB,SACrCvW,EAAO,CACTrZ,KAAMA,EACN0wB,MAAO,GACPO,IAAKD,EAAYnK,MACjBqK,SAAS,EACTlrB,IAAKgrB,EAAYhrB,KAGG,WAAlBohB,EAAQP,OAAwC,SAAlBO,EAAQP,OACZ,IAAxBO,EAAQD,KAAKzlB,SACf2X,EAAKqX,MAAQtJ,EAAQC,QAIpBzmB,KAAK8uB,WACR9uB,KAAK0vB,cACL1vB,KAAK+uB,OAAO3vB,GAAQqZ,EACpBzY,KAAK6uB,MAAQpW,QAEV,GAAa,UAATtW,EACTnC,KAAKgvB,QAAQhiB,EAAMzM,MAAQyM,EAAM+L,YAC5B,GAAa,UAAT5W,EAAkB,CAC3B,IAAIqW,EAAQxL,EAAMwL,MACd+X,EAAavjB,EAAM3L,MAIvB,GAFArB,KAAK0vB,cAES,aAAVlX,EACFxY,KAAK8C,KAAK,CACRX,KAAM,WACN0jB,SAAyB,MAAf0K,EAAqB,QAAU,OACzCnrB,IAAKpF,KAAKkvB,KAAK/tB,MAAM,SAElB,CAEL,IAAIqvB,EAAU,GACd,GAAID,EAAWhrB,EAAI,GAAKgrB,EAAW/qB,EAAI,EACrC,IAAK,IAAID,EAAI,EAAGA,EAAIgrB,EAAWhrB,EAAGA,IAChC,IAAK,IAAIC,EAAI,EAAGA,EAAI+qB,EAAW/qB,EAAGA,IAChCgrB,EAAQ1tB,KAAK,CAACyC,EAAIgrB,EAAWvvB,EAAGwE,EAAI+qB,EAAWxK,IAKrD/lB,KAAKyvB,SAAWe,EAEhBxwB,KAAK8C,KAAK,CACRX,KAAM,SACNquB,QAASxwB,KAAKyvB,SAAStuB,MAAM,GAC7BiE,IAAKpF,KAAKkvB,KAAK/tB,MAAM,UAGP,SAATgB,IACTnC,KAAK4uB,OAAQ,GAGf,OAAO1W,KAGT+V,EAAQ/tB,UAAU+X,OAAS,SAASC,GAClClY,KAAK0vB,cAEL1vB,KAAK8C,KAAK,CAACX,KAAM,OAAQiD,IAAKpF,KAAKkvB,KAAMpS,MAAO9c,KAAKmI,OAAO2U,QAC5D5E,KAGF1V,EAAOC,QAAUwrB,G,iBC3SjBxrB,EAAUD,EAAOC,QAAU,EAAQ,MAC3B2H,OAAS3H,EACjBA,EAAQO,SAAWP,EACnBA,EAAQQ,SAAW,EAAQ,KAC3BR,EAAQM,OAAS,EAAQ,KACzBN,EAAQ0U,UAAY,EAAQ,KAC5B1U,EAAQ4c,YAAc,EAAQ,KAC9B5c,EAAQyE,SAAW,EAAQ,KAC3BzE,EAAQ6c,SAAW,EAAQ,M,6CCJ3B,SAASC,EAAgB3c,EAAKC,EAAKxB,GAAiK,OAApJwB,KAAOD,EAAOzC,OAAO8D,eAAerB,EAAKC,EAAK,CAAExB,MAAOA,EAAO6C,YAAY,EAAMsb,cAAc,EAAMjc,UAAU,IAAkBX,EAAIC,GAAOxB,EAAgBuB,EAE3M,IACIyH,EADW,EAAQ,IACDA,OAGlBoV,EADY,EAAQ,KACAA,QAEpBC,EAASD,GAAWA,EAAQC,QAAU,UAM1Cld,EAAOC,QAEP,WACE,SAASoI,IACP7K,KAAK0O,KAAO,KACZ1O,KAAK2f,KAAO,KACZ3f,KAAKc,OAAS,EAGhB,IAAI8e,EAAS/U,EAAW3K,UAgKxB,OA9JA0f,EAAO9c,KAAO,SAAcI,GAC1B,IAAIgQ,EAAQ,CACVvE,KAAMzL,EACN+P,KAAM,MAEJjT,KAAKc,OAAS,EAAGd,KAAK2f,KAAK1M,KAAOC,EAAWlT,KAAK0O,KAAOwE,EAC7DlT,KAAK2f,KAAOzM,IACVlT,KAAKc,QAGT8e,EAAO3R,QAAU,SAAiB/K,GAChC,IAAIgQ,EAAQ,CACVvE,KAAMzL,EACN+P,KAAMjT,KAAK0O,MAEO,IAAhB1O,KAAKc,SAAcd,KAAK2f,KAAOzM,GACnClT,KAAK0O,KAAOwE,IACVlT,KAAKc,QAGT8e,EAAO7a,MAAQ,WACb,GAAoB,IAAhB/E,KAAKc,OAAT,CACA,IAAIuO,EAAMrP,KAAK0O,KAAKC,KAGpB,OAFoB,IAAhB3O,KAAKc,OAAcd,KAAK0O,KAAO1O,KAAK2f,KAAO,KAAU3f,KAAK0O,KAAO1O,KAAK0O,KAAKuE,OAC7EjT,KAAKc,OACAuO,IAGTuQ,EAAOrQ,MAAQ,WACbvP,KAAK0O,KAAO1O,KAAK2f,KAAO,KACxB3f,KAAKc,OAAS,GAGhB8e,EAAOxe,KAAO,SAAcye,GAC1B,GAAoB,IAAhB7f,KAAKc,OAAc,MAAO,GAI9B,IAHA,IAAI4c,EAAI1d,KAAK0O,KACTW,EAAM,GAAKqO,EAAE/O,KAEV+O,EAAIA,EAAEzK,MACX5D,GAAOwQ,EAAInC,EAAE/O,KAGf,OAAOU,GAGTuQ,EAAO1e,OAAS,SAAgBuN,GAC9B,GAAoB,IAAhBzO,KAAKc,OAAc,OAAOuJ,EAAOyV,MAAM,GAK3C,IAJA,IA9DgB3P,EAAKpH,EAAQgX,EA8DzB1Q,EAAMhF,EAAO2V,YAAYvR,IAAM,GAC/BiP,EAAI1d,KAAK0O,KACT1N,EAAI,EAED0c,GAlESvN,EAmEHuN,EAAE/O,KAnEM5F,EAmEAsG,EAnEQ0Q,EAmEH/e,EAlE5BqJ,EAAOnK,UAAU+f,KAAKlgB,KAAKoQ,EAAKpH,EAAQgX,GAmEpC/e,GAAK0c,EAAE/O,KAAK7N,OACZ4c,EAAIA,EAAEzK,KAGR,OAAO5D,GAITuQ,EAAOpQ,QAAU,SAAiBf,EAAGyR,GACnC,IAAI7Q,EAcJ,OAZIZ,EAAIzO,KAAK0O,KAAKC,KAAK7N,QAErBuO,EAAMrP,KAAK0O,KAAKC,KAAKxN,MAAM,EAAGsN,GAC9BzO,KAAK0O,KAAKC,KAAO3O,KAAK0O,KAAKC,KAAKxN,MAAMsN,IAGtCY,EAFSZ,IAAMzO,KAAK0O,KAAKC,KAAK7N,OAExBd,KAAK+E,QAGLmb,EAAalgB,KAAKmgB,WAAW1R,GAAKzO,KAAKogB,WAAW3R,GAGnDY,GAGTuQ,EAAOtQ,MAAQ,WACb,OAAOtP,KAAK0O,KAAKC,MAInBiR,EAAOO,WAAa,SAAoB1R,GACtC,IAAIiP,EAAI1d,KAAK0O,KACT2R,EAAI,EACJhR,EAAMqO,EAAE/O,KAGZ,IAFAF,GAAKY,EAAIvO,OAEF4c,EAAIA,EAAEzK,MAAM,CACjB,IAAInR,EAAM4b,EAAE/O,KACR2R,EAAK7R,EAAI3M,EAAIhB,OAASgB,EAAIhB,OAAS2N,EAIvC,GAHI6R,IAAOxe,EAAIhB,OAAQuO,GAAOvN,EAASuN,GAAOvN,EAAIX,MAAM,EAAGsN,GAGjD,KAFVA,GAAK6R,GAEQ,CACPA,IAAOxe,EAAIhB,UACXuf,EACE3C,EAAEzK,KAAMjT,KAAK0O,KAAOgP,EAAEzK,KAAUjT,KAAK0O,KAAO1O,KAAK2f,KAAO,OAE5D3f,KAAK0O,KAAOgP,EACZA,EAAE/O,KAAO7M,EAAIX,MAAMmf,IAGrB,QAGAD,EAIJ,OADArgB,KAAKc,QAAUuf,EACRhR,GAITuQ,EAAOQ,WAAa,SAAoB3R,GACtC,IAAIY,EAAMhF,EAAO2V,YAAYvR,GACzBiP,EAAI1d,KAAK0O,KACT2R,EAAI,EAIR,IAHA3C,EAAE/O,KAAKsR,KAAK5Q,GACZZ,GAAKiP,EAAE/O,KAAK7N,OAEL4c,EAAIA,EAAEzK,MAAM,CACjB,IAAIsN,EAAM7C,EAAE/O,KACR2R,EAAK7R,EAAI8R,EAAIzf,OAASyf,EAAIzf,OAAS2N,EAIvC,GAHA8R,EAAIN,KAAK5Q,EAAKA,EAAIvO,OAAS2N,EAAG,EAAG6R,GAGvB,KAFV7R,GAAK6R,GAEQ,CACPA,IAAOC,EAAIzf,UACXuf,EACE3C,EAAEzK,KAAMjT,KAAK0O,KAAOgP,EAAEzK,KAAUjT,KAAK0O,KAAO1O,KAAK2f,KAAO,OAE5D3f,KAAK0O,KAAOgP,EACZA,EAAE/O,KAAO4R,EAAIpf,MAAMmf,IAGrB,QAGAD,EAIJ,OADArgB,KAAKc,QAAUuf,EACRhR,GAITuQ,EAAOF,GAAU,SAAUrJ,EAAGjT,GAC5B,OAAOqc,EAAQzf,KAjLnB,SAAuB+I,GAAU,IAAK,IAAI/H,EAAI,EAAGA,EAAI2F,UAAU7F,OAAQE,IAAK,CAAE,IAAIwf,EAAyB,MAAhB7Z,UAAU3F,GAAa2F,UAAU3F,GAAK,GAAQyf,EAAUtgB,OAAOwC,KAAK6d,GAAqD,mBAAjCrgB,OAAOugB,wBAAwCD,EAAUA,EAAQvf,OAAOf,OAAOugB,sBAAsBF,GAAQG,QAAO,SAAUC,GAAO,OAAOzgB,OAAO0gB,yBAAyBL,EAAQI,GAAK1c,gBAAmBuc,EAAQ5E,SAAQ,SAAUhZ,GAAO0c,EAAgBxW,EAAQlG,EAAK2d,EAAO3d,OAAa,OAAOkG,EAiL/b+X,CAAc,GAAI1d,EAAS,CAE9C2d,MAAO,EAEPC,eAAe,MAIZnW,EAvKT,I,8CCpBA,YAEA,IAAIoW,EAAuB,IAAIC,IAY/B1e,EAAOC,QAAQ4I,wBAA0BzH,EAAQud,YAVjD,SAAiCC,GAC/B,IAAIH,EAAqBI,IAAID,GAA7B,CACA,IAAIzf,EAAMyf,uEAEVH,EAAqBnY,IAAIsY,GACzBxd,EAAQud,YAAYxf,EAAK,yBAG3B,e,gDCZA,YAEA,IAAI2f,EAEJ,SAAS/B,EAAgB3c,EAAKC,EAAKxB,GAAiK,OAApJwB,KAAOD,EAAOzC,OAAO8D,eAAerB,EAAKC,EAAK,CAAExB,MAAOA,EAAO6C,YAAY,EAAMsb,cAAc,EAAMjc,UAAU,IAAkBX,EAAIC,GAAOxB,EAAgBuB,EAE3M,IAAIsE,EAAW,EAAQ,KAEnBqa,EAAexP,OAAO,eACtByP,EAAczP,OAAO,cACrB0P,EAAS1P,OAAO,SAChB2P,EAAS3P,OAAO,SAChB4P,EAAe5P,OAAO,eACtB6P,EAAiB7P,OAAO,iBACxB8P,EAAU9P,OAAO,UAErB,SAAS+P,EAAiBzgB,EAAO6W,GAC/B,MAAO,CACL7W,MAAOA,EACP6W,KAAMA,GAIV,SAAS6J,EAAeC,GACtB,IAAIC,EAAUD,EAAKT,GAEnB,GAAgB,OAAZU,EAAkB,CACpB,IAAItT,EAAOqT,EAAKH,GAASlV,OAIZ,OAATgC,IACFqT,EAAKL,GAAgB,KACrBK,EAAKT,GAAgB,KACrBS,EAAKR,GAAe,KACpBS,EAAQH,EAAiBnT,GAAM,MAKrC,SAASuT,EAAWF,GAGlBpe,EAAQC,SAASke,EAAgBC,GAgBnC,IAAIG,EAAyBhiB,OAAOwN,gBAAe,eAC/CyU,EAAuCjiB,OAAOkiB,gBA4D/C9C,EA5D+D+B,EAAwB,CACxF,aACE,OAAOthB,KAAK6hB,IAGd5O,KAAM,WACJ,IAAIpB,EAAQ7R,KAIR8H,EAAQ9H,KAAKyhB,GAEjB,GAAc,OAAV3Z,EACF,OAAOwa,QAAQC,OAAOza,GAGxB,GAAI9H,KAAK0hB,GACP,OAAOY,QAAQL,QAAQH,OAAiB9f,GAAW,IAGrD,GAAIhC,KAAK6hB,GAAStd,UAKhB,OAAO,IAAI+d,SAAQ,SAAUL,EAASM,GACpC3e,EAAQC,UAAS,WACXgO,EAAM4P,GACRc,EAAO1Q,EAAM4P,IAEbQ,EAAQH,OAAiB9f,GAAW,UAU5C,IACIwgB,EADAC,EAAcziB,KAAK2hB,GAGvB,GAAIc,EACFD,EAAU,IAAIF,QA1DpB,SAAqBG,EAAaT,GAChC,OAAO,SAAUC,EAASM,GACxBE,EAAYC,MAAK,WACXV,EAAKN,GACPO,EAAQH,OAAiB9f,GAAW,IAItCggB,EAAKJ,GAAgBK,EAASM,KAC7BA,IAiDqBI,CAAYF,EAAaziB,WAC1C,CAGL,IAAI2O,EAAO3O,KAAK6hB,GAASlV,OAEzB,GAAa,OAATgC,EACF,OAAO2T,QAAQL,QAAQH,EAAiBnT,GAAM,IAGhD6T,EAAU,IAAIF,QAAQtiB,KAAK4hB,IAI7B,OADA5hB,KAAK2hB,GAAgBa,EACdA,IAE+BzQ,OAAOC,eAAe,WAC9D,OAAOhS,QACLuf,EAAgB+B,EAAuB,UAAU,WACnD,IAAIsB,EAAS5iB,KAKb,OAAO,IAAIsiB,SAAQ,SAAUL,EAASM,GACpCK,EAAOf,GAAShV,QAAQ,MAAM,SAAUvF,GAClCA,EACFib,EAAOjb,GAIT2a,EAAQH,OAAiB9f,GAAW,aAGtCsf,GAAwBa,GAoE5B3f,EAAOC,QAlEiC,SAA2C6D,GACjF,IAAIuc,EAEAC,EAAW3iB,OAAOC,OAAOgiB,GAA4D7C,EAArBsD,EAAiB,GAAoChB,EAAS,CAChIxgB,MAAOiF,EACP/C,UAAU,IACRgc,EAAgBsD,EAAgBtB,EAAc,CAChDlgB,MAAO,KACPkC,UAAU,IACRgc,EAAgBsD,EAAgBrB,EAAa,CAC/CngB,MAAO,KACPkC,UAAU,IACRgc,EAAgBsD,EAAgBpB,EAAQ,CAC1CpgB,MAAO,KACPkC,UAAU,IACRgc,EAAgBsD,EAAgBnB,EAAQ,CAC1CrgB,MAAOiF,EAAOhC,eAAe8C,WAC7B7D,UAAU,IACRgc,EAAgBsD,EAAgBjB,EAAgB,CAClDvgB,MAAO,SAAe4gB,EAASM,GAC7B,IAAI5T,EAAOmU,EAASjB,GAASlV,OAEzBgC,GACFmU,EAASnB,GAAgB,KACzBmB,EAASvB,GAAgB,KACzBuB,EAAStB,GAAe,KACxBS,EAAQH,EAAiBnT,GAAM,MAE/BmU,EAASvB,GAAgBU,EACzBa,EAAStB,GAAee,IAG5Bhf,UAAU,IACRsf,IA8BJ,OA7BAC,EAASnB,GAAgB,KACzBza,EAASZ,GAAQ,SAAUgB,GACzB,GAAIA,GAAoB,+BAAbA,EAAIlI,KAAuC,CACpD,IAAImjB,EAASO,EAAStB,GAWtB,OARe,OAAXe,IACFO,EAASnB,GAAgB,KACzBmB,EAASvB,GAAgB,KACzBuB,EAAStB,GAAe,KACxBe,EAAOjb,SAGTwb,EAASrB,GAAUna,GAIrB,IAAI2a,EAAUa,EAASvB,GAEP,OAAZU,IACFa,EAASnB,GAAgB,KACzBmB,EAASvB,GAAgB,KACzBuB,EAAStB,GAAe,KACxBS,EAAQH,OAAiB9f,GAAW,KAGtC8gB,EAASpB,IAAU,KAErBpb,EAAOoB,GAAG,WAAYwa,EAAWpQ,KAAK,KAAMgR,IACrCA,K,+CClLTtgB,EAAOC,QAAU4c,EAEjB,IAAIlI,EAAY,EAAQ,KAIxB,SAASkI,EAAYjc,GACnB,KAAMpD,gBAAgBqf,GAAc,OAAO,IAAIA,EAAYjc,GAC3D+T,EAAUpX,KAAKC,KAAMoD,GAJvB,EAAQ,GAAR,CAAoBic,EAAalI,GAOjCkI,EAAYnf,UAAU6X,WAAa,SAAU/K,EAAON,EAAU0B,GAC5DA,EAAG,KAAMpB,K,6BCjCX,IAAI3G,EAWJ,IAAI2E,EAAiB,EAAQ,KAAmB9L,MAC5C6jB,EAAmB/X,EAAe+X,iBAClCjP,EAAuB9I,EAAe8I,qBAE1C,SAAS1N,EAAKkB,GAEZ,GAAIA,EAAK,MAAMA,EAOjB,SAAS0b,EAAU1c,EAAQwF,EAASwI,EAAS9N,GAC3CA,EAvBF,SAAcA,GACZ,IAAIC,GAAS,EACb,OAAO,WACDA,IACJA,GAAS,EACTD,EAASM,WAAM,EAAQH,aAkBdnD,CAAKgD,GAChB,IAAIyc,GAAS,EACb3c,EAAOoB,GAAG,SAAS,WACjBub,GAAS,UAECjhB,IAARqE,IAAmBA,EAAM,EAAQ,MACrCA,EAAIC,EAAQ,CACVhD,SAAUwI,EACVvI,SAAU+Q,IACT,SAAUhN,GACX,GAAIA,EAAK,OAAOd,EAASc,GACzB2b,GAAS,EACTzc,OAEF,IAAIjC,GAAY,EAChB,OAAO,SAAU+C,GACf,IAAI2b,IACA1e,EAGJ,OAFAA,GAAY,EAvBhB,SAAmB+B,GACjB,OAAOA,EAAOqB,WAAqC,mBAAjBrB,EAAOsB,MAwBnCC,CAAUvB,GAAgBA,EAAOsB,QACP,mBAAnBtB,EAAOuG,QAA+BvG,EAAOuG,eACxDrG,EAASc,GAAO,IAAIwM,EAAqB,UAI7C,SAAS/T,EAAKmR,GACZA,IAGF,SAASlB,EAAKpC,EAAMyN,GAClB,OAAOzN,EAAKoC,KAAKqL,GAGnB,SAAS6H,EAAYC,GACnB,OAAKA,EAAQriB,OAC8B,mBAAhCqiB,EAAQA,EAAQriB,OAAS,GAA0BsF,EACvD+c,EAAQC,MAFahd,EAgC9B5D,EAAOC,QA3BP,WACE,IAAK,IAAIiE,EAAOC,UAAU7F,OAAQqiB,EAAU,IAAIxiB,MAAM+F,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAClFsc,EAAQtc,GAAQF,UAAUE,GAG5B,IAOIiB,EAPAtB,EAAW0c,EAAYC,GAG3B,GAFIxiB,MAAMC,QAAQuiB,EAAQ,MAAKA,EAAUA,EAAQ,IAE7CA,EAAQriB,OAAS,EACnB,MAAM,IAAIiiB,EAAiB,WAI7B,IAAIM,EAAWF,EAAQpiB,KAAI,SAAUuF,EAAQtF,GAC3C,IAAI8K,EAAU9K,EAAImiB,EAAQriB,OAAS,EAEnC,OAAOkiB,EAAU1c,EAAQwF,EADX9K,EAAI,GACyB,SAAUsG,GAC9CQ,IAAOA,EAAQR,GAChBA,GAAK+b,EAASxH,QAAQ9b,GACtB+L,IACJuX,EAASxH,QAAQ9b,GACjByG,EAASsB,UAGb,OAAOqb,EAAQ7J,OAAOtJ,K,6BC1FxB,IAAI3K,EAAO,EAAQ,KAEforB,EAAO,SAASC,EAAYC,GAC9B,IAAIrrB,EACAtE,EAEJ,IAAKA,EAAI,EAAGA,EAAI0vB,EAAW5vB,OAAQE,IAGjC,GAAI2vB,EAFJrrB,EAAUorB,EAAW1vB,IAGnB,OAAOsE,GAKTsrB,EAAc,SAASpF,EAAQqF,EAAUC,GAY3C,OAXatF,EAAOlS,QAClB,SAASyX,EAAMtnB,GACb,IAAIunB,EAAIC,EAASJ,EAAUpnB,EAAMonB,UACjC,OAAIG,EAAIF,GAAYE,EAAID,EAAKE,SACpB,CAACxnB,MAAOA,EAAOwnB,SAAUD,GAE3BD,IAET,CAACtnB,WAAOzH,EAAWivB,SAAU1nB,MAGjBE,OAGZwnB,EAAW,SAASxnB,EAAOV,GAC7B,OAAO9D,KAAKisB,KACVjsB,KAAK0gB,IAAIlc,EAAM,GAAKV,EAAO,GAAI,GAAK9D,KAAK0gB,IAAIlc,EAAM,GAAKV,EAAO,GAAI,KAInEooB,EAAc,SAAS1nB,EAAOV,GAChC,OAAOU,EAAM,KAAOV,EAAO,IAAMU,EAAM,KAAOV,EAAO,IA0BnDqlB,EAAY,SAASgD,EAAUN,GACjC9wB,KAAKqxB,OAAS,GACdrxB,KAAKsxB,UAAYF,EACjBpxB,KAAKuxB,UAAYT,EACjB9wB,KAAKc,OAAS,GAGhBstB,EAAUluB,UAAU4I,IAAM,SAAS0oB,GACjC,IAAIC,EAAO,CAACC,QAASF,EAAQpvB,MAAOovB,EAAOpvB,MAAO4B,IAAKwtB,EAAOxtB,KAC9DhE,KAAKqxB,OAAOvuB,KAAK2uB,GACjBzxB,KAAKc,UAGPstB,EAAUluB,UAAUyxB,qBAAuB,WACzC,IAAIC,EAAU5xB,KAAKqxB,OAAOtwB,KAAI,SAASwE,GACrC,OAAOA,EAAEmsB,WAEX1xB,KAAKqxB,OAAS,GACdrxB,KAAKc,OAAS,EASd,IARA,IAAI0qB,EAASoG,EAAQtY,QAAO,SAASyX,EAAMc,GACzC,OAAOd,EAAK7vB,OAAO,CACjB,CAAC2vB,SAAUgB,EAAIzvB,MAAO0vB,MAAO,IAC7B,CAACjB,SAAUgB,EAAI7tB,IAAK8tB,MAAO,QAE5B,IAECjxB,EAAM+wB,EAAQ9wB,OACTE,EAAI,EAAGA,EAAIH,EAAKG,IAAK,CAC5B,IACIoB,EACA4B,EAFAwtB,EAASI,EAAQ5wB,GAGjB8vB,EAAW9wB,KAAKuxB,UAEhBQ,EAAiB,EAAJ/wB,EACbgxB,EAAWD,EAAa,EAExBE,EAAczG,EACfrqB,MAAM,EAAG4wB,GACT7wB,OAAOsqB,EAAOrqB,MAAM6wB,EAAW,IAsBlC,GApBA5vB,EAAQwuB,EAAYqB,EAAaT,EAAOpvB,MAAO0uB,GAC/C9sB,EAAM4sB,EAAYqB,EAAaT,EAAOxtB,IAAK8sB,GAEtC1uB,EAEM0uB,IACTU,EAAOpvB,MAAQA,EAAMyuB,UAFrBzuB,EAAQ,CAACyuB,SAAUW,EAAOpvB,MAAO0vB,MAAO,IAKrC9tB,EAEM8sB,IACTU,EAAOxtB,IAAMA,EAAI6sB,UAFjB7sB,EAAM,CAAC6sB,SAAUW,EAAOxtB,IAAK8tB,MAAO,KAMvBrB,EAAKzwB,KAAKqxB,QAAQ,SAASI,GACxC,OAhF2BC,EAgFFD,EAAKC,QAhFM3oB,EAgFGyoB,EA9ExB,SAAjBE,EAAQvvB,OACNgvB,EAAYO,EAAQtvB,MAAO2G,EAAO3G,QAClC+uB,EAAYO,EAAQ1tB,IAAK+E,EAAO/E,MAC/BmtB,EAAYO,EAAQtvB,MAAO2G,EAAO/E,MACjCmtB,EAAYO,EAAQ1tB,IAAK+E,EAAO3G,QANhB,IAASsvB,EAAS3oB,KAmFvB,CACb,IAAImpB,EAAelyB,KAAKqxB,OAAOvwB,OAC3B2wB,EAAO,CAACC,QAASF,EAAQpvB,MAAOA,EAAO4B,IAAKA,GAEhDwnB,EAAOuG,GAAYD,MAAMhvB,KAAKovB,GAC9B1G,EAAOuG,GAAYlB,SAAWY,EAAKrvB,MAAMyuB,SACzCrF,EAAOwG,GAAUF,MAAMhvB,KAAKovB,GAC5B1G,EAAOwG,GAAUnB,SAAWY,EAAKztB,IAAI6sB,SAErC7wB,KAAKqxB,OAAOvuB,KAAK2uB,GACjBzxB,KAAKc,UAQTd,KAAKqxB,OAAOxV,SAAQ,SAAS4V,GAC3BjG,EAAO3P,SAAQ,SAASpS,GAClB0nB,EAAY1nB,EAAMonB,SAAUY,EAAKrvB,MAAMyuB,YACzCY,EAAKrvB,MAAM0vB,MAAQL,EAAKrvB,MAAM0vB,MAAM5wB,OAAOuI,EAAMqoB,QAE/CX,EAAY1nB,EAAMonB,SAAUY,EAAKztB,IAAI6sB,YACvCY,EAAKztB,IAAI8tB,MAAQL,EAAKztB,IAAI8tB,MAAM5wB,OAAOuI,EAAMqoB,eAMrD1D,EAAUluB,UAAU2vB,SAAW,WAC7B,IAAK7vB,KAAKsxB,UACR,OAAOtxB,KAAKqxB,OAAOtwB,KAAI,SAAS0wB,GAC9B,OAAOA,EAAKC,WAIhB1xB,KAAK2xB,uBAYL,IAVA,IAIIxb,EACAgc,EACAC,EACAC,EAvHwBX,EACxBY,EA+GAC,EAASltB,EAAK1E,MAAMX,KAAKqxB,OAAOvwB,SAAS,GACzC0xB,EAAa,GACbjZ,EAAS,GAMTkZ,EAAU,CAAC5B,SAAU,IAElBtX,EAAOzY,OAASd,KAAKqxB,OAAOvwB,QAIjC,IAHAqV,EAAUoc,EAAOlwB,SAAQ,GACzBmwB,EAAW1vB,KAAKqT,GAETqc,EAAW1xB,QAChBqV,EAAUqc,EAAWpP,MAEhBmP,EAAOpc,KACVoc,EAAOpc,IAAW,EAElBic,GADAD,EAAcnyB,KAAKqxB,OAAOlb,IACDnS,IAGrBmtB,EAAYsB,EAAQ5B,SAAUuB,EAAWvB,WAvIvBa,EAwIYS,EAAYT,QAvIhDY,WAAW,CAACnwB,KAAMuvB,EAAQvvB,KAAMC,MAAOsvB,EAAQ1tB,IAAKA,IAAK0tB,EAAQtvB,OAEhD,QAAjBsvB,EAAQvvB,OACVmwB,EAASI,OAAShB,EAAQgB,OAC1BJ,EAASK,OAASjB,EAAQiB,OAC1BL,EAASM,MAAQlB,EAAQkB,MACzBN,EAASO,IAAsB,OAAhBnB,EAAQmB,IAAe,MAAQ,MAiIxCR,EA9HDC,EA+HCG,EAAUN,EAAY/vB,QAEtBiwB,EAAiBF,EAAYT,QAC7Be,EAAUN,EAAYnuB,KAIxByuB,EAAQX,MAAMgB,UAAUjX,SAAQ,SAASgW,GAClCU,EAAOV,IACVW,EAAW1vB,KAAK+uB,MAIpBtY,EAAOzW,KAAKuvB,IAKlB,OAAO9Y,GAGT/W,EAAOC,QAAU2rB,G,cCzMjB,IAcIjH,EAAS,aAGTC,EAAa,qBAGbC,EAAa,aAGbC,EAAY,cAGZyL,EAAW,mBAGX5K,EAAetY,SAUfiZ,EAPc3oB,OAAOD,UAOQ6oB,SAiCjC,SAASiK,EAASvJ,EAAOpoB,EAAOe,EAAO4B,GACrC,IAAIlD,EAAS2oB,EAAM3oB,OAWnB,KATAsB,EAAQioB,EAAUjoB,IACN,IACVA,GAASA,EAAQtB,EAAS,EAAKA,EAASsB,IAE1C4B,OAAehC,IAARgC,GAAqBA,EAAMlD,EAAUA,EAASupB,EAAUrmB,IACrD,IACRA,GAAOlD,GAETkD,EAAM5B,EAAQ4B,EAAM,EA8XtB,SAAkB3C,GAChB,OAAOA,GAhaU2D,EAgaQqlB,EAAUhpB,GAhaV4xB,EAgakB,EAhaXC,EA5CX,WA6CjBluB,GAAWA,SACChD,IAAVkxB,IACFluB,EAASA,GAAUkuB,EAAQluB,EAASkuB,QAExBlxB,IAAVixB,IACFjuB,EAASA,GAAUiuB,EAAQjuB,EAASiuB,IAGjCjuB,GAuZ2D,EAhapE,IAAmBA,EAAQiuB,EAAOC,EAiCRC,CAASnvB,GAC1B5B,EAAQ4B,GACbylB,EAAMrnB,KAAWf,EAEnB,OAAOooB,EA4BT,SAAS2J,EAAe/xB,EAAOiQ,EAAOiF,GACpC,IAAKoT,EAASpT,GACZ,OAAO,EAET,IAAIpU,SAAcmP,EAClB,SAAY,UAARnP,EA+GN,SAAqBd,GACnB,OAAgB,MAATA,GAqDT,SAAkBA,GAChB,MAAuB,iBAATA,GACZA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,GA9Rb,iBAuOGgyB,CAAShyB,EAAMP,UAoBzC,SAAoBO,GAGlB,IAAIiyB,EAAM3J,EAAStoB,GAASynB,EAAe/oB,KAAKsB,GAAS,GACzD,MAvPY,qBAuPLiyB,GAtPI,8BAsPcA,EAxB0BC,CAAWlyB,GA/GrDmyB,CAAYjd,IAvBvB,SAAiBlV,EAAOP,GAEtB,SADAA,EAAmB,MAAVA,EAlGY,iBAkGwBA,KAE1B,iBAATO,GAAqB0xB,EAAS3Z,KAAK/X,KAC1CA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,EAAQP,EAmBX2yB,CAAQniB,EAAOiF,EAAOzV,QACrC,UAARqB,GAAoBmP,KAASiF,IAgFxC,SAAYlV,EAAOyoB,GACjB,OAAOzoB,IAAUyoB,GAAUzoB,GAAUA,GAASyoB,GAAUA,EA/E/C4J,CAAGnd,EAAOjF,GAAQjQ,GA+L7B,SAASsoB,EAAStoB,GAChB,IAAIc,SAAcd,EAClB,QAASA,IAAkB,UAARc,GAA4B,YAARA,GA4EzC,SAAS0nB,EAASxoB,GAChB,OAAKA,GAGLA,EA+FF,SAAkBA,GAChB,GAAoB,iBAATA,EACT,OAAOA,EAET,GAnIF,SAAkBA,GAChB,MAAuB,iBAATA,GAtBhB,SAAsBA,GACpB,QAASA,GAAyB,iBAATA,EAsBtBuoB,CAAavoB,IApWF,mBAoWYynB,EAAe/oB,KAAKsB,GAiI1CkoB,CAASloB,GACX,OA9eM,IAgfR,GAAIsoB,EAAStoB,GAAQ,CACnB,IAAIyoB,EAAgC,mBAAjBzoB,EAAM0oB,QAAwB1oB,EAAM0oB,UAAY1oB,EACnEA,EAAQsoB,EAASG,GAAUA,EAAQ,GAAMA,EAE3C,GAAoB,iBAATzoB,EACT,OAAiB,IAAVA,EAAcA,GAASA,EAEhCA,EAAQA,EAAMQ,QAAQslB,EAAQ,IAC9B,IAAI6C,EAAW3C,EAAWjO,KAAK/X,GAC/B,OAAQ2oB,GAAY1C,EAAUlO,KAAK/X,GAC/B8mB,EAAa9mB,EAAMF,MAAM,GAAI6oB,EAAW,EAAI,GAC3C5C,EAAWhO,KAAK/X,GA3fb,KA2f6BA,EAjH7B4oB,CAAS5oB,MA7YJ,KA8YaA,KA9Yb,IAEG,uBA6YFA,EAAQ,GAAK,EAAI,GAGxBA,GAAUA,EAAQA,EAAQ,EAPd,IAAVA,EAAcA,EAAQ,EAoCjC,SAASgpB,EAAUhpB,GACjB,IAAIkY,EAASsQ,EAASxoB,GAClB+oB,EAAY7Q,EAAS,EAEzB,OAAOA,GAAWA,EAAU6Q,EAAY7Q,EAAS6Q,EAAY7Q,EAAU,EA8EzE/W,EAAOC,QAnWP,SAAcgnB,EAAOpoB,EAAOe,EAAO4B,GACjC,IAAIlD,EAAS2oB,EAAQA,EAAM3oB,OAAS,EACpC,OAAKA,GAGDsB,GAAyB,iBAATA,GAAqBgxB,EAAe3J,EAAOpoB,EAAOe,KACpEA,EAAQ,EACR4B,EAAMlD,GAEDkyB,EAASvJ,EAAOpoB,EAAOe,EAAO4B,IAN5B,K,6BCpKXxB,EAAOC,QAJO,SAASpD,EAASiZ,GAC9B,MAAO,CAACjZ,QAASA,EAASiZ,KAAMA,K,6BCDlC,IAAIib,EAAa,EAAQ,KACrBzuB,EAAW,EAAQ,KAEnBypB,EAAc,EAAQ,KAEtBoF,EAAmB,SAAS3uB,GAC9B,IAAI4uB,EAAU3uB,KAAKC,MAAe,IAATF,GAAsB,IAE/C,OAAgB,IAAZ4uB,EACK,EAEFA,GAOLC,EAAyB,SAASpqB,EAAO0hB,GAC3CA,EAAuBA,EAJLlmB,KAAK6uB,GAAM,IAK7B,IAAIC,EAAM9uB,KAAK8uB,IAAI5I,GACf6I,EAAM/uB,KAAK+uB,IAAI7I,GACf5lB,EAAIkE,EAAM,GACVjE,EAAIiE,EAAM,GAEd,MAAO,CACLkqB,EAAiBpuB,EAAIyuB,EAAMxuB,EAAIuuB,GAC/BJ,EAAiBpuB,EAAIwuB,EAAMvuB,EAAIwuB,KAI/BC,EAAS,SAAS/I,EAAKthB,EAAIC,EAAIshB,GACjC,IAAIxhB,EAAIuhB,EAAM,EAKd,GAJAthB,EAAKA,GAAM,EACXC,EAAKA,GAAM,EAGPshB,IAAQvhB,GAAMC,GAAK,CACrB,IAAIqqB,EAAgBL,EAAuB,CAACjqB,EAAIC,GAAKshB,GACrDvhB,EAAKsqB,EAAc,GACnBrqB,EAAKqqB,EAAc,GAGrB,MAAO,CACLjO,MAAO,CAAC9jB,KAAM,SAAUyH,GAAIA,EAAIC,GAAIA,EAAIF,EAAGuhB,EAAM,GACjD9lB,IAAKmpB,EAAY7kB,UAAU6kB,EAAYjlB,MAAOK,EAAGC,EAAIC,KAIrDsqB,EAAO,SAAS/I,EAAIC,EAAIC,EAAIC,EAAI9lB,EAAO0lB,GAEzC,GAAIA,EAAK,CACP,IAAI/oB,EAAQyxB,EAAuB,CAACzI,EAAIC,GAAKF,GACzCnnB,EAAM6vB,EAAuB,CAACvI,EAAIC,GAAKJ,GAC3CC,EAAKhpB,EAAM,GACXipB,EAAKjpB,EAAM,GACXkpB,EAAKtnB,EAAI,GACTunB,EAAKvnB,EAAI,GAGX,IAAIgnB,GAAKO,EAAKF,IAAOC,EAAKF,GACtBgJ,EAAS3uB,EAAQ,EACjBsuB,EAAMK,EACNJ,EAAMI,EACNtvB,EAASkmB,IACX+I,GAAO/I,EAAI/lB,KAAKisB,KAAK,EAAIjsB,KAAK0gB,IAAIqF,EAAG,IACrCgJ,GAAO,EAAI/uB,KAAKisB,KAAK,EAAIjsB,KAAK0gB,IAAIqF,EAAG,KAErCgJ,EAAM,EAIR,IAAIxI,EAAS,GACbA,EAAO1oB,KAAK,CAAC6wB,EAAiBvI,EAAK2I,GAAMJ,EAAiBtI,EAAK2I,KAC/DxI,EAAO1oB,KAAK,CAAC6wB,EAAiBrI,EAAKyI,GAAMJ,EAAiBpI,EAAKyI,KAC/DxI,EAAO1oB,KAAK,CAAC6wB,EAAiBrI,EAAKyI,GAAMJ,EAAiBpI,EAAKyI,KAC/DxI,EAAO1oB,KAAK,CAAC6wB,EAAiBvI,EAAK2I,GAAMJ,EAAiBtI,EAAK2I,KAE/D,IAAI5uB,EAAMomB,EAAOlS,QAAO,SAASC,EAAQmE,GACvC,OAAO6Q,EAAY/kB,SAAS+P,EAAQmE,KACnC6Q,EAAYjlB,OAEf,MAAO,CACL2c,MAAO,CAAC9jB,KAAM,OAAQqpB,OAAQA,GAC9BpmB,IAAKA,IAILivB,EAAO,SAAS5uB,EAAOC,EAAQiE,EAAGC,EAAIC,EAAIshB,GAC5CvhB,EAAKA,GAAM,EACXC,EAAKA,GAAM,EACXF,EAAIA,GAAK,EAGT,IAAIyqB,EAAS3uB,EAAQ,EACjB6uB,EAAU5uB,EAAS,EAEvB,OALAylB,EAAMA,GAAO,GAWJgJ,EALEvqB,EAAKwqB,EAELvqB,EADAD,EAAKwqB,EAELvqB,EAEmBnE,EAAQylB,GAG/B,CACLlF,MAAO,CAAC9jB,KAAM,OAAQyH,GAAIA,EAAIC,GAAIA,EAAIF,EAAGA,EAAGlE,MAAOA,EAAOC,OAAQA,GAClEN,IAAK,EAAEgvB,EAASxqB,GAAK0qB,EAAUzqB,EAAIuqB,EAASxqB,EAAI0qB,EAAUzqB,KAwB1D0qB,EAAiB,SAASrJ,EAAKsJ,EAASrJ,EAAKvhB,EAAIC,GACnDD,EAAKA,GAAM,EACXC,EAAKA,GAAM,EAWX,IATA,IAMI4qB,EACAlvB,EACAC,EARAgmB,EAAS,GACTpmB,EAAMmpB,EAAYjlB,MAElBK,EAAIuhB,EAAM,EACVnL,EAAUoL,EAAMlmB,KAAK6uB,GAAM,IAC3BY,EAAQ,EAAIzvB,KAAK6uB,GAAMU,EAIlB/lB,EAAI,EAAGA,EAAI+lB,EAAS/lB,IAC3BgmB,EAAQC,EAAOjmB,EAAIsR,EACnBxa,EAAIqE,EAAK+pB,EAAiBhqB,EAAI1E,KAAK+uB,IAAIS,IACvCjvB,EAAIqE,EAAK8pB,EAAiBhqB,EAAI1E,KAAK8uB,IAAIU,IAEvCrvB,EAAMmpB,EAAY/kB,SAASpE,EAAK,CAACG,EAAGC,IACpCgmB,EAAO1oB,KAAK,CAACyC,EAAGC,IAGlB,MAAO,CACLygB,MAAO,CAAC9jB,KAAM,OAAQqpB,OAAQA,GAC9BpmB,IAAKA,IAKLuvB,EAAO,SAAS/qB,EAAIC,EAAIF,EAAGlE,GAC7B,MAAO,CAACtD,KAAM,OAAQyH,GAAIA,EAAIC,GAAIA,EAAIF,EAAGA,EAAGlE,MAAOA,IAgEjDmvB,EAAW,SAAS7J,EAAMhS,GAC5B,IAAI8b,EAAa,CAAC5O,MAAO,GAAI7gB,IAAKmpB,EAAYjlB,OAC1CwrB,EAAW,EAIf,OAFA/b,EAASA,GAAU,IAELO,QAAO,SAASC,EAAQyF,GACpC,IAAIoR,EA6BJ,OA3BmB,aAAfpR,EAAM7c,MAAsC,YAAf6c,EAAM7c,OACrC6c,EAAQ7e,OAAOwC,KAAKqc,GAAO1F,QAAO,SAASC,EAAQ1W,GACjD,IAAIxB,EAAQ2d,EAAMnc,GAElB,OADA0W,EAAO1W,GAGP,SAASkyB,EAAa7xB,GACpB,OAAIvC,MAAMC,QAAQsC,GACTA,EAAEnC,IAAIg0B,GACJxB,EAAWrwB,GACbA,EAAE6nB,GAEF7nB,EATG6xB,CAAa1zB,GACpBkY,IAWN,KAGY,MAAbyF,EAAMiM,KAAejM,EAAMiM,MAAQ6J,IACrCvb,EAAO0M,MAAMnjB,KAAK,CAChBX,KAAM,QACN0jB,SAAwB,IAAd7G,EAAMiM,IAAY,OAAS,QACrC7lB,IAAKmU,EAAOnU,IAAIjE,MAAM,KAExB2zB,EAAW9V,EAAMiM,KAGXjM,EAAM7c,MACZ,IAAK,SACHiuB,EAAc6D,EAAOjV,EAAMkM,IAAKlM,EAAMpV,GAAIoV,EAAMnV,GAAImV,EAAMmM,KAC1D,MAEF,IAAK,OACHiF,EAAc+D,EACZnV,EAAMoM,GACNpM,EAAMqM,GACNrM,EAAMsM,GACNtM,EAAMuM,GACNvM,EAAMvZ,MACNuZ,EAAMmM,KAER,MAEF,IAAK,OACHiF,EAAciE,EACZrV,EAAMvZ,MACNuZ,EAAMtZ,OACN,EACAsZ,EAAMpV,GACNoV,EAAMnV,GACNmV,EAAMmM,KAER,MAEF,IAAK,SACH,IAAImJ,EAAUtV,EAAMtZ,OAAS,EACzB0uB,EAASpV,EAAMvZ,MAAQ,EACvBmE,EAAKoV,EAAMzZ,EAAI6uB,EACfvqB,EAAKmV,EAAMxZ,EAAI8uB,EACnBlE,EAAciE,EAAKrV,EAAMvZ,MAAOuZ,EAAMtZ,OAAQ,EAAGkE,EAAIC,EAAImV,EAAMmM,KAC/D,MAEF,IAAK,UACHiF,EA1La,SAAS4E,EAAY7J,GAIxC,IAHA,IAEI1hB,EAFA+hB,EAAS,GACTpmB,EAAMmpB,EAAYjlB,MAEbtI,EAAI,EAAGA,EAAIg0B,EAAWl0B,OAAS,EAAGE,GAAK,EAC9CyI,EAAQ,CAACurB,EAAWh0B,GAAIg0B,EAAWh0B,EAAI,IACnCmqB,IACF1hB,EAAQoqB,EAAuBpqB,EAAO0hB,IAGxCK,EAAO1oB,KAAK2G,GACZrE,EAAMmpB,EAAY/kB,SAASpE,EAAKqE,GAGlC,MAAO,CACLwc,MAAO,CAAC9jB,KAAM,OAAQqpB,OAAQA,GAC9BpmB,IAAKA,GA0Ka6vB,CAAejW,EAAMwM,OAAQxM,EAAMmM,KACjD,MAEF,IAAK,OACHiF,EAAcmE,EACZvV,EAAMkM,IACNlM,EAAMyM,SACNzM,EAAMmM,IACNnM,EAAMpV,GACNoV,EAAMnV,IAER,MAEF,IAAK,QACHumB,EAnJI,SACVlF,EACAQ,EACAC,EACAC,EACAC,EACAC,EACAliB,EACAC,EACAshB,GASA,IAPA,IAAIxhB,EAAIuhB,EAAM,EACVjF,EAAQ,GACR7gB,EAAMmpB,EAAY7kB,UAAU6kB,EAAYjlB,MAAOK,EAAGC,EAAIC,GACtDqrB,EAAUxJ,EAAU,EACpByJ,EAAgBxJ,EAAUuJ,EAGvBvrB,EAAI+hB,GAAWzF,EAAMnlB,OAAS8qB,GACnCjiB,GAAKurB,EACLjP,EAAMnjB,KAAK6xB,EAAK/qB,EAAIC,EAAI8pB,EAAiBhqB,GAAI+hB,IAC7C/hB,GAAKwrB,EAIHxrB,EAAI,GAAKsc,EAAMnlB,OAAS8qB,GAC1B3F,EAAMnjB,KAAKmxB,EAAON,EAAiB,EAAIhqB,GAAIC,EAAIC,GAAIoc,OAIrD,IAAImP,EAAWf,EAAKvI,EAAUD,EAAU,EAAGjiB,EAAIC,EAAIshB,GAC/CkK,EAAWhB,EAAKxI,EAAUC,EAAU,EAAGliB,EAAIC,EAAIshB,GAMnD,OALAlF,EAAMnjB,KAAKsyB,EAASnP,OACpBA,EAAMnjB,KAAKuyB,EAASpP,OACpB7gB,EAAMmpB,EAAYzlB,IAAI1D,EAAKgwB,EAAShwB,KAG7B,CAAC6gB,MAAOA,EAAO7gB,IAFtBA,EAAMmpB,EAAYzlB,IAAI1D,EAAKiwB,EAASjwB,MAgHhBkwB,CACZtW,EAAMkM,IACNlM,EAAM0M,QACN1M,EAAM2M,QACN3M,EAAM4M,SACN5M,EAAM6M,SACN7M,EAAM8M,SACN9M,EAAMpV,GACNoV,EAAMnV,GACNmV,EAAMmM,KAER,MAEF,IAAK,UACHiF,EAzHM,SAASxmB,EAAIC,EAAIkiB,EAAUC,EAAUC,EAAKd,GACtD,IAAIpQ,EAAO4Y,GAAkB5H,EAAWE,GAAO,GAC3ClM,EAAS4T,GAAkB5H,EAAWE,GAAO,GAC7CxmB,EAAQkuB,GAAkB5H,EAAWC,GAAY,GACjDriB,EAAIgqB,GAAkB5H,EAAWtmB,GAAS,GAC1CL,EAAMmpB,EAAY7kB,UAAU6kB,EAAYjlB,MAAOyiB,EAAW,EAAGniB,EAAIC,GAUrE,MAAO,CACLoc,MAAO,CAAC9jB,KAAM,OAAQ8jB,MATZ,CACVoO,EAAKtZ,EAAMA,EAAM,EAAGnR,EAAKmW,EAAQlW,EAAKkW,EAAQoL,GAAKlF,MACnDoO,EAAKtZ,EAAMA,EAAM,EAAGnR,EAAKmW,EAAQlW,EAAKkW,EAAQoL,GAAKlF,MACnDoO,EAAKtZ,EAAMA,EAAM,EAAGnR,EAAKmW,EAAQlW,EAAKkW,EAAQoL,GAAKlF,MACnDoO,EAAKtZ,EAAMA,EAAM,EAAGnR,EAAKmW,EAAQlW,EAAKkW,EAAQoL,GAAKlF,OAKfsP,KAH3BZ,EAAK/qB,EAAIC,EAAIF,EAAGlE,IAIzBL,IAAKA,GAwGaowB,CACZxW,EAAMpV,GACNoV,EAAMnV,GACNmV,EAAM+M,SACN/M,EAAMgN,SACNhN,EAAMiN,IACNjN,EAAMmM,KAER,MAEF,IAAK,WAEH,OADAJ,EAAO/L,EAAMxa,IAAIumB,GACVxR,EAET,QACE,OAAOA,EAUX,OAPAA,EAAO0M,MAAQ1M,EAAO0M,MAAM/kB,OAAOkvB,EAAYnK,OAG9B,IAAb6O,IACFvb,EAAOnU,IAAMmpB,EAAYzlB,IAAIyQ,EAAOnU,IAAKgrB,EAAYhrB,MAGhDmU,IACNsb,IAGLryB,EAAOC,QAAU,SAAkBgW,EAAMgd,GACvC,IAIIC,EACAtF,EALAnK,EAAQ,GACR7gB,EAAMmpB,EAAYjlB,MAClBqsB,EAAYld,EAAKwN,MACjBQ,EAAShO,EAAKgO,OAIlB,GAAkB,WAAdkP,EACFvF,EAAc6D,EAAOxN,EAAO,SACvB,GAAkB,SAAdkP,EACTvF,EAAciE,EAAK5N,EAAO,GAAIA,EAAO,SAChC,GAAkB,YAAdkP,EACTvF,EAAciE,EAAK5N,EAAO,GAAIA,EAAO,GAAIxhB,KAAK+D,IAAIyd,EAAO,GAAIA,EAAO,IAAM,OACrE,IAAkB,SAAdkP,EAEJ,CAEL,IAAI5K,EAAOtE,EAAOnN,QAAO,SAASC,EAAQ4M,EAAK7U,GAG7C,OAFAiI,EAAO,KAAOjI,EAAQ,IAAM6U,EAErB5M,IACN,IAEH,OAAOqb,EAAS7J,EAAM0K,EAAOE,IAT7BvF,EAAcmE,EAAe9N,EAAO,GAAIA,EAAO,GAAIA,EAAO,IAyB5D,OAZAR,EAAMnjB,KAAKstB,EAAYnK,OACvB7gB,EAAMmpB,EAAYzlB,IAAI1D,EAAKgrB,EAAYhrB,KAEnCqT,EAAK8N,KAAKzlB,SACZ40B,EACuB,IAArBjd,EAAK8N,KAAKzlB,OACNmzB,EAAOxb,EAAK8N,KAAK,IAAIN,MACrBoO,EAAK5b,EAAK8N,KAAK,GAAI9N,EAAK8N,KAAK,IAAIN,MAEvCA,EAAMnjB,KAAK,CAACX,KAAM,QAAS0jB,SAAU,QAASzgB,IAAKA,GAAMswB,IAGpD,CAACzP,MAAOA,EAAO7gB,IAAKA,K,iBC9Y7B,YAUA,IAQIX,EAA8B,iBAAVC,GAAsBA,GAAUA,EAAOvE,SAAWA,QAAUuE,EAGhFC,EAA0B,iBAARZ,MAAoBA,MAAQA,KAAK5D,SAAWA,QAAU4D,KAGxEqkB,EAAO3jB,GAAcE,GAAYE,SAAS,cAATA,GAGjC+wB,EAAcz1B,OAAOD,UAGrB21B,EAAiBD,EAAYC,eAO7BC,EAAuBF,EAAY7M,SAGnChX,EAASqW,EAAKrW,OACdgkB,EAAiBhkB,EAASA,EAAOikB,iBAAch0B,EASnD,SAASi0B,EAAW50B,GAClB,OAAa,MAATA,OACeW,IAAVX,EArCQ,qBAFL,gBAyCJ00B,GAAkBA,KAAkB51B,OAAOkB,GAYrD,SAAmBA,GACjB,IAAI60B,EAAQL,EAAe91B,KAAKsB,EAAO00B,GACnCzC,EAAMjyB,EAAM00B,GAEhB,IACE10B,EAAM00B,QAAkB/zB,EACxB,IAAIm0B,GAAW,EACf,MAAO5Y,IAET,IAAIhE,EAASuc,EAAqB/1B,KAAKsB,GACnC80B,IACED,EACF70B,EAAM00B,GAAkBzC,SAEjBjyB,EAAM00B,IAGjB,OAAOxc,EA5BH6c,CAAU/0B,GAsChB,SAAwBA,GACtB,OAAOy0B,EAAqB/1B,KAAKsB,GAtC7BynB,CAAeznB,GAkGrBmB,EAAOC,QAxCP,SAAoBpB,GAClB,IAkCF,SAAkBA,GAChB,IAAIc,SAAcd,EAClB,OAAgB,MAATA,IAA0B,UAARc,GAA4B,YAARA,GApCxCwnB,CAAStoB,GACZ,OAAO,EAIT,IAAIiyB,EAAM2C,EAAW50B,GACrB,MA9GY,qBA8GLiyB,GA7GI,8BA6GcA,GA/GZ,0BA+G6BA,GA3G7B,kBA2GgDA,K,+CCtH/D,IAAI/E,EAAc,EAAQ,KAEtB8H,EAAUpxB,KAAK6uB,GAAK,EACpBA,EAAK7uB,KAAK6uB,GACVwC,EAAmB,EAAVrxB,KAAK6uB,GACdyC,EAAiB,EAAItxB,KAAK6uB,GAAM,EAwIhC0C,EAAc,SAASxxB,EAAQ0gB,GACjC,OAAO1gB,GAAU0gB,EAAU1gB,EAAS,GA4BlCyxB,EAAU,SACZr0B,EACA4B,EACA+b,EACAtH,EACAqO,EACAvB,EACAD,EACAI,EACAgR,EACA7Z,GAGA,IA4BI8Z,EA5BAhtB,EACFoW,EAAO,IAAM9a,KAAKisB,KAAKjsB,KAAK0gB,IAAI5F,EAAO,GAAI,GAAK9a,KAAK0gB,IAAI5F,EAAO,GAAI,IAIlE6W,EAAa,GACbC,EAAc,GACdC,EAAc,GAEd/W,EAAO,IAAc,MAARwF,EACfsR,EAAY/zB,KAAKV,EAAM,GAAK2d,EAAO,GAAI3d,EAAM,GAAK2d,EAAO,IAEzD8W,EAAY/zB,KAAKV,EAAM,GAAK2d,EAAO,IAGjCA,EAAO,IAAc,MAARwF,EACfuR,EAAYh0B,KAAKV,EAAM,GAAK2d,EAAO,GAAI3d,EAAM,GAAK2d,EAAO,IAEzD+W,EAAYh0B,KAAKV,EAAM,GAAK2d,EAAO,IAGrC,IAAK,IAAI/e,EAAI,EAAGA,EAAI61B,EAAY/1B,OAAQE,IACtC,IAAK,IAAI+kB,EAAI,EAAGA,EAAI+Q,EAAYh2B,OAAQilB,IACtC6Q,EAAW9zB,KAAK,CAAC+zB,EAAY71B,GAAI81B,EAAY/Q,KAM7ChG,EAAO,IACTwF,EAAM,IACNoR,EAlEsB,SAASv0B,EAAO4B,EAAK8iB,EAAMpB,EAASiN,GAC5D,IAAIrqB,EAAgB,QAATwe,EAAiB,GAAK,EAC7BiQ,GAAQ30B,EAAM,GAAK4B,EAAI,IAAM,EAC7BgzB,GAAQ50B,EAAM,GAAK4B,EAAI,IAAM,EAC7BizB,EAASjzB,EAAI,GAAK5B,EAAM,GACxB80B,EAASlzB,EAAI,GAAK5B,EAAM,GACxB6uB,EAAWhsB,KAAKisB,KAAKjsB,KAAK0gB,IAAIsR,EAAQ,GAAKhyB,KAAK0gB,IAAIuR,EAAQ,IAC5DC,EAAelG,EAAW,EAC1BmG,EAAmBnyB,KAAKisB,KAC1BjsB,KAAK0gB,IAAIgN,EAAQ,GAAK1tB,KAAK0gB,IAAIwR,EAAc,IAG3CE,EAAW/uB,EAAO2uB,EAASG,EAAoBnG,EAEnD,MAAO,CACL,CACEuF,EAAYO,GALAzuB,EAAO4uB,EAASE,EAAoBnG,EAKpBvL,GAC5B8Q,EAAYQ,EAAOK,EAAS3R,KAiDf4R,CAAoBl1B,EAAO4B,EAAK8iB,EAAMpB,EAAS3F,EAAO,KAErE4W,EADiB,MAARpR,EACMqR,EAAWjW,QAAO,SAASN,GACxC,IAAIkX,EAAYtyB,KAAKisB,KACnBjsB,KAAK0gB,IAAItF,EAAE,GAAKje,EAAM,GAAI,GAAK6C,KAAK0gB,IAAItF,EAAE,GAAKje,EAAM,GAAI,IAEvDo1B,EAAUvyB,KAAKisB,KACjBjsB,KAAK0gB,IAAItF,EAAE,GAAKrc,EAAI,GAAI,GAAKiB,KAAK0gB,IAAItF,EAAE,GAAKrc,EAAI,GAAI,IAGvD,OACEiB,KAAKwyB,IAAIF,EAAY5tB,IAAM+b,GAAWzgB,KAAKwyB,IAAID,EAAU7tB,IAAM+b,KAIpDkR,EAGjB,IAAIc,EAtMoB,SAASt1B,EAAO4B,EAAK8iB,EAAMvB,EAAKoS,GAMxD,IALA,IAAIC,EACAC,EACAjF,EACAkF,EACApF,EACa,MAAVA,GAAkBiF,EAAQ72B,OAAS,GACxCg3B,EAAYH,EAAQvU,MACpBwU,EAAa3yB,KAAK8yB,MAAM31B,EAAM,GAAK01B,EAAU,GAAI11B,EAAM,GAAK01B,EAAU,IACtED,EAAW5yB,KAAK8yB,MAAM/zB,EAAI,GAAK8zB,EAAU,GAAI9zB,EAAI,GAAK8zB,EAAU,IAInD,OAAThR,EACF8Q,EAAaA,GAAcC,EAAWD,EAAaA,EAAatB,EAEhEuB,EAAWA,GAAYD,EAAaC,EAAWA,EAAWvB,EAG5D1D,EAAQ3tB,KAAKwyB,IAAIG,EAAaC,GAIlB,MAARtS,EACEqN,GAASyD,IACX3D,EAASoF,GAGXpF,EAASoF,EAIb,GAAc,MAAVpF,EAUJ,OAJAkF,GADAA,EAAaA,GAAc,EAAIA,EAAaA,EAAatB,GAC/BA,EAASsB,EAAaA,EAAatB,EAE7DuB,GADAA,EAAWA,GAAY,EAAIA,EAAWA,EAAWvB,GAC3BA,EAASuB,EAAWA,EAAWvB,EAE9C,CACL5D,OAAQA,EACRE,MAAOA,EACPxwB,MAAOA,EAAMlB,OAAO02B,GACpB5zB,IAAKA,EAAI9C,OAAO22B,IAwJCG,CAAoB51B,EAAO4B,EAAK8iB,EAAMvB,EAAKoR,GAGlD,MAARpR,GAAenjB,EAAM,KAAO4B,EAAI,IAAM5B,EAAM,KAAO4B,EAAI,KACzD0zB,EAAa9E,MAAQ0D,GAGvB,IAAIlxB,EAAMmpB,EAAYjlB,MAiBtB,OAhBoB,MAAhBouB,GACFhB,EAAU5tB,IAAI,CACZ3G,KAAM,MACNC,MAAOs1B,EAAat1B,MACpB4B,IAAK0zB,EAAa1zB,IAClB0uB,OAAQgF,EAAahF,OACrBE,MAAO8E,EAAa9E,MACpBD,OAAQhpB,EACRkpB,IAAK/L,IAGP1hB,EAvKS,SAASsyB,EAAc/tB,EAAG2b,EAAQ7M,EAAMoa,GACnD,IAKIzwB,EACA4B,EANAi0B,EAAaP,EAAat1B,MAC1B81B,EAAWR,EAAa1zB,IACxB0uB,EAASgF,EAAahF,OACtBE,EAAQ8E,EAAa9E,MAMb,OAARC,GACFzwB,EAAQ81B,EAAS,GACjBl0B,EAAMi0B,EAAW,KAEjB71B,EAAQ61B,EAAW,GACnBj0B,EAAMk0B,EAAS,IAIjB,IAAI1M,EAAS,CAACyM,EAAYC,GA4B1B,OAzBI91B,EAAQ4B,GAAO4uB,IAAU0D,IAC3B9K,EAAO1oB,KAAK,CAAC4vB,EAAO,GAAK/oB,EAAG+oB,EAAO,OAIrCtwB,EAAQA,GAASi0B,EAAUj0B,EAAQi0B,EAAUj0B,EAAQm0B,IACrDvyB,EAAMA,GAAOqyB,EAAUryB,EAAMqyB,EAAUryB,EAAMuyB,IAC1B3D,IAAU0D,IAC3B9K,EAAO1oB,KAAK,CAAC4vB,EAAO,GAAIA,EAAO,GAAK/oB,MAItCvH,EAAQA,GAASi0B,EAAUj0B,EAAQi0B,EAAUj0B,EAAQm0B,IACrDvyB,EAAMA,GAAOqyB,EAAUryB,EAAMqyB,EAAUryB,EAAMuyB,IAC1B3D,IAAU0D,IAC3B9K,EAAO1oB,KAAK,CAAC4vB,EAAO,GAAK/oB,EAAG+oB,EAAO,OAIrCtwB,EAAQA,GAASi0B,EAAUj0B,EAAQi0B,EAAUj0B,EAAQm0B,IACrDvyB,EAAMA,GAAOqyB,EAAUryB,EAAMqyB,EAAUryB,EAAMuyB,IAC1B3D,IAAU0D,IAC3B9K,EAAO1oB,KAAK,CAAC4vB,EAAO,GAAIA,EAAO,GAAK/oB,IAG/B6hB,EAAOlS,QAAO,SAASC,EAAQyR,GACpC,IAAK1F,EAAQ,CACX,IAAI6S,EAAO5J,EAAYrlB,UAAUuP,EAAKrT,IAAK4lB,GAC3C,OAAOuD,EAAYzlB,IAAIyQ,EAAQ4e,GAGjC,OAAO5J,EAAY/kB,SAAS+P,EAAQyR,KACnCuD,EAAYjlB,OAiHP8uB,CAAOV,EAAc/tB,EAAG2b,EAAQ7M,EAAMqO,IAE5CjK,EAAQqC,MAAM,2BAGT9Z,GA+FLizB,EAAc,SAChBj2B,EACA4B,EACA+b,EACAtH,EACAqO,EACAvB,EACAD,EACAI,EACAgR,EACA7Z,GAEA,IAAIyb,EAAgBhT,GAAW7M,GAAQA,EAAKqX,MAAMhvB,OAAS,EACvDy3B,EAAcjT,GAAW7M,GAA8B,IAAtBA,EAAKqX,MAAMhvB,OAC5CssB,EAAW3U,EAAOA,EAAKrZ,KAAO,gBAElC,OAAKk5B,EAQQ,MAATxR,EAEExB,GAAgC,IAAtB7M,EAAKqX,MAAMhvB,OAtHd,SAASsB,EAAO4B,EAAKyU,EAAM6M,EAAQoR,GAGhD,GAFAA,EAAU5tB,IAAI,CAAC3G,KAAM,OAAQC,MAAOA,EAAO4B,IAAKA,KAE3CshB,EAAQ,CACX,IAAIkT,EAAWjK,EAAYrlB,UAAUuP,EAAKrT,IAAKhD,GAC3Cq2B,EAASlK,EAAYrlB,UAAUuP,EAAKrT,IAAKpB,GAC7C,OAAOuqB,EAAYzlB,IAAI0vB,EAAUC,GAGnC,IAAIrzB,EAAMmpB,EAAYjlB,MAGtB,OAFAlE,EAAMmpB,EAAY/kB,SAASpE,EAAKhD,GAChCgD,EAAMmpB,EAAY/kB,SAASpE,EAAKpB,GA4GrB00B,CAASt2B,EAAO4B,EAAKyU,EAAM6M,EAAQoR,GAvG1B,SAASt0B,EAAO4B,EAAKyU,EAAMie,EAAW7Z,GAC1D,IAAIuX,EAAS3b,EAAKqX,MAAM,GAAK,EACzBwE,EAAU7b,EAAKqX,MAAM,GAAK,EAC1B2E,EAAQxvB,KAAK8yB,MAAM/zB,EAAI,GAAK5B,EAAM,GAAI4B,EAAI,GAAK5B,EAAM,IAErDu2B,EAAQv2B,EAAM,GAAKgyB,EACnBwE,EAAQx2B,EAAM,GAAKgyB,EACnByE,EAAQz2B,EAAM,GAAKkyB,EACnBwE,EAAQ12B,EAAM,GAAKkyB,EACnByE,EAAQ/0B,EAAI,GAAKowB,EACjB4E,EAAQh1B,EAAI,GAAKowB,EACjB6E,EAAQj1B,EAAI,GAAKswB,EACjB4E,EAAQl1B,EAAI,GAAKswB,EAEjB9I,EAAS,GAsDb,OAnDIppB,EAAM,KAAO4B,EAAI,IAAM5B,EAAM,KAAO4B,EAAI,GAC1CwnB,EAAO1oB,KAAK,CAAC61B,EAAOE,GAAQ,CAACD,EAAOC,GAAQ,CAACD,EAAOE,GAAQ,CAACH,EAAOG,IAC3DrE,GAAS,GAAKA,EAAQ4B,EAE/B7K,EAAO1oB,KACL,CAAC61B,EAAOE,GACR,CAACD,EAAOC,GACR,CAACG,EAAOC,GACR,CAACD,EAAOE,GACR,CAACH,EAAOG,GACR,CAACP,EAAOG,IAEDrE,GAAS4B,GAAW5B,GAASX,EAEtCtI,EAAO1oB,KACL,CAAC81B,EAAOC,GACR,CAACD,EAAOE,GACR,CAACE,EAAOE,GACR,CAACH,EAAOG,GACR,CAACH,EAAOE,GACR,CAACN,EAAOE,IAEDpE,IAAUX,GAAMW,GAAS4B,EAElC7K,EAAO1oB,KACL,CAAC81B,EAAOE,GACR,CAACH,EAAOG,GACR,CAACC,EAAOG,GACR,CAACH,EAAOE,GACR,CAACD,EAAOC,GACR,CAACL,EAAOC,IAIVrN,EAAO1oB,KACL,CAAC61B,EAAOG,GACR,CAACH,EAAOE,GACR,CAACE,EAAOE,GACR,CAACD,EAAOC,GACR,CAACD,EAAOE,GACR,CAACN,EAAOE,IAIZtN,EAAO3P,SAAQ,SAAS6B,EAAG1c,GACzB,IAAI+kB,EAAI/kB,EAAIwqB,EAAO1qB,OAAS,EAAIE,EAAI,EAAI,EACxC01B,EAAU5tB,IAAI,CAAC3G,KAAM,OAAQC,MAAOsb,EAAG1Z,IAAKwnB,EAAOzF,QAGrDlJ,EAAQ6S,cAEDnB,EAAYzlB,IACjBylB,EAAYrlB,UAAUuP,EAAKrT,IAAKhD,GAChCmsB,EAAYrlB,UAAUuP,EAAKrT,IAAKpB,IAqCzBm1B,CAAgB/2B,EAAO4B,EAAKyU,EAAMie,EAAW7Z,GAIjD0b,EASE9B,EACLr0B,EACA4B,EACA+b,EACAtH,EACAqO,EACAvB,EACAD,EACAI,EACAgR,EACA7Z,IAlBAA,EAAQqC,MACN,0CACEkO,EACA,0BAEGmB,EAAYjlB,QAxBnBuT,EAAQqC,MACN,QAAUkO,EAAW,2CAGhBmB,EAAYjlB,QA8FvB9G,EAAOC,QAvDO,SACZN,EACA0W,EACAzW,EACAqW,EACAqO,EACAvB,EACAD,EACAoR,EACAhR,EACA7I,GAEA,IAWIzX,EAXApB,EAAM,CACG,MAAX6U,EAAMtT,EAAYsT,EAAMtT,EAAInD,EAAM,GACvB,MAAXyW,EAAMrT,EAAYqT,EAAMrT,EAAIpD,EAAM,IAGhC2d,EAAS,CACA,MAAXlH,EAAM7X,EAAY6X,EAAM7X,EAAI,EACjB,MAAX6X,EAAMkN,EAAYlN,EAAMkN,EAAI,EAC5BlN,EAAMsX,GAIR,OAAQhuB,GACN,IAAK,QACHiD,EA5aM,SAASyT,EAAOJ,EAAM6M,EAAQzI,GAExC,OAAIyI,GACFzI,EAAQqC,MAAM,2BACPqP,EAAYjlB,OAIhBmP,GAMAA,EAAK6X,UACR7X,EAAK6X,SAAU,EACfzT,EAAQ/Z,KAAK,CAACX,KAAM,QAASsW,KAAMA,EAAKrZ,KAAM6mB,MAAOxN,EAAK4X,OAG5DxT,EAAQ/Z,KAAK,CAACX,KAAM,MAAOsW,KAAMA,EAAKrZ,KAAMmG,EAAGsT,EAAM,GAAIrT,EAAGqT,EAAM,KAC3D0V,EAAYrlB,UAAUuP,EAAKrT,IAAKyT,KAXrCgE,EAAQqC,MAAM,mCACPqP,EAAYjlB,OAkaX8vB,CAAMp1B,EAAKyU,EAAM6M,EAAQzI,GAC/B,MAEF,IAAK,MACHzX,EAAMizB,EACJj2B,EACA4B,EACA+b,EACAtH,EACAqO,EACAvB,EACAD,EACAI,EACAgR,EACA7Z,GAEF,MAEF,QACEzX,EAAMmpB,EAAYjlB,MAItB,MAAO,CACL5H,IAAKsC,EACLoB,IAAKA,K,6BC9cT,IAAI+R,EAAY,EAAQ,KAAmBA,UACvC6G,EAAW,EAAQ,IACnBlZ,EAAW,EAAQ,KAEnBu0B,EAAmB,EAAQ,KAC3BC,EAAW,EAAQ,KACnBC,EAAa,EAAQ,KACrBC,EAAO,EAAQ,KACfpd,EAAS,EAAQ,KAEjBrX,EAAQy0B,EAAKz0B,MACbY,EAAY6zB,EAAK7zB,UACjBI,EAAayzB,EAAKzzB,WAMlBoW,EAAe,SAASlW,EAAIwW,EAAYC,EAAelR,GACzD2L,EAAUpX,KAAKC,KAAM,CACnBmU,oBAAoB,EACpB1I,mBAAoBD,IAGtBxL,KAAKiG,GAAKA,EACVjG,KAAKyc,WAAaA,EAClBzc,KAAKy5B,KAAO,GACZz5B,KAAK6F,MAAQ,GACb7F,KAAK05B,QAAU,CAAC,EAAG,EAAG,EAAG,GACzB15B,KAAKyF,MAAQ,EACbzF,KAAK0F,OAAS,EACd1F,KAAK8c,MAAQ,GAEb9c,KAAK25B,QAAU,GACf35B,KAAK45B,SAAW,GAChB55B,KAAK65B,MAAQ,GACb75B,KAAK85B,YAAa,EAClB95B,KAAK+5B,UAAY,GACjB/5B,KAAKg6B,OAAS,GACdh6B,KAAKi6B,YAAc,EACnBj6B,KAAKk6B,iBAAmB,EACxBl6B,KAAKm6B,SAAW,GAChBn6B,KAAKo6B,YAAc,EACnBp6B,KAAKq6B,WAAa,EAClBr6B,KAAKi6B,YAAc,EACnBj6B,KAAKi6B,YAAc,EAEnBj6B,KAAKs6B,SAAW5d,GAGlBsB,EAAS7B,EAAchF,GAEvBgF,EAAajc,UAAU6X,WAAa,SAAS/K,EAAON,EAAUwL,GAC5D,OAAQlL,EAAM7K,MACZ,IAAK,QACHnC,KAAKy5B,KAAOz5B,KAAKy5B,KAAKv4B,OACpBm4B,EAAiBr5B,KAAKiG,GAAI+G,EAAMyL,KAAMzL,EAAMiZ,MAAOjmB,KAAKs6B,WAE1D,MAEF,IAAK,MACHt6B,KAAKu6B,MAAMjB,EAASt5B,KAAKiG,GAAI+G,EAAMyL,KAAMzL,EAAMzH,EAAGyH,EAAMxH,EAAGxF,KAAKs6B,WAChE,MAEF,IAAK,OACHt6B,KAAKu6B,MAAMhB,EAAWvsB,EAAM4iB,KAAM,KAAM5vB,KAAKs6B,WAC7C,MAEF,IAAK,SACHt6B,KAAKu6B,MAAMhB,EAAWvsB,EAAM4iB,KAAM5iB,EAAMvH,MAAOzF,KAAKs6B,WACpD,MAEF,IAAK,WACHt6B,KAAKw6B,mBAAmBxtB,EAAM6Y,SAAU7Y,EAAM5H,KAC9C,MAEF,IAAK,SACHpF,KAAKy6B,iBAAiBztB,EAAMwjB,QAASxjB,EAAM5H,KAC3C,MAEF,IAAK,OACHpF,KAAK06B,YAAY1tB,EAAM5H,IAAK4H,EAAM8P,OAGtC5E,KAGFiE,EAAajc,UAAU+X,OAAS,SAASC,GAEvClY,KAAKy6B,iBAAiB,IACtBz6B,KAAK8C,KAAKsZ,EAAOpc,KAAMA,KAAKyc,WAAYzc,KAAKs6B,WAC7CpiB,KAGFiE,EAAajc,UAAUy6B,kBAAoB,WAEzC,GAAI36B,KAAKg6B,OAAOl5B,OAAQ,CACtBd,KAAKk6B,mBAEL,IAAIU,EACF56B,KAAKiG,GAAK,UAAYjG,KAAKi6B,YAAc,IAAMj6B,KAAKk6B,iBAEtDl6B,KAAKy5B,KAAK32B,KAAK9C,KAAKs6B,SAAS,IAAK,CAACr0B,GAAI20B,GAAe56B,KAAKg6B,SAE3Dh6B,KAAKg6B,OAAS,KAIlB7d,EAAajc,UAAU26B,kBAAoB,WACzC,QAAI76B,KAAK25B,UACP35B,KAAKy5B,KAAK32B,KACRiD,EAAW/F,KAAK25B,QAAS35B,KAAK45B,SAAU55B,KAAK65B,MAAO75B,KAAKs6B,WAE3Dt6B,KAAK25B,QAAU,GACf35B,KAAK45B,SAAW,GAChB55B,KAAK65B,MAAQ,IAEN,IAMX1d,EAAajc,UAAUs6B,mBAAqB,SAAS3U,EAAUzgB,GAC7D,GAAIpF,KAAK85B,WAKP,OAJ8B,IAA1B95B,KAAKk6B,kBAA2Bl6B,KAAKg6B,OAAOl5B,SAC9Cd,KAAK85B,WAA0B,SAAbjU,EA/GF,EACC,GAiHZ7lB,KAAK26B,oBAGd36B,KAAKo6B,YACU,UAAbvU,EAAuB7lB,KAAKo6B,YAAc,EAAIp6B,KAAKo6B,YACrD,IAAIx0B,EAAS5F,KAAKiG,GAAK,UAAYjG,KAAKo6B,YAGvB,UAAbvU,GACF7lB,KAAK6F,MAAQ,CAACF,EAAUC,EAAQ5F,KAAK6F,MAAO7F,KAAKs6B,WACjDt6B,KAAK25B,QAAU/zB,EACf5F,KAAK45B,SAAWx0B,EAAIjE,MAAM,IAG1BnB,KAAK66B,kBAAkBz1B,IAI3B+W,EAAajc,UAAUu6B,iBAAmB,SAASjK,EAASprB,GAC1D,IAAI01B,EAAgC,IAAnBtK,EAAQ1vB,OAGrBi6B,EAAW/6B,KAAK66B,oBAEpB76B,KAAK26B,oBAEL,IAAI90B,EAAQ7F,KAAK6F,MACbP,EAAUtF,KAAKs6B,SACfU,EAAYh7B,KAAK85B,WACjBmB,EAAcj7B,KAAKk6B,iBACnBgB,EAAel7B,KAAKiG,GAAK,UAAYjG,KAAKi6B,YAAc,IAgB5D,GAbAj6B,KAAKm6B,SAASte,SAAQ,SAASkE,GAC7B,IAAK,IAAI/e,EAAIg6B,EAAWh6B,GAAKi6B,EAAaj6B,GAAK,EAC7C6E,EAAM/C,KACJwC,EAAQ,MAAO,CACb,aAAc,IAAM41B,EAAel6B,EACnCuE,EAAGR,EAAMgb,EAAO,IAChBva,EAAGT,EAAMgb,EAAO,UAOpBkb,EAAc,EAAID,EAAW,CAC/B,IAAIp1B,EAASs1B,EAAe,QAE5Bl7B,KAAK6F,MAAQ,CAACF,EAAUC,EAAQC,EAAO7F,KAAKs6B,WAC5Ct6B,KAAK25B,QAAU/zB,EACf5F,KAAK45B,SAAW55B,KAAK+5B,UAAU54B,MAAM,GACrCnB,KAAK65B,MAAQ75B,KAAKm6B,SAAS7gB,QAAO,SAASC,EAAQwG,GAGjD,IAFA,IAAIob,EAEKn6B,EAAI,EAAGA,GAAKi6B,EAAaj6B,IAAK,CACrCm6B,EA1Kc,IA0KLH,EAAgCh6B,EAAI,GAAM,EAAIA,EAAI,GAAM,EAEjE,IAAIo6B,EAAO,CACT,aAAc,IAAMF,EAAel6B,EACnCuE,EAAGR,EAAMgb,EAAO,IAChBva,EAAGT,EAAMgb,EAAO,KAGdob,IACFC,EAAK/1B,KAAO,OACZ+1B,EAAKl1B,OAAS,QAGhBqT,EAAOzW,KAAKwC,EAAQ,MAAO81B,IAG7B,OAAO7hB,IACN,IAEHwhB,EAAW/6B,KAAK66B,oBAIlB76B,KAAKm6B,SAAW3J,EACXsK,EAMH96B,KAAK85B,WAzMY,GAoMjB95B,KAAK85B,WAAciB,EAlMA,EADD,EAoMlB/6B,KAAKi6B,cACLj6B,KAAKk6B,iBAAmB,EACxBl6B,KAAK+5B,UAAY30B,EAAIi2B,MAAMv2B,GAAYM,EAAM,CAAC,EAAG,EAAG,EAAG,KAM3D+W,EAAajc,UAAUw6B,YAAc,SAASt1B,EAAK0X,GACjD,GAAI1X,EAAIi2B,MAAMv2B,GAAW,CACvB,IAAIS,EAAIR,EAAMK,EAAI,IACdI,EAAIT,EAAMK,EAAI,IACdK,EAAQV,EAAMK,EAAI,GAAKA,EAAI,IAC3BM,EAASX,EAAMK,EAAI,GAAKA,EAAI,IAEhCpF,KAAK05B,QAAU,CAACn0B,EAAGC,EAAGC,EAAOC,GAC7B1F,KAAKyF,MAAQA,EAAQ,IACrBzF,KAAK0F,OAASA,EAAS,IACvB1F,KAAK8c,MAAQA,IAIjBX,EAAajc,UAAUq6B,MAAQ,SAAShkB,GACjCvW,KAAK85B,WAOR95B,KAAKg6B,OAAOl3B,KAAKyT,GANZvW,KAAK25B,QAGR35B,KAAK65B,MAAM/2B,KAAKyT,GAFhBvW,KAAK6F,MAAM/C,KAAKyT,IAStB/T,EAAOC,QAAU0Z,G,iBCxPjB1Z,EAAUD,EAAOC,QAAU,EAAQ,MAC3B2H,OAAS3H,EACjBA,EAAQO,SAAWP,EACnBA,EAAQQ,SAAW,EAAQ,KAC3BR,EAAQM,OAAS,EAAQ,KACzBN,EAAQ0U,UAAY,EAAQ,KAC5B1U,EAAQ4c,YAAc,EAAQ,KAC9B5c,EAAQyE,SAAW,EAAQ,KAC3BzE,EAAQ6c,SAAW,EAAQ,M,6CCJ3B,SAASC,EAAgB3c,EAAKC,EAAKxB,GAAiK,OAApJwB,KAAOD,EAAOzC,OAAO8D,eAAerB,EAAKC,EAAK,CAAExB,MAAOA,EAAO6C,YAAY,EAAMsb,cAAc,EAAMjc,UAAU,IAAkBX,EAAIC,GAAOxB,EAAgBuB,EAE3M,IACIyH,EADW,EAAQ,IACDA,OAGlBoV,EADY,EAAQ,KACAA,QAEpBC,EAASD,GAAWA,EAAQC,QAAU,UAM1Cld,EAAOC,QAEP,WACE,SAASoI,IACP7K,KAAK0O,KAAO,KACZ1O,KAAK2f,KAAO,KACZ3f,KAAKc,OAAS,EAGhB,IAAI8e,EAAS/U,EAAW3K,UAgKxB,OA9JA0f,EAAO9c,KAAO,SAAcI,GAC1B,IAAIgQ,EAAQ,CACVvE,KAAMzL,EACN+P,KAAM,MAEJjT,KAAKc,OAAS,EAAGd,KAAK2f,KAAK1M,KAAOC,EAAWlT,KAAK0O,KAAOwE,EAC7DlT,KAAK2f,KAAOzM,IACVlT,KAAKc,QAGT8e,EAAO3R,QAAU,SAAiB/K,GAChC,IAAIgQ,EAAQ,CACVvE,KAAMzL,EACN+P,KAAMjT,KAAK0O,MAEO,IAAhB1O,KAAKc,SAAcd,KAAK2f,KAAOzM,GACnClT,KAAK0O,KAAOwE,IACVlT,KAAKc,QAGT8e,EAAO7a,MAAQ,WACb,GAAoB,IAAhB/E,KAAKc,OAAT,CACA,IAAIuO,EAAMrP,KAAK0O,KAAKC,KAGpB,OAFoB,IAAhB3O,KAAKc,OAAcd,KAAK0O,KAAO1O,KAAK2f,KAAO,KAAU3f,KAAK0O,KAAO1O,KAAK0O,KAAKuE,OAC7EjT,KAAKc,OACAuO,IAGTuQ,EAAOrQ,MAAQ,WACbvP,KAAK0O,KAAO1O,KAAK2f,KAAO,KACxB3f,KAAKc,OAAS,GAGhB8e,EAAOxe,KAAO,SAAcye,GAC1B,GAAoB,IAAhB7f,KAAKc,OAAc,MAAO,GAI9B,IAHA,IAAI4c,EAAI1d,KAAK0O,KACTW,EAAM,GAAKqO,EAAE/O,KAEV+O,EAAIA,EAAEzK,MACX5D,GAAOwQ,EAAInC,EAAE/O,KAGf,OAAOU,GAGTuQ,EAAO1e,OAAS,SAAgBuN,GAC9B,GAAoB,IAAhBzO,KAAKc,OAAc,OAAOuJ,EAAOyV,MAAM,GAK3C,IAJA,IA9DgB3P,EAAKpH,EAAQgX,EA8DzB1Q,EAAMhF,EAAO2V,YAAYvR,IAAM,GAC/BiP,EAAI1d,KAAK0O,KACT1N,EAAI,EAED0c,GAlESvN,EAmEHuN,EAAE/O,KAnEM5F,EAmEAsG,EAnEQ0Q,EAmEH/e,EAlE5BqJ,EAAOnK,UAAU+f,KAAKlgB,KAAKoQ,EAAKpH,EAAQgX,GAmEpC/e,GAAK0c,EAAE/O,KAAK7N,OACZ4c,EAAIA,EAAEzK,KAGR,OAAO5D,GAITuQ,EAAOpQ,QAAU,SAAiBf,EAAGyR,GACnC,IAAI7Q,EAcJ,OAZIZ,EAAIzO,KAAK0O,KAAKC,KAAK7N,QAErBuO,EAAMrP,KAAK0O,KAAKC,KAAKxN,MAAM,EAAGsN,GAC9BzO,KAAK0O,KAAKC,KAAO3O,KAAK0O,KAAKC,KAAKxN,MAAMsN,IAGtCY,EAFSZ,IAAMzO,KAAK0O,KAAKC,KAAK7N,OAExBd,KAAK+E,QAGLmb,EAAalgB,KAAKmgB,WAAW1R,GAAKzO,KAAKogB,WAAW3R,GAGnDY,GAGTuQ,EAAOtQ,MAAQ,WACb,OAAOtP,KAAK0O,KAAKC,MAInBiR,EAAOO,WAAa,SAAoB1R,GACtC,IAAIiP,EAAI1d,KAAK0O,KACT2R,EAAI,EACJhR,EAAMqO,EAAE/O,KAGZ,IAFAF,GAAKY,EAAIvO,OAEF4c,EAAIA,EAAEzK,MAAM,CACjB,IAAInR,EAAM4b,EAAE/O,KACR2R,EAAK7R,EAAI3M,EAAIhB,OAASgB,EAAIhB,OAAS2N,EAIvC,GAHI6R,IAAOxe,EAAIhB,OAAQuO,GAAOvN,EAASuN,GAAOvN,EAAIX,MAAM,EAAGsN,GAGjD,KAFVA,GAAK6R,GAEQ,CACPA,IAAOxe,EAAIhB,UACXuf,EACE3C,EAAEzK,KAAMjT,KAAK0O,KAAOgP,EAAEzK,KAAUjT,KAAK0O,KAAO1O,KAAK2f,KAAO,OAE5D3f,KAAK0O,KAAOgP,EACZA,EAAE/O,KAAO7M,EAAIX,MAAMmf,IAGrB,QAGAD,EAIJ,OADArgB,KAAKc,QAAUuf,EACRhR,GAITuQ,EAAOQ,WAAa,SAAoB3R,GACtC,IAAIY,EAAMhF,EAAO2V,YAAYvR,GACzBiP,EAAI1d,KAAK0O,KACT2R,EAAI,EAIR,IAHA3C,EAAE/O,KAAKsR,KAAK5Q,GACZZ,GAAKiP,EAAE/O,KAAK7N,OAEL4c,EAAIA,EAAEzK,MAAM,CACjB,IAAIsN,EAAM7C,EAAE/O,KACR2R,EAAK7R,EAAI8R,EAAIzf,OAASyf,EAAIzf,OAAS2N,EAIvC,GAHA8R,EAAIN,KAAK5Q,EAAKA,EAAIvO,OAAS2N,EAAG,EAAG6R,GAGvB,KAFV7R,GAAK6R,GAEQ,CACPA,IAAOC,EAAIzf,UACXuf,EACE3C,EAAEzK,KAAMjT,KAAK0O,KAAOgP,EAAEzK,KAAUjT,KAAK0O,KAAO1O,KAAK2f,KAAO,OAE5D3f,KAAK0O,KAAOgP,EACZA,EAAE/O,KAAO4R,EAAIpf,MAAMmf,IAGrB,QAGAD,EAIJ,OADArgB,KAAKc,QAAUuf,EACRhR,GAITuQ,EAAOF,GAAU,SAAUrJ,EAAGjT,GAC5B,OAAOqc,EAAQzf,KAjLnB,SAAuB+I,GAAU,IAAK,IAAI/H,EAAI,EAAGA,EAAI2F,UAAU7F,OAAQE,IAAK,CAAE,IAAIwf,EAAyB,MAAhB7Z,UAAU3F,GAAa2F,UAAU3F,GAAK,GAAQyf,EAAUtgB,OAAOwC,KAAK6d,GAAqD,mBAAjCrgB,OAAOugB,wBAAwCD,EAAUA,EAAQvf,OAAOf,OAAOugB,sBAAsBF,GAAQG,QAAO,SAAUC,GAAO,OAAOzgB,OAAO0gB,yBAAyBL,EAAQI,GAAK1c,gBAAmBuc,EAAQ5E,SAAQ,SAAUhZ,GAAO0c,EAAgBxW,EAAQlG,EAAK2d,EAAO3d,OAAa,OAAOkG,EAiL/b+X,CAAc,GAAI1d,EAAS,CAE9C2d,MAAO,EAEPC,eAAe,MAIZnW,EAvKT,I,8CCpBA,YAEA,IAAIoW,EAAuB,IAAIC,IAY/B1e,EAAOC,QAAQ4I,wBAA0BzH,EAAQud,YAVjD,SAAiCC,GAC/B,IAAIH,EAAqBI,IAAID,GAA7B,CACA,IAAIzf,EAAMyf,uEAEVH,EAAqBnY,IAAIsY,GACzBxd,EAAQud,YAAYxf,EAAK,yBAG3B,e,gDCZA,YAEA,IAAI2f,EAEJ,SAAS/B,EAAgB3c,EAAKC,EAAKxB,GAAiK,OAApJwB,KAAOD,EAAOzC,OAAO8D,eAAerB,EAAKC,EAAK,CAAExB,MAAOA,EAAO6C,YAAY,EAAMsb,cAAc,EAAMjc,UAAU,IAAkBX,EAAIC,GAAOxB,EAAgBuB,EAE3M,IAAIsE,EAAW,EAAQ,KAEnBqa,EAAexP,OAAO,eACtByP,EAAczP,OAAO,cACrB0P,EAAS1P,OAAO,SAChB2P,EAAS3P,OAAO,SAChB4P,EAAe5P,OAAO,eACtB6P,EAAiB7P,OAAO,iBACxB8P,EAAU9P,OAAO,UAErB,SAAS+P,EAAiBzgB,EAAO6W,GAC/B,MAAO,CACL7W,MAAOA,EACP6W,KAAMA,GAIV,SAAS6J,EAAeC,GACtB,IAAIC,EAAUD,EAAKT,GAEnB,GAAgB,OAAZU,EAAkB,CACpB,IAAItT,EAAOqT,EAAKH,GAASlV,OAIZ,OAATgC,IACFqT,EAAKL,GAAgB,KACrBK,EAAKT,GAAgB,KACrBS,EAAKR,GAAe,KACpBS,EAAQH,EAAiBnT,GAAM,MAKrC,SAASuT,EAAWF,GAGlBpe,EAAQC,SAASke,EAAgBC,GAgBnC,IAAIG,EAAyBhiB,OAAOwN,gBAAe,eAC/CyU,EAAuCjiB,OAAOkiB,gBA4D/C9C,EA5D+D+B,EAAwB,CACxF,aACE,OAAOthB,KAAK6hB,IAGd5O,KAAM,WACJ,IAAIpB,EAAQ7R,KAIR8H,EAAQ9H,KAAKyhB,GAEjB,GAAc,OAAV3Z,EACF,OAAOwa,QAAQC,OAAOza,GAGxB,GAAI9H,KAAK0hB,GACP,OAAOY,QAAQL,QAAQH,OAAiB9f,GAAW,IAGrD,GAAIhC,KAAK6hB,GAAStd,UAKhB,OAAO,IAAI+d,SAAQ,SAAUL,EAASM,GACpC3e,EAAQC,UAAS,WACXgO,EAAM4P,GACRc,EAAO1Q,EAAM4P,IAEbQ,EAAQH,OAAiB9f,GAAW,UAU5C,IACIwgB,EADAC,EAAcziB,KAAK2hB,GAGvB,GAAIc,EACFD,EAAU,IAAIF,QA1DpB,SAAqBG,EAAaT,GAChC,OAAO,SAAUC,EAASM,GACxBE,EAAYC,MAAK,WACXV,EAAKN,GACPO,EAAQH,OAAiB9f,GAAW,IAItCggB,EAAKJ,GAAgBK,EAASM,KAC7BA,IAiDqBI,CAAYF,EAAaziB,WAC1C,CAGL,IAAI2O,EAAO3O,KAAK6hB,GAASlV,OAEzB,GAAa,OAATgC,EACF,OAAO2T,QAAQL,QAAQH,EAAiBnT,GAAM,IAGhD6T,EAAU,IAAIF,QAAQtiB,KAAK4hB,IAI7B,OADA5hB,KAAK2hB,GAAgBa,EACdA,IAE+BzQ,OAAOC,eAAe,WAC9D,OAAOhS,QACLuf,EAAgB+B,EAAuB,UAAU,WACnD,IAAIsB,EAAS5iB,KAKb,OAAO,IAAIsiB,SAAQ,SAAUL,EAASM,GACpCK,EAAOf,GAAShV,QAAQ,MAAM,SAAUvF,GAClCA,EACFib,EAAOjb,GAIT2a,EAAQH,OAAiB9f,GAAW,aAGtCsf,GAAwBa,GAoE5B3f,EAAOC,QAlEiC,SAA2C6D,GACjF,IAAIuc,EAEAC,EAAW3iB,OAAOC,OAAOgiB,GAA4D7C,EAArBsD,EAAiB,GAAoChB,EAAS,CAChIxgB,MAAOiF,EACP/C,UAAU,IACRgc,EAAgBsD,EAAgBtB,EAAc,CAChDlgB,MAAO,KACPkC,UAAU,IACRgc,EAAgBsD,EAAgBrB,EAAa,CAC/CngB,MAAO,KACPkC,UAAU,IACRgc,EAAgBsD,EAAgBpB,EAAQ,CAC1CpgB,MAAO,KACPkC,UAAU,IACRgc,EAAgBsD,EAAgBnB,EAAQ,CAC1CrgB,MAAOiF,EAAOhC,eAAe8C,WAC7B7D,UAAU,IACRgc,EAAgBsD,EAAgBjB,EAAgB,CAClDvgB,MAAO,SAAe4gB,EAASM,GAC7B,IAAI5T,EAAOmU,EAASjB,GAASlV,OAEzBgC,GACFmU,EAASnB,GAAgB,KACzBmB,EAASvB,GAAgB,KACzBuB,EAAStB,GAAe,KACxBS,EAAQH,EAAiBnT,GAAM,MAE/BmU,EAASvB,GAAgBU,EACzBa,EAAStB,GAAee,IAG5Bhf,UAAU,IACRsf,IA8BJ,OA7BAC,EAASnB,GAAgB,KACzBza,EAASZ,GAAQ,SAAUgB,GACzB,GAAIA,GAAoB,+BAAbA,EAAIlI,KAAuC,CACpD,IAAImjB,EAASO,EAAStB,GAWtB,OARe,OAAXe,IACFO,EAASnB,GAAgB,KACzBmB,EAASvB,GAAgB,KACzBuB,EAAStB,GAAe,KACxBe,EAAOjb,SAGTwb,EAASrB,GAAUna,GAIrB,IAAI2a,EAAUa,EAASvB,GAEP,OAAZU,IACFa,EAASnB,GAAgB,KACzBmB,EAASvB,GAAgB,KACzBuB,EAAStB,GAAe,KACxBS,EAAQH,OAAiB9f,GAAW,KAGtC8gB,EAASpB,IAAU,KAErBpb,EAAOoB,GAAG,WAAYwa,EAAWpQ,KAAK,KAAMgR,IACrCA,K,+CClLTtgB,EAAOC,QAAU4c,EAEjB,IAAIlI,EAAY,EAAQ,KAIxB,SAASkI,EAAYjc,GACnB,KAAMpD,gBAAgBqf,GAAc,OAAO,IAAIA,EAAYjc,GAC3D+T,EAAUpX,KAAKC,KAAMoD,GAJvB,EAAQ,GAAR,CAAoBic,EAAalI,GAOjCkI,EAAYnf,UAAU6X,WAAa,SAAU/K,EAAON,EAAU0B,GAC5DA,EAAG,KAAMpB,K,6BCjCX,IAAI3G,EAWJ,IAAI2E,EAAiB,EAAQ,KAAmB9L,MAC5C6jB,EAAmB/X,EAAe+X,iBAClCjP,EAAuB9I,EAAe8I,qBAE1C,SAAS1N,EAAKkB,GAEZ,GAAIA,EAAK,MAAMA,EAOjB,SAAS0b,EAAU1c,EAAQwF,EAASwI,EAAS9N,GAC3CA,EAvBF,SAAcA,GACZ,IAAIC,GAAS,EACb,OAAO,WACDA,IACJA,GAAS,EACTD,EAASM,WAAM,EAAQH,aAkBdnD,CAAKgD,GAChB,IAAIyc,GAAS,EACb3c,EAAOoB,GAAG,SAAS,WACjBub,GAAS,UAECjhB,IAARqE,IAAmBA,EAAM,EAAQ,MACrCA,EAAIC,EAAQ,CACVhD,SAAUwI,EACVvI,SAAU+Q,IACT,SAAUhN,GACX,GAAIA,EAAK,OAAOd,EAASc,GACzB2b,GAAS,EACTzc,OAEF,IAAIjC,GAAY,EAChB,OAAO,SAAU+C,GACf,IAAI2b,IACA1e,EAGJ,OAFAA,GAAY,EAvBhB,SAAmB+B,GACjB,OAAOA,EAAOqB,WAAqC,mBAAjBrB,EAAOsB,MAwBnCC,CAAUvB,GAAgBA,EAAOsB,QACP,mBAAnBtB,EAAOuG,QAA+BvG,EAAOuG,eACxDrG,EAASc,GAAO,IAAIwM,EAAqB,UAI7C,SAAS/T,EAAKmR,GACZA,IAGF,SAASlB,EAAKpC,EAAMyN,GAClB,OAAOzN,EAAKoC,KAAKqL,GAGnB,SAAS6H,EAAYC,GACnB,OAAKA,EAAQriB,OAC8B,mBAAhCqiB,EAAQA,EAAQriB,OAAS,GAA0BsF,EACvD+c,EAAQC,MAFahd,EAgC9B5D,EAAOC,QA3BP,WACE,IAAK,IAAIiE,EAAOC,UAAU7F,OAAQqiB,EAAU,IAAIxiB,MAAM+F,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAClFsc,EAAQtc,GAAQF,UAAUE,GAG5B,IAOIiB,EAPAtB,EAAW0c,EAAYC,GAG3B,GAFIxiB,MAAMC,QAAQuiB,EAAQ,MAAKA,EAAUA,EAAQ,IAE7CA,EAAQriB,OAAS,EACnB,MAAM,IAAIiiB,EAAiB,WAI7B,IAAIM,EAAWF,EAAQpiB,KAAI,SAAUuF,EAAQtF,GAC3C,IAAI8K,EAAU9K,EAAImiB,EAAQriB,OAAS,EAEnC,OAAOkiB,EAAU1c,EAAQwF,EADX9K,EAAI,GACyB,SAAUsG,GAC9CQ,IAAOA,EAAQR,GAChBA,GAAK+b,EAASxH,QAAQ9b,GACtB+L,IACJuX,EAASxH,QAAQ9b,GACjByG,EAASsB,UAGb,OAAOqb,EAAQ7J,OAAOtJ,K,6BC1FxB,IAAIwpB,EAAO,EAAQ,KACfz0B,EAAQy0B,EAAKz0B,MACbgB,EAAayzB,EAAKzzB,WAClBJ,EAAY6zB,EAAK7zB,UAEjBL,EAAU,SAASguB,EAAK8H,EAAMp1B,GAChC,MAAO,CAACstB,IAAKA,EAAK8H,KAAMA,EAAMp1B,SAAUA,GAAY,KAGlDiuB,EAAS,SAASrqB,EAAIC,EAAIF,EAAGlE,GAC/B,IAAI21B,EAAO,CACTxxB,GAAI7E,EAAM6E,GACVC,GAAI9E,EAAM8E,GACVF,EAAG5E,EAAM4E,IAQX,OALa,MAATlE,IACF21B,EAAK,gBAAkBr2B,EAAMU,GAC7B21B,EAAK/1B,KAAO,QAGPC,EAAQ,SAAU81B,IAGvB/G,EAAO,SAASzqB,EAAIC,EAAIF,EAAGlE,EAAOC,GACpC,IAAI01B,EAAO,CACT71B,EAAGR,EAAM6E,EAAKnE,EAAQ,GACtBD,EAAGT,EAAM8E,EAAKnE,EAAS,GACvBD,MAAOV,EAAMU,GACbC,OAAQX,EAAMW,IAQhB,OALIiE,IACFyxB,EAAKE,GAAKv2B,EAAM4E,GAChByxB,EAAKG,GAAKx2B,EAAM4E,IAGXrE,EAAQ,OAAQ81B,IAGrBI,EAAO,SAAShQ,GAClB,IAAIiQ,EAAajQ,EACdzqB,KAAI,SAAS0I,GACZ,OAAOA,EAAM1I,IAAIgE,GAAO3D,KAAK,QAE9BA,KAAK,KAER,OAAOkE,EAAQ,UAAW,CAACkmB,OAAQiQ,KA2BrCj5B,EAAOC,QAAU,SACfqY,EACA1b,EACAs8B,EACAhf,GAEA,IAAIzW,EAAK6U,EAAS,QAAU1b,EACxBu8B,EAAe11B,EAAK,IAEpB21B,EAAQF,EAAWpiB,QACrB,SAASC,EAAQ0M,EAAO3U,GACtB,IAAIuqB,EAEJ,OAAQ5V,EAAM9jB,MACZ,IAAK,SACH05B,EAAM5H,EAAOhO,EAAMrc,GAAIqc,EAAMpc,GAAIoc,EAAMtc,GACvC,MAEF,IAAK,OACHkyB,EAAM5H,EAAOhO,EAAMrc,GAAIqc,EAAMpc,GAAIoc,EAAMtc,EAAGsc,EAAMxgB,OAChD,MAEF,IAAK,OACHo2B,EAAMxH,EAAKpO,EAAMrc,GAAIqc,EAAMpc,GAAIoc,EAAMtc,EAAGsc,EAAMxgB,MAAOwgB,EAAMvgB,QAC3D,MAEF,IAAK,OACHm2B,EAAML,EAAKvV,EAAMuF,QACjB,MAEF,IAAK,OACH,IAAIsQ,EAvDH,SAASH,EAAcrqB,EAAOyqB,EAAQpH,EAAMjY,GACrD,IAAI9W,EAAS+1B,EAAe,QAAUrqB,EAClC0qB,EAAU,QAAUp2B,EAAS,IAE7Bq2B,EAAahI,EAAOU,EAAK/qB,GAAI+qB,EAAK9qB,GAAI8qB,EAAKhrB,EAAGgrB,EAAKlvB,OAEnDK,EAAO4W,EAAc,OAAQ,CAACzW,GAAIL,EAAQM,OAAQ,QAAS,CAC7DwW,EAAcuf,EAAW3I,IAAK2I,EAAWb,QAGvCc,EAAgBH,EAAOh7B,KAAI,SAASklB,GACtC,IAAIkW,EACa,SAAflW,EAAM9jB,KACFkyB,EAAKpO,EAAMrc,GAAIqc,EAAMpc,GAAIoc,EAAMtc,EAAGsc,EAAMxgB,MAAOwgB,EAAMvgB,QACrD81B,EAAKvV,EAAMuF,QAEjB,OAAO9O,EAAcyf,EAAK7I,IAAK6I,EAAKf,SAKtC,MAAO,CAACt1B,KAAMA,EAAMD,MAFRP,EAAQ,IAAK,CAACQ,KAAMk2B,GAAUE,IAoClB3G,CACdoG,EACArqB,EACA2U,EAAMA,MACNA,EAAMsP,KACN7Y,GAGFnD,EAAO6iB,MAAMt5B,KAAKg5B,EAAUh2B,MAC5B+1B,EAAMC,EAAUj2B,MAChB,MAEF,IAAK,QAKH,GAJA0T,EAAO1D,QACP0D,EAAO3C,KAAOqP,EAAMJ,SAGG,UAAnBI,EAAMJ,SAAsB,CAC9B,IAAIwW,EAAaV,EAAepiB,EAAO1D,MAEvC0D,EAAO3T,OAASy2B,EAChB9iB,EAAO+iB,QAAUrW,EAAM7gB,IAAIjE,MAAM,GACjCoY,EAAOgjB,aAAe,GACtBhjB,EAAOijB,OAAS,CACd72B,EAAU02B,EAAY9iB,EAAOijB,OAAQ9f,QAElC,CACL,IAAI5W,EAAOC,EACTwT,EAAO3T,OACP2T,EAAO+iB,QACP/iB,EAAOgjB,aACP7f,GAGFnD,EAAO6iB,MAAMt5B,KAAKgD,IAKxB,GAAI+1B,EAAK,CACmB,IAAtBH,EAAW56B,SACb+6B,EAAIT,KAAKn1B,GAAKA,GAGhB,IAAIw2B,EAAa/f,EAAcmf,EAAIvI,IAAKuI,EAAIT,KAAMS,EAAI71B,UAElC,SAAhBuT,EAAO3C,KACT2C,EAAOijB,OAAO15B,KAAK25B,GAEnBljB,EAAOgjB,aAAaz5B,KAAK25B,GAI7B,OAAOljB,IAET,CACE1D,MAAO,EACPe,KAAM,OACN4lB,OAAQ,GACR52B,OAAQ,GACR02B,QAAS,GACTC,aAAc,GACdH,MAAO,KAcX,MAVmB,UAAfR,EAAMhlB,MACRglB,EAAMQ,MAAMt5B,KACViD,EAAW61B,EAAMh2B,OAAQg2B,EAAMU,QAASV,EAAMW,aAAc7f,IAI5Dgf,EAAW56B,OAAS,IACtB86B,EAAMY,OAAS9f,EAAc,IAAK,CAACzW,GAAIA,GAAK21B,EAAMY,SAG7CZ,EAAMQ,MAAMl7B,OAAO06B,EAAMY,U,6BCrLlC,IACIz3B,EADO,EAAQ,KACFA,MAEjBvC,EAAOC,QAAU,SAAkBqY,EAAQrC,EAAMlT,EAAGC,EAAGF,GAGrD,OAAOA,EAAQ,MAAO,CAAC,aAFV,IAAMwV,EAAS,QAAUrC,EAEOlT,EAAGR,EAAMQ,GAAIC,EAAGT,EAAMS,O,6BCNrE,IACIT,EADO,EAAQ,KACFA,MAUbuT,EAAO,SAASokB,EAAS14B,GAG3B,OAFsB,MAAZ04B,GAA+B,MAAZA,EAAkB,GAAK,MAEvC33B,EAAMf,EAAI,IAAM,IAAMe,EAAMf,EAAI,KAG3CuhB,EAAM,SAASmX,EAAS/J,EAAQC,EAAOC,EAAK7uB,EAAK0uB,GAEnD,GAAc,IAAVE,EACF,OAAOta,EAAKokB,EAAS14B,GAIvB,GAAI4uB,IAAU,EAAI3tB,KAAK6uB,GAAI,CACzB,IAAI6I,EAAO,CAAC,EAAIjK,EAAO,GAAK1uB,EAAI,GAAI,EAAI0uB,EAAO,GAAK1uB,EAAI,IAKxD,OAHWuhB,EAAImX,EAAS/J,EAAQ1tB,KAAK6uB,GAAIjB,EAAK8J,EAAMjK,GAGtC,IAFHnN,EAAI,IAAKoN,EAAQ1tB,KAAK6uB,GAAIjB,EAAK7uB,EAAK0uB,GAKjD,IAAInZ,EAAqB,MAAZmjB,EAAkB,GAAK,KAQpC,OALAnjB,IADAoZ,EAAS5tB,EAAM4tB,IACI,IAAMA,EAAS,MAClCpZ,GAAUqZ,EAAQ3tB,KAAK6uB,GAAK,KAAO,KACnCva,GAAkB,QAARsZ,EAAgB,KAAO,KACjCtZ,GAAUxU,EAAMf,EAAI,IAAM,IAAMe,EAAMf,EAAI,KAKxC44B,EAAiB,SAASrjB,EAAQmY,GACpC,IA1CyBjoB,EAAOV,EA0C5B5G,EAAOuvB,EAAQvvB,KACfC,EAAQsvB,EAAQtvB,MAChB4B,EAAM0tB,EAAQ1tB,IA0BlB,OAtEyByF,EA8CR8P,EAAO3C,KA9CQ7N,EA8CF3G,GA7CvBqH,EAAM,KAAOV,EAAO,IAAMU,EAAM,KAAOV,EAAO,MA8CnDwQ,EAAO5K,OAAS4K,EAAO5K,KAAO,IAAM,IA3C7B,SAASvM,GAClB,MAAO,KAAO2C,EAAM3C,EAAM,IAAM,IAAM2C,EAAM3C,EAAM,IA0CNy6B,CAAKz6B,GAC/CmX,EAAOmjB,QAAU,KAGnBnjB,EAAO5K,MAAQ,IACF,SAATxM,GACFoX,EAAO5K,MAAQ2J,EAAKiB,EAAOmjB,QAAS14B,GACpCuV,EAAOmjB,QAAU,MAEjBnjB,EAAO5K,MAAQ4W,EACbhM,EAAOmjB,QACPhL,EAAQiB,OACRjB,EAAQkB,MACRlB,EAAQmB,IACR7uB,EACA0tB,EAAQgB,QAGVnZ,EAAOmjB,QAAU,KAGnBnjB,EAAO3C,KAAO5S,EAEPuV,GAGT/W,EAAOC,QAAU,SAAoBq6B,EAAUr3B,EAAOH,GACpD,IACI81B,EAAO,CAACpK,EADG8L,EAASxjB,OAAOsjB,EAAgB,CAAChmB,KAAM,GAAIjI,KAAM,KAAKA,MAQrE,OALa,MAATlJ,IACF21B,EAAK/1B,KAAO,OACZ+1B,EAAK,gBAAkBr2B,EAAMU,IAGxBH,EAAQ,OAAQ81B,K,6BCrFzB,IAAI2B,EAAS,EAAQ,KACjBC,EAAM,EAAQ,GACdC,EAAK,EAAQ,KAEbC,EAAa,EAAQ,KACrBC,EAAe,EAAQ,KACvBC,EAAa,EAAQ,KACrBC,EAAc,EAAQ,KAEtBC,EAAQ,CAACN,EAAIO,SAAUP,EAAIQ,aAE3BC,EAAkB,CACpBC,QAAS,MACTC,MAAO,6BACP,cAAe,+BACf,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,EAChB,YAAa,UACb,YAAa,WA0Ef,SAASC,EAAmBx4B,EAAK2V,EAAM8iB,EAAYC,GACjD,IAAI1C,EAAO,CAACt1B,KAAM,QAAU+3B,EAAa,KAOzC,GALIC,IACF1C,EAAK,aAAe,QAAU0C,EAAY,KAIxC/iB,IAASiiB,EAAIQ,YAAa,CAC5B,IAAIO,EAAe,EAAI34B,EAAI,GAAKA,EAAI,GACpCg2B,EAAKtjB,UAAY,aAAeimB,EAAe,kBAGjD,OAAO3C,EApFT54B,EAAOC,QAAU,SAAwB+5B,EAAQjgB,GAC/C,IAAInZ,EAAU+5B,EAAa5gB,GACvByhB,EAASZ,EAAWZ,GAEpBv2B,EAAK7C,EAAQ6C,GACb2U,EAAQxX,EAAQwX,MAChB6B,EAAarZ,EAAQqZ,WACrBwhB,EAAa76B,EAAQ66B,WACrB34B,EAAUlC,EAAQsZ,cAElBwhB,EAASZ,EAAMv8B,KAAI,SAASga,GAC9B,OAAOsiB,EACL/3B,EACAW,EACA8U,EACAijB,EAAOjjB,GACPijB,EAAOG,OACPH,EAAOI,QACPH,MAIA74B,EAAM84B,EAAO5kB,QAAO,SAASC,EAAQ8kB,GACvC,OAAOpB,EAAGn0B,IAAIyQ,EAAQ8kB,EAAMj5B,OAC3B63B,EAAG78B,UAIN,OAFmB,IAAfgF,EAAItE,SAAcsE,EAAM,CAAC,EAAG,EAAG,EAAG,IAE/B84B,EAAO5kB,QAAO,SAASC,EAAQ8kB,EAAO/sB,GAC3C,IAAIyJ,EAAOuiB,EAAMhsB,GACbgtB,EAAQpB,EAAWriB,gBAAgBvV,EAASW,EAAK,IAAK8U,EAAMH,GAC5DkC,EAAQuhB,EAAMvhB,MACd+gB,EAAaQ,EAAMR,WACnBC,EAAYO,EAAMP,UAClBrE,EAAO,CAAC6E,GAAOp9B,OAAOm9B,EAAM5E,MAC5B5zB,EAAQ,CACVP,EACE,IACAs4B,EAAmBx4B,EAAK2V,EAAM8iB,EAAYC,GAC1CO,EAAMx4B,QAIN04B,EAAWj5B,EAAQ,OAAQ,GAAIm0B,GAC/B+E,EAAYl5B,EAAQ,IA2C5B,SAA4BF,GAE1B,MAAO,CAAC0S,UAAW,gBADA,EAAI1S,EAAI,GAAKA,EAAI,IACe,iBA7CpBq5B,CAAmBr5B,GAAMS,GAClD64B,EAAiB3B,EACnBU,EACA,CACEx3B,GAAIA,EAAK,IAAM8U,EACf2e,QAASuD,EAAG0B,SAASv5B,GACrBK,MAAOL,EAAI,GAAK,IAAO0X,EACvBpX,OAAQN,EAAI,GAAK,IAAO0X,GAE1BL,GAcF,OAXAlD,EAAOwB,GAAQ,CACb8gB,IAAKv2B,EAAQ,MAAOo5B,EAAgB,CAACH,EAAUC,IAC/C/hB,WAAYiiB,EACZjF,KAAMA,EACN5zB,MAAOA,EACP6zB,QAASt0B,EACTK,MAAOL,EAAI,GAAK,IAChBM,OAAQN,EAAI,GAAK,IACjB0X,MAAOA,GAGFvD,IACNnW,K,gBC5FL,IAAIw7B,EAAa,EAAQ,KACrBC,EAAU,EAAQ,KAElBC,EAAe,GAGnB,IAAK,IAAIv+B,KAAQq+B,EACZA,EAAW/I,eAAet1B,KAC7Bu+B,EAAaF,EAAWr+B,IAASA,GAInC,IAAIw+B,EAAKv8B,EAAOC,QAAU,CACzB4Y,GAAI,GACJlX,IAAK,IAmNN,SAAS66B,EAAMC,EAAKj2B,EAAKC,GACxB,OAAOhE,KAAK+D,IAAI/D,KAAKgE,IAAID,EAAKi2B,GAAMh2B,GAGrC,SAASi2B,EAAUD,GAClB,IAAIn9B,EAAMm9B,EAAIlW,SAAS,IAAIoW,cAC3B,OAAQr9B,EAAIhB,OAAS,EAAK,IAAMgB,EAAMA,EAtNvCi9B,EAAG56B,IAAM,SAAUokB,GAClB,IACIpC,EACA/K,EACJ,OAHamN,EAAOtmB,UAAU,EAAG,GAAGgV,eAInC,IAAK,MACJkP,EAAM4Y,EAAG56B,IAAIi7B,IAAI7W,GACjBnN,EAAQ,MACR,MACD,IAAK,MACJ+K,EAAM4Y,EAAG56B,IAAIk7B,IAAI9W,GACjBnN,EAAQ,MACR,MACD,QACC+K,EAAM4Y,EAAG56B,IAAIm7B,IAAI/W,GACjBnN,EAAQ,MAIV,OAAK+K,EAIE,CAAC/K,MAAOA,EAAO/Z,MAAO8kB,GAHrB,MAMT4Y,EAAG56B,IAAIm7B,IAAM,SAAU/W,GACtB,IAAKA,EACJ,OAAO,KAGR,IAOI7O,EACA1Y,EACAu+B,EAHAD,EAAM,CAAC,EAAG,EAAG,EAAG,GAKpB,GAAI5lB,EAAQ6O,EAAO7O,MAVT,mCAUqB,CAI9B,IAHA6lB,EAAW7lB,EAAM,GACjBA,EAAQA,EAAM,GAET1Y,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAEvB,IAAIw+B,EAAS,EAAJx+B,EACTs+B,EAAIt+B,GAAK6O,SAAS6J,EAAMvY,MAAMq+B,EAAIA,EAAK,GAAI,IAGxCD,IACHD,EAAI,GAAKr6B,KAAKC,MAAO2K,SAAS0vB,EAAU,IAAM,IAAO,KAAO,UAEvD,GAAI7lB,EAAQ6O,EAAO7O,MAxBf,uBAwB4B,CAItC,IAFA6lB,GADA7lB,EAAQA,EAAM,IACG,GAEZ1Y,EAAI,EAAGA,EAAI,EAAGA,IAClBs+B,EAAIt+B,GAAK6O,SAAS6J,EAAM1Y,GAAK0Y,EAAM1Y,GAAI,IAGpCu+B,IACHD,EAAI,GAAKr6B,KAAKC,MAAO2K,SAAS0vB,EAAWA,EAAU,IAAM,IAAO,KAAO,UAElE,GAAI7lB,EAAQ6O,EAAO7O,MAjCf,2FAiC4B,CACtC,IAAK1Y,EAAI,EAAGA,EAAI,EAAGA,IAClBs+B,EAAIt+B,GAAK6O,SAAS6J,EAAM1Y,EAAI,GAAI,GAG7B0Y,EAAM,KACT4lB,EAAI,GAAKG,WAAW/lB,EAAM,SAErB,MAAIA,EAAQ6O,EAAO7O,MAxChB,8GAgDH,OAAIA,EAAQ6O,EAAO7O,MA/CZ,UAgDI,gBAAbA,EAAM,GACF,CAAC,EAAG,EAAG,EAAG,IAGlB4lB,EAAMV,EAAWllB,EAAM,MAMvB4lB,EAAI,GAAK,EAEFA,GALC,KAOD,KAtBP,IAAKt+B,EAAI,EAAGA,EAAI,EAAGA,IAClBs+B,EAAIt+B,GAAKiE,KAAKC,MAAiC,KAA3Bu6B,WAAW/lB,EAAM1Y,EAAI,KAGtC0Y,EAAM,KACT4lB,EAAI,GAAKG,WAAW/lB,EAAM,KAoB5B,IAAK1Y,EAAI,EAAGA,EAAI,EAAGA,IAClBs+B,EAAIt+B,GAAKg+B,EAAMM,EAAIt+B,GAAI,EAAG,KAI3B,OAFAs+B,EAAI,GAAKN,EAAMM,EAAI,GAAI,EAAG,GAEnBA,GAGRP,EAAG56B,IAAIi7B,IAAM,SAAU7W,GACtB,IAAKA,EACJ,OAAO,KAGR,IACI7O,EAAQ6O,EAAO7O,MADT,uHAGV,GAAIA,EAAO,CACV,IAAIyB,EAAQskB,WAAW/lB,EAAM,IAM7B,MAAO,EALE+lB,WAAW/lB,EAAM,IAAM,KAAO,IAC/BslB,EAAMS,WAAW/lB,EAAM,IAAK,EAAG,KAC/BslB,EAAMS,WAAW/lB,EAAM,IAAK,EAAG,KAC/BslB,EAAMU,MAAMvkB,GAAS,EAAIA,EAAO,EAAG,IAK5C,OAAO,MAGR4jB,EAAG56B,IAAIk7B,IAAM,SAAU9W,GACtB,IAAKA,EACJ,OAAO,KAGR,IACI7O,EAAQ6O,EAAO7O,MADT,mHAGV,GAAIA,EAAO,CACV,IAAIyB,EAAQskB,WAAW/lB,EAAM,IAK7B,MAAO,EAJG+lB,WAAW/lB,EAAM,IAAM,IAAO,KAAO,IACvCslB,EAAMS,WAAW/lB,EAAM,IAAK,EAAG,KAC/BslB,EAAMS,WAAW/lB,EAAM,IAAK,EAAG,KAC/BslB,EAAMU,MAAMvkB,GAAS,EAAIA,EAAO,EAAG,IAI5C,OAAO,MAGR4jB,EAAG1jB,GAAGC,IAAM,WACX,IAAIqkB,EAAOd,EAAQl4B,WAEnB,MACC,IACAu4B,EAAUS,EAAK,IACfT,EAAUS,EAAK,IACfT,EAAUS,EAAK,KACdA,EAAK,GAAK,EACPT,EAAUj6B,KAAKC,MAAgB,IAAVy6B,EAAK,KAC3B,KAILZ,EAAG1jB,GAAGikB,IAAM,WACX,IAAIK,EAAOd,EAAQl4B,WAEnB,OAAOg5B,EAAK7+B,OAAS,GAAiB,IAAZ6+B,EAAK,GAC5B,OAAS16B,KAAKC,MAAMy6B,EAAK,IAAM,KAAO16B,KAAKC,MAAMy6B,EAAK,IAAM,KAAO16B,KAAKC,MAAMy6B,EAAK,IAAM,IACzF,QAAU16B,KAAKC,MAAMy6B,EAAK,IAAM,KAAO16B,KAAKC,MAAMy6B,EAAK,IAAM,KAAO16B,KAAKC,MAAMy6B,EAAK,IAAM,KAAOA,EAAK,GAAK,KAG/GZ,EAAG1jB,GAAGikB,IAAIM,QAAU,WACnB,IAAID,EAAOd,EAAQl4B,WAEfgD,EAAI1E,KAAKC,MAAMy6B,EAAK,GAAK,IAAM,KAC/BE,EAAI56B,KAAKC,MAAMy6B,EAAK,GAAK,IAAM,KAC/BG,EAAI76B,KAAKC,MAAMy6B,EAAK,GAAK,IAAM,KAEnC,OAAOA,EAAK7+B,OAAS,GAAiB,IAAZ6+B,EAAK,GAC5B,OAASh2B,EAAI,MAAQk2B,EAAI,MAAQC,EAAI,KACrC,QAAUn2B,EAAI,MAAQk2B,EAAI,MAAQC,EAAI,MAAQH,EAAK,GAAK,KAG5DZ,EAAG1jB,GAAG+jB,IAAM,WACX,IAAIW,EAAOlB,EAAQl4B,WACnB,OAAOo5B,EAAKj/B,OAAS,GAAiB,IAAZi/B,EAAK,GAC5B,OAASA,EAAK,GAAK,KAAOA,EAAK,GAAK,MAAQA,EAAK,GAAK,KACtD,QAAUA,EAAK,GAAK,KAAOA,EAAK,GAAK,MAAQA,EAAK,GAAK,MAAQA,EAAK,GAAK,KAK7EhB,EAAG1jB,GAAGgkB,IAAM,WACX,IAAIW,EAAOnB,EAAQl4B,WAEfwpB,EAAI,GAKR,OAJI6P,EAAKl/B,QAAU,GAAiB,IAAZk/B,EAAK,KAC5B7P,EAAI,KAAO6P,EAAK,IAGV,OAASA,EAAK,GAAK,KAAOA,EAAK,GAAK,MAAQA,EAAK,GAAK,IAAM7P,EAAI,KAGxE4O,EAAG1jB,GAAG4kB,QAAU,SAAUX,GACzB,OAAOR,EAAaQ,EAAIn+B,MAAM,EAAG,M,6BC5NlCqB,EAAOC,QAAU,CAChB,UAAa,CAAC,IAAK,IAAK,KACxB,aAAgB,CAAC,IAAK,IAAK,KAC3B,KAAQ,CAAC,EAAG,IAAK,KACjB,WAAc,CAAC,IAAK,IAAK,KACzB,MAAS,CAAC,IAAK,IAAK,KACpB,MAAS,CAAC,IAAK,IAAK,KACpB,OAAU,CAAC,IAAK,IAAK,KACrB,MAAS,CAAC,EAAG,EAAG,GAChB,eAAkB,CAAC,IAAK,IAAK,KAC7B,KAAQ,CAAC,EAAG,EAAG,KACf,WAAc,CAAC,IAAK,GAAI,KACxB,MAAS,CAAC,IAAK,GAAI,IACnB,UAAa,CAAC,IAAK,IAAK,KACxB,UAAa,CAAC,GAAI,IAAK,KACvB,WAAc,CAAC,IAAK,IAAK,GACzB,UAAa,CAAC,IAAK,IAAK,IACxB,MAAS,CAAC,IAAK,IAAK,IACpB,eAAkB,CAAC,IAAK,IAAK,KAC7B,SAAY,CAAC,IAAK,IAAK,KACvB,QAAW,CAAC,IAAK,GAAI,IACrB,KAAQ,CAAC,EAAG,IAAK,KACjB,SAAY,CAAC,EAAG,EAAG,KACnB,SAAY,CAAC,EAAG,IAAK,KACrB,cAAiB,CAAC,IAAK,IAAK,IAC5B,SAAY,CAAC,IAAK,IAAK,KACvB,UAAa,CAAC,EAAG,IAAK,GACtB,SAAY,CAAC,IAAK,IAAK,KACvB,UAAa,CAAC,IAAK,IAAK,KACxB,YAAe,CAAC,IAAK,EAAG,KACxB,eAAkB,CAAC,GAAI,IAAK,IAC5B,WAAc,CAAC,IAAK,IAAK,GACzB,WAAc,CAAC,IAAK,GAAI,KACxB,QAAW,CAAC,IAAK,EAAG,GACpB,WAAc,CAAC,IAAK,IAAK,KACzB,aAAgB,CAAC,IAAK,IAAK,KAC3B,cAAiB,CAAC,GAAI,GAAI,KAC1B,cAAiB,CAAC,GAAI,GAAI,IAC1B,cAAiB,CAAC,GAAI,GAAI,IAC1B,cAAiB,CAAC,EAAG,IAAK,KAC1B,WAAc,CAAC,IAAK,EAAG,KACvB,SAAY,CAAC,IAAK,GAAI,KACtB,YAAe,CAAC,EAAG,IAAK,KACxB,QAAW,CAAC,IAAK,IAAK,KACtB,QAAW,CAAC,IAAK,IAAK,KACtB,WAAc,CAAC,GAAI,IAAK,KACxB,UAAa,CAAC,IAAK,GAAI,IACvB,YAAe,CAAC,IAAK,IAAK,KAC1B,YAAe,CAAC,GAAI,IAAK,IACzB,QAAW,CAAC,IAAK,EAAG,KACpB,UAAa,CAAC,IAAK,IAAK,KACxB,WAAc,CAAC,IAAK,IAAK,KACzB,KAAQ,CAAC,IAAK,IAAK,GACnB,UAAa,CAAC,IAAK,IAAK,IACxB,KAAQ,CAAC,IAAK,IAAK,KACnB,MAAS,CAAC,EAAG,IAAK,GAClB,YAAe,CAAC,IAAK,IAAK,IAC1B,KAAQ,CAAC,IAAK,IAAK,KACnB,SAAY,CAAC,IAAK,IAAK,KACvB,QAAW,CAAC,IAAK,IAAK,KACtB,UAAa,CAAC,IAAK,GAAI,IACvB,OAAU,CAAC,GAAI,EAAG,KAClB,MAAS,CAAC,IAAK,IAAK,KACpB,MAAS,CAAC,IAAK,IAAK,KACpB,SAAY,CAAC,IAAK,IAAK,KACvB,cAAiB,CAAC,IAAK,IAAK,KAC5B,UAAa,CAAC,IAAK,IAAK,GACxB,aAAgB,CAAC,IAAK,IAAK,KAC3B,UAAa,CAAC,IAAK,IAAK,KACxB,WAAc,CAAC,IAAK,IAAK,KACzB,UAAa,CAAC,IAAK,IAAK,KACxB,qBAAwB,CAAC,IAAK,IAAK,KACnC,UAAa,CAAC,IAAK,IAAK,KACxB,WAAc,CAAC,IAAK,IAAK,KACzB,UAAa,CAAC,IAAK,IAAK,KACxB,UAAa,CAAC,IAAK,IAAK,KACxB,YAAe,CAAC,IAAK,IAAK,KAC1B,cAAiB,CAAC,GAAI,IAAK,KAC3B,aAAgB,CAAC,IAAK,IAAK,KAC3B,eAAkB,CAAC,IAAK,IAAK,KAC7B,eAAkB,CAAC,IAAK,IAAK,KAC7B,eAAkB,CAAC,IAAK,IAAK,KAC7B,YAAe,CAAC,IAAK,IAAK,KAC1B,KAAQ,CAAC,EAAG,IAAK,GACjB,UAAa,CAAC,GAAI,IAAK,IACvB,MAAS,CAAC,IAAK,IAAK,KACpB,QAAW,CAAC,IAAK,EAAG,KACpB,OAAU,CAAC,IAAK,EAAG,GACnB,iBAAoB,CAAC,IAAK,IAAK,KAC/B,WAAc,CAAC,EAAG,EAAG,KACrB,aAAgB,CAAC,IAAK,GAAI,KAC1B,aAAgB,CAAC,IAAK,IAAK,KAC3B,eAAkB,CAAC,GAAI,IAAK,KAC5B,gBAAmB,CAAC,IAAK,IAAK,KAC9B,kBAAqB,CAAC,EAAG,IAAK,KAC9B,gBAAmB,CAAC,GAAI,IAAK,KAC7B,gBAAmB,CAAC,IAAK,GAAI,KAC7B,aAAgB,CAAC,GAAI,GAAI,KACzB,UAAa,CAAC,IAAK,IAAK,KACxB,UAAa,CAAC,IAAK,IAAK,KACxB,SAAY,CAAC,IAAK,IAAK,KACvB,YAAe,CAAC,IAAK,IAAK,KAC1B,KAAQ,CAAC,EAAG,EAAG,KACf,QAAW,CAAC,IAAK,IAAK,KACtB,MAAS,CAAC,IAAK,IAAK,GACpB,UAAa,CAAC,IAAK,IAAK,IACxB,OAAU,CAAC,IAAK,IAAK,GACrB,UAAa,CAAC,IAAK,GAAI,GACvB,OAAU,CAAC,IAAK,IAAK,KACrB,cAAiB,CAAC,IAAK,IAAK,KAC5B,UAAa,CAAC,IAAK,IAAK,KACxB,cAAiB,CAAC,IAAK,IAAK,KAC5B,cAAiB,CAAC,IAAK,IAAK,KAC5B,WAAc,CAAC,IAAK,IAAK,KACzB,UAAa,CAAC,IAAK,IAAK,KACxB,KAAQ,CAAC,IAAK,IAAK,IACnB,KAAQ,CAAC,IAAK,IAAK,KACnB,KAAQ,CAAC,IAAK,IAAK,KACnB,WAAc,CAAC,IAAK,IAAK,KACzB,OAAU,CAAC,IAAK,EAAG,KACnB,cAAiB,CAAC,IAAK,GAAI,KAC3B,IAAO,CAAC,IAAK,EAAG,GAChB,UAAa,CAAC,IAAK,IAAK,KACxB,UAAa,CAAC,GAAI,IAAK,KACvB,YAAe,CAAC,IAAK,GAAI,IACzB,OAAU,CAAC,IAAK,IAAK,KACrB,WAAc,CAAC,IAAK,IAAK,IACzB,SAAY,CAAC,GAAI,IAAK,IACtB,SAAY,CAAC,IAAK,IAAK,KACvB,OAAU,CAAC,IAAK,GAAI,IACpB,OAAU,CAAC,IAAK,IAAK,KACrB,QAAW,CAAC,IAAK,IAAK,KACtB,UAAa,CAAC,IAAK,GAAI,KACvB,UAAa,CAAC,IAAK,IAAK,KACxB,UAAa,CAAC,IAAK,IAAK,KACxB,KAAQ,CAAC,IAAK,IAAK,KACnB,YAAe,CAAC,EAAG,IAAK,KACxB,UAAa,CAAC,GAAI,IAAK,KACvB,IAAO,CAAC,IAAK,IAAK,KAClB,KAAQ,CAAC,EAAG,IAAK,KACjB,QAAW,CAAC,IAAK,IAAK,KACtB,OAAU,CAAC,IAAK,GAAI,IACpB,UAAa,CAAC,GAAI,IAAK,KACvB,OAAU,CAAC,IAAK,IAAK,KACrB,MAAS,CAAC,IAAK,IAAK,KACpB,MAAS,CAAC,IAAK,IAAK,KACpB,WAAc,CAAC,IAAK,IAAK,KACzB,OAAU,CAAC,IAAK,IAAK,GACrB,YAAe,CAAC,IAAK,IAAK,M,6BCpJ3B,IAAIy9B,EAAa,EAAQ,KAErBh/B,EAASP,MAAMT,UAAUgB,OACzBC,EAAQR,MAAMT,UAAUiB,MAExB09B,EAAUr8B,EAAOC,QAAU,SAAiBmE,GAG/C,IAFA,IAAI6U,EAAU,GAELza,EAAI,EAAGH,EAAM+F,EAAK9F,OAAQE,EAAIH,EAAKG,IAAK,CAChD,IAAIuB,EAAMqE,EAAK5F,GAEXk/B,EAAW39B,GAEdkZ,EAAUva,EAAOnB,KAAK0b,EAASta,EAAMpB,KAAKwC,IAE1CkZ,EAAQ3Y,KAAKP,GAIf,OAAOkZ,GAGRojB,EAAQjtB,KAAO,SAAUV,GACxB,OAAO,WACN,OAAOA,EAAG2tB,EAAQl4B,e,cC1BpBnE,EAAOC,QAAU,SAAoBG,GACpC,SAAKA,GAAsB,iBAARA,KAIZA,aAAejC,OAASA,MAAMC,QAAQgC,IAC3CA,EAAI9B,QAAU,IAAM8B,EAAI2O,kBAAkB1M,UACzC1E,OAAO0gB,yBAAyBje,EAAMA,EAAI9B,OAAS,IAAgC,WAAzB8B,EAAIvC,YAAYE,S,6BCJ9E,IAAI28B,EAAa,EAAQ,KACrBnhB,EAAM,EAAQ,IACdG,EAAmB,EAAQ,KAE/B1Z,EAAOC,QAAU,SAAsB09B,GAOrC,MANqB,iBAAVA,EACTA,EAAQ,CAACl6B,GAAIk6B,GACHA,IACVA,EAAQ,IAGH,CACLl6B,GAAI8V,EAAIS,OAAO2jB,EAAMl6B,IACrB2U,MAAOsiB,EAAWxiB,SAASylB,EAAMvlB,OACjC6B,WAAY0jB,EAAM1jB,YAAc,GAChCwhB,WAAgC,MAApBkC,EAAMlC,YAAqBkC,EAAMlC,WAC7CvhB,cAAeyjB,EAAMzjB,eAAiBR,K,6BChB1C,IAAI8gB,EAAM,EAAQ,GAWlB,SAASoD,EAAYv6B,GACnB,OACW,MAATA,GACc,MAAdA,EAAM1D,MACQ,MAAd0D,EAAMkV,MACa,MAAnBlV,EAAMwX,WACmB,MAAzBxX,EAAMwX,UAAUxX,OAChBA,EAAMwX,UAAUxX,MAAM/E,OAI1B,SAASu/B,EAAY9mB,EAAQ1T,GAC3B,IAAI1D,EAAO0D,EAAM1D,KACb4Y,EAAOlV,EAAMkV,KAcjB,OAZI5Y,IAAS66B,EAAIsD,WACf/mB,EAAO4kB,OAAOr7B,KAAK+C,GACV1D,IAAS66B,EAAIuD,aACtBhnB,EAAO6kB,QAAUv4B,EAEbkV,IAASiiB,EAAIO,SACfhkB,EAAOinB,IAAI19B,KAAK+C,GACPkV,IAASiiB,EAAIQ,aACtBjkB,EAAOknB,OAAO39B,KAAK+C,GAIhB0T,EApCT/W,EAAOC,QAAU,SAAoB+5B,GACnC,OAAOA,EAAO7b,OAAOyf,GAAa9mB,OAAO+mB,EAAa,CACpDG,IAAK,GACLC,OAAQ,GACRtC,OAAQ,GACRC,QAAS,S,6BCPb,IAAIsC,EAAU,EAAQ,KAClB1D,EAAM,EAAQ,GAEd2D,EAAe,EAAQ,KAqG3B,SAASC,EAAYpE,EAAQr6B,GAC3B,IAAI0D,EACA7E,EAEJ,IAAKA,EAAI,EAAGA,EAAIw7B,EAAO17B,OAAQE,IAE7B,IADA6E,EAAQ22B,EAAOx7B,IACLmB,OAASA,EACjB,OAAO0D,EAAMI,GAKnB,SAAS46B,EAASv7B,EAASW,EAAI66B,EAAWh7B,GACxC,IAAIs1B,EAAO,CAAC,aAAc,IAAMn1B,GAYhC,OAVI66B,IACF1F,EAAK/1B,KAAO,eACZ+1B,EAAKl1B,OAAS,eACdk1B,EAAK2F,MAAQD,GAGXh7B,IACFs1B,EAAKt1B,KAAO,QAAUA,EAAO,KAGxBR,EAAQ,MAAO81B,GAGxB,SAAS4F,EAAW17B,EAASF,EAAKC,EAAMy7B,GACtC,IAAI1F,EAAOsF,EAAQrM,KAAKjvB,GAUxB,OARIC,IACF+1B,EAAK/1B,KAAOA,GAGVy7B,IACF1F,EAAK2F,MAAQD,GAGRx7B,EAAQ,OAAQ81B,GA1IzB54B,EAAOC,QAAU,SACf6C,EACAW,EACA8U,EACAyhB,EACA2B,EACAC,EACAH,GAEA,IAAIgD,EAAch7B,EAAK,IACnBi7B,EAAWj7B,EAAK,IAAM8U,EAAO,IAC7B8iB,EAAaqD,EAAW,YAExBC,EAAaR,EACfr7B,EACA47B,EACA1E,EACA2B,EACAC,EACAH,GAEExE,EAAO0H,EAAW1H,KAClBr0B,EAAM+7B,EAAW/7B,IACjB0X,EAAQqkB,EAAWrkB,MAEvB0f,EAAS2E,EAAWC,SACpBjD,EAASgD,EAAWE,SAEpB5H,EAAK32B,KAiHP,SAAkBwC,EAASW,EAAIb,EAAK+4B,GAClC,IAAIn4B,EAAWm4B,EAAOp9B,KAAI,SAAS8E,GACjC,OAAOg7B,EAASv7B,EAASO,EAAMI,OAGjCD,EAASiI,QAAQ+yB,EAAW17B,EAASF,EAAK,SAE1C,IACIk8B,EAAQ,CAACh8B,EAAQ,IADL,CAACD,KAAM,OAAQa,OAAQ,QACFF,IAErC,OAAOV,EAAQ,OAAQ,CAACW,GAAIA,GAAKq7B,GA3HvBC,CAASj8B,EAASu4B,EAAYz4B,EAAK+4B,IAG7C,IAAIt4B,EAAQ,CAACm7B,EAAW17B,EAASF,EAAK,eAAgB67B,EAAc,QAChEO,EAAYZ,EAAYpE,EAAQQ,EAAIyE,aACpCC,EAAYd,EAAYpE,EAAQQ,EAAI2E,iBACpCC,EAAYhB,EAAYpE,EAAQQ,EAAI6E,iBACpCC,EAAYlB,EAAYpE,EAAQQ,EAAI+E,kBACpCC,EAAab,EAAWc,UAG5B,GAAIT,EAAW,CACb,IAAIU,EAAWhB,EAAW,UAKtBiB,EAAc,CAAC78B,EAAQ,IADL,CAACD,KAAM,OAAQa,OAAQ,QAH3Bw7B,EACd,CAACb,EAASv7B,EAASo8B,IACnB,CAACV,EAAW17B,EAASF,MAIzBq0B,EAAK32B,KAAKwC,EAAQ,OAAQ,CAACW,GAAIi8B,GAAWC,IAC1Ct8B,EAAM/C,KAAK+9B,EAASv7B,EAASk8B,EAAWP,EAAc,OACtDp7B,EAAM/C,KAAK+9B,EAASv7B,EAASk8B,EAAWP,EAAc,KAAMiB,IAK9D,GAAIR,EAAW,CAEb,IAAIU,EAAWlB,EAAW,UAMtBmB,EAAc,CAAC/8B,EAAQ,IADL,CAACD,KAAM,OAAQa,OAAQ,QAJ3B,CAChB86B,EAAW17B,EAASF,EAAK,QACzBy7B,EAASv7B,EAASo8B,MAKpBjI,EAAK32B,KAAKwC,EAAQ,OAAQ,CAACW,GAAIm8B,GAAWC,IAG1C,IAAIC,EAAc,CAACx8B,KAAM,QAAUs8B,EAAW,KAC1CG,EAAe,CACjBvB,EAAW17B,EAASF,EAAK,eAAgB67B,EAAc,OAGrDW,GACFW,EAAaz/B,KAAK+9B,EAASv7B,EAASs8B,EAAWX,EAAc,OAG/Dp7B,EAAM/C,KAAKwC,EAAQ,IAAKg9B,EAAaC,IAavC,OATIT,GACFj8B,EAAM/C,KAAK+9B,EAASv7B,EAASw8B,EAAWb,EAAc,OAIpDe,IAAe/D,GACjBp4B,EAAM/C,KAAK+9B,EAASv7B,EAAS08B,EAAYf,EAAc,QAGlD,CACLxH,KAAMA,EACN5zB,MAAOA,EACPg4B,WAAYA,EACZC,UAAWkE,GAAc/D,EAAa+D,EAAa,KACnD58B,IAAKA,EACL0X,MAAOA,K,6BCpGX,IAAI4jB,EAAU,EAAQ,KAClB1D,EAAM,EAAQ,GAEdwF,EAAY,EAAQ,KA+GxB,SAASC,EAAS3lB,EAAO4lB,GAIvB,OAFa5lB,IAAU4lB,EAAa,EADd,OAAV5lB,EAAiB,EAAI,KAAO,KA9G1Cta,EAAOC,QAAU,SACf6C,EACA47B,EACA1E,EACA2B,EACAC,EACAH,GAEA,IAAIxE,EAAO,GACP2H,EAAW,GACXC,EAAW,GACXvkB,EAAQ,GACR6lB,EAAa,CAACC,GAAI,EAAGC,GAAI,GACzBC,EAAYtG,EAAOt7B,OAAOi9B,EAAQC,GAAW,IAE7C2E,EAAa,EACbC,EAAc,SAAS7gC,GACzB,IAAI8D,EAAKi7B,EAAW/+B,EAOpB,OALIA,IAAS66B,EAAIsD,aAEfr6B,KADA88B,GAIK98B,GAGT68B,EAAUjnB,SAAQ,SAAShW,GACpBA,EAAMo9B,aACTxJ,EAAOA,EAAKv4B,OAAO2E,EAAMwX,UAAUoc,OAGP,OAA1B5zB,EAAMwX,UAAUP,MAClB6lB,EAAWE,KAEXF,EAAWC,QAIXD,EAAWC,GAAKD,EAAWE,KAC7B/lB,EAAQ6lB,EAAWC,GAAKD,EAAWE,GAAK,KAAO,MAGjD,IAmCIZ,EAjCA78B,GAFgB64B,GAAcG,EAAU,CAACA,GAAW0E,GAEhCxpB,QAAO,SAASC,EAAQ1T,GAC9C,IAAIq9B,EAAWr9B,EAAMwX,UAAUqc,QAC3BgJ,EAAa78B,EAAMwX,UAAUP,MAEjC,OAAI4lB,GAA8B,IAAhBQ,EAAS,IAA4B,IAAhBA,EAAS,GACvCxC,EAAQ53B,IACbyQ,EACAmnB,EAAQyC,MAAMD,EAAUT,EAAS3lB,EAAO4lB,KAIrCnpB,IACNmnB,EAAQtgC,UAEPgjC,EAAqB,SAAS1S,GAChC,OAAO,SAAS7qB,GACd,IAAII,EAAKJ,EAAMo9B,WACX5lB,EAAYxX,EAAMwX,UAEjBpX,IACHA,EAAK+8B,EAAYn9B,EAAM1D,MACvBs3B,EAAK32B,KACH0/B,EAAUl9B,EAASW,EAAIoX,EAAWolB,EAAS3lB,EAAOO,EAAUP,UAIhE4T,EAAW5tB,KAAK,CAACX,KAAM0D,EAAM1D,KAAM8D,GAAIA,MA4B3C,OAxBAu2B,EAAO3gB,QAAQunB,EAAmBhC,IAClCjD,EAAOtiB,QAAQunB,EAAmB/B,IAK9BjD,IACEA,EAAQ6E,aAAehF,EACzBgE,EAAY7D,EAAQ6E,YAEpBhB,EAAYe,EAAY5E,EAAQj8B,MAEhCs3B,EAAK32B,KACH0/B,EACEl9B,EACA28B,EACA7D,EAAQ/gB,UACRolB,EAAS3lB,EAAOshB,EAAQ/gB,UAAUP,OAClCmhB,EAAa,WAAa,QAM3B,CACLxE,KAAMA,EACNr0B,IAAKA,EACL0X,MAAOA,EACPskB,SAAUA,EACVC,SAAUA,EACVY,UAAWA,K,6BC9Gfz/B,EAAOC,QAAU,SAAmB6C,EAASW,EAAIoX,EAAW8lB,EAAO7P,GACjE,IAAIztB,EAAQwX,EAAUxX,MAClBu1B,EAAO,CAACn1B,GAAIA,GAMhB,OAJIk9B,GAAmB,IAAVA,IACX/H,EAAKtjB,UAAY,SAAWqrB,EAAQ,IAAMA,EAAQ,KAG7C79B,EAAQguB,GAAO,IAAK8H,EAAMv1B,K,sDCPnC,IAAIk3B,EAAS,EAAQ,KACjBsG,EAAc,EAAQ,KACtBC,EAAe,EAAQ,KACvBC,EAAc,EAAQ,KACtBC,EAAgB,EAAQ,KACxBxG,EAAM,EAAQ,GAgIlB,SAASyG,EAAwB59B,EAAOyL,GACtC,IAAIiI,EAASyjB,EAAI0G,SAAS79B,GACtBiC,EAAQ,KAUZ,OARKjC,EAAMwX,WAAcxX,EAAMyW,OAEnBzW,EAAM89B,UAAa99B,EAAM1D,KAEzB0D,EAAM89B,UAAapqB,EAAOqqB,QACpC97B,EAAQ,0BAA4BjC,EAAMkV,KAAO,IAAMlV,EAAM1D,KAAO,KAFpE2F,EAAQ,mCAFRA,EAAQ,+CAOHA,EAAQ,SAAWwJ,EAAQ,IAAMxJ,EAAQ,KA1IlDtF,EAAOC,QAAU,SAAoB+5B,EAAQp5B,EAAS8U,GACpD,IAAIqB,EAUJ,GARuB,mBAAZnW,IACT8U,EAAO9U,EACPA,EAAU,MA4Gd,SAA6Bo5B,GAC3B,IAAK77B,MAAMC,QAAQ47B,GACjB,MAAM,IAAIj9B,MAAM,+CAGlB,IAAIskC,EAAcrH,EACfz7B,IAAI0iC,GACJ9iB,OAAOiG,SACPxlB,KAAK,MAER,GAAIyiC,EAAa,MAAM,IAAItkC,MAAMskC,GAnHjCC,CAAoBtH,GAGR,MAARtkB,EAAc,CAChB,GAAuB,mBAAZoK,QACT,MAAM,IAAI/iB,MAAM,sDAGlBga,EAAS,IAAI+I,SAAQ,SAASL,EAASM,GACrCrK,EAAO,SAA2BpQ,EAAOi8B,GACvC,GAAIj8B,EAAO,OAAOya,EAAOza,GACzBma,EAAQ8hB,OAKd,IAAIC,EAAahH,EACfR,EACGz7B,KAAI,SAAS8E,GACZ,OAAOA,EAAM89B,YAEdhjB,OAAOiG,UAyBZ,OAtBA0c,EACE,CAEE,SAAyBrwB,GACvB,IAAIgxB,EAAazH,EAAOz7B,IAAImjC,GAC5Bb,EAAYY,EAAYhxB,IAG1B,SAAuBkxB,EAAelxB,GACpC,IAAI8wB,EAAUP,EAAcW,EAAe/gC,GAC3C2gC,EAAQvH,OAAS2H,EACjBlxB,EAAK,KAAM8wB,MAGf,SAAgBj8B,EAAOi8B,GAErB,GAAIj8B,EAAO,OAAOoQ,EAAKpQ,GACvBoQ,EAAK,KAAM6rB,MAKRxqB,EAIP,SAAS2qB,EAAoBr+B,GAC3B,OAAO,SAAqBoN,GAC1B,IAAImxB,EAiBR,SAA8Bv+B,GAC5B,IAAIw+B,EAAYx+B,EAAMkV,KAClBupB,EAAYz+B,EAAM1D,KAEtB,GACE0D,EAAM89B,eACe,IAAdU,QACc,IAAdC,EACP,CACA,IAAIC,EAAWP,EAAWn+B,EAAM89B,UAChCU,EAAYE,EAASxpB,KACrBupB,EAAYC,EAASpiC,KAGvB,IAAIqiC,EAAezH,EAAOl3B,EAAMzC,SAEE,MAA9BohC,EAAarnB,eAAyBmnB,IAActH,EAAIuD,eAC1DiE,EAAarnB,eAAgB,GAI7B/Z,GAC0B,MAA1BA,EAAQqhC,gBACRD,EAAarnB,gBAEbqnB,EAAarnB,cAAgB/Z,EAAQqhC,gBAGvC,OAAO1H,EAAOl3B,EAAO,CACnBkV,KAAMspB,EACNliC,KAAMmiC,EACNlhC,QAASohC,IAhDUE,CAAqB7+B,GAExC,GAAIu+B,EAAa/mB,UAAW,OAAOpK,EAAK,KAAMmxB,GAE9C,IAAI/mB,EAAYkmB,EACda,EAAa9nB,OACb8nB,EAAahhC,SACb,SAAyB0E,GACvB,GAAIA,EAAO,OAAOmL,EAAKnL,GACvBs8B,EAAa/mB,UAAYA,EACzBpK,EAAK,KAAMmxB","file":"3.ebf66978fbd67ffde235.worker.js","sourcesContent":["'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar codes = {};\n\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n\n  var NodeError =\n  /*#__PURE__*/\n  function (_Base) {\n    _inheritsLoose(NodeError, _Base);\n\n    function NodeError(arg1, arg2, arg3) {\n      return _Base.call(this, getMessage(arg1, arg2, arg3)) || this;\n    }\n\n    return NodeError;\n  }(Base);\n\n  NodeError.prototype.name = Base.name;\n  NodeError.prototype.code = code;\n  codes[code] = NodeError;\n} // https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\n\n\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\n\n\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\n\n\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n\n  return str.substring(this_len - search.length, this_len) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\n\n\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\n\ncreateErrorType('ERR_INVALID_OPT_VALUE', function (name, value) {\n  return 'The value \"' + value + '\" is invalid for option \"' + name + '\"';\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  // determiner: 'must be' or 'must not be'\n  var determiner;\n\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n\n  var msg;\n\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  }\n\n  msg += \". Received type \".concat(typeof actual);\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF');\ncreateErrorType('ERR_METHOD_NOT_IMPLEMENTED', function (name) {\n  return 'The ' + name + ' method is not implemented';\n});\ncreateErrorType('ERR_STREAM_PREMATURE_CLOSE', 'Premature close');\ncreateErrorType('ERR_STREAM_DESTROYED', function (name) {\n  return 'Cannot call ' + name + ' after a stream was destroyed';\n});\ncreateErrorType('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times');\ncreateErrorType('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable');\ncreateErrorType('ERR_STREAM_WRITE_AFTER_END', 'write after end');\ncreateErrorType('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError);\ncreateErrorType('ERR_UNKNOWN_ENCODING', function (arg) {\n  return 'Unknown encoding: ' + arg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event');\nmodule.exports.codes = codes;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n'use strict';\n/*<replacement>*/\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n\n  for (var key in obj) {\n    keys.push(key);\n  }\n\n  return keys;\n};\n/*</replacement>*/\n\n\nmodule.exports = Duplex;\n\nvar Readable = require('./_stream_readable');\n\nvar Writable = require('./_stream_writable');\n\nrequire('inherits')(Duplex, Readable);\n\n{\n  // Allow the keys array to be GC'ed.\n  var keys = objectKeys(Writable.prototype);\n\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n  Readable.call(this, options);\n  Writable.call(this, options);\n  this.allowHalfOpen = true;\n\n  if (options) {\n    if (options.readable === false) this.readable = false;\n    if (options.writable === false) this.writable = false;\n\n    if (options.allowHalfOpen === false) {\n      this.allowHalfOpen = false;\n      this.once('end', onend);\n    }\n  }\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n}); // the no-half-open enforcer\n\nfunction onend() {\n  // If the writable side ended, then we're ok.\n  if (this._writableState.ended) return; // no more data can be written.\n  // But allow more writes to happen in this tick.\n\n  process.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});","'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar codes = {};\n\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n\n  var NodeError =\n  /*#__PURE__*/\n  function (_Base) {\n    _inheritsLoose(NodeError, _Base);\n\n    function NodeError(arg1, arg2, arg3) {\n      return _Base.call(this, getMessage(arg1, arg2, arg3)) || this;\n    }\n\n    return NodeError;\n  }(Base);\n\n  NodeError.prototype.name = Base.name;\n  NodeError.prototype.code = code;\n  codes[code] = NodeError;\n} // https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\n\n\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\n\n\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\n\n\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n\n  return str.substring(this_len - search.length, this_len) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\n\n\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\n\ncreateErrorType('ERR_INVALID_OPT_VALUE', function (name, value) {\n  return 'The value \"' + value + '\" is invalid for option \"' + name + '\"';\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  // determiner: 'must be' or 'must not be'\n  var determiner;\n\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n\n  var msg;\n\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  }\n\n  msg += \". Received type \".concat(typeof actual);\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF');\ncreateErrorType('ERR_METHOD_NOT_IMPLEMENTED', function (name) {\n  return 'The ' + name + ' method is not implemented';\n});\ncreateErrorType('ERR_STREAM_PREMATURE_CLOSE', 'Premature close');\ncreateErrorType('ERR_STREAM_DESTROYED', function (name) {\n  return 'Cannot call ' + name + ' after a stream was destroyed';\n});\ncreateErrorType('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times');\ncreateErrorType('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable');\ncreateErrorType('ERR_STREAM_WRITE_AFTER_END', 'write after end');\ncreateErrorType('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError);\ncreateErrorType('ERR_UNKNOWN_ENCODING', function (arg) {\n  return 'Unknown encoding: ' + arg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event');\nmodule.exports.codes = codes;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n'use strict';\n/*<replacement>*/\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n\n  for (var key in obj) {\n    keys.push(key);\n  }\n\n  return keys;\n};\n/*</replacement>*/\n\n\nmodule.exports = Duplex;\n\nvar Readable = require('./_stream_readable');\n\nvar Writable = require('./_stream_writable');\n\nrequire('inherits')(Duplex, Readable);\n\n{\n  // Allow the keys array to be GC'ed.\n  var keys = objectKeys(Writable.prototype);\n\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n  Readable.call(this, options);\n  Writable.call(this, options);\n  this.allowHalfOpen = true;\n\n  if (options) {\n    if (options.readable === false) this.readable = false;\n    if (options.writable === false) this.writable = false;\n\n    if (options.allowHalfOpen === false) {\n      this.allowHalfOpen = false;\n      this.once('end', onend);\n    }\n  }\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n}); // the no-half-open enforcer\n\nfunction onend() {\n  // If the writable side ended, then we're ok.\n  if (this._writableState.ended) return; // no more data can be written.\n  // But allow more writes to happen in this tick.\n\n  process.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});","'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar codes = {};\n\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n\n  var NodeError =\n  /*#__PURE__*/\n  function (_Base) {\n    _inheritsLoose(NodeError, _Base);\n\n    function NodeError(arg1, arg2, arg3) {\n      return _Base.call(this, getMessage(arg1, arg2, arg3)) || this;\n    }\n\n    return NodeError;\n  }(Base);\n\n  NodeError.prototype.name = Base.name;\n  NodeError.prototype.code = code;\n  codes[code] = NodeError;\n} // https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\n\n\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\n\n\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\n\n\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n\n  return str.substring(this_len - search.length, this_len) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\n\n\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\n\ncreateErrorType('ERR_INVALID_OPT_VALUE', function (name, value) {\n  return 'The value \"' + value + '\" is invalid for option \"' + name + '\"';\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  // determiner: 'must be' or 'must not be'\n  var determiner;\n\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n\n  var msg;\n\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  }\n\n  msg += \". Received type \".concat(typeof actual);\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF');\ncreateErrorType('ERR_METHOD_NOT_IMPLEMENTED', function (name) {\n  return 'The ' + name + ' method is not implemented';\n});\ncreateErrorType('ERR_STREAM_PREMATURE_CLOSE', 'Premature close');\ncreateErrorType('ERR_STREAM_DESTROYED', function (name) {\n  return 'Cannot call ' + name + ' after a stream was destroyed';\n});\ncreateErrorType('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times');\ncreateErrorType('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable');\ncreateErrorType('ERR_STREAM_WRITE_AFTER_END', 'write after end');\ncreateErrorType('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError);\ncreateErrorType('ERR_UNKNOWN_ENCODING', function (arg) {\n  return 'Unknown encoding: ' + arg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event');\nmodule.exports.codes = codes;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n'use strict';\n/*<replacement>*/\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n\n  for (var key in obj) {\n    keys.push(key);\n  }\n\n  return keys;\n};\n/*</replacement>*/\n\n\nmodule.exports = Duplex;\n\nvar Readable = require('./_stream_readable');\n\nvar Writable = require('./_stream_writable');\n\nrequire('inherits')(Duplex, Readable);\n\n{\n  // Allow the keys array to be GC'ed.\n  var keys = objectKeys(Writable.prototype);\n\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n  Readable.call(this, options);\n  Writable.call(this, options);\n  this.allowHalfOpen = true;\n\n  if (options) {\n    if (options.readable === false) this.readable = false;\n    if (options.writable === false) this.writable = false;\n\n    if (options.allowHalfOpen === false) {\n      this.allowHalfOpen = false;\n      this.once('end', onend);\n    }\n  }\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n}); // the no-half-open enforcer\n\nfunction onend() {\n  // If the writable side ended, then we're ok.\n  if (this._writableState.ended) return; // no more data can be written.\n  // But allow more writes to happen in this tick.\n\n  process.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsFinite = root.isFinite;\n\n/**\n * Checks if `value` is a finite primitive number.\n *\n * **Note:** This method is based on\n * [`Number.isFinite`](https://mdn.io/Number/isFinite).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a finite number,\n *  else `false`.\n * @example\n *\n * _.isFinite(3);\n * // => true\n *\n * _.isFinite(Number.MIN_VALUE);\n * // => true\n *\n * _.isFinite(Infinity);\n * // => false\n *\n * _.isFinite('3');\n * // => false\n */\nfunction isFinite(value) {\n  return typeof value == 'number' && nativeIsFinite(value);\n}\n\nmodule.exports = isFinite;\n","// helper utilities\r\n'use strict'\r\n\r\n// shift the decimal place to SVG coordinates (units * 1000)\r\n// also round to 7 decimal places\r\nvar shift = function(number) {\r\n  return Math.round(10000000000 * number) / 10000000\r\n}\r\n\r\nvar boundingRect = function(box, fill, element) {\r\n  return element('rect', {\r\n    x: shift(box[0]),\r\n    y: shift(box[1]),\r\n    width: shift(box[2] - box[0]),\r\n    height: shift(box[3] - box[1]),\r\n    fill: fill,\r\n  })\r\n}\r\n\r\nvar maskLayer = function(maskId, layer, element) {\r\n  var maskUrl = 'url(#' + maskId + ')'\r\n\r\n  return element('g', {mask: maskUrl}, layer)\r\n}\r\n\r\nvar createMask = function(maskId, box, children, element) {\r\n  children = [boundingRect(box, '#fff', element)].concat(children)\r\n  var attributes = {id: maskId, fill: '#000', stroke: '#000'}\r\n\r\n  return element('mask', attributes, [element('g', {}, children)])\r\n}\r\n\r\nmodule.exports = {\r\n  shift: shift,\r\n  maskLayer: maskLayer,\r\n  createMask: createMask,\r\n}\r\n","// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n'use strict';\n\nvar ERR_STREAM_PREMATURE_CLOSE = require('../../../errors').codes.ERR_STREAM_PREMATURE_CLOSE;\n\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    callback.apply(this, args);\n  };\n}\n\nfunction noop() {}\n\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\n\nfunction eos(stream, opts, callback) {\n  if (typeof opts === 'function') return eos(stream, null, opts);\n  if (!opts) opts = {};\n  callback = once(callback || noop);\n  var readable = opts.readable || opts.readable !== false && stream.readable;\n  var writable = opts.writable || opts.writable !== false && stream.writable;\n\n  var onlegacyfinish = function onlegacyfinish() {\n    if (!stream.writable) onfinish();\n  };\n\n  var writableEnded = stream._writableState && stream._writableState.finished;\n\n  var onfinish = function onfinish() {\n    writable = false;\n    writableEnded = true;\n    if (!readable) callback.call(stream);\n  };\n\n  var readableEnded = stream._readableState && stream._readableState.endEmitted;\n\n  var onend = function onend() {\n    readable = false;\n    readableEnded = true;\n    if (!writable) callback.call(stream);\n  };\n\n  var onerror = function onerror(err) {\n    callback.call(stream, err);\n  };\n\n  var onclose = function onclose() {\n    var err;\n\n    if (readable && !readableEnded) {\n      if (!stream._readableState || !stream._readableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n\n    if (writable && !writableEnded) {\n      if (!stream._writableState || !stream._writableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n  };\n\n  var onrequest = function onrequest() {\n    stream.req.on('finish', onfinish);\n  };\n\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish);\n    stream.on('abort', onclose);\n    if (stream.req) onrequest();else stream.on('request', onrequest);\n  } else if (writable && !stream._writableState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish);\n    stream.on('close', onlegacyfinish);\n  }\n\n  stream.on('end', onend);\n  stream.on('finish', onfinish);\n  if (opts.error !== false) stream.on('error', onerror);\n  stream.on('close', onclose);\n  return function () {\n    stream.removeListener('complete', onfinish);\n    stream.removeListener('abort', onclose);\n    stream.removeListener('request', onrequest);\n    if (stream.req) stream.req.removeListener('finish', onfinish);\n    stream.removeListener('end', onlegacyfinish);\n    stream.removeListener('close', onlegacyfinish);\n    stream.removeListener('finish', onfinish);\n    stream.removeListener('end', onend);\n    stream.removeListener('error', onerror);\n    stream.removeListener('close', onclose);\n  };\n}\n\nmodule.exports = eos;","// convert a decimal number or gerber/drill coordinate into an svg coordinate\r\n// coordinate is 1000x the gerber unit\r\n'use strict'\r\n\r\nvar numIsFinite = require('lodash.isfinite')\r\nvar padLeft = require('lodash.padstart')\r\nvar padRight = require('lodash.padend')\r\n\r\n// function takes in the number string to be converted and the format object\r\nvar normalizeCoord = function(number, format) {\r\n  // make sure we're dealing with a string\r\n  if (number == null) {\r\n    return NaN\r\n  }\r\n\r\n  var numberString = '' + number\r\n\r\n  // pull out the sign and get the before and after segments ready\r\n  var sign = '+'\r\n  if (numberString[0] === '-' || numberString[0] === '+') {\r\n    sign = numberString[0]\r\n    numberString = numberString.slice(1)\r\n  }\r\n\r\n  // check if the number has a decimal point or has been explicitely flagged\r\n  // if it does, just split by the decimal point to get leading and trailing\r\n  var hasDecimal = numberString.indexOf('.') !== -1\r\n  if (hasDecimal || format == null || format.zero == null) {\r\n    return Number(sign + numberString)\r\n  } else {\r\n    // otherwise we need to use the number format to split up the string\r\n    // make sure format is valid\r\n    if (format.places == null || format.places.length !== 2) {\r\n      return NaN\r\n    }\r\n\r\n    var leading = format.places[0]\r\n    var trailing = format.places[1]\r\n    if (!numIsFinite(leading) || !numIsFinite(trailing)) {\r\n      return NaN\r\n    }\r\n\r\n    // pad according to trailing or leading zero suppression\r\n    if (format.zero === 'T') {\r\n      numberString = padRight(numberString, leading + trailing, '0')\r\n    } else if (format.zero === 'L') {\r\n      numberString = padLeft(numberString, leading + trailing, '0')\r\n    } else {\r\n      return NaN\r\n    }\r\n  }\r\n\r\n  // finally, parse the numberString\r\n  var before = numberString.slice(0, leading)\r\n  var after = numberString.slice(leading, leading + trailing)\r\n  return Number(sign + before + '.' + after)\r\n}\r\n\r\nmodule.exports = normalizeCoord\r\n","// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n'use strict';\n\nvar ERR_STREAM_PREMATURE_CLOSE = require('../../../errors').codes.ERR_STREAM_PREMATURE_CLOSE;\n\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    callback.apply(this, args);\n  };\n}\n\nfunction noop() {}\n\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\n\nfunction eos(stream, opts, callback) {\n  if (typeof opts === 'function') return eos(stream, null, opts);\n  if (!opts) opts = {};\n  callback = once(callback || noop);\n  var readable = opts.readable || opts.readable !== false && stream.readable;\n  var writable = opts.writable || opts.writable !== false && stream.writable;\n\n  var onlegacyfinish = function onlegacyfinish() {\n    if (!stream.writable) onfinish();\n  };\n\n  var writableEnded = stream._writableState && stream._writableState.finished;\n\n  var onfinish = function onfinish() {\n    writable = false;\n    writableEnded = true;\n    if (!readable) callback.call(stream);\n  };\n\n  var readableEnded = stream._readableState && stream._readableState.endEmitted;\n\n  var onend = function onend() {\n    readable = false;\n    readableEnded = true;\n    if (!writable) callback.call(stream);\n  };\n\n  var onerror = function onerror(err) {\n    callback.call(stream, err);\n  };\n\n  var onclose = function onclose() {\n    var err;\n\n    if (readable && !readableEnded) {\n      if (!stream._readableState || !stream._readableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n\n    if (writable && !writableEnded) {\n      if (!stream._writableState || !stream._writableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n  };\n\n  var onrequest = function onrequest() {\n    stream.req.on('finish', onfinish);\n  };\n\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish);\n    stream.on('abort', onclose);\n    if (stream.req) onrequest();else stream.on('request', onrequest);\n  } else if (writable && !stream._writableState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish);\n    stream.on('close', onlegacyfinish);\n  }\n\n  stream.on('end', onend);\n  stream.on('finish', onfinish);\n  if (opts.error !== false) stream.on('error', onerror);\n  stream.on('close', onclose);\n  return function () {\n    stream.removeListener('complete', onfinish);\n    stream.removeListener('abort', onclose);\n    stream.removeListener('request', onrequest);\n    if (stream.req) stream.req.removeListener('finish', onfinish);\n    stream.removeListener('end', onlegacyfinish);\n    stream.removeListener('close', onlegacyfinish);\n    stream.removeListener('finish', onfinish);\n    stream.removeListener('end', onend);\n    stream.removeListener('error', onerror);\n    stream.removeListener('close', onclose);\n  };\n}\n\nmodule.exports = eos;","// bounding box utilities and helpers\r\n// bouding boxes are arrays of the format: [xMin, yMin, xMax, yMax]\r\n'use strict'\r\n\r\n// returns a new bounding box that is infinitely small and centered on nothing\r\nvar newBox = function() {\r\n  return [Infinity, Infinity, -Infinity, -Infinity]\r\n}\r\n\r\n// adds the two bounding boxes and returns a new one\r\nvar add = function(box, target) {\r\n  return [\r\n    Math.min(box[0], target[0]),\r\n    Math.min(box[1], target[1]),\r\n    Math.max(box[2], target[2]),\r\n    Math.max(box[3], target[3]),\r\n  ]\r\n}\r\n\r\n// adds a point to a bounding box\r\nvar addPoint = function(box, point) {\r\n  return [\r\n    Math.min(box[0], point[0]),\r\n    Math.min(box[1], point[1]),\r\n    Math.max(box[2], point[0]),\r\n    Math.max(box[3], point[1]),\r\n  ]\r\n}\r\n\r\n// add a circle at (cx, cy) with radius r to box\r\nvar addCircle = function(box, r, cx, cy) {\r\n  return [\r\n    Math.min(box[0], cx - r),\r\n    Math.min(box[1], cy - r),\r\n    Math.max(box[2], cx + r),\r\n    Math.max(box[3], cy + r),\r\n  ]\r\n}\r\n\r\n// translate a box by a delta [x, y]\r\nvar translate = function(box, delta) {\r\n  var dx = delta[0]\r\n  var dy = delta[1]\r\n\r\n  return [box[0] + dx, box[1] + dy, box[2] + dx, box[3] + dy]\r\n}\r\n\r\n// get the overall box if box is repeated at [x, y]\r\nvar repeat = function(box, repeat) {\r\n  return add(box, translate(box, repeat))\r\n}\r\n\r\nmodule.exports = {\r\n  new: newBox,\r\n  add: add,\r\n  addPoint: addPoint,\r\n  addCircle: addCircle,\r\n  translate: translate,\r\n  repeat: repeat,\r\n}\r\n","// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n'use strict';\n\nvar ERR_STREAM_PREMATURE_CLOSE = require('../../../errors').codes.ERR_STREAM_PREMATURE_CLOSE;\n\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    callback.apply(this, args);\n  };\n}\n\nfunction noop() {}\n\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\n\nfunction eos(stream, opts, callback) {\n  if (typeof opts === 'function') return eos(stream, null, opts);\n  if (!opts) opts = {};\n  callback = once(callback || noop);\n  var readable = opts.readable || opts.readable !== false && stream.readable;\n  var writable = opts.writable || opts.writable !== false && stream.writable;\n\n  var onlegacyfinish = function onlegacyfinish() {\n    if (!stream.writable) onfinish();\n  };\n\n  var writableEnded = stream._writableState && stream._writableState.finished;\n\n  var onfinish = function onfinish() {\n    writable = false;\n    writableEnded = true;\n    if (!readable) callback.call(stream);\n  };\n\n  var readableEnded = stream._readableState && stream._readableState.endEmitted;\n\n  var onend = function onend() {\n    readable = false;\n    readableEnded = true;\n    if (!writable) callback.call(stream);\n  };\n\n  var onerror = function onerror(err) {\n    callback.call(stream, err);\n  };\n\n  var onclose = function onclose() {\n    var err;\n\n    if (readable && !readableEnded) {\n      if (!stream._readableState || !stream._readableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n\n    if (writable && !writableEnded) {\n      if (!stream._writableState || !stream._writableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n  };\n\n  var onrequest = function onrequest() {\n    stream.req.on('finish', onfinish);\n  };\n\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish);\n    stream.on('abort', onclose);\n    if (stream.req) onrequest();else stream.on('request', onrequest);\n  } else if (writable && !stream._writableState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish);\n    stream.on('close', onlegacyfinish);\n  }\n\n  stream.on('end', onend);\n  stream.on('finish', onfinish);\n  if (opts.error !== false) stream.on('error', onerror);\n  stream.on('close', onclose);\n  return function () {\n    stream.removeListener('complete', onfinish);\n    stream.removeListener('abort', onclose);\n    stream.removeListener('request', onrequest);\n    if (stream.req) stream.req.removeListener('finish', onfinish);\n    stream.removeListener('end', onlegacyfinish);\n    stream.removeListener('close', onlegacyfinish);\n    stream.removeListener('finish', onfinish);\n    stream.removeListener('end', onend);\n    stream.removeListener('error', onerror);\n    stream.removeListener('close', onclose);\n  };\n}\n\nmodule.exports = eos;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict';\n\nmodule.exports = Readable;\n/*<replacement>*/\n\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n/*<replacement>*/\n\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function EElistenerCount(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\n\n\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n\nvar Buffer = require('buffer').Buffer;\n\nvar OurUint8Array = global.Uint8Array || function () {};\n\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\n\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n/*<replacement>*/\n\n\nvar debugUtil = require('util');\n\nvar debug;\n\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function debug() {};\n}\n/*</replacement>*/\n\n\nvar BufferList = require('./internal/streams/buffer_list');\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nvar _require = require('./internal/streams/state'),\n    getHighWaterMark = _require.getHighWaterMark;\n\nvar _require$codes = require('../errors').codes,\n    ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n    ERR_STREAM_PUSH_AFTER_EOF = _require$codes.ERR_STREAM_PUSH_AFTER_EOF,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_STREAM_UNSHIFT_AFTER_END_EVENT = _require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;\n\nvar _require2 = require('../experimentalWarning'),\n    emitExperimentalWarning = _require2.emitExperimentalWarning; // Lazy loaded to improve the startup performance.\n\n\nvar StringDecoder;\nvar createReadableStreamAsyncIterator;\n\nrequire('inherits')(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn); // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (Array.isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {}; // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex; // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode; // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n\n  this.highWaterMark = getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex); // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false; // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n\n  this.sync = true; // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n  this.paused = true; // Should close be emitted on destroy. Defaults to true.\n\n  this.emitClose = options.emitClose !== false; // has it been destroyed\n\n  this.destroyed = false; // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n\n  this.defaultEncoding = options.defaultEncoding || 'utf8'; // the number of writers that are awaiting a drain event in .pipe()s\n\n  this.awaitDrain = 0; // if true, a maybeReadMore has been scheduled\n\n  this.readingMore = false;\n  this.decoder = null;\n  this.encoding = null;\n\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n  if (!(this instanceof Readable)) return new Readable(options); // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5\n\n  var isDuplex = this instanceof Duplex;\n  this._readableState = new ReadableState(options, this, isDuplex); // legacy\n\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined) {\n      return false;\n    }\n\n    return this._readableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._readableState.destroyed = value;\n  }\n});\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\n\nReadable.prototype._destroy = function (err, cb) {\n  cb(err);\n}; // Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\n\n\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n}; // Unshift should *always* be something directly out of read()\n\n\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  debug('readableAddChunk', chunk);\n  var state = stream._readableState;\n\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new ERR_STREAM_PUSH_AFTER_EOF());\n      } else if (state.destroyed) {\n        return false;\n      } else {\n        state.reading = false;\n\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n      maybeReadMore(stream, state);\n    }\n  } // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n\n\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    state.awaitDrain = 0;\n    stream.emit('data', chunk);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n    if (state.needReadable) emitReadable(stream);\n  }\n\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk);\n  }\n\n  return er;\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n}; // backwards compatibility.\n\n\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc); // if setEncoding(null), decoder.encoding equals utf8\n\n  this._readableState.encoding = this._readableState.decoder.encoding;\n  return this;\n}; // Don't raise the hwm > 8MB\n\n\nvar MAX_HWM = 0x800000;\n\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n\n  return n;\n} // This function is designed to be inlinable, so please take care when making\n// changes to the function body.\n\n\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  } // If we're asking for more than the current hwm, then raise the hwm.\n\n\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n; // Don't have enough\n\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n\n  return state.length;\n} // you can override either this method, or the async _read(n) below.\n\n\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n  if (n !== 0) state.emittedReadable = false; // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n\n  if (n === 0 && state.needReadable && ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state); // if we've ended, and we're now clear, then finish it up.\n\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  } // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n  // if we need a readable event, then we need to do some reading.\n\n\n  var doRead = state.needReadable;\n  debug('need readable', doRead); // if we currently have less than the highWaterMark, then also read some\n\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  } // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n\n\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true; // if the length is currently zero, then we *need* a readable event.\n\n    if (state.length === 0) state.needReadable = true; // call internal read method\n\n    this._read(state.highWaterMark);\n\n    state.sync = false; // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n    state.awaitDrain = 0;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true; // If we tried to read() past the EOF, then emit end on the next tick.\n\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n\n  state.ended = true;\n\n  if (state.sync) {\n    // if we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call\n    emitReadable(stream);\n  } else {\n    // emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false;\n\n    if (!state.emittedReadable) {\n      state.emittedReadable = true;\n      emitReadable_(stream);\n    }\n  }\n} // Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\n\n\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    process.nextTick(emitReadable_, stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  var state = stream._readableState;\n  debug('emitReadable_', state.destroyed, state.length, state.ended);\n\n  if (!state.destroyed && (state.length || state.ended)) {\n    stream.emit('readable');\n  } // The stream needs another readable event if\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n\n\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark;\n  flow(stream);\n} // at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\n\n\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (!state.reading && !state.ended && (state.length < state.highWaterMark || state.flowing && state.length === 0)) {\n    var len = state.length;\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length) // didn't get any data, stop spinning.\n      break;\n  }\n\n  state.readingMore = false;\n} // abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\n\n\nReadable.prototype._read = function (n) {\n  this.emit('error', new ERR_METHOD_NOT_IMPLEMENTED('_read()'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) process.nextTick(endFn);else src.once('end', endFn);\n  dest.on('unpipe', onunpipe);\n\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  } // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n\n\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n  var cleanedUp = false;\n\n  function cleanup() {\n    debug('cleanup'); // cleanup event handlers once the pipe is broken\n\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n    cleanedUp = true; // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  src.on('data', ondata);\n\n  function ondata(chunk) {\n    debug('ondata');\n    var ret = dest.write(chunk);\n    debug('dest.write', ret);\n\n    if (ret === false) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', state.awaitDrain);\n        state.awaitDrain++;\n      }\n\n      src.pause();\n    }\n  } // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n\n\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  } // Make sure our error handler is attached before userland ones.\n\n\n  prependListener(dest, 'error', onerror); // Both close and finish should trigger unpipe, but only once.\n\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n\n  dest.once('close', onclose);\n\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  } // tell the dest that it's being piped to\n\n\n  dest.emit('pipe', src); // start the flow if it hasn't been started already.\n\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function pipeOnDrainFunctionResult() {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = {\n    hasUnpiped: false\n  }; // if we're not piping anywhere, then do nothing.\n\n  if (state.pipesCount === 0) return this; // just one destination.  most common case.\n\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n    if (!dest) dest = state.pipes; // got a match.\n\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  } // slow case. multiple pipe destinations.\n\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, {\n        hasUnpiped: false\n      });\n    }\n\n    return this;\n  } // try to find the right one.\n\n\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n  dest.emit('unpipe', this, unpipeInfo);\n  return this;\n}; // set up data events if they are asked for\n// Ensure readable listeners eventually get something\n\n\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n  var state = this._readableState;\n\n  if (ev === 'data') {\n    // update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0; // Try start flowing on next tick if stream isn't explicitly paused\n\n    if (state.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.flowing = false;\n      state.emittedReadable = false;\n      debug('on readable', state.length, state.reading);\n\n      if (state.length) {\n        emitReadable(this);\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this);\n      }\n    }\n  }\n\n  return res;\n};\n\nReadable.prototype.addListener = Readable.prototype.on;\n\nReadable.prototype.removeListener = function (ev, fn) {\n  var res = Stream.prototype.removeListener.call(this, ev, fn);\n\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n\n  return res;\n};\n\nReadable.prototype.removeAllListeners = function (ev) {\n  var res = Stream.prototype.removeAllListeners.apply(this, arguments);\n\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n\n  return res;\n};\n\nfunction updateReadableListening(self) {\n  var state = self._readableState;\n  state.readableListening = self.listenerCount('readable') > 0;\n\n  if (state.resumeScheduled && !state.paused) {\n    // flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true; // crude way to check if we should resume\n  } else if (self.listenerCount('data') > 0) {\n    self.resume();\n  }\n}\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n} // pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\n\n\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n\n  if (!state.flowing) {\n    debug('resume'); // we flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume()\n\n    state.flowing = !state.readableListening;\n    resume(this, state);\n  }\n\n  state.paused = false;\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    process.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  debug('resume', state.reading);\n\n  if (!state.reading) {\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n\n  if (this._readableState.flowing !== false) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n\n  this._readableState.paused = true;\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n\n  while (state.flowing && stream.read() !== null) {\n    ;\n  }\n} // wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\n\n\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n  stream.on('end', function () {\n    debug('wrapped end');\n\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk); // don't skip over falsy values in objectMode\n\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  }); // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function methodWrap(method) {\n        return function methodWrapReturnFunction() {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  } // proxy certain important events.\n\n\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  } // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n\n\n  this._read = function (n) {\n    debug('wrapped _read', n);\n\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nif (typeof Symbol === 'function') {\n  Readable.prototype[Symbol.asyncIterator] = function () {\n    emitExperimentalWarning('Readable[Symbol.asyncIterator]');\n\n    if (createReadableStreamAsyncIterator === undefined) {\n      createReadableStreamAsyncIterator = require('./internal/streams/async_iterator');\n    }\n\n    return createReadableStreamAsyncIterator(this);\n  };\n}\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.highWaterMark;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState && this._readableState.buffer;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableFlowing', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.flowing;\n  },\n  set: function set(state) {\n    if (this._readableState) {\n      this._readableState.flowing = state;\n    }\n  }\n}); // exposed for testing purposes only.\n\nReadable._fromList = fromList;\nObject.defineProperty(Readable.prototype, 'readableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.length;\n  }\n}); // Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\n\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.first();else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = state.buffer.consume(n, state.decoder);\n  }\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n  debug('endReadable', state.endEmitted);\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    process.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length); // Check that we didn't get one last unshift.\n\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n\n  return -1;\n}","module.exports = require('events').EventEmitter;\n","'use strict'; // undocumented cb() API, needed for core, not for public API\n\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      process.nextTick(emitErrorNT, this, err);\n    }\n\n    return this;\n  } // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  } // if this is a duplex stream mark the writable part as destroyed as well\n\n\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      process.nextTick(emitErrorAndCloseNT, _this, err);\n\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      process.nextTick(emitCloseNT, _this);\n      cb(err);\n    } else {\n      process.nextTick(emitCloseNT, _this);\n    }\n  });\n\n  return this;\n}\n\nfunction emitErrorAndCloseNT(self, err) {\n  emitErrorNT(self, err);\n  emitCloseNT(self);\n}\n\nfunction emitCloseNT(self) {\n  if (self._writableState && !self._writableState.emitClose) return;\n  if (self._readableState && !self._readableState.emitClose) return;\n  self.emit('close');\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finalCalled = false;\n    this._writableState.prefinished = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};","'use strict';\n\nvar ERR_INVALID_OPT_VALUE = require('../../../errors').codes.ERR_INVALID_OPT_VALUE;\n\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null;\n}\n\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  var hwm = highWaterMarkFrom(options, isDuplex, duplexKey);\n\n  if (hwm != null) {\n    if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {\n      var name = isDuplex ? duplexKey : 'highWaterMark';\n      throw new ERR_INVALID_OPT_VALUE(name, hwm);\n    }\n\n    return Math.floor(hwm);\n  } // Default value\n\n\n  return state.objectMode ? 16 : 16 * 1024;\n}\n\nmodule.exports = {\n  getHighWaterMark: getHighWaterMark\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n'use strict';\n\nmodule.exports = Writable;\n/* <replacement> */\n\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n} // It seems a linked list but it is not\n// there will be only 2 of these for each stream\n\n\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\n\n\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n/*<replacement>*/\n\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n\nvar Buffer = require('buffer').Buffer;\n\nvar OurUint8Array = global.Uint8Array || function () {};\n\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\n\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nvar _require = require('./internal/streams/state'),\n    getHighWaterMark = _require.getHighWaterMark;\n\nvar _require$codes = require('../errors').codes,\n    ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n    ERR_STREAM_CANNOT_PIPE = _require$codes.ERR_STREAM_CANNOT_PIPE,\n    ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED,\n    ERR_STREAM_NULL_VALUES = _require$codes.ERR_STREAM_NULL_VALUES,\n    ERR_STREAM_WRITE_AFTER_END = _require$codes.ERR_STREAM_WRITE_AFTER_END,\n    ERR_UNKNOWN_ENCODING = _require$codes.ERR_UNKNOWN_ENCODING;\n\nrequire('inherits')(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {}; // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex; // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode; // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n\n  this.highWaterMark = getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex); // if _final has been called\n\n  this.finalCalled = false; // drain event flag.\n\n  this.needDrain = false; // at the start of calling end()\n\n  this.ending = false; // when end() has been called, and returned\n\n  this.ended = false; // when 'finish' is emitted\n\n  this.finished = false; // has it been destroyed\n\n  this.destroyed = false; // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode; // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n\n  this.defaultEncoding = options.defaultEncoding || 'utf8'; // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n\n  this.length = 0; // a flag to see when we're in the middle of a write.\n\n  this.writing = false; // when true all writes will be buffered until .uncork() call\n\n  this.corked = 0; // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n\n  this.sync = true; // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n\n  this.bufferProcessing = false; // the callback that's passed to _write(chunk,cb)\n\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  }; // the callback that the user supplies to write(chunk,encoding,cb)\n\n\n  this.writecb = null; // the amount that is being written when _write is called.\n\n  this.writelen = 0;\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null; // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n\n  this.pendingcb = 0; // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n\n  this.prefinished = false; // True if the error was already emitted and should not be thrown again\n\n  this.errorEmitted = false; // Should close be emitted on destroy. Defaults to true.\n\n  this.emitClose = options.emitClose !== false; // count buffered requests\n\n  this.bufferedRequestCount = 0; // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function writableStateBufferGetter() {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})(); // Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\n\n\nvar realHasInstance;\n\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function value(object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function realHasInstance(object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex'); // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5\n\n  var isDuplex = this instanceof Duplex;\n  if (!isDuplex && !realHasInstance.call(Writable, this)) return new Writable(options);\n  this._writableState = new WritableState(options, this, isDuplex); // legacy.\n\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n    if (typeof options.writev === 'function') this._writev = options.writev;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n} // Otherwise people can pipe Writable streams, which is just wrong.\n\n\nWritable.prototype.pipe = function () {\n  this.emit('error', new ERR_STREAM_CANNOT_PIPE());\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new ERR_STREAM_WRITE_AFTER_END(); // TODO: defer error events consistently everywhere, not just the cb\n\n  stream.emit('error', er);\n  process.nextTick(cb, er);\n} // Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\n\n\nfunction validChunk(stream, state, chunk, cb) {\n  var er;\n\n  if (chunk === null) {\n    er = new ERR_STREAM_NULL_VALUES();\n  } else if (typeof chunk !== 'string' && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer'], chunk);\n  }\n\n  if (er) {\n    stream.emit('error', er);\n    process.nextTick(cb, er);\n    return false;\n  }\n\n  return true;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n  if (typeof cb !== 'function') cb = nop;\n  if (state.ending) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  this._writableState.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n    if (!state.writing && !state.corked && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new ERR_UNKNOWN_ENCODING(encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nObject.defineProperty(Writable.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n}); // if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\n\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n\n  var len = state.objectMode ? 1 : chunk.length;\n  state.length += len;\n  var ret = state.length < state.highWaterMark; // we must ensure that previous needDrain will not be reset to false.\n\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'));else if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    process.nextTick(cb, er); // this can emit finish, and it will always happen\n    // after error\n\n    process.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er); // this can emit finish, but finish must\n    // always follow error\n\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n  if (typeof cb !== 'function') throw new ERR_MULTIPLE_CALLBACK();\n  onwriteStateUpdate(state);\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state) || stream.destroyed;\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      process.nextTick(afterWrite, stream, state, finished, cb);\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n} // Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\n\n\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n} // if there's something in the buffer waiting, then process it\n\n\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n    var count = 0;\n    var allBuffers = true;\n\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n\n    buffer.allBuffers = allBuffers;\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish); // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--; // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_write()'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding); // .end() fully uncorks\n\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  } // ignore unnecessary end() calls.\n\n\n  if (!state.ending) endWritable(this, state, cb);\n  return this;\n};\n\nObject.defineProperty(Writable.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\n\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n\n    if (err) {\n      stream.emit('error', err);\n    }\n\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\n\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.pendingcb++;\n      state.finalCalled = true;\n      process.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n\n  if (need) {\n    prefinish(stream, state);\n\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n\n  if (cb) {\n    if (state.finished) process.nextTick(cb);else stream.once('finish', cb);\n  }\n\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  } // reuse the free corkReq.\n\n\n  state.corkedRequestsFree.next = corkReq;\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._writableState === undefined) {\n      return false;\n    }\n\n    return this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._writableState.destroyed = value;\n  }\n});\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\n\nWritable.prototype._destroy = function (err, cb) {\n  cb(err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n'use strict';\n\nmodule.exports = Transform;\n\nvar _require$codes = require('../errors').codes,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n    ERR_TRANSFORM_ALREADY_TRANSFORMING = _require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,\n    ERR_TRANSFORM_WITH_LENGTH_0 = _require$codes.ERR_TRANSFORM_WITH_LENGTH_0;\n\nvar Duplex = require('./_stream_duplex');\n\nrequire('inherits')(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n  var cb = ts.writecb;\n\n  if (cb === null) {\n    return this.emit('error', new ERR_MULTIPLE_CALLBACK());\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n  cb(er);\n  var rs = this._readableState;\n  rs.reading = false;\n\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n  Duplex.call(this, options);\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  }; // start out asking for a readable event once data is transformed.\n\n  this._readableState.needReadable = true; // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  } // When the writable side finishes, then flush out anything remaining.\n\n\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function' && !this._readableState.destroyed) {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n}; // This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\n\n\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_transform()'));\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n}; // Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\n\n\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && !ts.transforming) {\n    ts.transforming = true;\n\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data); // TODO(BridgeAR): Write a test for these two error cases\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n\n  if (stream._writableState.length) throw new ERR_TRANSFORM_WITH_LENGTH_0();\n  if (stream._transformState.transforming) throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();\n  return stream.push(null);\n}","// factories to generate all possible parsed by a gerber command\r\n'use strict'\r\n\r\nvar done = function(line) {\r\n  return {type: 'done', line: line || -1}\r\n}\r\n\r\nvar set = function(property, value, line) {\r\n  return {type: 'set', line: line || -1, prop: property, value: value}\r\n}\r\n\r\nvar level = function(level, value, line) {\r\n  return {type: 'level', line: line || -1, level: level, value: value}\r\n}\r\n\r\nvar tool = function(code, tool, line) {\r\n  return {type: 'tool', line: line || -1, code: code, tool: tool}\r\n}\r\n\r\nvar op = function(operation, location, line) {\r\n  return {type: 'op', line: line || -1, op: operation, coord: location}\r\n}\r\n\r\nvar macro = function(name, blocks, line) {\r\n  return {type: 'macro', line: line || -1, name: name, blocks: blocks}\r\n}\r\n\r\nvar commandMap = {\r\n  set: set,\r\n  done: done,\r\n  level: level,\r\n  tool: tool,\r\n  op: op,\r\n  macro: macro,\r\n}\r\nmodule.exports = commandMap\r\n","// cordinate parser function\r\n// takes in a string with X_____Y_____I_____J_____ and a format object\r\n// returns an object of {x: number, y: number, etc} for coordinates it finds\r\n'use strict'\r\n\r\n// convert to normalized number\r\nvar normalize = require('./normalize-coord')\r\n\r\nvar RE_TRAILING = /[XY]0\\d+/\r\nvar RE_LEADING = /[XY]\\d+0(?=\\D|$)/\r\nvar MATCH = [\r\n  {coord: 'x', test: /X([+-]?[\\d.]+)/},\r\n  {coord: 'y', test: /Y([+-]?[\\d.]+)/},\r\n  {coord: 'i', test: /I([+-]?[\\d.]+)/},\r\n  {coord: 'j', test: /J([+-]?[\\d.]+)/},\r\n  {coord: 'a', test: /A([\\d.]+)/},\r\n]\r\n\r\nvar parse = function(coord, format) {\r\n  if (coord == null) {\r\n    return {}\r\n  }\r\n\r\n  if (format.zero == null || format.places == null) {\r\n    throw new Error('cannot parse coordinate with format undefined')\r\n  }\r\n\r\n  // pull out the x, y, i, and j\r\n  var parsed = MATCH.reduce(function(result, matcher) {\r\n    var coordMatch = coord.match(matcher.test)\r\n\r\n    if (coordMatch) {\r\n      result[matcher.coord] = normalize(coordMatch[1], format)\r\n    }\r\n\r\n    return result\r\n  }, {})\r\n\r\n  return parsed\r\n}\r\n\r\nvar detectZero = function(coord) {\r\n  if (RE_LEADING.test(coord)) {\r\n    return 'L'\r\n  }\r\n\r\n  if (RE_TRAILING.test(coord)) {\r\n    return 'T'\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nmodule.exports = {parse: parse, detectZero: detectZero}\r\n","// drill parser drill and route modes\r\n'use strict'\r\n\r\nmodule.exports = {\r\n  DRILL: '5',\r\n  MOVE: '0',\r\n  LINEAR: '1',\r\n  CW_ARC: '2',\r\n  CCW_ARC: '3',\r\n}\r\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict';\n\nmodule.exports = Readable;\n/*<replacement>*/\n\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n/*<replacement>*/\n\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function EElistenerCount(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\n\n\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n\nvar Buffer = require('buffer').Buffer;\n\nvar OurUint8Array = global.Uint8Array || function () {};\n\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\n\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n/*<replacement>*/\n\n\nvar debugUtil = require('util');\n\nvar debug;\n\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function debug() {};\n}\n/*</replacement>*/\n\n\nvar BufferList = require('./internal/streams/buffer_list');\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nvar _require = require('./internal/streams/state'),\n    getHighWaterMark = _require.getHighWaterMark;\n\nvar _require$codes = require('../errors').codes,\n    ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n    ERR_STREAM_PUSH_AFTER_EOF = _require$codes.ERR_STREAM_PUSH_AFTER_EOF,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_STREAM_UNSHIFT_AFTER_END_EVENT = _require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;\n\nvar _require2 = require('../experimentalWarning'),\n    emitExperimentalWarning = _require2.emitExperimentalWarning; // Lazy loaded to improve the startup performance.\n\n\nvar StringDecoder;\nvar createReadableStreamAsyncIterator;\n\nrequire('inherits')(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn); // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (Array.isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {}; // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex; // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode; // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n\n  this.highWaterMark = getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex); // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false; // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n\n  this.sync = true; // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n  this.paused = true; // Should close be emitted on destroy. Defaults to true.\n\n  this.emitClose = options.emitClose !== false; // has it been destroyed\n\n  this.destroyed = false; // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n\n  this.defaultEncoding = options.defaultEncoding || 'utf8'; // the number of writers that are awaiting a drain event in .pipe()s\n\n  this.awaitDrain = 0; // if true, a maybeReadMore has been scheduled\n\n  this.readingMore = false;\n  this.decoder = null;\n  this.encoding = null;\n\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n  if (!(this instanceof Readable)) return new Readable(options); // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5\n\n  var isDuplex = this instanceof Duplex;\n  this._readableState = new ReadableState(options, this, isDuplex); // legacy\n\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined) {\n      return false;\n    }\n\n    return this._readableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._readableState.destroyed = value;\n  }\n});\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\n\nReadable.prototype._destroy = function (err, cb) {\n  cb(err);\n}; // Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\n\n\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n}; // Unshift should *always* be something directly out of read()\n\n\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  debug('readableAddChunk', chunk);\n  var state = stream._readableState;\n\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new ERR_STREAM_PUSH_AFTER_EOF());\n      } else if (state.destroyed) {\n        return false;\n      } else {\n        state.reading = false;\n\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n      maybeReadMore(stream, state);\n    }\n  } // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n\n\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    state.awaitDrain = 0;\n    stream.emit('data', chunk);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n    if (state.needReadable) emitReadable(stream);\n  }\n\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk);\n  }\n\n  return er;\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n}; // backwards compatibility.\n\n\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc); // if setEncoding(null), decoder.encoding equals utf8\n\n  this._readableState.encoding = this._readableState.decoder.encoding;\n  return this;\n}; // Don't raise the hwm > 8MB\n\n\nvar MAX_HWM = 0x800000;\n\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n\n  return n;\n} // This function is designed to be inlinable, so please take care when making\n// changes to the function body.\n\n\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  } // If we're asking for more than the current hwm, then raise the hwm.\n\n\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n; // Don't have enough\n\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n\n  return state.length;\n} // you can override either this method, or the async _read(n) below.\n\n\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n  if (n !== 0) state.emittedReadable = false; // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n\n  if (n === 0 && state.needReadable && ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state); // if we've ended, and we're now clear, then finish it up.\n\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  } // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n  // if we need a readable event, then we need to do some reading.\n\n\n  var doRead = state.needReadable;\n  debug('need readable', doRead); // if we currently have less than the highWaterMark, then also read some\n\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  } // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n\n\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true; // if the length is currently zero, then we *need* a readable event.\n\n    if (state.length === 0) state.needReadable = true; // call internal read method\n\n    this._read(state.highWaterMark);\n\n    state.sync = false; // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n    state.awaitDrain = 0;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true; // If we tried to read() past the EOF, then emit end on the next tick.\n\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n\n  state.ended = true;\n\n  if (state.sync) {\n    // if we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call\n    emitReadable(stream);\n  } else {\n    // emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false;\n\n    if (!state.emittedReadable) {\n      state.emittedReadable = true;\n      emitReadable_(stream);\n    }\n  }\n} // Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\n\n\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    process.nextTick(emitReadable_, stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  var state = stream._readableState;\n  debug('emitReadable_', state.destroyed, state.length, state.ended);\n\n  if (!state.destroyed && (state.length || state.ended)) {\n    stream.emit('readable');\n  } // The stream needs another readable event if\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n\n\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark;\n  flow(stream);\n} // at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\n\n\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (!state.reading && !state.ended && (state.length < state.highWaterMark || state.flowing && state.length === 0)) {\n    var len = state.length;\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length) // didn't get any data, stop spinning.\n      break;\n  }\n\n  state.readingMore = false;\n} // abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\n\n\nReadable.prototype._read = function (n) {\n  this.emit('error', new ERR_METHOD_NOT_IMPLEMENTED('_read()'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) process.nextTick(endFn);else src.once('end', endFn);\n  dest.on('unpipe', onunpipe);\n\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  } // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n\n\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n  var cleanedUp = false;\n\n  function cleanup() {\n    debug('cleanup'); // cleanup event handlers once the pipe is broken\n\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n    cleanedUp = true; // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  src.on('data', ondata);\n\n  function ondata(chunk) {\n    debug('ondata');\n    var ret = dest.write(chunk);\n    debug('dest.write', ret);\n\n    if (ret === false) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', state.awaitDrain);\n        state.awaitDrain++;\n      }\n\n      src.pause();\n    }\n  } // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n\n\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  } // Make sure our error handler is attached before userland ones.\n\n\n  prependListener(dest, 'error', onerror); // Both close and finish should trigger unpipe, but only once.\n\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n\n  dest.once('close', onclose);\n\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  } // tell the dest that it's being piped to\n\n\n  dest.emit('pipe', src); // start the flow if it hasn't been started already.\n\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function pipeOnDrainFunctionResult() {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = {\n    hasUnpiped: false\n  }; // if we're not piping anywhere, then do nothing.\n\n  if (state.pipesCount === 0) return this; // just one destination.  most common case.\n\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n    if (!dest) dest = state.pipes; // got a match.\n\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  } // slow case. multiple pipe destinations.\n\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, {\n        hasUnpiped: false\n      });\n    }\n\n    return this;\n  } // try to find the right one.\n\n\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n  dest.emit('unpipe', this, unpipeInfo);\n  return this;\n}; // set up data events if they are asked for\n// Ensure readable listeners eventually get something\n\n\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n  var state = this._readableState;\n\n  if (ev === 'data') {\n    // update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0; // Try start flowing on next tick if stream isn't explicitly paused\n\n    if (state.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.flowing = false;\n      state.emittedReadable = false;\n      debug('on readable', state.length, state.reading);\n\n      if (state.length) {\n        emitReadable(this);\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this);\n      }\n    }\n  }\n\n  return res;\n};\n\nReadable.prototype.addListener = Readable.prototype.on;\n\nReadable.prototype.removeListener = function (ev, fn) {\n  var res = Stream.prototype.removeListener.call(this, ev, fn);\n\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n\n  return res;\n};\n\nReadable.prototype.removeAllListeners = function (ev) {\n  var res = Stream.prototype.removeAllListeners.apply(this, arguments);\n\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n\n  return res;\n};\n\nfunction updateReadableListening(self) {\n  var state = self._readableState;\n  state.readableListening = self.listenerCount('readable') > 0;\n\n  if (state.resumeScheduled && !state.paused) {\n    // flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true; // crude way to check if we should resume\n  } else if (self.listenerCount('data') > 0) {\n    self.resume();\n  }\n}\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n} // pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\n\n\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n\n  if (!state.flowing) {\n    debug('resume'); // we flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume()\n\n    state.flowing = !state.readableListening;\n    resume(this, state);\n  }\n\n  state.paused = false;\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    process.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  debug('resume', state.reading);\n\n  if (!state.reading) {\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n\n  if (this._readableState.flowing !== false) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n\n  this._readableState.paused = true;\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n\n  while (state.flowing && stream.read() !== null) {\n    ;\n  }\n} // wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\n\n\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n  stream.on('end', function () {\n    debug('wrapped end');\n\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk); // don't skip over falsy values in objectMode\n\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  }); // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function methodWrap(method) {\n        return function methodWrapReturnFunction() {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  } // proxy certain important events.\n\n\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  } // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n\n\n  this._read = function (n) {\n    debug('wrapped _read', n);\n\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nif (typeof Symbol === 'function') {\n  Readable.prototype[Symbol.asyncIterator] = function () {\n    emitExperimentalWarning('Readable[Symbol.asyncIterator]');\n\n    if (createReadableStreamAsyncIterator === undefined) {\n      createReadableStreamAsyncIterator = require('./internal/streams/async_iterator');\n    }\n\n    return createReadableStreamAsyncIterator(this);\n  };\n}\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.highWaterMark;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState && this._readableState.buffer;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableFlowing', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.flowing;\n  },\n  set: function set(state) {\n    if (this._readableState) {\n      this._readableState.flowing = state;\n    }\n  }\n}); // exposed for testing purposes only.\n\nReadable._fromList = fromList;\nObject.defineProperty(Readable.prototype, 'readableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.length;\n  }\n}); // Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\n\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.first();else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = state.buffer.consume(n, state.decoder);\n  }\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n  debug('endReadable', state.endEmitted);\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    process.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length); // Check that we didn't get one last unshift.\n\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n\n  return -1;\n}","module.exports = require('events').EventEmitter;\n","'use strict'; // undocumented cb() API, needed for core, not for public API\n\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      process.nextTick(emitErrorNT, this, err);\n    }\n\n    return this;\n  } // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  } // if this is a duplex stream mark the writable part as destroyed as well\n\n\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      process.nextTick(emitErrorAndCloseNT, _this, err);\n\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      process.nextTick(emitCloseNT, _this);\n      cb(err);\n    } else {\n      process.nextTick(emitCloseNT, _this);\n    }\n  });\n\n  return this;\n}\n\nfunction emitErrorAndCloseNT(self, err) {\n  emitErrorNT(self, err);\n  emitCloseNT(self);\n}\n\nfunction emitCloseNT(self) {\n  if (self._writableState && !self._writableState.emitClose) return;\n  if (self._readableState && !self._readableState.emitClose) return;\n  self.emit('close');\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finalCalled = false;\n    this._writableState.prefinished = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};","'use strict';\n\nvar ERR_INVALID_OPT_VALUE = require('../../../errors').codes.ERR_INVALID_OPT_VALUE;\n\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null;\n}\n\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  var hwm = highWaterMarkFrom(options, isDuplex, duplexKey);\n\n  if (hwm != null) {\n    if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {\n      var name = isDuplex ? duplexKey : 'highWaterMark';\n      throw new ERR_INVALID_OPT_VALUE(name, hwm);\n    }\n\n    return Math.floor(hwm);\n  } // Default value\n\n\n  return state.objectMode ? 16 : 16 * 1024;\n}\n\nmodule.exports = {\n  getHighWaterMark: getHighWaterMark\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n'use strict';\n\nmodule.exports = Writable;\n/* <replacement> */\n\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n} // It seems a linked list but it is not\n// there will be only 2 of these for each stream\n\n\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\n\n\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n/*<replacement>*/\n\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n\nvar Buffer = require('buffer').Buffer;\n\nvar OurUint8Array = global.Uint8Array || function () {};\n\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\n\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nvar _require = require('./internal/streams/state'),\n    getHighWaterMark = _require.getHighWaterMark;\n\nvar _require$codes = require('../errors').codes,\n    ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n    ERR_STREAM_CANNOT_PIPE = _require$codes.ERR_STREAM_CANNOT_PIPE,\n    ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED,\n    ERR_STREAM_NULL_VALUES = _require$codes.ERR_STREAM_NULL_VALUES,\n    ERR_STREAM_WRITE_AFTER_END = _require$codes.ERR_STREAM_WRITE_AFTER_END,\n    ERR_UNKNOWN_ENCODING = _require$codes.ERR_UNKNOWN_ENCODING;\n\nrequire('inherits')(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {}; // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex; // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode; // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n\n  this.highWaterMark = getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex); // if _final has been called\n\n  this.finalCalled = false; // drain event flag.\n\n  this.needDrain = false; // at the start of calling end()\n\n  this.ending = false; // when end() has been called, and returned\n\n  this.ended = false; // when 'finish' is emitted\n\n  this.finished = false; // has it been destroyed\n\n  this.destroyed = false; // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode; // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n\n  this.defaultEncoding = options.defaultEncoding || 'utf8'; // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n\n  this.length = 0; // a flag to see when we're in the middle of a write.\n\n  this.writing = false; // when true all writes will be buffered until .uncork() call\n\n  this.corked = 0; // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n\n  this.sync = true; // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n\n  this.bufferProcessing = false; // the callback that's passed to _write(chunk,cb)\n\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  }; // the callback that the user supplies to write(chunk,encoding,cb)\n\n\n  this.writecb = null; // the amount that is being written when _write is called.\n\n  this.writelen = 0;\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null; // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n\n  this.pendingcb = 0; // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n\n  this.prefinished = false; // True if the error was already emitted and should not be thrown again\n\n  this.errorEmitted = false; // Should close be emitted on destroy. Defaults to true.\n\n  this.emitClose = options.emitClose !== false; // count buffered requests\n\n  this.bufferedRequestCount = 0; // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function writableStateBufferGetter() {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})(); // Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\n\n\nvar realHasInstance;\n\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function value(object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function realHasInstance(object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex'); // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5\n\n  var isDuplex = this instanceof Duplex;\n  if (!isDuplex && !realHasInstance.call(Writable, this)) return new Writable(options);\n  this._writableState = new WritableState(options, this, isDuplex); // legacy.\n\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n    if (typeof options.writev === 'function') this._writev = options.writev;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n} // Otherwise people can pipe Writable streams, which is just wrong.\n\n\nWritable.prototype.pipe = function () {\n  this.emit('error', new ERR_STREAM_CANNOT_PIPE());\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new ERR_STREAM_WRITE_AFTER_END(); // TODO: defer error events consistently everywhere, not just the cb\n\n  stream.emit('error', er);\n  process.nextTick(cb, er);\n} // Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\n\n\nfunction validChunk(stream, state, chunk, cb) {\n  var er;\n\n  if (chunk === null) {\n    er = new ERR_STREAM_NULL_VALUES();\n  } else if (typeof chunk !== 'string' && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer'], chunk);\n  }\n\n  if (er) {\n    stream.emit('error', er);\n    process.nextTick(cb, er);\n    return false;\n  }\n\n  return true;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n  if (typeof cb !== 'function') cb = nop;\n  if (state.ending) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  this._writableState.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n    if (!state.writing && !state.corked && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new ERR_UNKNOWN_ENCODING(encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nObject.defineProperty(Writable.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n}); // if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\n\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n\n  var len = state.objectMode ? 1 : chunk.length;\n  state.length += len;\n  var ret = state.length < state.highWaterMark; // we must ensure that previous needDrain will not be reset to false.\n\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'));else if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    process.nextTick(cb, er); // this can emit finish, and it will always happen\n    // after error\n\n    process.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er); // this can emit finish, but finish must\n    // always follow error\n\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n  if (typeof cb !== 'function') throw new ERR_MULTIPLE_CALLBACK();\n  onwriteStateUpdate(state);\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state) || stream.destroyed;\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      process.nextTick(afterWrite, stream, state, finished, cb);\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n} // Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\n\n\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n} // if there's something in the buffer waiting, then process it\n\n\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n    var count = 0;\n    var allBuffers = true;\n\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n\n    buffer.allBuffers = allBuffers;\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish); // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--; // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_write()'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding); // .end() fully uncorks\n\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  } // ignore unnecessary end() calls.\n\n\n  if (!state.ending) endWritable(this, state, cb);\n  return this;\n};\n\nObject.defineProperty(Writable.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\n\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n\n    if (err) {\n      stream.emit('error', err);\n    }\n\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\n\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.pendingcb++;\n      state.finalCalled = true;\n      process.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n\n  if (need) {\n    prefinish(stream, state);\n\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n\n  if (cb) {\n    if (state.finished) process.nextTick(cb);else stream.once('finish', cb);\n  }\n\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  } // reuse the free corkReq.\n\n\n  state.corkedRequestsFree.next = corkReq;\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._writableState === undefined) {\n      return false;\n    }\n\n    return this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._writableState.destroyed = value;\n  }\n});\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\n\nWritable.prototype._destroy = function (err, cb) {\n  cb(err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n'use strict';\n\nmodule.exports = Transform;\n\nvar _require$codes = require('../errors').codes,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n    ERR_TRANSFORM_ALREADY_TRANSFORMING = _require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,\n    ERR_TRANSFORM_WITH_LENGTH_0 = _require$codes.ERR_TRANSFORM_WITH_LENGTH_0;\n\nvar Duplex = require('./_stream_duplex');\n\nrequire('inherits')(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n  var cb = ts.writecb;\n\n  if (cb === null) {\n    return this.emit('error', new ERR_MULTIPLE_CALLBACK());\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n  cb(er);\n  var rs = this._readableState;\n  rs.reading = false;\n\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n  Duplex.call(this, options);\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  }; // start out asking for a readable event once data is transformed.\n\n  this._readableState.needReadable = true; // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  } // When the writable side finishes, then flush out anything remaining.\n\n\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function' && !this._readableState.destroyed) {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n}; // This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\n\n\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_transform()'));\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n}; // Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\n\n\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && !ts.transforming) {\n    ts.transforming = true;\n\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data); // TODO(BridgeAR): Write a test for these two error cases\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n\n  if (stream._writableState.length) throw new ERR_TRANSFORM_WITH_LENGTH_0();\n  if (stream._transformState.transforming) throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();\n  return stream.push(null);\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict';\n\nmodule.exports = Readable;\n/*<replacement>*/\n\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n/*<replacement>*/\n\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function EElistenerCount(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\n\n\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n\nvar Buffer = require('buffer').Buffer;\n\nvar OurUint8Array = global.Uint8Array || function () {};\n\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\n\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n/*<replacement>*/\n\n\nvar debugUtil = require('util');\n\nvar debug;\n\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function debug() {};\n}\n/*</replacement>*/\n\n\nvar BufferList = require('./internal/streams/buffer_list');\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nvar _require = require('./internal/streams/state'),\n    getHighWaterMark = _require.getHighWaterMark;\n\nvar _require$codes = require('../errors').codes,\n    ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n    ERR_STREAM_PUSH_AFTER_EOF = _require$codes.ERR_STREAM_PUSH_AFTER_EOF,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_STREAM_UNSHIFT_AFTER_END_EVENT = _require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;\n\nvar _require2 = require('../experimentalWarning'),\n    emitExperimentalWarning = _require2.emitExperimentalWarning; // Lazy loaded to improve the startup performance.\n\n\nvar StringDecoder;\nvar createReadableStreamAsyncIterator;\n\nrequire('inherits')(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn); // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (Array.isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {}; // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex; // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode; // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n\n  this.highWaterMark = getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex); // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false; // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n\n  this.sync = true; // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n  this.paused = true; // Should close be emitted on destroy. Defaults to true.\n\n  this.emitClose = options.emitClose !== false; // has it been destroyed\n\n  this.destroyed = false; // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n\n  this.defaultEncoding = options.defaultEncoding || 'utf8'; // the number of writers that are awaiting a drain event in .pipe()s\n\n  this.awaitDrain = 0; // if true, a maybeReadMore has been scheduled\n\n  this.readingMore = false;\n  this.decoder = null;\n  this.encoding = null;\n\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n  if (!(this instanceof Readable)) return new Readable(options); // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5\n\n  var isDuplex = this instanceof Duplex;\n  this._readableState = new ReadableState(options, this, isDuplex); // legacy\n\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined) {\n      return false;\n    }\n\n    return this._readableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._readableState.destroyed = value;\n  }\n});\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\n\nReadable.prototype._destroy = function (err, cb) {\n  cb(err);\n}; // Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\n\n\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n}; // Unshift should *always* be something directly out of read()\n\n\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  debug('readableAddChunk', chunk);\n  var state = stream._readableState;\n\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new ERR_STREAM_PUSH_AFTER_EOF());\n      } else if (state.destroyed) {\n        return false;\n      } else {\n        state.reading = false;\n\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n      maybeReadMore(stream, state);\n    }\n  } // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n\n\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    state.awaitDrain = 0;\n    stream.emit('data', chunk);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n    if (state.needReadable) emitReadable(stream);\n  }\n\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk);\n  }\n\n  return er;\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n}; // backwards compatibility.\n\n\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc); // if setEncoding(null), decoder.encoding equals utf8\n\n  this._readableState.encoding = this._readableState.decoder.encoding;\n  return this;\n}; // Don't raise the hwm > 8MB\n\n\nvar MAX_HWM = 0x800000;\n\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n\n  return n;\n} // This function is designed to be inlinable, so please take care when making\n// changes to the function body.\n\n\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  } // If we're asking for more than the current hwm, then raise the hwm.\n\n\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n; // Don't have enough\n\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n\n  return state.length;\n} // you can override either this method, or the async _read(n) below.\n\n\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n  if (n !== 0) state.emittedReadable = false; // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n\n  if (n === 0 && state.needReadable && ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state); // if we've ended, and we're now clear, then finish it up.\n\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  } // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n  // if we need a readable event, then we need to do some reading.\n\n\n  var doRead = state.needReadable;\n  debug('need readable', doRead); // if we currently have less than the highWaterMark, then also read some\n\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  } // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n\n\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true; // if the length is currently zero, then we *need* a readable event.\n\n    if (state.length === 0) state.needReadable = true; // call internal read method\n\n    this._read(state.highWaterMark);\n\n    state.sync = false; // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n    state.awaitDrain = 0;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true; // If we tried to read() past the EOF, then emit end on the next tick.\n\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n\n  state.ended = true;\n\n  if (state.sync) {\n    // if we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call\n    emitReadable(stream);\n  } else {\n    // emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false;\n\n    if (!state.emittedReadable) {\n      state.emittedReadable = true;\n      emitReadable_(stream);\n    }\n  }\n} // Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\n\n\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    process.nextTick(emitReadable_, stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  var state = stream._readableState;\n  debug('emitReadable_', state.destroyed, state.length, state.ended);\n\n  if (!state.destroyed && (state.length || state.ended)) {\n    stream.emit('readable');\n  } // The stream needs another readable event if\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n\n\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark;\n  flow(stream);\n} // at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\n\n\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (!state.reading && !state.ended && (state.length < state.highWaterMark || state.flowing && state.length === 0)) {\n    var len = state.length;\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length) // didn't get any data, stop spinning.\n      break;\n  }\n\n  state.readingMore = false;\n} // abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\n\n\nReadable.prototype._read = function (n) {\n  this.emit('error', new ERR_METHOD_NOT_IMPLEMENTED('_read()'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) process.nextTick(endFn);else src.once('end', endFn);\n  dest.on('unpipe', onunpipe);\n\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  } // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n\n\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n  var cleanedUp = false;\n\n  function cleanup() {\n    debug('cleanup'); // cleanup event handlers once the pipe is broken\n\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n    cleanedUp = true; // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  src.on('data', ondata);\n\n  function ondata(chunk) {\n    debug('ondata');\n    var ret = dest.write(chunk);\n    debug('dest.write', ret);\n\n    if (ret === false) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', state.awaitDrain);\n        state.awaitDrain++;\n      }\n\n      src.pause();\n    }\n  } // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n\n\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  } // Make sure our error handler is attached before userland ones.\n\n\n  prependListener(dest, 'error', onerror); // Both close and finish should trigger unpipe, but only once.\n\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n\n  dest.once('close', onclose);\n\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  } // tell the dest that it's being piped to\n\n\n  dest.emit('pipe', src); // start the flow if it hasn't been started already.\n\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function pipeOnDrainFunctionResult() {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = {\n    hasUnpiped: false\n  }; // if we're not piping anywhere, then do nothing.\n\n  if (state.pipesCount === 0) return this; // just one destination.  most common case.\n\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n    if (!dest) dest = state.pipes; // got a match.\n\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  } // slow case. multiple pipe destinations.\n\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, {\n        hasUnpiped: false\n      });\n    }\n\n    return this;\n  } // try to find the right one.\n\n\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n  dest.emit('unpipe', this, unpipeInfo);\n  return this;\n}; // set up data events if they are asked for\n// Ensure readable listeners eventually get something\n\n\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n  var state = this._readableState;\n\n  if (ev === 'data') {\n    // update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0; // Try start flowing on next tick if stream isn't explicitly paused\n\n    if (state.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.flowing = false;\n      state.emittedReadable = false;\n      debug('on readable', state.length, state.reading);\n\n      if (state.length) {\n        emitReadable(this);\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this);\n      }\n    }\n  }\n\n  return res;\n};\n\nReadable.prototype.addListener = Readable.prototype.on;\n\nReadable.prototype.removeListener = function (ev, fn) {\n  var res = Stream.prototype.removeListener.call(this, ev, fn);\n\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n\n  return res;\n};\n\nReadable.prototype.removeAllListeners = function (ev) {\n  var res = Stream.prototype.removeAllListeners.apply(this, arguments);\n\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n\n  return res;\n};\n\nfunction updateReadableListening(self) {\n  var state = self._readableState;\n  state.readableListening = self.listenerCount('readable') > 0;\n\n  if (state.resumeScheduled && !state.paused) {\n    // flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true; // crude way to check if we should resume\n  } else if (self.listenerCount('data') > 0) {\n    self.resume();\n  }\n}\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n} // pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\n\n\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n\n  if (!state.flowing) {\n    debug('resume'); // we flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume()\n\n    state.flowing = !state.readableListening;\n    resume(this, state);\n  }\n\n  state.paused = false;\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    process.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  debug('resume', state.reading);\n\n  if (!state.reading) {\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n\n  if (this._readableState.flowing !== false) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n\n  this._readableState.paused = true;\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n\n  while (state.flowing && stream.read() !== null) {\n    ;\n  }\n} // wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\n\n\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n  stream.on('end', function () {\n    debug('wrapped end');\n\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk); // don't skip over falsy values in objectMode\n\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  }); // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function methodWrap(method) {\n        return function methodWrapReturnFunction() {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  } // proxy certain important events.\n\n\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  } // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n\n\n  this._read = function (n) {\n    debug('wrapped _read', n);\n\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nif (typeof Symbol === 'function') {\n  Readable.prototype[Symbol.asyncIterator] = function () {\n    emitExperimentalWarning('Readable[Symbol.asyncIterator]');\n\n    if (createReadableStreamAsyncIterator === undefined) {\n      createReadableStreamAsyncIterator = require('./internal/streams/async_iterator');\n    }\n\n    return createReadableStreamAsyncIterator(this);\n  };\n}\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.highWaterMark;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState && this._readableState.buffer;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableFlowing', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.flowing;\n  },\n  set: function set(state) {\n    if (this._readableState) {\n      this._readableState.flowing = state;\n    }\n  }\n}); // exposed for testing purposes only.\n\nReadable._fromList = fromList;\nObject.defineProperty(Readable.prototype, 'readableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.length;\n  }\n}); // Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\n\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.first();else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = state.buffer.consume(n, state.decoder);\n  }\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n  debug('endReadable', state.endEmitted);\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    process.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length); // Check that we didn't get one last unshift.\n\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n\n  return -1;\n}","module.exports = require('events').EventEmitter;\n","'use strict'; // undocumented cb() API, needed for core, not for public API\n\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      process.nextTick(emitErrorNT, this, err);\n    }\n\n    return this;\n  } // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  } // if this is a duplex stream mark the writable part as destroyed as well\n\n\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      process.nextTick(emitErrorAndCloseNT, _this, err);\n\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      process.nextTick(emitCloseNT, _this);\n      cb(err);\n    } else {\n      process.nextTick(emitCloseNT, _this);\n    }\n  });\n\n  return this;\n}\n\nfunction emitErrorAndCloseNT(self, err) {\n  emitErrorNT(self, err);\n  emitCloseNT(self);\n}\n\nfunction emitCloseNT(self) {\n  if (self._writableState && !self._writableState.emitClose) return;\n  if (self._readableState && !self._readableState.emitClose) return;\n  self.emit('close');\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finalCalled = false;\n    this._writableState.prefinished = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};","'use strict';\n\nvar ERR_INVALID_OPT_VALUE = require('../../../errors').codes.ERR_INVALID_OPT_VALUE;\n\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null;\n}\n\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  var hwm = highWaterMarkFrom(options, isDuplex, duplexKey);\n\n  if (hwm != null) {\n    if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {\n      var name = isDuplex ? duplexKey : 'highWaterMark';\n      throw new ERR_INVALID_OPT_VALUE(name, hwm);\n    }\n\n    return Math.floor(hwm);\n  } // Default value\n\n\n  return state.objectMode ? 16 : 16 * 1024;\n}\n\nmodule.exports = {\n  getHighWaterMark: getHighWaterMark\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n'use strict';\n\nmodule.exports = Writable;\n/* <replacement> */\n\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n} // It seems a linked list but it is not\n// there will be only 2 of these for each stream\n\n\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\n\n\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n/*<replacement>*/\n\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n\nvar Buffer = require('buffer').Buffer;\n\nvar OurUint8Array = global.Uint8Array || function () {};\n\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\n\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nvar _require = require('./internal/streams/state'),\n    getHighWaterMark = _require.getHighWaterMark;\n\nvar _require$codes = require('../errors').codes,\n    ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n    ERR_STREAM_CANNOT_PIPE = _require$codes.ERR_STREAM_CANNOT_PIPE,\n    ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED,\n    ERR_STREAM_NULL_VALUES = _require$codes.ERR_STREAM_NULL_VALUES,\n    ERR_STREAM_WRITE_AFTER_END = _require$codes.ERR_STREAM_WRITE_AFTER_END,\n    ERR_UNKNOWN_ENCODING = _require$codes.ERR_UNKNOWN_ENCODING;\n\nrequire('inherits')(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {}; // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex; // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode; // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n\n  this.highWaterMark = getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex); // if _final has been called\n\n  this.finalCalled = false; // drain event flag.\n\n  this.needDrain = false; // at the start of calling end()\n\n  this.ending = false; // when end() has been called, and returned\n\n  this.ended = false; // when 'finish' is emitted\n\n  this.finished = false; // has it been destroyed\n\n  this.destroyed = false; // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode; // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n\n  this.defaultEncoding = options.defaultEncoding || 'utf8'; // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n\n  this.length = 0; // a flag to see when we're in the middle of a write.\n\n  this.writing = false; // when true all writes will be buffered until .uncork() call\n\n  this.corked = 0; // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n\n  this.sync = true; // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n\n  this.bufferProcessing = false; // the callback that's passed to _write(chunk,cb)\n\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  }; // the callback that the user supplies to write(chunk,encoding,cb)\n\n\n  this.writecb = null; // the amount that is being written when _write is called.\n\n  this.writelen = 0;\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null; // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n\n  this.pendingcb = 0; // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n\n  this.prefinished = false; // True if the error was already emitted and should not be thrown again\n\n  this.errorEmitted = false; // Should close be emitted on destroy. Defaults to true.\n\n  this.emitClose = options.emitClose !== false; // count buffered requests\n\n  this.bufferedRequestCount = 0; // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function writableStateBufferGetter() {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})(); // Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\n\n\nvar realHasInstance;\n\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function value(object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function realHasInstance(object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex'); // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5\n\n  var isDuplex = this instanceof Duplex;\n  if (!isDuplex && !realHasInstance.call(Writable, this)) return new Writable(options);\n  this._writableState = new WritableState(options, this, isDuplex); // legacy.\n\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n    if (typeof options.writev === 'function') this._writev = options.writev;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n} // Otherwise people can pipe Writable streams, which is just wrong.\n\n\nWritable.prototype.pipe = function () {\n  this.emit('error', new ERR_STREAM_CANNOT_PIPE());\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new ERR_STREAM_WRITE_AFTER_END(); // TODO: defer error events consistently everywhere, not just the cb\n\n  stream.emit('error', er);\n  process.nextTick(cb, er);\n} // Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\n\n\nfunction validChunk(stream, state, chunk, cb) {\n  var er;\n\n  if (chunk === null) {\n    er = new ERR_STREAM_NULL_VALUES();\n  } else if (typeof chunk !== 'string' && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer'], chunk);\n  }\n\n  if (er) {\n    stream.emit('error', er);\n    process.nextTick(cb, er);\n    return false;\n  }\n\n  return true;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n  if (typeof cb !== 'function') cb = nop;\n  if (state.ending) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  this._writableState.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n    if (!state.writing && !state.corked && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new ERR_UNKNOWN_ENCODING(encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nObject.defineProperty(Writable.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n}); // if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\n\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n\n  var len = state.objectMode ? 1 : chunk.length;\n  state.length += len;\n  var ret = state.length < state.highWaterMark; // we must ensure that previous needDrain will not be reset to false.\n\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'));else if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    process.nextTick(cb, er); // this can emit finish, and it will always happen\n    // after error\n\n    process.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er); // this can emit finish, but finish must\n    // always follow error\n\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n  if (typeof cb !== 'function') throw new ERR_MULTIPLE_CALLBACK();\n  onwriteStateUpdate(state);\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state) || stream.destroyed;\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      process.nextTick(afterWrite, stream, state, finished, cb);\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n} // Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\n\n\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n} // if there's something in the buffer waiting, then process it\n\n\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n    var count = 0;\n    var allBuffers = true;\n\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n\n    buffer.allBuffers = allBuffers;\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish); // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--; // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_write()'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding); // .end() fully uncorks\n\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  } // ignore unnecessary end() calls.\n\n\n  if (!state.ending) endWritable(this, state, cb);\n  return this;\n};\n\nObject.defineProperty(Writable.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\n\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n\n    if (err) {\n      stream.emit('error', err);\n    }\n\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\n\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.pendingcb++;\n      state.finalCalled = true;\n      process.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n\n  if (need) {\n    prefinish(stream, state);\n\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n\n  if (cb) {\n    if (state.finished) process.nextTick(cb);else stream.once('finish', cb);\n  }\n\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  } // reuse the free corkReq.\n\n\n  state.corkedRequestsFree.next = corkReq;\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._writableState === undefined) {\n      return false;\n    }\n\n    return this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._writableState.destroyed = value;\n  }\n});\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\n\nWritable.prototype._destroy = function (err, cb) {\n  cb(err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n'use strict';\n\nmodule.exports = Transform;\n\nvar _require$codes = require('../errors').codes,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n    ERR_TRANSFORM_ALREADY_TRANSFORMING = _require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,\n    ERR_TRANSFORM_WITH_LENGTH_0 = _require$codes.ERR_TRANSFORM_WITH_LENGTH_0;\n\nvar Duplex = require('./_stream_duplex');\n\nrequire('inherits')(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n  var cb = ts.writecb;\n\n  if (cb === null) {\n    return this.emit('error', new ERR_MULTIPLE_CALLBACK());\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n  cb(er);\n  var rs = this._readableState;\n  rs.reading = false;\n\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n  Duplex.call(this, options);\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  }; // start out asking for a readable event once data is transformed.\n\n  this._readableState.needReadable = true; // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  } // When the writable side finishes, then flush out anything remaining.\n\n\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function' && !this._readableState.destroyed) {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n}; // This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\n\n\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_transform()'));\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n}; // Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\n\n\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && !ts.transforming) {\n    ts.transforming = true;\n\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data); // TODO(BridgeAR): Write a test for these two error cases\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n\n  if (stream._writableState.length) throw new ERR_TRANSFORM_WITH_LENGTH_0();\n  if (stream._transformState.transforming) throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();\n  return stream.push(null);\n}","// board color defaults and css generation\r\n'use strict'\r\n\r\nvar colorString = require('color-string')\r\n\r\nvar LAYER_IDS = ['fr4', 'cu', 'cf', 'sm', 'ss', 'sp', 'out']\r\n\r\nvar DEFAULTS = {\r\n  fr4: '#666666',\r\n  cu: '#cccccc',\r\n  cf: '#cc9933',\r\n  sm: '#004200bf',\r\n  ss: '#ffffff',\r\n  sp: '#999999',\r\n  out: '#000000',\r\n}\r\n\r\nfunction getColor(overrides) {\r\n  overrides = overrides || {}\r\n\r\n  return LAYER_IDS.reduce(function(color, id) {\r\n    color[id] = overrides[id] || DEFAULTS[id]\r\n    return color\r\n  }, {})\r\n}\r\n\r\nfunction getStyleElement(element, prefix, side, color) {\r\n  return element('style', {}, [\r\n    LAYER_IDS.map(function(id) {\r\n      var selector = '.' + prefix + id\r\n      var style = colorToCssString(color[id])\r\n      return selector + ' {' + style + '}'\r\n    }).join('\\n'),\r\n  ])\r\n}\r\n\r\nfunction colorToCssString(color) {\r\n  var parsedColor = colorString.get(color)\r\n\r\n  if (!parsedColor) return ''\r\n\r\n  var css = 'color: '\r\n  var components = parsedColor.value.slice(0, 3)\r\n  var alpha = parsedColor.value[3] != null ? parsedColor.value[3] : 1\r\n\r\n  if (parsedColor.model === 'rgb') {\r\n    css += colorString.to.hex(components).toLowerCase()\r\n  } else {\r\n    css += colorString.to[parsedColor.model](components).toLowerCase()\r\n  }\r\n\r\n  if (alpha !== 1) {\r\n    css += '; opacity: ' + alpha\r\n  }\r\n\r\n  return css + ';'\r\n}\r\n\r\nmodule.exports = {getColor: getColor, getStyleElement: getStyleElement}\r\n","module.exports = runParallel\n\nfunction runParallel (tasks, cb) {\n  var results, pending, keys\n  var isSync = true\n\n  if (Array.isArray(tasks)) {\n    results = []\n    pending = tasks.length\n  } else {\n    keys = Object.keys(tasks)\n    results = {}\n    pending = keys.length\n  }\n\n  function done (err) {\n    function end () {\n      if (cb) cb(err, results)\n      cb = null\n    }\n    if (isSync) process.nextTick(end)\n    else end()\n  }\n\n  function each (i, err, result) {\n    results[i] = result\n    if (--pending === 0 || err) {\n      done(err)\n    }\n  }\n\n  if (!pending) {\n    // empty\n    done(null)\n  } else if (keys) {\n    // object\n    keys.forEach(function (key) {\n      tasks[key](function (err, result) { each(key, err, result) })\n    })\n  } else {\n    // array\n    tasks.forEach(function (task, i) {\n      task(function (err, result) { each(i, err, result) })\n    })\n  }\n\n  isSync = false\n}\n","module.exports = runWaterfall\n\nfunction runWaterfall (tasks, cb) {\n  var current = 0\n  var isSync = true\n\n  function done (err, args) {\n    function end () {\n      args = args ? [].concat(err, args) : [ err ]\n      if (cb) cb.apply(undefined, args)\n    }\n    if (isSync) process.nextTick(end)\n    else end()\n  }\n\n  function each (err) {\n    var args = Array.prototype.slice.call(arguments, 1)\n    if (++current >= tasks.length || err) {\n      done(err, args)\n    } else {\n      tasks[current].apply(undefined, [].concat(args, each))\n    }\n  }\n\n  if (tasks.length) {\n    tasks[0](each)\n  } else {\n    done(null)\n  }\n\n  isSync = false\n}\n","// gerber to svg transform stream\r\n'use strict'\r\n\r\nvar xid = require('@tracespace/xml-id')\r\nvar gerberParser = require('gerber-parser')\r\nvar gerberPlotter = require('gerber-plotter')\r\nvar xmlElementString = require('xml-element-string')\r\n\r\nvar PlotterToSvg = require('./lib/plotter-to-svg')\r\nvar render = require('./render')\r\nvar clone = require('./clone')\r\n\r\nvar parseOptions = function(options) {\r\n  if (typeof options === 'string') {\r\n    options = {id: options}\r\n  } else if (!options) {\r\n    options = {}\r\n  }\r\n\r\n  var opts = {\r\n    id: xid.ensure(options.id),\r\n    attributes: options.attributes || {},\r\n    createElement: options.createElement || xmlElementString,\r\n    objectMode: options.objectMode == null ? false : options.objectMode,\r\n    parser: {\r\n      places: options.places,\r\n      zero: options.zero,\r\n      filetype: options.filetype,\r\n    },\r\n    plotter: {\r\n      units: options.units,\r\n      backupUnits: options.backupUnits,\r\n      nota: options.nota,\r\n      backupNota: options.backupNota,\r\n      optimizePaths: options.optimizePaths,\r\n      plotAsOutline: options.plotAsOutline,\r\n    },\r\n  }\r\n\r\n  return opts\r\n}\r\n\r\nmodule.exports = function gerberConverterFactory(gerber, inputOpts, done) {\r\n  if (typeof inputOpts === 'function') {\r\n    done = inputOpts\r\n    inputOpts = null\r\n  }\r\n\r\n  var opts = parseOptions(inputOpts)\r\n  var callbackMode = done != null\r\n\r\n  var converter = new PlotterToSvg(\r\n    opts.id,\r\n    opts.attributes,\r\n    opts.createElement,\r\n    opts.objectMode\r\n  )\r\n\r\n  var parser = gerberParser(opts.parser)\r\n  var plotter = gerberPlotter(opts.plotter)\r\n\r\n  converter.parser = parser\r\n  converter.plotter = plotter\r\n\r\n  parser.on('warning', function handleParserWarning(w) {\r\n    converter.emit('warning', w)\r\n  })\r\n  plotter.on('warning', function handlePlotterWarning(w) {\r\n    converter.emit('warning', w)\r\n  })\r\n  parser.once('error', function handleParserError(e) {\r\n    converter.emit('error', e)\r\n  })\r\n  plotter.once('error', function handlePlotterError(e) {\r\n    converter.emit('error', e)\r\n  })\r\n\r\n  // expose the filetype property of the parser for convenience\r\n  parser.once('end', function() {\r\n    converter.filetype = parser.format.filetype\r\n  })\r\n\r\n  if (gerber.pipe) {\r\n    gerber.setEncoding('utf8')\r\n    gerber.pipe(parser)\r\n  } else {\r\n    // write the gerber string after listeners have been attached etc\r\n    process.nextTick(function writeStringToParser() {\r\n      parser.write(gerber)\r\n      parser.end()\r\n    })\r\n  }\r\n\r\n  parser.pipe(plotter).pipe(converter)\r\n\r\n  // collect result in callback mode\r\n  if (callbackMode) {\r\n    var result = ''\r\n\r\n    var finishConversion = function() {\r\n      return done(null, result)\r\n    }\r\n\r\n    converter.on('readable', function collectStreamData() {\r\n      var data\r\n\r\n      do {\r\n        data = converter.read() || ''\r\n        result += data\r\n      } while (data)\r\n    })\r\n\r\n    converter.once('end', finishConversion)\r\n\r\n    converter.once('error', function(error) {\r\n      converter.removeListener('end', finishConversion)\r\n\r\n      return done(error)\r\n    })\r\n  }\r\n\r\n  return converter\r\n}\r\n\r\nmodule.exports.render = render\r\nmodule.exports.clone = clone\r\n","// factory for gerber-parser class\r\n'use strict'\r\n\r\nvar isFinite = require('lodash.isfinite')\r\n\r\nvar Parser = require('./lib/parser')\r\n\r\nvar verifyPlaces = function(p) {\r\n  if (Array.isArray(p) && p.length === 2 && isFinite(p[0]) && isFinite(p[1])) {\r\n    return p\r\n  }\r\n\r\n  throw new Error('places must be an array of two whole numbers')\r\n}\r\n\r\nvar verifyZero = function(z) {\r\n  if (z === 'T' || z === 'L') {\r\n    return z\r\n  }\r\n\r\n  throw new Error(\"zero suppression must be 'L' or 'T'\")\r\n}\r\n\r\nvar verifyFiletype = function(f) {\r\n  if (f === 'gerber' || f === 'drill') {\r\n    return f\r\n  }\r\n\r\n  throw new Error('filetype must be \"drill\" or \"gerber\"')\r\n}\r\n\r\nmodule.exports = function(options) {\r\n  options = options || {}\r\n\r\n  var places = options.places ? verifyPlaces(options.places) : null\r\n  var zero = options.zero ? verifyZero(options.zero) : null\r\n  var filetype = options.filetype ? verifyFiletype(options.filetype) : null\r\n\r\n  return new Parser(places, zero, filetype)\r\n}\r\n","// generic file parser for gerber and drill files\r\n'use strict'\r\n\r\nvar StringDecoder = require('string_decoder').StringDecoder\r\nvar inherits = require('inherits')\r\nvar Transform = require('readable-stream').Transform\r\n\r\nvar determineFiletype = require('./_determine-filetype')\r\nvar getNext = require('./get-next-block')\r\nvar parseGerber = require('./_parse-gerber')\r\nvar parseDrill = require('./_parse-drill')\r\nvar warning = require('./_warning')\r\nvar drillMode = require('./_drill-mode')\r\n\r\nvar LIMIT = 65535\r\n\r\nvar Parser = function(places, zero, filetype) {\r\n  Transform.call(this, {readableObjectMode: true})\r\n\r\n  // parser properties\r\n  this._decoder = new StringDecoder('utf8')\r\n  this._stash = ''\r\n  this._index = 0\r\n  this._drillMode = drillMode.DRILL\r\n  this._drillStash = []\r\n  this._syncResult = null\r\n  this.line = 0\r\n  this.format = {places: places, zero: zero, filetype: filetype}\r\n}\r\n\r\ninherits(Parser, Transform)\r\n\r\nParser.prototype._process = function(chunk, filetype) {\r\n  while (this._index < chunk.length) {\r\n    var next = getNext(filetype, chunk, this._index)\r\n    this._index += next.read\r\n    this.line += next.lines\r\n    this._stash += next.rem\r\n\r\n    if (next.block) {\r\n      if (filetype === 'gerber') {\r\n        parseGerber(this, next.block)\r\n      } else {\r\n        parseDrill.parse(this, next.block)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nParser.prototype._transform = function(chunk, encoding, done) {\r\n  var filetype = this.format.filetype\r\n\r\n  // decode buffer to string\r\n  chunk = this._decoder.write(chunk)\r\n\r\n  // determine filetype within 65535 characters\r\n  if (!filetype) {\r\n    filetype = determineFiletype(chunk, this._index, LIMIT)\r\n    this._index += chunk.length\r\n\r\n    if (!filetype) {\r\n      if (this._index >= LIMIT) {\r\n        return done(new Error('unable to determine filetype'))\r\n      }\r\n      this._stash += chunk\r\n      return done()\r\n    } else {\r\n      this.format.filetype = filetype\r\n      this._index = 0\r\n    }\r\n  }\r\n\r\n  chunk = this._stash + chunk\r\n  this._stash = ''\r\n\r\n  this._process(chunk, filetype)\r\n\r\n  this._index = 0\r\n  done()\r\n}\r\n\r\nParser.prototype._flush = function(done) {\r\n  if (this.format.filetype === 'drill') {\r\n    parseDrill.flush(this)\r\n  }\r\n\r\n  return done && done()\r\n}\r\n\r\nParser.prototype._push = function(data) {\r\n  if (data.line === -1) {\r\n    data.line = this.line\r\n  }\r\n\r\n  var pushTarget = !this._syncResult ? this : this._syncResult\r\n  pushTarget.push(data)\r\n}\r\n\r\nParser.prototype._warn = function(message) {\r\n  this.emit('warning', warning(message, this.line))\r\n}\r\n\r\nParser.prototype.parseSync = function(file) {\r\n  var filetype = determineFiletype(file, this._index, 100 * LIMIT)\r\n  this.format.filetype = filetype\r\n  this._syncResult = []\r\n  this._process(file, filetype)\r\n  this._flush()\r\n\r\n  return this._syncResult\r\n}\r\n\r\nmodule.exports = Parser\r\n","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\nexports.finished = require('./lib/internal/streams/end-of-stream.js');\nexports.pipeline = require('./lib/internal/streams/pipeline.js');\n","'use strict';\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _require = require('buffer'),\n    Buffer = _require.Buffer;\n\nvar _require2 = require('util'),\n    inspect = _require2.inspect;\n\nvar custom = inspect && inspect.custom || 'inspect';\n\nfunction copyBuffer(src, target, offset) {\n  Buffer.prototype.copy.call(src, target, offset);\n}\n\nmodule.exports =\n/*#__PURE__*/\nfunction () {\n  function BufferList() {\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  var _proto = BufferList.prototype;\n\n  _proto.push = function push(v) {\n    var entry = {\n      data: v,\n      next: null\n    };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  _proto.unshift = function unshift(v) {\n    var entry = {\n      data: v,\n      next: this.head\n    };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  _proto.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  _proto.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  _proto.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n\n    while (p = p.next) {\n      ret += s + p.data;\n    }\n\n    return ret;\n  };\n\n  _proto.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n\n    return ret;\n  } // Consumes a specified amount of bytes or characters from the buffered data.\n  ;\n\n  _proto.consume = function consume(n, hasStrings) {\n    var ret;\n\n    if (n < this.head.data.length) {\n      // `slice` is the same for buffers and strings.\n      ret = this.head.data.slice(0, n);\n      this.head.data = this.head.data.slice(n);\n    } else if (n === this.head.data.length) {\n      // First chunk is a perfect match.\n      ret = this.shift();\n    } else {\n      // Result spans more than one buffer.\n      ret = hasStrings ? this._getString(n) : this._getBuffer(n);\n    }\n\n    return ret;\n  };\n\n  _proto.first = function first() {\n    return this.head.data;\n  } // Consumes a specified amount of characters from the buffered data.\n  ;\n\n  _proto._getString = function _getString(n) {\n    var p = this.head;\n    var c = 1;\n    var ret = p.data;\n    n -= ret.length;\n\n    while (p = p.next) {\n      var str = p.data;\n      var nb = n > str.length ? str.length : n;\n      if (nb === str.length) ret += str;else ret += str.slice(0, n);\n      n -= nb;\n\n      if (n === 0) {\n        if (nb === str.length) {\n          ++c;\n          if (p.next) this.head = p.next;else this.head = this.tail = null;\n        } else {\n          this.head = p;\n          p.data = str.slice(nb);\n        }\n\n        break;\n      }\n\n      ++c;\n    }\n\n    this.length -= c;\n    return ret;\n  } // Consumes a specified amount of bytes from the buffered data.\n  ;\n\n  _proto._getBuffer = function _getBuffer(n) {\n    var ret = Buffer.allocUnsafe(n);\n    var p = this.head;\n    var c = 1;\n    p.data.copy(ret);\n    n -= p.data.length;\n\n    while (p = p.next) {\n      var buf = p.data;\n      var nb = n > buf.length ? buf.length : n;\n      buf.copy(ret, ret.length - n, 0, nb);\n      n -= nb;\n\n      if (n === 0) {\n        if (nb === buf.length) {\n          ++c;\n          if (p.next) this.head = p.next;else this.head = this.tail = null;\n        } else {\n          this.head = p;\n          p.data = buf.slice(nb);\n        }\n\n        break;\n      }\n\n      ++c;\n    }\n\n    this.length -= c;\n    return ret;\n  } // Make sure the linked list only shows the minimal necessary information.\n  ;\n\n  _proto[custom] = function (_, options) {\n    return inspect(this, _objectSpread({}, options, {\n      // Only inspect one level.\n      depth: 0,\n      // It should not recurse.\n      customInspect: false\n    }));\n  };\n\n  return BufferList;\n}();","'use strict'\n\nvar experimentalWarnings = new Set();\n\nfunction emitExperimentalWarning(feature) {\n  if (experimentalWarnings.has(feature)) return;\n  var msg = feature + ' is an experimental feature. This feature could ' +\n       'change at any time';\n  experimentalWarnings.add(feature);\n  process.emitWarning(msg, 'ExperimentalWarning');\n}\n\nfunction noop() {}\n\nmodule.exports.emitExperimentalWarning = process.emitWarning\n  ? emitExperimentalWarning\n  : noop;\n","'use strict';\n\nvar _Object$setPrototypeO;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar finished = require('./end-of-stream');\n\nvar kLastResolve = Symbol('lastResolve');\nvar kLastReject = Symbol('lastReject');\nvar kError = Symbol('error');\nvar kEnded = Symbol('ended');\nvar kLastPromise = Symbol('lastPromise');\nvar kHandlePromise = Symbol('handlePromise');\nvar kStream = Symbol('stream');\n\nfunction createIterResult(value, done) {\n  return {\n    value: value,\n    done: done\n  };\n}\n\nfunction readAndResolve(iter) {\n  var resolve = iter[kLastResolve];\n\n  if (resolve !== null) {\n    var data = iter[kStream].read(); // we defer if data is null\n    // we can be expecting either 'end' or\n    // 'error'\n\n    if (data !== null) {\n      iter[kLastPromise] = null;\n      iter[kLastResolve] = null;\n      iter[kLastReject] = null;\n      resolve(createIterResult(data, false));\n    }\n  }\n}\n\nfunction onReadable(iter) {\n  // we wait for the next tick, because it might\n  // emit an error with process.nextTick\n  process.nextTick(readAndResolve, iter);\n}\n\nfunction wrapForNext(lastPromise, iter) {\n  return function (resolve, reject) {\n    lastPromise.then(function () {\n      if (iter[kEnded]) {\n        resolve(createIterResult(undefined, true));\n        return;\n      }\n\n      iter[kHandlePromise](resolve, reject);\n    }, reject);\n  };\n}\n\nvar AsyncIteratorPrototype = Object.getPrototypeOf(function () {});\nvar ReadableStreamAsyncIteratorPrototype = Object.setPrototypeOf((_Object$setPrototypeO = {\n  get stream() {\n    return this[kStream];\n  },\n\n  next: function next() {\n    var _this = this;\n\n    // if we have detected an error in the meanwhile\n    // reject straight away\n    var error = this[kError];\n\n    if (error !== null) {\n      return Promise.reject(error);\n    }\n\n    if (this[kEnded]) {\n      return Promise.resolve(createIterResult(undefined, true));\n    }\n\n    if (this[kStream].destroyed) {\n      // We need to defer via nextTick because if .destroy(err) is\n      // called, the error will be emitted via nextTick, and\n      // we cannot guarantee that there is no error lingering around\n      // waiting to be emitted.\n      return new Promise(function (resolve, reject) {\n        process.nextTick(function () {\n          if (_this[kError]) {\n            reject(_this[kError]);\n          } else {\n            resolve(createIterResult(undefined, true));\n          }\n        });\n      });\n    } // if we have multiple next() calls\n    // we will wait for the previous Promise to finish\n    // this logic is optimized to support for await loops,\n    // where next() is only called once at a time\n\n\n    var lastPromise = this[kLastPromise];\n    var promise;\n\n    if (lastPromise) {\n      promise = new Promise(wrapForNext(lastPromise, this));\n    } else {\n      // fast path needed to support multiple this.push()\n      // without triggering the next() queue\n      var data = this[kStream].read();\n\n      if (data !== null) {\n        return Promise.resolve(createIterResult(data, false));\n      }\n\n      promise = new Promise(this[kHandlePromise]);\n    }\n\n    this[kLastPromise] = promise;\n    return promise;\n  }\n}, _defineProperty(_Object$setPrototypeO, Symbol.asyncIterator, function () {\n  return this;\n}), _defineProperty(_Object$setPrototypeO, \"return\", function _return() {\n  var _this2 = this;\n\n  // destroy(err, cb) is a private API\n  // we can guarantee we have that here, because we control the\n  // Readable class this is attached to\n  return new Promise(function (resolve, reject) {\n    _this2[kStream].destroy(null, function (err) {\n      if (err) {\n        reject(err);\n        return;\n      }\n\n      resolve(createIterResult(undefined, true));\n    });\n  });\n}), _Object$setPrototypeO), AsyncIteratorPrototype);\n\nvar createReadableStreamAsyncIterator = function createReadableStreamAsyncIterator(stream) {\n  var _Object$create;\n\n  var iterator = Object.create(ReadableStreamAsyncIteratorPrototype, (_Object$create = {}, _defineProperty(_Object$create, kStream, {\n    value: stream,\n    writable: true\n  }), _defineProperty(_Object$create, kLastResolve, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kLastReject, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kError, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kEnded, {\n    value: stream._readableState.endEmitted,\n    writable: true\n  }), _defineProperty(_Object$create, kHandlePromise, {\n    value: function value(resolve, reject) {\n      var data = iterator[kStream].read();\n\n      if (data) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        resolve(createIterResult(data, false));\n      } else {\n        iterator[kLastResolve] = resolve;\n        iterator[kLastReject] = reject;\n      }\n    },\n    writable: true\n  }), _Object$create));\n  iterator[kLastPromise] = null;\n  finished(stream, function (err) {\n    if (err && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n      var reject = iterator[kLastReject]; // reject if we are waiting for data in the Promise\n      // returned by next() and store the error\n\n      if (reject !== null) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        reject(err);\n      }\n\n      iterator[kError] = err;\n      return;\n    }\n\n    var resolve = iterator[kLastResolve];\n\n    if (resolve !== null) {\n      iterator[kLastPromise] = null;\n      iterator[kLastResolve] = null;\n      iterator[kLastReject] = null;\n      resolve(createIterResult(undefined, true));\n    }\n\n    iterator[kEnded] = true;\n  });\n  stream.on('readable', onReadable.bind(null, iterator));\n  return iterator;\n};\n\nmodule.exports = createReadableStreamAsyncIterator;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\nrequire('inherits')(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n'use strict';\n\nvar eos;\n\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback.apply(void 0, arguments);\n  };\n}\n\nvar _require$codes = require('../../../errors').codes,\n    ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n    ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\n\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\n\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\n\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  var closed = false;\n  stream.on('close', function () {\n    closed = true;\n  });\n  if (eos === undefined) eos = require('./end-of-stream');\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, function (err) {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  var destroyed = false;\n  return function (err) {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true; // request.destroy just do .end - .abort is what we want\n\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\n\nfunction call(fn) {\n  fn();\n}\n\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\n\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\n\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n\n  var callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n\n  var error;\n  var destroys = streams.map(function (stream, i) {\n    var reading = i < streams.length - 1;\n    var writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\n\nmodule.exports = pipeline;","// function to determine filetype from a chunk\r\n'use strict'\r\n\r\nvar determine = function(chunk, start, LIMIT) {\r\n  var limit = Math.min(LIMIT - start, chunk.length)\r\n  var current = []\r\n  var filetype = null\r\n  var index = -1\r\n\r\n  while (!filetype && ++index < limit) {\r\n    var c = chunk[index]\r\n    if (c === '\\n') {\r\n      if (current.length + index) {\r\n        filetype = 'drill'\r\n        current = []\r\n      }\r\n    } else {\r\n      current.push(c)\r\n      if (c === '*' && current[0] !== ';') {\r\n        filetype = 'gerber'\r\n        current = []\r\n      }\r\n    }\r\n  }\r\n\r\n  return filetype\r\n}\r\n\r\nmodule.exports = determine\r\n","// function for getting the next block of the chunk\r\n// returns {next: '_', read: [chars read], lines: [lines read]}\r\n'use strict'\r\n\r\nvar getNext = function(type, chunk, start) {\r\n  if (type !== 'gerber' && type !== 'drill') {\r\n    throw new Error('filetype to get next block must be \"drill\" or \"gerber\"')\r\n  }\r\n\r\n  // parsing constants\r\n  var limit = chunk.length - start\r\n  var split = type === 'gerber' ? '*' : '\\n'\r\n  var param = type === 'gerber' ? '%' : ''\r\n\r\n  // search flags\r\n  var splitFound = false\r\n  var paramStarted = false\r\n  var paramFound = false\r\n  var blockFound = false\r\n\r\n  // chunk results\r\n  var found = []\r\n  var read = 0\r\n  var lines = 0\r\n\r\n  while (!blockFound && read < limit) {\r\n    var c = chunk[start + read]\r\n\r\n    // count newlines\r\n    if (c === '\\n') {\r\n      lines++\r\n    }\r\n\r\n    // check for a param start or end\r\n    if (c === param) {\r\n      if (!paramStarted) {\r\n        paramStarted = true\r\n        found.push(c)\r\n      } else {\r\n        paramFound = true\r\n        found.pop()\r\n      }\r\n    } else if (c === split) {\r\n      splitFound = true\r\n      if (paramStarted) {\r\n        found.push(c)\r\n      }\r\n    } else if (c >= ' ' && c <= '~') {\r\n      found.push(c)\r\n    }\r\n\r\n    read++\r\n    blockFound = splitFound && (!paramStarted || paramFound)\r\n  }\r\n\r\n  var block = blockFound ? found.join('').trim() : ''\r\n  var rem = !blockFound ? found.join('') : ''\r\n  return {lines: lines, read: read, block: block, rem: rem}\r\n}\r\n\r\nmodule.exports = getNext\r\n","// parse gerber function\r\n// takes a parser transform stream and a block string\r\n'use strict'\r\n\r\nvar commands = require('./_commands')\r\nvar normalize = require('./normalize-coord')\r\nvar parseCoord = require('./parse-coord')\r\nvar parseMacroBlock = require('./_parse-macro-block')\r\n\r\n// g-code set matchers\r\nvar RE_MODE = /^G0*([123])/\r\nvar RE_REGION = /^G3([67])/\r\nvar RE_ARC = /^G7([45])/\r\nvar RE_BKP_UNITS = /^G7([01])/\r\nvar RE_BKP_NOTA = /^G9([01])/\r\nvar RE_COMMENT = /^G0*4/\r\n\r\n// object attributes (TO)\r\nvar RE_TO = /^%TO[^%*]*/\r\n\r\n// tool changes\r\nvar RE_TOOL = /^(?:G54)?D0*([1-9]\\d+)/\r\n\r\n// operations\r\nvar RE_OP = /D0*([123])$/\r\nvar RE_COORD = /^(?:G0*[123])?((?:[XYIJ][+-]?\\d+){1,4})(?:D0*[123])?$/\r\n\r\n// parameter code matchers\r\nvar RE_UNITS = /^%MO(IN|MM)/\r\n// format spec regexp courtesy @summivox\r\nvar RE_FORMAT = /^%FS([LT]?)([AI]?)(.*)X([0-7])([0-7])Y\\4\\5/\r\nvar RE_POLARITY = /^%LP([CD])/\r\nvar RE_STEP_REP = /^%SR(?:X(\\d+)Y(\\d+)I([\\d.]+)J([\\d.]+))?/\r\nvar RE_TOOL_DEF = /^%ADD0*(\\d{2,})([A-Za-z_$][\\w\\-.]*)(?:,((?:X?[\\d.-]+)*))?/\r\nvar RE_MACRO = /^%AM([A-Za-z_$][\\w\\-.]*)\\*?(.*)/\r\n\r\n// Special Case: Cadence Allegro\r\n// The gerber spec says\r\n//   \"There can be only one extended code command between each pair of ‘%’ delimiters\"\r\n// Cadence Allegro violates this rule by including the units after the format command\r\n//\r\n// Sample:\r\n//   G04 File Origin:  Cadence Allegro 17.2-S032*\r\n//   ...\r\n//   %FSLAX25Y25*MOMM*%\r\n//   ...\r\n//\r\nvar RE_CADENCE_ALLEGRO_UNITS_IN_FORMAT = /\\*MO(IN|MM)$/\r\n\r\nvar parseUnits = function(parser, unitsMatch) {\r\n  var units = unitsMatch === 'IN' ? 'in' : 'mm'\r\n  return parser._push(commands.set('units', units))\r\n}\r\n\r\nvar parseToolDef = function(parser, block) {\r\n  var format = {places: parser.format.places}\r\n  var toolMatch = block.match(RE_TOOL_DEF)\r\n  var tool = toolMatch[1]\r\n  var shapeMatch = toolMatch[2]\r\n  var toolArgs = toolMatch[3] ? toolMatch[3].split('X') : []\r\n\r\n  // get the shape\r\n  var shape\r\n  var maxArgs\r\n  if (shapeMatch === 'C') {\r\n    shape = 'circle'\r\n    maxArgs = 3\r\n  } else if (shapeMatch === 'R') {\r\n    shape = 'rect'\r\n    maxArgs = 4\r\n  } else if (shapeMatch === 'O') {\r\n    shape = 'obround'\r\n    maxArgs = 4\r\n  } else if (shapeMatch === 'P') {\r\n    shape = 'poly'\r\n    maxArgs = 5\r\n  } else {\r\n    shape = shapeMatch\r\n    maxArgs = 0\r\n  }\r\n\r\n  var val\r\n  if (shape === 'circle') {\r\n    val = [normalize(toolArgs[0], format)]\r\n  } else if (shape === 'rect' || shape === 'obround') {\r\n    val = [normalize(toolArgs[0], format), normalize(toolArgs[1], format)]\r\n  } else if (shape === 'poly') {\r\n    val = [normalize(toolArgs[0], format), Number(toolArgs[1]), 0]\r\n    if (toolArgs[2]) {\r\n      val[2] = Number(toolArgs[2])\r\n    }\r\n  } else {\r\n    val = toolArgs.map(Number)\r\n  }\r\n\r\n  var hole = []\r\n  if (toolArgs[maxArgs - 1]) {\r\n    hole = [\r\n      normalize(toolArgs[maxArgs - 2], format),\r\n      normalize(toolArgs[maxArgs - 1], format),\r\n    ]\r\n  } else if (toolArgs[maxArgs - 2]) {\r\n    hole = [normalize(toolArgs[maxArgs - 2], format)]\r\n  }\r\n  var toolDef = {shape: shape, params: val, hole: hole}\r\n  return parser._push(commands.tool(tool, toolDef))\r\n}\r\n\r\nvar parseMacroDef = function(parser, block) {\r\n  var macroMatch = block.match(RE_MACRO)\r\n  var name = macroMatch[1]\r\n  if (name.match(/-/)) {\r\n    parser._warn('hyphens in macro name are illegal: ' + name)\r\n  }\r\n  var blockMatch = macroMatch[2].length ? macroMatch[2].split('*') : []\r\n  var blocks = blockMatch.filter(Boolean).map(function(block) {\r\n    return parseMacroBlock(parser, block)\r\n  })\r\n\r\n  return parser._push(commands.macro(name, blocks))\r\n}\r\n\r\nvar parse = function(parser, block) {\r\n  // if comment or object attribute return\r\n  if (RE_COMMENT.test(block) || RE_TO.test(block)) {\r\n    return\r\n  }\r\n\r\n  if (block === 'M02') {\r\n    return parser._push(commands.done())\r\n  }\r\n\r\n  if (RE_REGION.test(block)) {\r\n    var regionMatch = block.match(RE_REGION)[1]\r\n    var region = regionMatch === '6'\r\n    return parser._push(commands.set('region', region))\r\n  }\r\n\r\n  if (RE_ARC.test(block)) {\r\n    var arcMatch = block.match(RE_ARC)[1]\r\n    var arc = arcMatch === '4' ? 's' : 'm'\r\n    return parser._push(commands.set('arc', arc))\r\n  }\r\n\r\n  if (RE_UNITS.test(block)) {\r\n    var unitsMatch = block.match(RE_UNITS)[1]\r\n    return parseUnits(parser, unitsMatch)\r\n  }\r\n\r\n  if (RE_BKP_UNITS.test(block)) {\r\n    var bkpUnitsMatch = block.match(RE_BKP_UNITS)[1]\r\n    var backupUnits = bkpUnitsMatch === '0' ? 'in' : 'mm'\r\n    return parser._push(commands.set('backupUnits', backupUnits))\r\n  }\r\n\r\n  if (RE_FORMAT.test(block)) {\r\n    var formatMatch = block.match(RE_FORMAT)\r\n    var zero = formatMatch[1]\r\n    var nota = formatMatch[2]\r\n    var unknown = formatMatch[3]\r\n    var leading = Number(formatMatch[4])\r\n    var trailing = Number(formatMatch[5])\r\n    var format = parser.format\r\n\r\n    format.zero = format.zero || zero\r\n    if (!format.places) {\r\n      format.places = [leading, trailing]\r\n    }\r\n\r\n    // warn if zero suppression missing or set to trailing\r\n    if (!format.zero) {\r\n      format.zero = 'L'\r\n      parser._warn('zero suppression missing from format; assuming leading')\r\n    } else if (format.zero === 'T') {\r\n      parser._warn('trailing zero suppression has been deprecated')\r\n    }\r\n\r\n    // warn if there were unknown characters in the format spec\r\n    if (unknown) {\r\n      parser._warn(\r\n        'unknown characters \"' + unknown + '\" in \"' + block + '\" were ignored'\r\n      )\r\n    }\r\n\r\n    var epsilon = 1.5 * Math.pow(10, -format.places[1])\r\n    parser._push(commands.set('nota', nota))\r\n    parser._push(commands.set('epsilon', epsilon))\r\n\r\n    if (RE_CADENCE_ALLEGRO_UNITS_IN_FORMAT.test(block)) {\r\n      var caUnitsMatch = block.match(RE_CADENCE_ALLEGRO_UNITS_IN_FORMAT)[1]\r\n      parseUnits(parser, caUnitsMatch)\r\n    }\r\n\r\n    return\r\n  }\r\n\r\n  if (RE_BKP_NOTA.test(block)) {\r\n    var bkpNotaMatch = block.match(RE_BKP_NOTA)[1]\r\n    var backupNota = bkpNotaMatch === '0' ? 'A' : 'I'\r\n    return parser._push(commands.set('backupNota', backupNota))\r\n  }\r\n\r\n  if (RE_POLARITY.test(block)) {\r\n    var polarity = block.match(RE_POLARITY)[1]\r\n    return parser._push(commands.level('polarity', polarity))\r\n  }\r\n\r\n  if (RE_STEP_REP.test(block)) {\r\n    var stepRepeatMatch = block.match(RE_STEP_REP)\r\n    var x = stepRepeatMatch[1] || 1\r\n    var y = stepRepeatMatch[2] || 1\r\n    var i = stepRepeatMatch[3] || 0\r\n    var j = stepRepeatMatch[4] || 0\r\n    var sr = {x: Number(x), y: Number(y), i: Number(i), j: Number(j)}\r\n    return parser._push(commands.level('stepRep', sr))\r\n  }\r\n\r\n  if (RE_TOOL.test(block)) {\r\n    var tool = block.match(RE_TOOL)[1]\r\n    return parser._push(commands.set('tool', tool))\r\n  }\r\n\r\n  if (RE_TOOL_DEF.test(block)) {\r\n    return parseToolDef(parser, block)\r\n  }\r\n\r\n  if (RE_MACRO.test(block)) {\r\n    return parseMacroDef(parser, block)\r\n  }\r\n\r\n  // finally, look for mode commands and operations\r\n  // they may appear in the same block\r\n  if (RE_OP.test(block) || RE_MODE.test(block) || RE_COORD.test(block)) {\r\n    var opMatch = block.match(RE_OP)\r\n    var modeMatch = block.match(RE_MODE)\r\n    var coordMatch = block.match(RE_COORD)\r\n    var mode\r\n\r\n    if (modeMatch) {\r\n      if (modeMatch[1] === '1') {\r\n        mode = 'i'\r\n      } else if (modeMatch[1] === '2') {\r\n        mode = 'cw'\r\n      } else {\r\n        mode = 'ccw'\r\n      }\r\n\r\n      parser._push(commands.set('mode', mode))\r\n    }\r\n\r\n    if (opMatch || coordMatch) {\r\n      var opCode = opMatch ? opMatch[1] : ''\r\n      var coordString = coordMatch ? coordMatch[1] : ''\r\n      var coord = parseCoord.parse(coordString, parser.format)\r\n\r\n      var op = 'last'\r\n      if (opCode === '1') {\r\n        op = 'int'\r\n      } else if (opCode === '2') {\r\n        op = 'move'\r\n      } else if (opCode === '3') {\r\n        op = 'flash'\r\n      }\r\n\r\n      parser._push(commands.op(op, coord))\r\n    }\r\n\r\n    return\r\n  }\r\n\r\n  // if we reach here the block was unhandled, so warn if it is not empty\r\n  return parser._warn(\r\n    'block \"' + block + '\" was not recognized and was ignored'\r\n  )\r\n}\r\n\r\nmodule.exports = parse\r\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe23',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20f0',\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboMarksRange + rsComboSymbolsRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboMarksRange + rsComboSymbolsRange + rsVarRange + ']');\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the size of an ASCII `string`.\n *\n * @private\n * @param {string} string The string inspect.\n * @returns {number} Returns the string size.\n */\nvar asciiSize = baseProperty('length');\n\n/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\n/**\n * Gets the number of symbols in `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the string size.\n */\nfunction stringSize(string) {\n  return hasUnicode(string)\n    ? unicodeSize(string)\n    : asciiSize(string);\n}\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\n/**\n * Gets the size of a Unicode `string`.\n *\n * @private\n * @param {string} string The string inspect.\n * @returns {number} Returns the string size.\n */\nfunction unicodeSize(string) {\n  var result = reUnicode.lastIndex = 0;\n  while (reUnicode.test(string)) {\n    result++;\n  }\n  return result;\n}\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeFloor = Math.floor;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.repeat` which doesn't coerce arguments.\n *\n * @private\n * @param {string} string The string to repeat.\n * @param {number} n The number of times to repeat the string.\n * @returns {string} Returns the repeated string.\n */\nfunction baseRepeat(string, n) {\n  var result = '';\n  if (!string || n < 1 || n > MAX_SAFE_INTEGER) {\n    return result;\n  }\n  // Leverage the exponentiation by squaring algorithm for a faster repeat.\n  // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n  do {\n    if (n % 2) {\n      result += string;\n    }\n    n = nativeFloor(n / 2);\n    if (n) {\n      string += string;\n    }\n  } while (n);\n\n  return result;\n}\n\n/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\n/**\n * Creates the padding for `string` based on `length`. The `chars` string\n * is truncated if the number of characters exceeds `length`.\n *\n * @private\n * @param {number} length The padding length.\n * @param {string} [chars=' '] The string used as padding.\n * @returns {string} Returns the padding for `string`.\n */\nfunction createPadding(length, chars) {\n  chars = chars === undefined ? ' ' : baseToString(chars);\n\n  var charsLength = chars.length;\n  if (charsLength < 2) {\n    return charsLength ? baseRepeat(chars, length) : chars;\n  }\n  var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));\n  return hasUnicode(chars)\n    ? castSlice(stringToArray(result), 0, length).join('')\n    : result.slice(0, length);\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Pads `string` on the left side if it's shorter than `length`. Padding\n * characters are truncated if they exceed `length`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to pad.\n * @param {number} [length=0] The padding length.\n * @param {string} [chars=' '] The string used as padding.\n * @returns {string} Returns the padded string.\n * @example\n *\n * _.padStart('abc', 6);\n * // => '   abc'\n *\n * _.padStart('abc', 6, '_-');\n * // => '_-_abc'\n *\n * _.padStart('abc', 3);\n * // => 'abc'\n */\nfunction padStart(string, length, chars) {\n  string = toString(string);\n  length = toInteger(length);\n\n  var strLength = length ? stringSize(string) : 0;\n  return (length && strLength < length)\n    ? (createPadding(length - strLength, chars) + string)\n    : string;\n}\n\nmodule.exports = padStart;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe23',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20f0',\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboMarksRange + rsComboSymbolsRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboMarksRange + rsComboSymbolsRange + rsVarRange + ']');\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the size of an ASCII `string`.\n *\n * @private\n * @param {string} string The string inspect.\n * @returns {number} Returns the string size.\n */\nvar asciiSize = baseProperty('length');\n\n/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\n/**\n * Gets the number of symbols in `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the string size.\n */\nfunction stringSize(string) {\n  return hasUnicode(string)\n    ? unicodeSize(string)\n    : asciiSize(string);\n}\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\n/**\n * Gets the size of a Unicode `string`.\n *\n * @private\n * @param {string} string The string inspect.\n * @returns {number} Returns the string size.\n */\nfunction unicodeSize(string) {\n  var result = reUnicode.lastIndex = 0;\n  while (reUnicode.test(string)) {\n    result++;\n  }\n  return result;\n}\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeFloor = Math.floor;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.repeat` which doesn't coerce arguments.\n *\n * @private\n * @param {string} string The string to repeat.\n * @param {number} n The number of times to repeat the string.\n * @returns {string} Returns the repeated string.\n */\nfunction baseRepeat(string, n) {\n  var result = '';\n  if (!string || n < 1 || n > MAX_SAFE_INTEGER) {\n    return result;\n  }\n  // Leverage the exponentiation by squaring algorithm for a faster repeat.\n  // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n  do {\n    if (n % 2) {\n      result += string;\n    }\n    n = nativeFloor(n / 2);\n    if (n) {\n      string += string;\n    }\n  } while (n);\n\n  return result;\n}\n\n/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\n/**\n * Creates the padding for `string` based on `length`. The `chars` string\n * is truncated if the number of characters exceeds `length`.\n *\n * @private\n * @param {number} length The padding length.\n * @param {string} [chars=' '] The string used as padding.\n * @returns {string} Returns the padding for `string`.\n */\nfunction createPadding(length, chars) {\n  chars = chars === undefined ? ' ' : baseToString(chars);\n\n  var charsLength = chars.length;\n  if (charsLength < 2) {\n    return charsLength ? baseRepeat(chars, length) : chars;\n  }\n  var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));\n  return hasUnicode(chars)\n    ? castSlice(stringToArray(result), 0, length).join('')\n    : result.slice(0, length);\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Pads `string` on the right side if it's shorter than `length`. Padding\n * characters are truncated if they exceed `length`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to pad.\n * @param {number} [length=0] The padding length.\n * @param {string} [chars=' '] The string used as padding.\n * @returns {string} Returns the padded string.\n * @example\n *\n * _.padEnd('abc', 6);\n * // => 'abc   '\n *\n * _.padEnd('abc', 6, '_-');\n * // => 'abc_-_'\n *\n * _.padEnd('abc', 3);\n * // => 'abc'\n */\nfunction padEnd(string, length, chars) {\n  string = toString(string);\n  length = toInteger(length);\n\n  var strLength = length ? stringSize(string) : 0;\n  return (length && strLength < length)\n    ? (string + createPadding(length - strLength, chars))\n    : string;\n}\n\nmodule.exports = padEnd;\n","// function to parse a macro block into a primitive object\r\n'use strict'\r\n\r\nvar parseMacroExpr = require('./_parse-macro-expression')\r\n\r\nvar RE_NUM = /^-?[\\d.]+$/\r\nvar RE_VAR_DEF = /^(\\$[\\d+])=(.+)/\r\n\r\nvar parseMacroBlock = function(parser, block) {\r\n  // check first for a comment\r\n  if (block[0] === '0') {\r\n    return {type: 'comment'}\r\n  }\r\n\r\n  // variable definition\r\n  if (RE_VAR_DEF.test(block)) {\r\n    var varDefMatch = block.match(RE_VAR_DEF)\r\n    var varName = varDefMatch[1]\r\n    var varExpr = varDefMatch[2]\r\n    var evaluate = parseMacroExpr(parser, varExpr)\r\n\r\n    var setMods = function(mods) {\r\n      mods[varName] = evaluate(mods)\r\n\r\n      return mods\r\n    }\r\n    return {type: 'variable', set: setMods}\r\n  }\r\n\r\n  // map a primitive param to a number or, if an expression, a function\r\n  var modVal = function(m) {\r\n    if (RE_NUM.test(m)) {\r\n      return Number(m)\r\n    }\r\n    return parseMacroExpr(parser, m)\r\n  }\r\n\r\n  var mods = block.split(',').map(modVal)\r\n  var code = mods[0]\r\n  var exp = mods[1]\r\n\r\n  // circle primitive\r\n  if (code === 1) {\r\n    return {\r\n      type: 'circle',\r\n      exp: exp,\r\n      dia: mods[2],\r\n      cx: mods[3],\r\n      cy: mods[4],\r\n      // handle optional rotation with circle primitives\r\n      rot: mods[5] || 0,\r\n    }\r\n  }\r\n\r\n  // vector primitive\r\n  if (code === 2) {\r\n    parser._warn('macro aperture vector primitives with code 2 are deprecated')\r\n  }\r\n\r\n  if (code === 2 || code === 20) {\r\n    return {\r\n      type: 'vect',\r\n      exp: exp,\r\n      width: mods[2],\r\n      x1: mods[3],\r\n      y1: mods[4],\r\n      x2: mods[5],\r\n      y2: mods[6],\r\n      rot: mods[7],\r\n    }\r\n  }\r\n\r\n  // center rectangle\r\n  if (code === 21) {\r\n    return {\r\n      type: 'rect',\r\n      exp: exp,\r\n      width: mods[2],\r\n      height: mods[3],\r\n      cx: mods[4],\r\n      cy: mods[5],\r\n      rot: mods[6],\r\n    }\r\n  }\r\n\r\n  if (code === 22) {\r\n    parser._warn(\r\n      'macro aperture lower-left rectangle primitives are deprecated'\r\n    )\r\n    return {\r\n      type: 'rectLL',\r\n      exp: exp,\r\n      width: mods[2],\r\n      height: mods[3],\r\n      x: mods[4],\r\n      y: mods[5],\r\n      rot: mods[6],\r\n    }\r\n  }\r\n\r\n  if (code === 4) {\r\n    return {\r\n      type: 'outline',\r\n      exp: exp,\r\n      points: mods.slice(3, -1),\r\n      rot: mods[mods.length - 1],\r\n    }\r\n  }\r\n\r\n  if (code === 5) {\r\n    return {\r\n      type: 'poly',\r\n      exp: exp,\r\n      vertices: mods[2],\r\n      cx: mods[3],\r\n      cy: mods[4],\r\n      dia: mods[5],\r\n      rot: mods[6],\r\n    }\r\n  }\r\n\r\n  if (code === 6) {\r\n    // moire primitive always has exposure on\r\n    return {\r\n      type: 'moire',\r\n      exp: 1,\r\n      cx: mods[1],\r\n      cy: mods[2],\r\n      dia: mods[3],\r\n      ringThx: mods[4],\r\n      ringGap: mods[5],\r\n      maxRings: mods[6],\r\n      crossThx: mods[7],\r\n      crossLen: mods[8],\r\n      rot: mods[9],\r\n    }\r\n  }\r\n\r\n  if (code === 7) {\r\n    // thermal primitive always had exposure on\r\n    return {\r\n      type: 'thermal',\r\n      exp: 1,\r\n      cx: mods[1],\r\n      cy: mods[2],\r\n      outerDia: mods[3],\r\n      innerDia: mods[4],\r\n      gap: mods[5],\r\n      rot: mods[6],\r\n    }\r\n  } else {\r\n    parser._warn(code + ' is an unrecognized primitive for a macro aperture')\r\n  }\r\n}\r\n\r\nmodule.exports = parseMacroBlock\r\n","// parse a macro expression and return a function that takes mods\r\n'use strict'\r\n\r\nvar RE_OP = /[+\\-/xX()]/\r\nvar RE_NUMBER = /[$\\d.]+/\r\nvar RE_TOKEN = new RegExp([RE_OP.source, RE_NUMBER.source].join('|'), 'g')\r\n\r\nmodule.exports = function parseMacroExpression(parser, expr) {\r\n  // tokenize the expression\r\n  var tokens = expr.match(RE_TOKEN)\r\n\r\n  // forward declare parse expression\r\n  var parseExpression\r\n\r\n  // primary tokens are numbers and parentheses\r\n  var parsePrimary = function() {\r\n    var t = tokens.shift()\r\n    var exp\r\n\r\n    if (RE_NUMBER.test(t)) {\r\n      exp = {type: 'n', val: t}\r\n    } else {\r\n      exp = parseExpression()\r\n      tokens.shift()\r\n    }\r\n    return exp\r\n  }\r\n\r\n  // parse multiplication and division tokens\r\n  var parseMultiplication = function() {\r\n    var exp = parsePrimary()\r\n    var t = tokens[0]\r\n\r\n    if (t === 'X') {\r\n      parser._warn(\"multiplication in macros should use 'x', not 'X'\")\r\n      t = 'x'\r\n    }\r\n    while (t === 'x' || t === '/') {\r\n      tokens.shift()\r\n      var right = parsePrimary()\r\n      exp = {type: t, left: exp, right: right}\r\n      t = tokens[0]\r\n    }\r\n    return exp\r\n  }\r\n\r\n  // parse addition and subtraction tokens\r\n  parseExpression = function() {\r\n    var exp = parseMultiplication()\r\n    var t = tokens[0]\r\n    while (t === '+' || t === '-') {\r\n      tokens.shift()\r\n      var right = parseMultiplication()\r\n      exp = {type: t, left: exp, right: right}\r\n      t = tokens[0]\r\n    }\r\n    return exp\r\n  }\r\n\r\n  // parse the expression string into a binary tree\r\n  var tree = parseExpression()\r\n\r\n  // evalute by recursively traversing the tree\r\n  var evaluate = function(op, mods) {\r\n    var getValue = function(t) {\r\n      if (t[0] === '$') {\r\n        return Number(mods[t])\r\n      }\r\n      return Number(t)\r\n    }\r\n\r\n    var type = op.type\r\n    if (type === 'n') {\r\n      return getValue(op.val)\r\n    }\r\n    if (type === '+') {\r\n      return evaluate(op.left, mods) + evaluate(op.right, mods)\r\n    }\r\n    if (type === '-') {\r\n      return evaluate(op.left, mods) - evaluate(op.right, mods)\r\n    }\r\n    if (type === 'x') {\r\n      return evaluate(op.left, mods) * evaluate(op.right, mods)\r\n    }\r\n    // else division\r\n    return evaluate(op.left, mods) / evaluate(op.right, mods)\r\n  }\r\n\r\n  // return the evaluation function bound to the parsed expression tree\r\n  return function(mods) {\r\n    return evaluate(tree, mods)\r\n  }\r\n}\r\n","// parse drill function\r\n// takes a parser transform stream and a block string\r\n'use strict'\r\n\r\nvar numIsFinite = require('lodash.isfinite')\r\n\r\nvar commands = require('./_commands')\r\nvar drillMode = require('./_drill-mode')\r\nvar normalize = require('./normalize-coord')\r\nvar parseCoord = require('./parse-coord')\r\n\r\nvar RE_ALTIUM_HINT = /;FILE_FORMAT=(\\d):(\\d)/\r\nvar RE_ALTIUM_PLATING_HINT = /;TYPE=(PLATED|NON_PLATED)/\r\nvar RE_KI_HINT = /;FORMAT={(.):(.)\\/ (absolute|.+)? \\/ (metric|inch) \\/.+(trailing|leading|decimal|keep)/\r\n\r\nvar RE_UNITS = /^(INCH|METRIC|M71|M72)/\r\nvar RE_ZERO = /,([TL])Z/\r\nvar RE_FORMAT = /,(0{1,8})\\.(0{1,8})/\r\nvar RE_TOOL_DEF = /T0*(\\d+)[\\S]*C([\\d.]+)/\r\nvar RE_TOOL_SET = /T0*(\\d+)(?![\\S]*C)/\r\nvar RE_COORD = /((?:[XYIJA][+-]?[\\d.]+){1,4})(?:G85((?:[XY][+-]?[\\d.]+){1,2}))?/\r\nvar RE_ROUTE = /^G0([01235])/\r\n\r\nvar parseCommentForFormatHints = function(parser, block, line) {\r\n  var result = {}\r\n\r\n  if (RE_KI_HINT.test(block)) {\r\n    var kicadMatch = block.match(RE_KI_HINT)\r\n    var leading = Number(kicadMatch[1])\r\n    var trailing = Number(kicadMatch[2])\r\n    var absolute = kicadMatch[3]\r\n    var unitSet = kicadMatch[4]\r\n    var suppressionSet = kicadMatch[5]\r\n\r\n    // set format if we got numbers\r\n    if (numIsFinite(leading) && numIsFinite(trailing)) {\r\n      result.places = [leading, trailing]\r\n    }\r\n\r\n    // send backup notation\r\n    if (absolute === 'absolute') {\r\n      parser._push(commands.set('backupNota', 'A', line))\r\n    } else {\r\n      parser._push(commands.set('backupNota', 'I', line))\r\n    }\r\n\r\n    // send units\r\n    if (unitSet === 'metric') {\r\n      parser._push(commands.set('backupUnits', 'mm', line))\r\n    } else {\r\n      parser._push(commands.set('backupUnits', 'in', line))\r\n    }\r\n\r\n    // set zero suppression\r\n    if (suppressionSet === 'leading' || suppressionSet === 'keep') {\r\n      result.zero = 'L'\r\n    } else if (suppressionSet === 'trailing') {\r\n      result.zero = 'T'\r\n    } else {\r\n      result.zero = 'D'\r\n    }\r\n  } else if (RE_ALTIUM_HINT.test(block)) {\r\n    // check for altium format hints if the format is not already set\r\n    var altiumMatch = block.match(RE_ALTIUM_HINT)\r\n\r\n    result.places = [Number(altiumMatch[1]), Number(altiumMatch[2])]\r\n  } else if (RE_ALTIUM_PLATING_HINT.test(block)) {\r\n    var platingMatch = block.match(RE_ALTIUM_PLATING_HINT)\r\n    var holePlating = platingMatch[1] === 'PLATED' ? 'pth' : 'npth'\r\n    parser._push(commands.set('holePlating', holePlating, line))\r\n  }\r\n\r\n  return result\r\n}\r\n\r\nvar parseUnits = function(parser, block, line) {\r\n  var unitsMatch = block.match(RE_UNITS)\r\n  var zeroMatch = block.match(RE_ZERO)\r\n  var formatMatch = block.match(RE_FORMAT)\r\n  var units =\r\n    unitsMatch[1] === 'METRIC' || unitsMatch[1] === 'M71' ? 'mm' : 'in'\r\n\r\n  var keep = zeroMatch && zeroMatch[1]\r\n\r\n  if (parser.format.zero == null && keep) {\r\n    // flip drill keep to gerber suppression\r\n    parser.format.zero = keep === 'T' ? 'L' : 'T'\r\n  }\r\n\r\n  if (parser.format.places == null) {\r\n    if (formatMatch) {\r\n      parser.format.places = [formatMatch[1].length, formatMatch[2].length]\r\n    } else {\r\n      // by default, use 2.4 for inches and 3.3 for mm\r\n      parser.format.places = units === 'in' ? [2, 4] : [3, 3]\r\n    }\r\n  }\r\n\r\n  parser._push(commands.set('units', units, line))\r\n}\r\n\r\nvar coordToCommand = function(parser, block, line) {\r\n  var coordMatch = block.match(RE_COORD)\r\n  var coord = parseCoord.parse(coordMatch[1], parser.format)\r\n\r\n  // if there's another match, then it was a slot\r\n  if (coordMatch[2]) {\r\n    parser._push(commands.op('move', coord, line))\r\n    parser._push(commands.set('mode', 'i', line))\r\n    coord = parseCoord.parse(coordMatch[2], parser.format)\r\n\r\n    return parser._push(commands.op('int', coord, line))\r\n  }\r\n\r\n  // get the drill mode if a route command is present\r\n  if (RE_ROUTE.test(block)) {\r\n    parser._drillMode = block.match(RE_ROUTE)[1]\r\n  }\r\n\r\n  switch (parser._drillMode) {\r\n    case drillMode.DRILL:\r\n      return parser._push(commands.op('flash', coord, line))\r\n\r\n    case drillMode.MOVE:\r\n      return parser._push(commands.op('move', coord, line))\r\n\r\n    case drillMode.LINEAR:\r\n      parser._push(commands.set('mode', 'i', line))\r\n      return parser._push(commands.op('int', coord, line))\r\n\r\n    case drillMode.CW_ARC:\r\n      parser._push(commands.set('mode', 'cw', line))\r\n      return parser._push(commands.op('int', coord, line))\r\n\r\n    case drillMode.CCW_ARC:\r\n      parser._push(commands.set('mode', 'ccw', line))\r\n      return parser._push(commands.op('int', coord, line))\r\n  }\r\n}\r\n\r\nvar parseBlock = function(parser, block, line) {\r\n  if (RE_TOOL_DEF.test(block)) {\r\n    var toolMatch = block.match(RE_TOOL_DEF)\r\n    var toolCode = toolMatch[1]\r\n    var toolDia = normalize(toolMatch[2])\r\n    var toolDef = {shape: 'circle', params: [toolDia], hole: []}\r\n\r\n    return parser._push(commands.tool(toolCode, toolDef, line))\r\n  }\r\n\r\n  // tool set\r\n  if (RE_TOOL_SET.test(block)) {\r\n    var toolSet = block.match(RE_TOOL_SET)[1]\r\n\r\n    // allow tool set to fall through because it can happen on the\r\n    // same line as a coordinate operation\r\n    parser._push(commands.set('tool', toolSet, line))\r\n  }\r\n\r\n  if (RE_COORD.test(block)) {\r\n    if (!parser.format.places) {\r\n      parser.format.places = [2, 4]\r\n      parser._warn('places format missing; assuming [2, 4]')\r\n    }\r\n\r\n    if (!parser.format.zero) {\r\n      parser.format.zero = 'T'\r\n      parser._warn('zero suppression missing; assuming trailing suppression')\r\n    }\r\n\r\n    return coordToCommand(parser, block, line)\r\n  }\r\n\r\n  if (block === 'M00' || block === 'M30') {\r\n    return parser._push(commands.done(line))\r\n  }\r\n\r\n  if (block === 'G90') {\r\n    return parser._push(commands.set('nota', 'A', line))\r\n  }\r\n\r\n  if (block === 'G91') {\r\n    return parser._push(commands.set('nota', 'I', line))\r\n  }\r\n\r\n  if (RE_UNITS.test(block)) {\r\n    return parseUnits(parser, block, line)\r\n  }\r\n}\r\n\r\nvar flush = function(parser) {\r\n  parser._drillStash.forEach(function(data) {\r\n    parseBlock(parser, data.block, data.line)\r\n  })\r\n  parser._drillStash = []\r\n}\r\n\r\nvar parse = function(parser, block) {\r\n  if (block[0] === ';') {\r\n    // if comment, parse it for formatting hints\r\n    var formatHints = parseCommentForFormatHints(parser, block, parser.line)\r\n\r\n    Object.keys(formatHints).forEach(function(key) {\r\n      if (!parser.format[key]) {\r\n        parser.format[key] = formatHints[key]\r\n      }\r\n    })\r\n  } else if (!parser.format.zero) {\r\n    // else if we don't have zero suppress yet, attempt to detect it\r\n    parser._drillStash.push({line: parser.line, block: block})\r\n\r\n    if (RE_COORD.test(block)) {\r\n      parser.format.zero = parseCoord.detectZero(block)\r\n\r\n      if (parser.format.zero) {\r\n        parser._warn(\r\n          'zero suppression missing; detected ' +\r\n            (parser.format.zero === 'L' ? 'leading' : 'trailing') +\r\n            ' suppression'\r\n        )\r\n      }\r\n    }\r\n\r\n    if (\r\n      parser.format.zero ||\r\n      RE_ZERO.test(block) ||\r\n      parser._drillStash.length >= 1000\r\n    ) {\r\n      flush(parser)\r\n    }\r\n  } else {\r\n    // else just parse the block like normal\r\n    parseBlock(parser, block, parser.line)\r\n  }\r\n}\r\n\r\nmodule.exports = {parse: parse, flush: flush}\r\n","// simple warning class to be emitted when something questionable in the gerber is found\r\n'use strict'\r\n\r\nvar warning = function(message, line) {\r\n  return {message: message, line: line}\r\n}\r\n\r\nmodule.exports = warning\r\n","// gerber-plotter factory\r\n'use strict'\r\n\r\nvar Plotter = require('./lib/plotter')\r\n\r\nvar verifyNota = function(nota) {\r\n  if (nota === 'A' || nota === 'I') {\r\n    return nota\r\n  }\r\n\r\n  throw new Error('notation must be \"in\" or \"mm\"')\r\n}\r\n\r\nvar verifyUnits = function(units) {\r\n  if (units === 'in' || units === 'mm') {\r\n    return units\r\n  }\r\n\r\n  throw new Error('units must be \"in\" or \"mm\"')\r\n}\r\n\r\nmodule.exports = function plotterFactory(options) {\r\n  options = options || {}\r\n\r\n  var units = options.units ? verifyUnits(options.units) : null\r\n  var backupUnits = options.backupUnits\r\n    ? verifyUnits(options.backupUnits)\r\n    : null\r\n\r\n  var nota = options.nota ? verifyNota(options.nota) : null\r\n  var backupNota = options.backupNota ? verifyNota(options.backupNota) : null\r\n\r\n  return new Plotter(\r\n    units,\r\n    backupUnits,\r\n    nota,\r\n    backupNota,\r\n    options.optimizePaths,\r\n    options.plotAsOutline\r\n  )\r\n}\r\n","// gerber plotter\r\n'use strict'\r\n\r\nvar Transform = require('readable-stream').Transform\r\nvar inherits = require('inherits')\r\n\r\nvar PathGraph = require('./path-graph')\r\nvar warning = require('./_warning')\r\nvar padShape = require('./_pad-shape')\r\nvar operate = require('./_operate')\r\nvar boundingBox = require('./_box')\r\n\r\nvar MAX_GAP = 0.00011\r\n\r\nvar isFormatKey = function(key) {\r\n  return (\r\n    key === 'units' ||\r\n    key === 'backupUnits' ||\r\n    key === 'nota' ||\r\n    key === 'backupNota'\r\n  )\r\n}\r\n\r\nvar Plotter = function(\r\n  units,\r\n  backupUnits,\r\n  nota,\r\n  backupNota,\r\n  optimizePaths,\r\n  plotAsOutline\r\n) {\r\n  Transform.call(this, {\r\n    readableObjectMode: true,\r\n    writableObjectMode: true,\r\n  })\r\n\r\n  this.format = {\r\n    units: units,\r\n    backupUnits: backupUnits || 'in',\r\n    nota: nota,\r\n    backupNota: backupNota || 'A',\r\n  }\r\n\r\n  this._formatLock = {\r\n    units: units != null,\r\n    backupUnits: backupUnits != null,\r\n    nota: nota != null,\r\n    backupNota: backupNota != null,\r\n  }\r\n\r\n  this._plotAsOutline = plotAsOutline === true ? MAX_GAP : plotAsOutline\r\n\r\n  // plotAsOutline parameter is always in mm\r\n  if ((units || this.format.backupUnits) === 'in') {\r\n    this._plotAsOutline = this._plotAsOutline / 25.4\r\n  }\r\n\r\n  this._optimizePaths = optimizePaths || plotAsOutline\r\n\r\n  this._line = 0\r\n  this._done = false\r\n  this._tool = null\r\n  this._outTool = null\r\n  this._tools = {}\r\n  this._macros = {}\r\n  this._pos = [0, 0]\r\n  this._box = boundingBox.new()\r\n  this._mode = null\r\n  this._arc = null\r\n  this._region = false\r\n  this._path = new PathGraph(this._optimizePaths, this._plotAsOutline)\r\n  this._epsilon = null\r\n  this._lastOp = null\r\n  this._stepRep = []\r\n}\r\n\r\ninherits(Plotter, Transform)\r\n\r\nPlotter.prototype._finishPath = function(doNotOptimize) {\r\n  var path = this._path.traverse()\r\n  this._path = new PathGraph(\r\n    !doNotOptimize && this._optimizePaths,\r\n    this._plotAsOutline\r\n  )\r\n\r\n  if (path.length) {\r\n    // check for outline tool\r\n    var tool = !this._plotAsOutline ? this._tool : this._outTool\r\n\r\n    if (!this._region && tool.trace.length === 1) {\r\n      this.push({type: 'stroke', width: tool.trace[0], path: path})\r\n    } else {\r\n      this.push({type: 'fill', path: path})\r\n    }\r\n  }\r\n}\r\n\r\nPlotter.prototype._warn = function(message) {\r\n  this.emit('warning', warning(message, this._line))\r\n}\r\n\r\nPlotter.prototype._checkFormat = function() {\r\n  if (!this.format.units) {\r\n    this.format.units = this.format.backupUnits\r\n    this._warn('units not set; using backup units: ' + this.format.units)\r\n  }\r\n\r\n  if (!this.format.nota) {\r\n    this.format.nota = this.format.backupNota\r\n    this._warn('notation not set; using backup notation: ' + this.format.nota)\r\n  }\r\n}\r\n\r\nPlotter.prototype._updateBox = function(box) {\r\n  var stepRepLen = this._stepRep.length\r\n  if (!stepRepLen) {\r\n    this._box = boundingBox.add(this._box, box)\r\n  } else {\r\n    var repeatBox = boundingBox.repeat(box, this._stepRep[stepRepLen - 1])\r\n    this._box = boundingBox.add(this._box, repeatBox)\r\n  }\r\n}\r\n\r\nPlotter.prototype._transform = function(chunk, encoding, done) {\r\n  var type = chunk.type\r\n  this._line = chunk.line\r\n\r\n  if (this._done) {\r\n    this._warn('ignoring extra command recieved after done command')\r\n\r\n    return done()\r\n  }\r\n\r\n  // check for an operation\r\n  if (type === 'op') {\r\n    this._checkFormat()\r\n\r\n    var op = chunk.op\r\n    var coord = chunk.coord\r\n\r\n    if (this.nota === 'I') {\r\n      var _this = this\r\n\r\n      coord = Object.keys(coord).reduce(function(result, key) {\r\n        var value = coord[key]\r\n\r\n        if (key === 'x') {\r\n          result[key] = _this._pos[0] + value\r\n        } else if (key === 'y') {\r\n          result[key] = _this._pos[1] + value\r\n        } else {\r\n          result[key] = value\r\n        }\r\n\r\n        return result\r\n      }, {})\r\n    }\r\n\r\n    if (op === 'last') {\r\n      this._warn('modal operation commands are deprecated')\r\n      op = this._lastOp\r\n    }\r\n\r\n    if (op === 'int') {\r\n      if (this._mode == null) {\r\n        this._warn('no interpolation mode specified; assuming linear')\r\n        this._mode = 'i'\r\n      }\r\n\r\n      if (this._arc == null && this._mode.slice(-2) === 'cw' && !coord.a) {\r\n        this._warn('quadrant mode unspecified; assuming single quadrant')\r\n        this._arc = 's'\r\n      }\r\n    }\r\n\r\n    if (this._plotAsOutline) {\r\n      this._outTool = this._tool\r\n    }\r\n\r\n    var result = operate(\r\n      op,\r\n      coord,\r\n      this._pos,\r\n      this._tool,\r\n      this._mode,\r\n      this._arc,\r\n      this._region || this._plotAsOutline,\r\n      this._path,\r\n      this._epsilon,\r\n      this\r\n    )\r\n\r\n    this._lastOp = op\r\n    this._pos = result.pos\r\n    this._updateBox(result.box)\r\n  } else if (type === 'set') {\r\n    var prop = chunk.prop\r\n    var value = chunk.value\r\n\r\n    // if region change, finish the path\r\n    if (prop === 'region') {\r\n      this._finishPath(value)\r\n      this._region = value\r\n    } else if (isFormatKey(prop) && !this._formatLock[prop]) {\r\n      // else we might need to set the format\r\n      this.format[prop] = value\r\n      if (prop === 'units' || prop === 'nota') {\r\n        this._formatLock[prop] = true\r\n      }\r\n    } else if (prop === 'tool') {\r\n      // else if we're dealing with a tool change, finish the path and change\r\n      if (this._region) {\r\n        this._warn('cannot change tool while region mode is on')\r\n      } else if (!this._tools[value]) {\r\n        this._warn('tool ' + value + ' is not defined')\r\n      } else if (!this._outTool) {\r\n        this._finishPath()\r\n        this._tool = this._tools[value]\r\n      }\r\n    } else {\r\n      // else set interpolation or arc mode\r\n      this['_' + prop] = value\r\n    }\r\n  } else if (type === 'tool') {\r\n    // else tool commands\r\n    var code = chunk.code\r\n    var toolDef = chunk.tool\r\n\r\n    if (this._tools[code]) {\r\n      this._warn('tool ' + code + ' is already defined; overwriting definition')\r\n    }\r\n\r\n    var shapeAndBox = padShape(toolDef, this._macros)\r\n    var tool = {\r\n      code: code,\r\n      trace: [],\r\n      pad: shapeAndBox.shape,\r\n      flashed: false,\r\n      box: shapeAndBox.box,\r\n    }\r\n\r\n    if (toolDef.shape === 'circle' || toolDef.shape === 'rect') {\r\n      if (toolDef.hole.length === 0) {\r\n        tool.trace = toolDef.params\r\n      }\r\n    }\r\n\r\n    if (!this._outTool) {\r\n      this._finishPath()\r\n      this._tools[code] = tool\r\n      this._tool = tool\r\n    }\r\n  } else if (type === 'macro') {\r\n    this._macros[chunk.name] = chunk.blocks\r\n  } else if (type === 'level') {\r\n    var level = chunk.level\r\n    var levelValue = chunk.value\r\n\r\n    this._finishPath()\r\n\r\n    if (level === 'polarity') {\r\n      this.push({\r\n        type: 'polarity',\r\n        polarity: levelValue === 'C' ? 'clear' : 'dark',\r\n        box: this._box.slice(0),\r\n      })\r\n    } else {\r\n      // calculate new offsets\r\n      var offsets = []\r\n      if (levelValue.x > 1 || levelValue.y > 1) {\r\n        for (var x = 0; x < levelValue.x; x++) {\r\n          for (var y = 0; y < levelValue.y; y++) {\r\n            offsets.push([x * levelValue.i, y * levelValue.j])\r\n          }\r\n        }\r\n      }\r\n\r\n      this._stepRep = offsets\r\n\r\n      this.push({\r\n        type: 'repeat',\r\n        offsets: this._stepRep.slice(0),\r\n        box: this._box.slice(0),\r\n      })\r\n    }\r\n  } else if (type === 'done') {\r\n    this._done = true\r\n  }\r\n\r\n  return done()\r\n}\r\n\r\nPlotter.prototype._flush = function(done) {\r\n  this._finishPath()\r\n\r\n  this.push({type: 'size', box: this._box, units: this.format.units})\r\n  done()\r\n}\r\n\r\nmodule.exports = Plotter\r\n","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\nexports.finished = require('./lib/internal/streams/end-of-stream.js');\nexports.pipeline = require('./lib/internal/streams/pipeline.js');\n","'use strict';\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _require = require('buffer'),\n    Buffer = _require.Buffer;\n\nvar _require2 = require('util'),\n    inspect = _require2.inspect;\n\nvar custom = inspect && inspect.custom || 'inspect';\n\nfunction copyBuffer(src, target, offset) {\n  Buffer.prototype.copy.call(src, target, offset);\n}\n\nmodule.exports =\n/*#__PURE__*/\nfunction () {\n  function BufferList() {\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  var _proto = BufferList.prototype;\n\n  _proto.push = function push(v) {\n    var entry = {\n      data: v,\n      next: null\n    };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  _proto.unshift = function unshift(v) {\n    var entry = {\n      data: v,\n      next: this.head\n    };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  _proto.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  _proto.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  _proto.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n\n    while (p = p.next) {\n      ret += s + p.data;\n    }\n\n    return ret;\n  };\n\n  _proto.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n\n    return ret;\n  } // Consumes a specified amount of bytes or characters from the buffered data.\n  ;\n\n  _proto.consume = function consume(n, hasStrings) {\n    var ret;\n\n    if (n < this.head.data.length) {\n      // `slice` is the same for buffers and strings.\n      ret = this.head.data.slice(0, n);\n      this.head.data = this.head.data.slice(n);\n    } else if (n === this.head.data.length) {\n      // First chunk is a perfect match.\n      ret = this.shift();\n    } else {\n      // Result spans more than one buffer.\n      ret = hasStrings ? this._getString(n) : this._getBuffer(n);\n    }\n\n    return ret;\n  };\n\n  _proto.first = function first() {\n    return this.head.data;\n  } // Consumes a specified amount of characters from the buffered data.\n  ;\n\n  _proto._getString = function _getString(n) {\n    var p = this.head;\n    var c = 1;\n    var ret = p.data;\n    n -= ret.length;\n\n    while (p = p.next) {\n      var str = p.data;\n      var nb = n > str.length ? str.length : n;\n      if (nb === str.length) ret += str;else ret += str.slice(0, n);\n      n -= nb;\n\n      if (n === 0) {\n        if (nb === str.length) {\n          ++c;\n          if (p.next) this.head = p.next;else this.head = this.tail = null;\n        } else {\n          this.head = p;\n          p.data = str.slice(nb);\n        }\n\n        break;\n      }\n\n      ++c;\n    }\n\n    this.length -= c;\n    return ret;\n  } // Consumes a specified amount of bytes from the buffered data.\n  ;\n\n  _proto._getBuffer = function _getBuffer(n) {\n    var ret = Buffer.allocUnsafe(n);\n    var p = this.head;\n    var c = 1;\n    p.data.copy(ret);\n    n -= p.data.length;\n\n    while (p = p.next) {\n      var buf = p.data;\n      var nb = n > buf.length ? buf.length : n;\n      buf.copy(ret, ret.length - n, 0, nb);\n      n -= nb;\n\n      if (n === 0) {\n        if (nb === buf.length) {\n          ++c;\n          if (p.next) this.head = p.next;else this.head = this.tail = null;\n        } else {\n          this.head = p;\n          p.data = buf.slice(nb);\n        }\n\n        break;\n      }\n\n      ++c;\n    }\n\n    this.length -= c;\n    return ret;\n  } // Make sure the linked list only shows the minimal necessary information.\n  ;\n\n  _proto[custom] = function (_, options) {\n    return inspect(this, _objectSpread({}, options, {\n      // Only inspect one level.\n      depth: 0,\n      // It should not recurse.\n      customInspect: false\n    }));\n  };\n\n  return BufferList;\n}();","'use strict'\n\nvar experimentalWarnings = new Set();\n\nfunction emitExperimentalWarning(feature) {\n  if (experimentalWarnings.has(feature)) return;\n  var msg = feature + ' is an experimental feature. This feature could ' +\n       'change at any time';\n  experimentalWarnings.add(feature);\n  process.emitWarning(msg, 'ExperimentalWarning');\n}\n\nfunction noop() {}\n\nmodule.exports.emitExperimentalWarning = process.emitWarning\n  ? emitExperimentalWarning\n  : noop;\n","'use strict';\n\nvar _Object$setPrototypeO;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar finished = require('./end-of-stream');\n\nvar kLastResolve = Symbol('lastResolve');\nvar kLastReject = Symbol('lastReject');\nvar kError = Symbol('error');\nvar kEnded = Symbol('ended');\nvar kLastPromise = Symbol('lastPromise');\nvar kHandlePromise = Symbol('handlePromise');\nvar kStream = Symbol('stream');\n\nfunction createIterResult(value, done) {\n  return {\n    value: value,\n    done: done\n  };\n}\n\nfunction readAndResolve(iter) {\n  var resolve = iter[kLastResolve];\n\n  if (resolve !== null) {\n    var data = iter[kStream].read(); // we defer if data is null\n    // we can be expecting either 'end' or\n    // 'error'\n\n    if (data !== null) {\n      iter[kLastPromise] = null;\n      iter[kLastResolve] = null;\n      iter[kLastReject] = null;\n      resolve(createIterResult(data, false));\n    }\n  }\n}\n\nfunction onReadable(iter) {\n  // we wait for the next tick, because it might\n  // emit an error with process.nextTick\n  process.nextTick(readAndResolve, iter);\n}\n\nfunction wrapForNext(lastPromise, iter) {\n  return function (resolve, reject) {\n    lastPromise.then(function () {\n      if (iter[kEnded]) {\n        resolve(createIterResult(undefined, true));\n        return;\n      }\n\n      iter[kHandlePromise](resolve, reject);\n    }, reject);\n  };\n}\n\nvar AsyncIteratorPrototype = Object.getPrototypeOf(function () {});\nvar ReadableStreamAsyncIteratorPrototype = Object.setPrototypeOf((_Object$setPrototypeO = {\n  get stream() {\n    return this[kStream];\n  },\n\n  next: function next() {\n    var _this = this;\n\n    // if we have detected an error in the meanwhile\n    // reject straight away\n    var error = this[kError];\n\n    if (error !== null) {\n      return Promise.reject(error);\n    }\n\n    if (this[kEnded]) {\n      return Promise.resolve(createIterResult(undefined, true));\n    }\n\n    if (this[kStream].destroyed) {\n      // We need to defer via nextTick because if .destroy(err) is\n      // called, the error will be emitted via nextTick, and\n      // we cannot guarantee that there is no error lingering around\n      // waiting to be emitted.\n      return new Promise(function (resolve, reject) {\n        process.nextTick(function () {\n          if (_this[kError]) {\n            reject(_this[kError]);\n          } else {\n            resolve(createIterResult(undefined, true));\n          }\n        });\n      });\n    } // if we have multiple next() calls\n    // we will wait for the previous Promise to finish\n    // this logic is optimized to support for await loops,\n    // where next() is only called once at a time\n\n\n    var lastPromise = this[kLastPromise];\n    var promise;\n\n    if (lastPromise) {\n      promise = new Promise(wrapForNext(lastPromise, this));\n    } else {\n      // fast path needed to support multiple this.push()\n      // without triggering the next() queue\n      var data = this[kStream].read();\n\n      if (data !== null) {\n        return Promise.resolve(createIterResult(data, false));\n      }\n\n      promise = new Promise(this[kHandlePromise]);\n    }\n\n    this[kLastPromise] = promise;\n    return promise;\n  }\n}, _defineProperty(_Object$setPrototypeO, Symbol.asyncIterator, function () {\n  return this;\n}), _defineProperty(_Object$setPrototypeO, \"return\", function _return() {\n  var _this2 = this;\n\n  // destroy(err, cb) is a private API\n  // we can guarantee we have that here, because we control the\n  // Readable class this is attached to\n  return new Promise(function (resolve, reject) {\n    _this2[kStream].destroy(null, function (err) {\n      if (err) {\n        reject(err);\n        return;\n      }\n\n      resolve(createIterResult(undefined, true));\n    });\n  });\n}), _Object$setPrototypeO), AsyncIteratorPrototype);\n\nvar createReadableStreamAsyncIterator = function createReadableStreamAsyncIterator(stream) {\n  var _Object$create;\n\n  var iterator = Object.create(ReadableStreamAsyncIteratorPrototype, (_Object$create = {}, _defineProperty(_Object$create, kStream, {\n    value: stream,\n    writable: true\n  }), _defineProperty(_Object$create, kLastResolve, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kLastReject, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kError, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kEnded, {\n    value: stream._readableState.endEmitted,\n    writable: true\n  }), _defineProperty(_Object$create, kHandlePromise, {\n    value: function value(resolve, reject) {\n      var data = iterator[kStream].read();\n\n      if (data) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        resolve(createIterResult(data, false));\n      } else {\n        iterator[kLastResolve] = resolve;\n        iterator[kLastReject] = reject;\n      }\n    },\n    writable: true\n  }), _Object$create));\n  iterator[kLastPromise] = null;\n  finished(stream, function (err) {\n    if (err && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n      var reject = iterator[kLastReject]; // reject if we are waiting for data in the Promise\n      // returned by next() and store the error\n\n      if (reject !== null) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        reject(err);\n      }\n\n      iterator[kError] = err;\n      return;\n    }\n\n    var resolve = iterator[kLastResolve];\n\n    if (resolve !== null) {\n      iterator[kLastPromise] = null;\n      iterator[kLastResolve] = null;\n      iterator[kLastReject] = null;\n      resolve(createIterResult(undefined, true));\n    }\n\n    iterator[kEnded] = true;\n  });\n  stream.on('readable', onReadable.bind(null, iterator));\n  return iterator;\n};\n\nmodule.exports = createReadableStreamAsyncIterator;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\nrequire('inherits')(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n'use strict';\n\nvar eos;\n\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback.apply(void 0, arguments);\n  };\n}\n\nvar _require$codes = require('../../../errors').codes,\n    ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n    ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\n\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\n\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\n\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  var closed = false;\n  stream.on('close', function () {\n    closed = true;\n  });\n  if (eos === undefined) eos = require('./end-of-stream');\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, function (err) {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  var destroyed = false;\n  return function (err) {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true; // request.destroy just do .end - .abort is what we want\n\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\n\nfunction call(fn) {\n  fn();\n}\n\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\n\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\n\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n\n  var callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n\n  var error;\n  var destroys = streams.map(function (stream, i) {\n    var reading = i < streams.length - 1;\n    var writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\n\nmodule.exports = pipeline;","// utilities to create a graph of path segments and traverse that graph\r\n'use strict'\r\n\r\nvar fill = require('lodash.fill')\r\n\r\nvar find = function(collection, condition) {\r\n  var element\r\n  var i\r\n\r\n  for (i = 0; i < collection.length; i++) {\r\n    element = collection[i]\r\n\r\n    if (condition(element)) {\r\n      return element\r\n    }\r\n  }\r\n}\r\n\r\nvar findClosest = function(points, position, fillGaps) {\r\n  var result = points.reduce(\r\n    function(prev, point) {\r\n      var d = distance(position, point.position)\r\n      if (d < fillGaps && d < prev.distance) {\r\n        return {point: point, distance: d}\r\n      }\r\n      return prev\r\n    },\r\n    {point: undefined, distance: Infinity}\r\n  )\r\n\r\n  return result.point\r\n}\r\n\r\nvar distance = function(point, target) {\r\n  return Math.sqrt(\r\n    Math.pow(point[0] - target[0], 2) + Math.pow(point[1] - target[1], 2)\r\n  )\r\n}\r\n\r\nvar pointsEqual = function(point, target) {\r\n  return point[0] === target[0] && point[1] === target[1]\r\n}\r\n\r\nvar lineSegmentsEqual = function(segment, target) {\r\n  return (\r\n    segment.type === 'line' &&\r\n    ((pointsEqual(segment.start, target.start) &&\r\n      pointsEqual(segment.end, target.end)) ||\r\n      (pointsEqual(segment.start, target.end) &&\r\n        pointsEqual(segment.end, target.start)))\r\n  )\r\n}\r\n\r\nvar reverseSegment = function(segment) {\r\n  var reversed = {type: segment.type, start: segment.end, end: segment.start}\r\n\r\n  if (segment.type === 'arc') {\r\n    reversed.center = segment.center\r\n    reversed.radius = segment.radius\r\n    reversed.sweep = segment.sweep\r\n    reversed.dir = segment.dir === 'cw' ? 'ccw' : 'cw'\r\n  }\r\n\r\n  return reversed\r\n}\r\n\r\nvar PathGraph = function(optimize, fillGaps) {\r\n  this._edges = []\r\n  this._optimize = optimize\r\n  this._fillGaps = fillGaps\r\n  this.length = 0\r\n}\r\n\r\nPathGraph.prototype.add = function(newSeg) {\r\n  var edge = {segment: newSeg, start: newSeg.start, end: newSeg.end}\r\n  this._edges.push(edge)\r\n  this.length++\r\n}\r\n\r\nPathGraph.prototype._fillGapsAndOptimize = function() {\r\n  var newSegs = this._edges.map(function(x) {\r\n    return x.segment\r\n  })\r\n  this._edges = []\r\n  this.length = 0\r\n  var points = newSegs.reduce(function(prev, seg) {\r\n    return prev.concat([\r\n      {position: seg.start, edges: []},\r\n      {position: seg.end, edges: []},\r\n    ])\r\n  }, [])\r\n\r\n  var len = newSegs.length\r\n  for (var i = 0; i < len; i++) {\r\n    var newSeg = newSegs[i]\r\n    var start\r\n    var end\r\n    var fillGaps = this._fillGaps\r\n\r\n    var startIndex = i * 2\r\n    var endIndex = startIndex + 1\r\n\r\n    var otherPoints = points\r\n      .slice(0, startIndex)\r\n      .concat(points.slice(endIndex + 1))\r\n\r\n    start = findClosest(otherPoints, newSeg.start, fillGaps)\r\n    end = findClosest(otherPoints, newSeg.end, fillGaps)\r\n\r\n    if (!start) {\r\n      start = {position: newSeg.start, edges: []}\r\n    } else if (fillGaps) {\r\n      newSeg.start = start.position\r\n    }\r\n\r\n    if (!end) {\r\n      end = {position: newSeg.end, edges: []}\r\n    } else if (fillGaps) {\r\n      newSeg.end = end.position\r\n    }\r\n\r\n    // do not allow duplicate line segments\r\n    var existing = find(this._edges, function(edge) {\r\n      return lineSegmentsEqual(edge.segment, newSeg)\r\n    })\r\n\r\n    if (!existing) {\r\n      var newEdgeIndex = this._edges.length\r\n      var edge = {segment: newSeg, start: start, end: end}\r\n\r\n      points[startIndex].edges.push(newEdgeIndex)\r\n      points[startIndex].position = edge.start.position\r\n      points[endIndex].edges.push(newEdgeIndex)\r\n      points[endIndex].position = edge.end.position\r\n\r\n      this._edges.push(edge)\r\n      this.length++\r\n    }\r\n  }\r\n\r\n  // consolidate all the connecting edges to prepare for a depth first\r\n  // traversal. depth first traversal is used so that when converted to an SVG\r\n  // path it retains its shape. see discussion:\r\n  // https://github.com/mcous/gerber-plotter/pull/13\r\n  this._edges.forEach(function(edge) {\r\n    points.forEach(function(point) {\r\n      if (pointsEqual(point.position, edge.start.position)) {\r\n        edge.start.edges = edge.start.edges.concat(point.edges)\r\n      }\r\n      if (pointsEqual(point.position, edge.end.position)) {\r\n        edge.end.edges = edge.end.edges.concat(point.edges)\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nPathGraph.prototype.traverse = function() {\r\n  if (!this._optimize) {\r\n    return this._edges.map(function(edge) {\r\n      return edge.segment\r\n    })\r\n  }\r\n\r\n  this._fillGapsAndOptimize()\r\n\r\n  var walked = fill(Array(this._edges.length), false)\r\n  var discovered = []\r\n  var result = []\r\n\r\n  var current\r\n  var currentEdge\r\n  var currentEnd\r\n  var currentSegment\r\n  var lastEnd = {position: []}\r\n\r\n  while (result.length < this._edges.length) {\r\n    current = walked.indexOf(false)\r\n    discovered.push(current)\r\n\r\n    while (discovered.length) {\r\n      current = discovered.pop()\r\n\r\n      if (!walked[current]) {\r\n        walked[current] = true\r\n        currentEdge = this._edges[current]\r\n        currentEnd = currentEdge.end\r\n\r\n        // reverse segment if necessary\r\n        if (pointsEqual(lastEnd.position, currentEnd.position)) {\r\n          currentSegment = reverseSegment(currentEdge.segment)\r\n          lastEnd = currentEdge.start\r\n        } else {\r\n          currentSegment = currentEdge.segment\r\n          lastEnd = currentEdge.end\r\n        }\r\n\r\n        // add non-walked adjacent nodes to the discovered stack\r\n        lastEnd.edges.reverse().forEach(function(seg) {\r\n          if (!walked[seg]) {\r\n            discovered.push(seg)\r\n          }\r\n        })\r\n\r\n        result.push(currentSegment)\r\n      }\r\n    }\r\n  }\r\n\r\n  return result\r\n}\r\n\r\nmodule.exports = PathGraph\r\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * The base implementation of `_.clamp` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n */\nfunction baseClamp(number, lower, upper) {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n  return number;\n}\n\n/**\n * The base implementation of `_.fill` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to fill.\n * @param {*} value The value to fill `array` with.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns `array`.\n */\nfunction baseFill(array, value, start, end) {\n  var length = array.length;\n\n  start = toInteger(start);\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = (end === undefined || end > length) ? length : toInteger(end);\n  if (end < 0) {\n    end += length;\n  }\n  end = start > end ? 0 : toLength(end);\n  while (start < end) {\n    array[start++] = value;\n  }\n  return array;\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Fills elements of `array` with `value` from `start` up to, but not\n * including, `end`.\n *\n * **Note:** This method mutates `array`.\n *\n * @static\n * @memberOf _\n * @since 3.2.0\n * @category Array\n * @param {Array} array The array to fill.\n * @param {*} value The value to fill `array` with.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = [1, 2, 3];\n *\n * _.fill(array, 'a');\n * console.log(array);\n * // => ['a', 'a', 'a']\n *\n * _.fill(Array(3), 2);\n * // => [2, 2, 2]\n *\n * _.fill([4, 6, 8, 10], '*', 1, 3);\n * // => [4, '*', '*', 10]\n */\nfunction fill(array, value, start, end) {\n  var length = array ? array.length : 0;\n  if (!length) {\n    return [];\n  }\n  if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {\n    start = 0;\n    end = length;\n  }\n  return baseFill(array, value, start, end);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\n/**\n * Converts `value` to an integer suitable for use as the length of an\n * array-like object.\n *\n * **Note:** This method is based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toLength(3.2);\n * // => 3\n *\n * _.toLength(Number.MIN_VALUE);\n * // => 0\n *\n * _.toLength(Infinity);\n * // => 4294967295\n *\n * _.toLength('3.2');\n * // => 3\n */\nfunction toLength(value) {\n  return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = fill;\n","// simple warning\r\n'use strict'\r\n\r\nvar warning = function(message, line) {\r\n  return {message: message, line: line}\r\n}\r\n\r\nmodule.exports = warning\r\n","// returns a pad shape array given a tool definition\r\n'use strict'\r\n\r\nvar isFunction = require('lodash.isfunction')\r\nvar isFinite = require('lodash.isfinite')\r\n\r\nvar boundingBox = require('./_box')\r\n\r\nvar roundToPrecision = function(number) {\r\n  var rounded = Math.round(number * 100000000) / 100000000\r\n  // remove -0 for ease\r\n  if (rounded === 0) {\r\n    return 0\r\n  }\r\n  return rounded\r\n}\r\n\r\nvar degreesToRadians = function(degrees) {\r\n  return (degrees * Math.PI) / 180\r\n}\r\n\r\nvar rotatePointAboutOrigin = function(point, rot) {\r\n  rot = degreesToRadians(rot)\r\n  var sin = Math.sin(rot)\r\n  var cos = Math.cos(rot)\r\n  var x = point[0]\r\n  var y = point[1]\r\n\r\n  return [\r\n    roundToPrecision(x * cos - y * sin),\r\n    roundToPrecision(x * sin + y * cos),\r\n  ]\r\n}\r\n\r\nvar circle = function(dia, cx, cy, rot) {\r\n  var r = dia / 2\r\n  cx = cx || 0\r\n  cy = cy || 0\r\n\r\n  // rotate cx and cy if necessary\r\n  if (rot && (cx || cy)) {\r\n    var rotatedCenter = rotatePointAboutOrigin([cx, cy], rot)\r\n    cx = rotatedCenter[0]\r\n    cy = rotatedCenter[1]\r\n  }\r\n\r\n  return {\r\n    shape: {type: 'circle', cx: cx, cy: cy, r: dia / 2},\r\n    box: boundingBox.addCircle(boundingBox.new(), r, cx, cy),\r\n  }\r\n}\r\n\r\nvar vect = function(x1, y1, x2, y2, width, rot) {\r\n  // rotate the endpoints if necessary\r\n  if (rot) {\r\n    var start = rotatePointAboutOrigin([x1, y1], rot)\r\n    var end = rotatePointAboutOrigin([x2, y2], rot)\r\n    x1 = start[0]\r\n    y1 = start[1]\r\n    x2 = end[0]\r\n    y2 = end[1]\r\n  }\r\n\r\n  var m = (y2 - y1) / (x2 - x1)\r\n  var hWidth = width / 2\r\n  var sin = hWidth\r\n  var cos = hWidth\r\n  if (isFinite(m)) {\r\n    sin *= m / Math.sqrt(1 + Math.pow(m, 2))\r\n    cos *= 1 / Math.sqrt(1 + Math.pow(m, 2))\r\n  } else {\r\n    cos = 0\r\n  }\r\n\r\n  // add all four corners to the ponts array and the box\r\n  var points = []\r\n  points.push([roundToPrecision(x1 + sin), roundToPrecision(y1 - cos)])\r\n  points.push([roundToPrecision(x2 + sin), roundToPrecision(y2 - cos)])\r\n  points.push([roundToPrecision(x2 - sin), roundToPrecision(y2 + cos)])\r\n  points.push([roundToPrecision(x1 - sin), roundToPrecision(y1 + cos)])\r\n\r\n  var box = points.reduce(function(result, p) {\r\n    return boundingBox.addPoint(result, p)\r\n  }, boundingBox.new())\r\n\r\n  return {\r\n    shape: {type: 'poly', points: points},\r\n    box: box,\r\n  }\r\n}\r\n\r\nvar rect = function(width, height, r, cx, cy, rot) {\r\n  cx = cx || 0\r\n  cy = cy || 0\r\n  r = r || 0\r\n  rot = rot || 0\r\n\r\n  var hWidth = width / 2\r\n  var hHeight = height / 2\r\n\r\n  if (rot) {\r\n    var x1 = cx - hWidth\r\n    var x2 = cx + hWidth\r\n    var y1 = cy\r\n    var y2 = cy\r\n\r\n    return vect(x1, y1, x2, y2, height, rot)\r\n  }\r\n\r\n  return {\r\n    shape: {type: 'rect', cx: cx, cy: cy, r: r, width: width, height: height},\r\n    box: [-hWidth + cx, -hHeight + cy, hWidth + cx, hHeight + cy],\r\n  }\r\n}\r\n\r\nvar outlinePolygon = function(flatPoints, rot) {\r\n  var points = []\r\n  var box = boundingBox.new()\r\n  var point\r\n  for (var i = 0; i < flatPoints.length - 2; i += 2) {\r\n    point = [flatPoints[i], flatPoints[i + 1]]\r\n    if (rot) {\r\n      point = rotatePointAboutOrigin(point, rot)\r\n    }\r\n\r\n    points.push(point)\r\n    box = boundingBox.addPoint(box, point)\r\n  }\r\n\r\n  return {\r\n    shape: {type: 'poly', points: points},\r\n    box: box,\r\n  }\r\n}\r\n\r\nvar regularPolygon = function(dia, nPoints, rot, cx, cy) {\r\n  cx = cx || 0\r\n  cy = cy || 0\r\n\r\n  var points = []\r\n  var box = boundingBox.new()\r\n\r\n  var r = dia / 2\r\n  var offset = (rot * Math.PI) / 180\r\n  var step = (2 * Math.PI) / nPoints\r\n  var theta\r\n  var x\r\n  var y\r\n  for (var n = 0; n < nPoints; n++) {\r\n    theta = step * n + offset\r\n    x = cx + roundToPrecision(r * Math.cos(theta))\r\n    y = cy + roundToPrecision(r * Math.sin(theta))\r\n\r\n    box = boundingBox.addPoint(box, [x, y])\r\n    points.push([x, y])\r\n  }\r\n\r\n  return {\r\n    shape: {type: 'poly', points: points},\r\n    box: box,\r\n  }\r\n}\r\n\r\n// just returns a ring object, does not return a box\r\nvar ring = function(cx, cy, r, width) {\r\n  return {type: 'ring', cx: cx, cy: cy, r: r, width: width}\r\n}\r\n\r\nvar moire = function(\r\n  dia,\r\n  ringThx,\r\n  ringGap,\r\n  maxRings,\r\n  crossThx,\r\n  crossLen,\r\n  cx,\r\n  cy,\r\n  rot\r\n) {\r\n  var r = dia / 2\r\n  var shape = []\r\n  var box = boundingBox.addCircle(boundingBox.new(), r, cx, cy)\r\n  var halfThx = ringThx / 2\r\n  var gapAndHalfThx = ringGap + halfThx\r\n\r\n  // add rings\r\n  while (r > ringThx && shape.length < maxRings) {\r\n    r -= halfThx\r\n    shape.push(ring(cx, cy, roundToPrecision(r), ringThx))\r\n    r -= gapAndHalfThx\r\n  }\r\n\r\n  // add a circle if necessary\r\n  if (r > 0 && shape.length < maxRings) {\r\n    shape.push(circle(roundToPrecision(2 * r), cx, cy).shape)\r\n  }\r\n\r\n  // add cross hairs\r\n  var horCross = rect(crossLen, crossThx, 0, cx, cy, rot)\r\n  var verCross = rect(crossThx, crossLen, 0, cx, cy, rot)\r\n  shape.push(horCross.shape)\r\n  shape.push(verCross.shape)\r\n  box = boundingBox.add(box, horCross.box)\r\n  box = boundingBox.add(box, verCross.box)\r\n\r\n  return {shape: shape, box: box}\r\n}\r\n\r\nvar thermal = function(cx, cy, outerDia, innerDia, gap, rot) {\r\n  var side = roundToPrecision((outerDia - gap) / 2)\r\n  var offset = roundToPrecision((outerDia + gap) / 4)\r\n  var width = roundToPrecision((outerDia - innerDia) / 2)\r\n  var r = roundToPrecision((outerDia - width) / 2)\r\n  var box = boundingBox.addCircle(boundingBox.new(), outerDia / 2, cx, cy)\r\n\r\n  var rects = [\r\n    rect(side, side, 0, cx + offset, cy + offset, rot).shape,\r\n    rect(side, side, 0, cx - offset, cy + offset, rot).shape,\r\n    rect(side, side, 0, cx - offset, cy - offset, rot).shape,\r\n    rect(side, side, 0, cx + offset, cy - offset, rot).shape,\r\n  ]\r\n  var clip = ring(cx, cy, r, width)\r\n\r\n  return {\r\n    shape: {type: 'clip', shape: rects, clip: clip},\r\n    box: box,\r\n  }\r\n}\r\n\r\nvar runMacro = function(mods, blocks) {\r\n  var emptyMacro = {shape: [], box: boundingBox.new()}\r\n  var exposure = 1\r\n\r\n  blocks = blocks || []\r\n\r\n  return blocks.reduce(function(result, block) {\r\n    var shapeAndBox\r\n\r\n    if (block.type !== 'variable' && block.type !== 'comment') {\r\n      block = Object.keys(block).reduce(function(result, key) {\r\n        var value = block[key]\r\n        result[key] = resolveValue(value)\r\n        return result\r\n\r\n        function resolveValue(v) {\r\n          if (Array.isArray(v)) {\r\n            return v.map(resolveValue)\r\n          } else if (isFunction(v)) {\r\n            return v(mods)\r\n          } else {\r\n            return v\r\n          }\r\n        }\r\n      }, {})\r\n    }\r\n\r\n    if (block.exp != null && block.exp !== exposure) {\r\n      result.shape.push({\r\n        type: 'layer',\r\n        polarity: block.exp === 1 ? 'dark' : 'clear',\r\n        box: result.box.slice(0),\r\n      })\r\n      exposure = block.exp\r\n    }\r\n\r\n    switch (block.type) {\r\n      case 'circle':\r\n        shapeAndBox = circle(block.dia, block.cx, block.cy, block.rot)\r\n        break\r\n\r\n      case 'vect':\r\n        shapeAndBox = vect(\r\n          block.x1,\r\n          block.y1,\r\n          block.x2,\r\n          block.y2,\r\n          block.width,\r\n          block.rot\r\n        )\r\n        break\r\n\r\n      case 'rect':\r\n        shapeAndBox = rect(\r\n          block.width,\r\n          block.height,\r\n          0,\r\n          block.cx,\r\n          block.cy,\r\n          block.rot\r\n        )\r\n        break\r\n\r\n      case 'rectLL':\r\n        var hHeight = block.height / 2\r\n        var hWidth = block.width / 2\r\n        var cx = block.x + hWidth\r\n        var cy = block.y + hHeight\r\n        shapeAndBox = rect(block.width, block.height, 0, cx, cy, block.rot)\r\n        break\r\n\r\n      case 'outline':\r\n        shapeAndBox = outlinePolygon(block.points, block.rot)\r\n        break\r\n\r\n      case 'poly':\r\n        shapeAndBox = regularPolygon(\r\n          block.dia,\r\n          block.vertices,\r\n          block.rot,\r\n          block.cx,\r\n          block.cy\r\n        )\r\n        break\r\n\r\n      case 'moire':\r\n        shapeAndBox = moire(\r\n          block.dia,\r\n          block.ringThx,\r\n          block.ringGap,\r\n          block.maxRings,\r\n          block.crossThx,\r\n          block.crossLen,\r\n          block.cx,\r\n          block.cy,\r\n          block.rot\r\n        )\r\n        break\r\n\r\n      case 'thermal':\r\n        shapeAndBox = thermal(\r\n          block.cx,\r\n          block.cy,\r\n          block.outerDia,\r\n          block.innerDia,\r\n          block.gap,\r\n          block.rot\r\n        )\r\n        break\r\n\r\n      case 'variable':\r\n        mods = block.set(mods)\r\n        return result\r\n\r\n      default:\r\n        return result\r\n    }\r\n\r\n    result.shape = result.shape.concat(shapeAndBox.shape)\r\n\r\n    // only change the box if the exposure is creating an image\r\n    if (exposure === 1) {\r\n      result.box = boundingBox.add(result.box, shapeAndBox.box)\r\n    }\r\n\r\n    return result\r\n  }, emptyMacro)\r\n}\r\n\r\nmodule.exports = function padShape(tool, macros) {\r\n  var shape = []\r\n  var box = boundingBox.new()\r\n  var toolShape = tool.shape\r\n  var params = tool.params\r\n  var holeShape\r\n  var shapeAndBox\r\n\r\n  if (toolShape === 'circle') {\r\n    shapeAndBox = circle(params[0])\r\n  } else if (toolShape === 'rect') {\r\n    shapeAndBox = rect(params[0], params[1])\r\n  } else if (toolShape === 'obround') {\r\n    shapeAndBox = rect(params[0], params[1], Math.min(params[0], params[1]) / 2)\r\n  } else if (toolShape === 'poly') {\r\n    shapeAndBox = regularPolygon(params[0], params[1], params[2])\r\n  } else {\r\n    // else we got a macro, so run the macro and return\r\n    var mods = params.reduce(function(result, val, index) {\r\n      result['$' + (index + 1)] = val\r\n\r\n      return result\r\n    }, {})\r\n\r\n    return runMacro(mods, macros[toolShape])\r\n  }\r\n\r\n  // if we didn't return, we have a standard tool, so carry on accordingly\r\n  shape.push(shapeAndBox.shape)\r\n  box = boundingBox.add(box, shapeAndBox.box)\r\n\r\n  if (tool.hole.length) {\r\n    holeShape =\r\n      tool.hole.length === 1\r\n        ? circle(tool.hole[0]).shape\r\n        : rect(tool.hole[0], tool.hole[1]).shape\r\n\r\n    shape.push({type: 'layer', polarity: 'clear', box: box}, holeShape)\r\n  }\r\n\r\n  return {shape: shape, box: box}\r\n}\r\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    nullTag = '[object Null]',\n    proxyTag = '[object Proxy]',\n    undefinedTag = '[object Undefined]';\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isFunction;\n","// operate the plotter\r\n'use strict'\r\n\r\nvar boundingBox = require('./_box')\r\n\r\nvar HALF_PI = Math.PI / 2\r\nvar PI = Math.PI\r\nvar TWO_PI = Math.PI * 2\r\nvar THREE_HALF_PI = (3 * Math.PI) / 2\r\n\r\n// flash operation\r\n// returns a bounding box for the operation\r\nvar flash = function(coord, tool, region, plotter) {\r\n  // no flashing allowed in region mode\r\n  if (region) {\r\n    plotter._warn('flash in region ignored')\r\n    return boundingBox.new()\r\n  }\r\n\r\n  // warn if tool was not defined\r\n  if (!tool) {\r\n    plotter._warn('flash with unknown tool ignored')\r\n    return boundingBox.new()\r\n  }\r\n\r\n  // push the pad shape if needed\r\n  if (!tool.flashed) {\r\n    tool.flashed = true\r\n    plotter.push({type: 'shape', tool: tool.code, shape: tool.pad})\r\n  }\r\n\r\n  plotter.push({type: 'pad', tool: tool.code, x: coord[0], y: coord[1]})\r\n  return boundingBox.translate(tool.box, coord)\r\n}\r\n\r\n// given a start, end, direction, arc quadrant mode, and list of potential centers, find the\r\n// angles of the start and end points, the sweep angle, and the center\r\nvar findCenterAndAngles = function(start, end, mode, arc, centers) {\r\n  var thetaStart\r\n  var thetaEnd\r\n  var sweep\r\n  var candidate\r\n  var center\r\n  while (center == null && centers.length > 0) {\r\n    candidate = centers.pop()\r\n    thetaStart = Math.atan2(start[1] - candidate[1], start[0] - candidate[0])\r\n    thetaEnd = Math.atan2(end[1] - candidate[1], end[0] - candidate[0])\r\n\r\n    // in clockwise mode, ensure the start is greater than the end and check the sweep\r\n    // do the opposite for counter-clockwise\r\n    if (mode === 'cw') {\r\n      thetaStart = thetaStart >= thetaEnd ? thetaStart : thetaStart + TWO_PI\r\n    } else {\r\n      thetaEnd = thetaEnd >= thetaStart ? thetaEnd : thetaEnd + TWO_PI\r\n    }\r\n\r\n    sweep = Math.abs(thetaStart - thetaEnd)\r\n\r\n    // in single quadrant mode, the center is only valid if the sweep is less than 90 degrees\r\n    // in multiquandrant mode there's only one candidate; we're within spec to assume it's good\r\n    if (arc === 's') {\r\n      if (sweep <= HALF_PI) {\r\n        center = candidate\r\n      }\r\n    } else {\r\n      center = candidate\r\n    }\r\n  }\r\n\r\n  if (center == null) {\r\n    return undefined\r\n  }\r\n\r\n  // ensure the thetas are [0, TWO_PI)\r\n  thetaStart = thetaStart >= 0 ? thetaStart : thetaStart + TWO_PI\r\n  thetaStart = thetaStart < TWO_PI ? thetaStart : thetaStart - TWO_PI\r\n  thetaEnd = thetaEnd >= 0 ? thetaEnd : thetaEnd + TWO_PI\r\n  thetaEnd = thetaEnd < TWO_PI ? thetaEnd : thetaEnd - TWO_PI\r\n\r\n  return {\r\n    center: center,\r\n    sweep: sweep,\r\n    start: start.concat(thetaStart),\r\n    end: end.concat(thetaEnd),\r\n  }\r\n}\r\n\r\nvar arcBox = function(cenAndAngles, r, region, tool, dir) {\r\n  var startPoint = cenAndAngles.start\r\n  var endPoint = cenAndAngles.end\r\n  var center = cenAndAngles.center\r\n  var sweep = cenAndAngles.sweep\r\n\r\n  var start\r\n  var end\r\n\r\n  // normalize direction to counter-clockwise\r\n  if (dir === 'cw') {\r\n    start = endPoint[2]\r\n    end = startPoint[2]\r\n  } else {\r\n    start = startPoint[2]\r\n    end = endPoint[2]\r\n  }\r\n\r\n  // get bounding box definition points\r\n  var points = [startPoint, endPoint]\r\n\r\n  // check for sweep past 0 degrees\r\n  if (start > end || sweep === TWO_PI) {\r\n    points.push([center[0] + r, center[1]])\r\n  }\r\n\r\n  // rotate to check for sweep past 90 degrees\r\n  start = start >= HALF_PI ? start - HALF_PI : start + THREE_HALF_PI\r\n  end = end >= HALF_PI ? end - HALF_PI : end + THREE_HALF_PI\r\n  if (start > end || sweep === TWO_PI) {\r\n    points.push([center[0], center[1] + r])\r\n  }\r\n\r\n  // rotate again to check for sweep past 180 degrees\r\n  start = start >= HALF_PI ? start - HALF_PI : start + THREE_HALF_PI\r\n  end = end >= HALF_PI ? end - HALF_PI : end + THREE_HALF_PI\r\n  if (start > end || sweep === TWO_PI) {\r\n    points.push([center[0] - r, center[1]])\r\n  }\r\n\r\n  // rotate again to check for sweep past 270 degrees\r\n  start = start >= HALF_PI ? start - HALF_PI : start + THREE_HALF_PI\r\n  end = end >= HALF_PI ? end - HALF_PI : end + THREE_HALF_PI\r\n  if (start > end || sweep === TWO_PI) {\r\n    points.push([center[0], center[1] - r])\r\n  }\r\n\r\n  return points.reduce(function(result, m) {\r\n    if (!region) {\r\n      var mBox = boundingBox.translate(tool.box, m)\r\n      return boundingBox.add(result, mBox)\r\n    }\r\n\r\n    return boundingBox.addPoint(result, m)\r\n  }, boundingBox.new())\r\n}\r\n\r\nvar roundToZero = function(number, epsilon) {\r\n  return number >= epsilon ? number : 0\r\n}\r\n\r\n// find the center of an arc given its endpoints and its radius\r\n// assume the arc is <= 180 degress\r\n// thank you this guy: http://math.stackexchange.com/a/87912\r\nvar arcCenterFromRadius = function(start, end, mode, epsilon, radius) {\r\n  var sign = mode === 'ccw' ? 1 : -1\r\n  var xAve = (start[0] + end[0]) / 2\r\n  var yAve = (start[1] + end[1]) / 2\r\n  var deltaX = end[0] - start[1]\r\n  var deltaY = end[1] - start[1]\r\n  var distance = Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2))\r\n  var halfDistance = distance / 2\r\n  var squareDifference = Math.sqrt(\r\n    Math.pow(radius, 2) - Math.pow(halfDistance, 2)\r\n  )\r\n  var xOffset = (-sign * deltaY * squareDifference) / distance\r\n  var yOffset = (sign * deltaX * squareDifference) / distance\r\n\r\n  return [\r\n    [\r\n      roundToZero(xAve + xOffset, epsilon),\r\n      roundToZero(yAve + yOffset, epsilon),\r\n    ],\r\n  ]\r\n}\r\n\r\nvar drawArc = function(\r\n  start,\r\n  end,\r\n  offset,\r\n  tool,\r\n  mode,\r\n  arc,\r\n  region,\r\n  epsilon,\r\n  pathGraph,\r\n  plotter\r\n) {\r\n  // get the radius of the arc from the offsets\r\n  var r =\r\n    offset[2] || Math.sqrt(Math.pow(offset[0], 2) + Math.pow(offset[1], 2))\r\n\r\n  // potential candidates for the arc center\r\n  // in single quadrant mode, all offset signs are implicit, so we need to check a few\r\n  var candidates = []\r\n  var xCandidates = []\r\n  var yCandidates = []\r\n\r\n  if (offset[0] && arc === 's') {\r\n    xCandidates.push(start[0] + offset[0], start[0] - offset[0])\r\n  } else {\r\n    xCandidates.push(start[0] + offset[0])\r\n  }\r\n\r\n  if (offset[1] && arc === 's') {\r\n    yCandidates.push(start[1] + offset[1], start[1] - offset[1])\r\n  } else {\r\n    yCandidates.push(start[1] + offset[1])\r\n  }\r\n\r\n  for (var i = 0; i < xCandidates.length; i++) {\r\n    for (var j = 0; j < yCandidates.length; j++) {\r\n      candidates.push([xCandidates[i], yCandidates[j]])\r\n    }\r\n  }\r\n\r\n  // find valid centers by comparing the distance to start and end for equality with the radius\r\n  var validCenters\r\n  if (offset[2]) {\r\n    arc = 'm'\r\n    validCenters = arcCenterFromRadius(start, end, mode, epsilon, offset[2])\r\n  } else if (arc === 's') {\r\n    validCenters = candidates.filter(function(c) {\r\n      var startDist = Math.sqrt(\r\n        Math.pow(c[0] - start[0], 2) + Math.pow(c[1] - start[1], 2)\r\n      )\r\n      var endDist = Math.sqrt(\r\n        Math.pow(c[0] - end[0], 2) + Math.pow(c[1] - end[1], 2)\r\n      )\r\n\r\n      return (\r\n        Math.abs(startDist - r) <= epsilon && Math.abs(endDist - r) <= epsilon\r\n      )\r\n    })\r\n  } else {\r\n    validCenters = candidates\r\n  }\r\n\r\n  var cenAndAngles = findCenterAndAngles(start, end, mode, arc, validCenters)\r\n\r\n  // edge case: matching start and end in multi quadrant mode is a full circle\r\n  if (arc === 'm' && start[0] === end[0] && start[1] === end[1]) {\r\n    cenAndAngles.sweep = TWO_PI\r\n  }\r\n\r\n  var box = boundingBox.new()\r\n  if (cenAndAngles != null) {\r\n    pathGraph.add({\r\n      type: 'arc',\r\n      start: cenAndAngles.start,\r\n      end: cenAndAngles.end,\r\n      center: cenAndAngles.center,\r\n      sweep: cenAndAngles.sweep,\r\n      radius: r,\r\n      dir: mode,\r\n    })\r\n\r\n    box = arcBox(cenAndAngles, r, region, tool, mode)\r\n  } else {\r\n    plotter._warn('skipping impossible arc')\r\n  }\r\n\r\n  return box\r\n}\r\n\r\nvar drawLine = function(start, end, tool, region, pathGraph) {\r\n  pathGraph.add({type: 'line', start: start, end: end})\r\n\r\n  if (!region) {\r\n    var startBox = boundingBox.translate(tool.box, start)\r\n    var endBox = boundingBox.translate(tool.box, end)\r\n    return boundingBox.add(startBox, endBox)\r\n  }\r\n\r\n  var box = boundingBox.new()\r\n  box = boundingBox.addPoint(box, start)\r\n  box = boundingBox.addPoint(box, end)\r\n  return box\r\n}\r\n\r\n// interpolate a rectangle and emit the fill immdeiately\r\nvar interpolateRect = function(start, end, tool, pathGraph, plotter) {\r\n  var hWidth = tool.trace[0] / 2\r\n  var hHeight = tool.trace[1] / 2\r\n  var theta = Math.atan2(end[1] - start[1], end[0] - start[0])\r\n\r\n  var sXMin = start[0] - hWidth\r\n  var sXMax = start[0] + hWidth\r\n  var sYMin = start[1] - hHeight\r\n  var sYMax = start[1] + hHeight\r\n  var eXMin = end[0] - hWidth\r\n  var eXMax = end[0] + hWidth\r\n  var eYMin = end[1] - hHeight\r\n  var eYMax = end[1] + hHeight\r\n\r\n  var points = []\r\n\r\n  // no movement\r\n  if (start[0] === end[0] && start[1] === end[1]) {\r\n    points.push([sXMin, sYMin], [sXMax, sYMin], [sXMax, sYMax], [sXMin, sYMax])\r\n  } else if (theta >= 0 && theta < HALF_PI) {\r\n    // first quadrant move\r\n    points.push(\r\n      [sXMin, sYMin],\r\n      [sXMax, sYMin],\r\n      [eXMax, eYMin],\r\n      [eXMax, eYMax],\r\n      [eXMin, eYMax],\r\n      [sXMin, sYMax]\r\n    )\r\n  } else if (theta >= HALF_PI && theta <= PI) {\r\n    // second quadrant move\r\n    points.push(\r\n      [sXMax, sYMin],\r\n      [sXMax, sYMax],\r\n      [eXMax, eYMax],\r\n      [eXMin, eYMax],\r\n      [eXMin, eYMin],\r\n      [sXMin, sYMin]\r\n    )\r\n  } else if (theta >= -PI && theta < -HALF_PI) {\r\n    // third quadrant move\r\n    points.push(\r\n      [sXMax, sYMax],\r\n      [sXMin, sYMax],\r\n      [eXMin, eYMax],\r\n      [eXMin, eYMin],\r\n      [eXMax, eYMin],\r\n      [sXMax, sYMin]\r\n    )\r\n  } else {\r\n    // fourth quadrant move\r\n    points.push(\r\n      [sXMin, sYMax],\r\n      [sXMin, sYMin],\r\n      [eXMin, eYMin],\r\n      [eXMax, eYMin],\r\n      [eXMax, eYMax],\r\n      [sXMax, sYMax]\r\n    )\r\n  }\r\n\r\n  points.forEach(function(p, i) {\r\n    var j = i < points.length - 1 ? i + 1 : 0\r\n    pathGraph.add({type: 'line', start: p, end: points[j]})\r\n  })\r\n\r\n  plotter._finishPath()\r\n\r\n  return boundingBox.add(\r\n    boundingBox.translate(tool.box, start),\r\n    boundingBox.translate(tool.box, end)\r\n  )\r\n}\r\n\r\n// interpolate operation\r\n// returns a bounding box for the operation\r\nvar interpolate = function(\r\n  start,\r\n  end,\r\n  offset,\r\n  tool,\r\n  mode,\r\n  arc,\r\n  region,\r\n  epsilon,\r\n  pathGraph,\r\n  plotter\r\n) {\r\n  var strokableTool = region || (tool && tool.trace.length > 0)\r\n  var arcableTool = region || (tool && tool.trace.length === 1)\r\n  var toolCode = tool ? tool.code : '[NO TOOL SET]'\r\n\r\n  if (!strokableTool) {\r\n    plotter._warn(\r\n      'tool ' + toolCode + ' is not strokable; ignoring interpolate'\r\n    )\r\n\r\n    return boundingBox.new()\r\n  }\r\n\r\n  if (mode === 'i') {\r\n    // add a line to the path normally if region mode is on or the tool is a circle\r\n    if (region || tool.trace.length === 1) {\r\n      return drawLine(start, end, tool, region, pathGraph)\r\n    }\r\n\r\n    // else, the tool is a rectangle, which needs a special interpolation function\r\n    return interpolateRect(start, end, tool, pathGraph, plotter)\r\n  }\r\n\r\n  // else, make sure we're allowed to be drawing an arc, then draw an arc\r\n  if (!arcableTool) {\r\n    plotter._warn(\r\n      'cannot draw arc with non-circular tool ' +\r\n        toolCode +\r\n        '; ignoring interpolate'\r\n    )\r\n    return boundingBox.new()\r\n  }\r\n\r\n  return drawArc(\r\n    start,\r\n    end,\r\n    offset,\r\n    tool,\r\n    mode,\r\n    arc,\r\n    region,\r\n    epsilon,\r\n    pathGraph,\r\n    plotter\r\n  )\r\n}\r\n\r\n// takes the start point, the op type, the op coords, the tool, and the push function\r\n// returns the new plotter position\r\nvar operate = function(\r\n  type,\r\n  coord,\r\n  start,\r\n  tool,\r\n  mode,\r\n  arc,\r\n  region,\r\n  pathGraph,\r\n  epsilon,\r\n  plotter\r\n) {\r\n  var end = [\r\n    coord.x != null ? coord.x : start[0],\r\n    coord.y != null ? coord.y : start[1],\r\n  ]\r\n\r\n  var offset = [\r\n    coord.i != null ? coord.i : 0,\r\n    coord.j != null ? coord.j : 0,\r\n    coord.a,\r\n  ]\r\n\r\n  var box\r\n  switch (type) {\r\n    case 'flash':\r\n      box = flash(end, tool, region, plotter)\r\n      break\r\n\r\n    case 'int':\r\n      box = interpolate(\r\n        start,\r\n        end,\r\n        offset,\r\n        tool,\r\n        mode,\r\n        arc,\r\n        region,\r\n        epsilon,\r\n        pathGraph,\r\n        plotter\r\n      )\r\n      break\r\n\r\n    default:\r\n      box = boundingBox.new()\r\n      break\r\n  }\r\n\r\n  return {\r\n    pos: end,\r\n    box: box,\r\n  }\r\n}\r\n\r\nmodule.exports = operate\r\n","// transform stream to take plotter objects and convert them to an SVG string\r\n'use strict'\r\n\r\nvar Transform = require('readable-stream').Transform\r\nvar inherits = require('inherits')\r\nvar isFinite = require('lodash.isfinite')\r\n\r\nvar reduceShapeArray = require('./_reduce-shape')\r\nvar flashPad = require('./_flash-pad')\r\nvar createPath = require('./_create-path')\r\nvar util = require('./_util')\r\nvar render = require('../render')\r\n\r\nvar shift = util.shift\r\nvar maskLayer = util.maskLayer\r\nvar createMask = util.createMask\r\n\r\nvar BLOCK_MODE_OFF = 0\r\nvar BLOCK_MODE_DARK = 1\r\nvar BLOCK_MODE_CLEAR = 2\r\n\r\nvar PlotterToSvg = function(id, attributes, createElement, objectMode) {\r\n  Transform.call(this, {\r\n    writableObjectMode: true,\r\n    readableObjectMode: objectMode,\r\n  })\r\n\r\n  this.id = id\r\n  this.attributes = attributes\r\n  this.defs = []\r\n  this.layer = []\r\n  this.viewBox = [0, 0, 0, 0]\r\n  this.width = 0\r\n  this.height = 0\r\n  this.units = ''\r\n\r\n  this._maskId = ''\r\n  this._maskBox = []\r\n  this._mask = []\r\n  this._blockMode = false\r\n  this._blockBox = []\r\n  this._block = []\r\n  this._blockCount = 0\r\n  this._blockLayerCount = 0\r\n  this._offsets = []\r\n  this._clearCount = 0\r\n  this._lastLayer = 0\r\n  this._blockCount = 0\r\n  this._blockCount = 0\r\n\r\n  this._element = createElement\r\n}\r\n\r\ninherits(PlotterToSvg, Transform)\r\n\r\nPlotterToSvg.prototype._transform = function(chunk, encoding, done) {\r\n  switch (chunk.type) {\r\n    case 'shape':\r\n      this.defs = this.defs.concat(\r\n        reduceShapeArray(this.id, chunk.tool, chunk.shape, this._element)\r\n      )\r\n      break\r\n\r\n    case 'pad':\r\n      this._draw(flashPad(this.id, chunk.tool, chunk.x, chunk.y, this._element))\r\n      break\r\n\r\n    case 'fill':\r\n      this._draw(createPath(chunk.path, null, this._element))\r\n      break\r\n\r\n    case 'stroke':\r\n      this._draw(createPath(chunk.path, chunk.width, this._element))\r\n      break\r\n\r\n    case 'polarity':\r\n      this._handleNewPolarity(chunk.polarity, chunk.box)\r\n      break\r\n\r\n    case 'repeat':\r\n      this._handleNewRepeat(chunk.offsets, chunk.box)\r\n      break\r\n\r\n    case 'size':\r\n      this._handleSize(chunk.box, chunk.units)\r\n  }\r\n\r\n  done()\r\n}\r\n\r\nPlotterToSvg.prototype._flush = function(done) {\r\n  // shut off step repeat finish any in-progress clear layer and/or repeat\r\n  this._handleNewRepeat([])\r\n  this.push(render(this, this.attributes, this._element))\r\n  done()\r\n}\r\n\r\nPlotterToSvg.prototype._finishBlockLayer = function() {\r\n  // if there's a block, wrap it up, give it an id, and repeat it\r\n  if (this._block.length) {\r\n    this._blockLayerCount++\r\n\r\n    var blockLayerId =\r\n      this.id + '_block-' + this._blockCount + '-' + this._blockLayerCount\r\n\r\n    this.defs.push(this._element('g', {id: blockLayerId}, this._block))\r\n\r\n    this._block = []\r\n  }\r\n}\r\n\r\nPlotterToSvg.prototype._finishClearLayer = function() {\r\n  if (this._maskId) {\r\n    this.defs.push(\r\n      createMask(this._maskId, this._maskBox, this._mask, this._element)\r\n    )\r\n    this._maskId = ''\r\n    this._maskBox = []\r\n    this._mask = []\r\n\r\n    return true\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nPlotterToSvg.prototype._handleNewPolarity = function(polarity, box) {\r\n  if (this._blockMode) {\r\n    if (this._blockLayerCount === 0 && !this._block.length) {\r\n      this._blockMode = polarity === 'dark' ? BLOCK_MODE_DARK : BLOCK_MODE_CLEAR\r\n    }\r\n\r\n    return this._finishBlockLayer()\r\n  }\r\n\r\n  this._clearCount =\r\n    polarity === 'clear' ? this._clearCount + 1 : this._clearCount\r\n  var maskId = this.id + '_clear-' + this._clearCount\r\n\r\n  // if clear polarity, wrap the layer and start a mask\r\n  if (polarity === 'clear') {\r\n    this.layer = [maskLayer(maskId, this.layer, this._element)]\r\n    this._maskId = maskId\r\n    this._maskBox = box.slice(0)\r\n  } else {\r\n    // else, finish the mask and add it to the defs\r\n    this._finishClearLayer(box)\r\n  }\r\n}\r\n\r\nPlotterToSvg.prototype._handleNewRepeat = function(offsets, box) {\r\n  var endOfBlock = offsets.length === 0\r\n\r\n  // finish any in progress clear layer and block layer\r\n  var wasClear = this._finishClearLayer()\r\n\r\n  this._finishBlockLayer()\r\n\r\n  var layer = this.layer\r\n  var element = this._element\r\n  var blockMode = this._blockMode\r\n  var blockLayers = this._blockLayerCount\r\n  var blockIdStart = this.id + '_block-' + this._blockCount + '-'\r\n\r\n  // add dark layers to layer\r\n  this._offsets.forEach(function(offset) {\r\n    for (var i = blockMode; i <= blockLayers; i += 2) {\r\n      layer.push(\r\n        element('use', {\r\n          'xlink:href': '#' + blockIdStart + i,\r\n          x: shift(offset[0]),\r\n          y: shift(offset[1]),\r\n        })\r\n      )\r\n    }\r\n  })\r\n\r\n  // if there are clear layers in the block, mask the layer with them\r\n  if (blockLayers > 2 - blockMode) {\r\n    var maskId = blockIdStart + 'clear'\r\n\r\n    this.layer = [maskLayer(maskId, layer, this._element)]\r\n    this._maskId = maskId\r\n    this._maskBox = this._blockBox.slice(0)\r\n    this._mask = this._offsets.reduce(function(result, offset) {\r\n      var isDark\r\n\r\n      for (var i = 1; i <= blockLayers; i++) {\r\n        isDark = blockMode === BLOCK_MODE_DARK ? i % 2 === 1 : i % 2 === 0\r\n\r\n        var attr = {\r\n          'xlink:href': '#' + blockIdStart + i,\r\n          x: shift(offset[0]),\r\n          y: shift(offset[1]),\r\n        }\r\n\r\n        if (isDark) {\r\n          attr.fill = '#fff'\r\n          attr.stroke = '#fff'\r\n        }\r\n\r\n        result.push(element('use', attr))\r\n      }\r\n\r\n      return result\r\n    }, [])\r\n\r\n    wasClear = this._finishClearLayer()\r\n  }\r\n\r\n  // save the offsets\r\n  this._offsets = offsets\r\n  if (!endOfBlock) {\r\n    this._blockMode = !wasClear ? BLOCK_MODE_DARK : BLOCK_MODE_CLEAR\r\n    this._blockCount++\r\n    this._blockLayerCount = 0\r\n    this._blockBox = box.every(isFinite) ? box : [0, 0, 0, 0]\r\n  } else {\r\n    this._blockMode = BLOCK_MODE_OFF\r\n  }\r\n}\r\n\r\nPlotterToSvg.prototype._handleSize = function(box, units) {\r\n  if (box.every(isFinite)) {\r\n    var x = shift(box[0])\r\n    var y = shift(box[1])\r\n    var width = shift(box[2] - box[0])\r\n    var height = shift(box[3] - box[1])\r\n\r\n    this.viewBox = [x, y, width, height]\r\n    this.width = width / 1000\r\n    this.height = height / 1000\r\n    this.units = units\r\n  }\r\n}\r\n\r\nPlotterToSvg.prototype._draw = function(object) {\r\n  if (!this._blockMode) {\r\n    if (!this._maskId) {\r\n      this.layer.push(object)\r\n    } else {\r\n      this._mask.push(object)\r\n    }\r\n  } else {\r\n    this._block.push(object)\r\n  }\r\n}\r\n\r\nmodule.exports = PlotterToSvg\r\n","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\nexports.finished = require('./lib/internal/streams/end-of-stream.js');\nexports.pipeline = require('./lib/internal/streams/pipeline.js');\n","'use strict';\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _require = require('buffer'),\n    Buffer = _require.Buffer;\n\nvar _require2 = require('util'),\n    inspect = _require2.inspect;\n\nvar custom = inspect && inspect.custom || 'inspect';\n\nfunction copyBuffer(src, target, offset) {\n  Buffer.prototype.copy.call(src, target, offset);\n}\n\nmodule.exports =\n/*#__PURE__*/\nfunction () {\n  function BufferList() {\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  var _proto = BufferList.prototype;\n\n  _proto.push = function push(v) {\n    var entry = {\n      data: v,\n      next: null\n    };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  _proto.unshift = function unshift(v) {\n    var entry = {\n      data: v,\n      next: this.head\n    };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  _proto.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  _proto.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  _proto.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n\n    while (p = p.next) {\n      ret += s + p.data;\n    }\n\n    return ret;\n  };\n\n  _proto.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n\n    return ret;\n  } // Consumes a specified amount of bytes or characters from the buffered data.\n  ;\n\n  _proto.consume = function consume(n, hasStrings) {\n    var ret;\n\n    if (n < this.head.data.length) {\n      // `slice` is the same for buffers and strings.\n      ret = this.head.data.slice(0, n);\n      this.head.data = this.head.data.slice(n);\n    } else if (n === this.head.data.length) {\n      // First chunk is a perfect match.\n      ret = this.shift();\n    } else {\n      // Result spans more than one buffer.\n      ret = hasStrings ? this._getString(n) : this._getBuffer(n);\n    }\n\n    return ret;\n  };\n\n  _proto.first = function first() {\n    return this.head.data;\n  } // Consumes a specified amount of characters from the buffered data.\n  ;\n\n  _proto._getString = function _getString(n) {\n    var p = this.head;\n    var c = 1;\n    var ret = p.data;\n    n -= ret.length;\n\n    while (p = p.next) {\n      var str = p.data;\n      var nb = n > str.length ? str.length : n;\n      if (nb === str.length) ret += str;else ret += str.slice(0, n);\n      n -= nb;\n\n      if (n === 0) {\n        if (nb === str.length) {\n          ++c;\n          if (p.next) this.head = p.next;else this.head = this.tail = null;\n        } else {\n          this.head = p;\n          p.data = str.slice(nb);\n        }\n\n        break;\n      }\n\n      ++c;\n    }\n\n    this.length -= c;\n    return ret;\n  } // Consumes a specified amount of bytes from the buffered data.\n  ;\n\n  _proto._getBuffer = function _getBuffer(n) {\n    var ret = Buffer.allocUnsafe(n);\n    var p = this.head;\n    var c = 1;\n    p.data.copy(ret);\n    n -= p.data.length;\n\n    while (p = p.next) {\n      var buf = p.data;\n      var nb = n > buf.length ? buf.length : n;\n      buf.copy(ret, ret.length - n, 0, nb);\n      n -= nb;\n\n      if (n === 0) {\n        if (nb === buf.length) {\n          ++c;\n          if (p.next) this.head = p.next;else this.head = this.tail = null;\n        } else {\n          this.head = p;\n          p.data = buf.slice(nb);\n        }\n\n        break;\n      }\n\n      ++c;\n    }\n\n    this.length -= c;\n    return ret;\n  } // Make sure the linked list only shows the minimal necessary information.\n  ;\n\n  _proto[custom] = function (_, options) {\n    return inspect(this, _objectSpread({}, options, {\n      // Only inspect one level.\n      depth: 0,\n      // It should not recurse.\n      customInspect: false\n    }));\n  };\n\n  return BufferList;\n}();","'use strict'\n\nvar experimentalWarnings = new Set();\n\nfunction emitExperimentalWarning(feature) {\n  if (experimentalWarnings.has(feature)) return;\n  var msg = feature + ' is an experimental feature. This feature could ' +\n       'change at any time';\n  experimentalWarnings.add(feature);\n  process.emitWarning(msg, 'ExperimentalWarning');\n}\n\nfunction noop() {}\n\nmodule.exports.emitExperimentalWarning = process.emitWarning\n  ? emitExperimentalWarning\n  : noop;\n","'use strict';\n\nvar _Object$setPrototypeO;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar finished = require('./end-of-stream');\n\nvar kLastResolve = Symbol('lastResolve');\nvar kLastReject = Symbol('lastReject');\nvar kError = Symbol('error');\nvar kEnded = Symbol('ended');\nvar kLastPromise = Symbol('lastPromise');\nvar kHandlePromise = Symbol('handlePromise');\nvar kStream = Symbol('stream');\n\nfunction createIterResult(value, done) {\n  return {\n    value: value,\n    done: done\n  };\n}\n\nfunction readAndResolve(iter) {\n  var resolve = iter[kLastResolve];\n\n  if (resolve !== null) {\n    var data = iter[kStream].read(); // we defer if data is null\n    // we can be expecting either 'end' or\n    // 'error'\n\n    if (data !== null) {\n      iter[kLastPromise] = null;\n      iter[kLastResolve] = null;\n      iter[kLastReject] = null;\n      resolve(createIterResult(data, false));\n    }\n  }\n}\n\nfunction onReadable(iter) {\n  // we wait for the next tick, because it might\n  // emit an error with process.nextTick\n  process.nextTick(readAndResolve, iter);\n}\n\nfunction wrapForNext(lastPromise, iter) {\n  return function (resolve, reject) {\n    lastPromise.then(function () {\n      if (iter[kEnded]) {\n        resolve(createIterResult(undefined, true));\n        return;\n      }\n\n      iter[kHandlePromise](resolve, reject);\n    }, reject);\n  };\n}\n\nvar AsyncIteratorPrototype = Object.getPrototypeOf(function () {});\nvar ReadableStreamAsyncIteratorPrototype = Object.setPrototypeOf((_Object$setPrototypeO = {\n  get stream() {\n    return this[kStream];\n  },\n\n  next: function next() {\n    var _this = this;\n\n    // if we have detected an error in the meanwhile\n    // reject straight away\n    var error = this[kError];\n\n    if (error !== null) {\n      return Promise.reject(error);\n    }\n\n    if (this[kEnded]) {\n      return Promise.resolve(createIterResult(undefined, true));\n    }\n\n    if (this[kStream].destroyed) {\n      // We need to defer via nextTick because if .destroy(err) is\n      // called, the error will be emitted via nextTick, and\n      // we cannot guarantee that there is no error lingering around\n      // waiting to be emitted.\n      return new Promise(function (resolve, reject) {\n        process.nextTick(function () {\n          if (_this[kError]) {\n            reject(_this[kError]);\n          } else {\n            resolve(createIterResult(undefined, true));\n          }\n        });\n      });\n    } // if we have multiple next() calls\n    // we will wait for the previous Promise to finish\n    // this logic is optimized to support for await loops,\n    // where next() is only called once at a time\n\n\n    var lastPromise = this[kLastPromise];\n    var promise;\n\n    if (lastPromise) {\n      promise = new Promise(wrapForNext(lastPromise, this));\n    } else {\n      // fast path needed to support multiple this.push()\n      // without triggering the next() queue\n      var data = this[kStream].read();\n\n      if (data !== null) {\n        return Promise.resolve(createIterResult(data, false));\n      }\n\n      promise = new Promise(this[kHandlePromise]);\n    }\n\n    this[kLastPromise] = promise;\n    return promise;\n  }\n}, _defineProperty(_Object$setPrototypeO, Symbol.asyncIterator, function () {\n  return this;\n}), _defineProperty(_Object$setPrototypeO, \"return\", function _return() {\n  var _this2 = this;\n\n  // destroy(err, cb) is a private API\n  // we can guarantee we have that here, because we control the\n  // Readable class this is attached to\n  return new Promise(function (resolve, reject) {\n    _this2[kStream].destroy(null, function (err) {\n      if (err) {\n        reject(err);\n        return;\n      }\n\n      resolve(createIterResult(undefined, true));\n    });\n  });\n}), _Object$setPrototypeO), AsyncIteratorPrototype);\n\nvar createReadableStreamAsyncIterator = function createReadableStreamAsyncIterator(stream) {\n  var _Object$create;\n\n  var iterator = Object.create(ReadableStreamAsyncIteratorPrototype, (_Object$create = {}, _defineProperty(_Object$create, kStream, {\n    value: stream,\n    writable: true\n  }), _defineProperty(_Object$create, kLastResolve, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kLastReject, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kError, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kEnded, {\n    value: stream._readableState.endEmitted,\n    writable: true\n  }), _defineProperty(_Object$create, kHandlePromise, {\n    value: function value(resolve, reject) {\n      var data = iterator[kStream].read();\n\n      if (data) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        resolve(createIterResult(data, false));\n      } else {\n        iterator[kLastResolve] = resolve;\n        iterator[kLastReject] = reject;\n      }\n    },\n    writable: true\n  }), _Object$create));\n  iterator[kLastPromise] = null;\n  finished(stream, function (err) {\n    if (err && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n      var reject = iterator[kLastReject]; // reject if we are waiting for data in the Promise\n      // returned by next() and store the error\n\n      if (reject !== null) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        reject(err);\n      }\n\n      iterator[kError] = err;\n      return;\n    }\n\n    var resolve = iterator[kLastResolve];\n\n    if (resolve !== null) {\n      iterator[kLastPromise] = null;\n      iterator[kLastResolve] = null;\n      iterator[kLastReject] = null;\n      resolve(createIterResult(undefined, true));\n    }\n\n    iterator[kEnded] = true;\n  });\n  stream.on('readable', onReadable.bind(null, iterator));\n  return iterator;\n};\n\nmodule.exports = createReadableStreamAsyncIterator;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\nrequire('inherits')(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n'use strict';\n\nvar eos;\n\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback.apply(void 0, arguments);\n  };\n}\n\nvar _require$codes = require('../../../errors').codes,\n    ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n    ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\n\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\n\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\n\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  var closed = false;\n  stream.on('close', function () {\n    closed = true;\n  });\n  if (eos === undefined) eos = require('./end-of-stream');\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, function (err) {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  var destroyed = false;\n  return function (err) {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true; // request.destroy just do .end - .abort is what we want\n\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\n\nfunction call(fn) {\n  fn();\n}\n\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\n\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\n\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n\n  var callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n\n  var error;\n  var destroys = streams.map(function (stream, i) {\n    var reading = i < streams.length - 1;\n    var writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\n\nmodule.exports = pipeline;","// reduce a shape array into a string to place is defs\r\n'use strict'\r\n\r\nvar util = require('./_util')\r\nvar shift = util.shift\r\nvar createMask = util.createMask\r\nvar maskLayer = util.maskLayer\r\n\r\nvar element = function(tag, attr, children) {\r\n  return {tag: tag, attr: attr, children: children || []}\r\n}\r\n\r\nvar circle = function(cx, cy, r, width) {\r\n  var attr = {\r\n    cx: shift(cx),\r\n    cy: shift(cy),\r\n    r: shift(r),\r\n  }\r\n\r\n  if (width != null) {\r\n    attr['stroke-width'] = shift(width)\r\n    attr.fill = 'none'\r\n  }\r\n\r\n  return element('circle', attr)\r\n}\r\n\r\nvar rect = function(cx, cy, r, width, height) {\r\n  var attr = {\r\n    x: shift(cx - width / 2),\r\n    y: shift(cy - height / 2),\r\n    width: shift(width),\r\n    height: shift(height),\r\n  }\r\n\r\n  if (r) {\r\n    attr.rx = shift(r)\r\n    attr.ry = shift(r)\r\n  }\r\n\r\n  return element('rect', attr)\r\n}\r\n\r\nvar poly = function(points) {\r\n  var pointsAttr = points\r\n    .map(function(point) {\r\n      return point.map(shift).join(',')\r\n    })\r\n    .join(' ')\r\n\r\n  return element('polygon', {points: pointsAttr})\r\n}\r\n\r\nvar clip = function(maskIdPrefix, index, shapes, ring, createElement) {\r\n  var maskId = maskIdPrefix + 'mask-' + index\r\n  var maskUrl = 'url(#' + maskId + ')'\r\n\r\n  var circleNode = circle(ring.cx, ring.cy, ring.r, ring.width)\r\n\r\n  var mask = createElement('mask', {id: maskId, stroke: '#fff'}, [\r\n    createElement(circleNode.tag, circleNode.attr),\r\n  ])\r\n\r\n  var groupChildren = shapes.map(function(shape) {\r\n    var node =\r\n      shape.type === 'rect'\r\n        ? rect(shape.cx, shape.cy, shape.r, shape.width, shape.height)\r\n        : poly(shape.points)\r\n\r\n    return createElement(node.tag, node.attr)\r\n  })\r\n\r\n  var layer = element('g', {mask: maskUrl}, groupChildren)\r\n\r\n  return {mask: mask, layer: layer}\r\n}\r\n\r\nmodule.exports = function reduceShapeArray(\r\n  prefix,\r\n  code,\r\n  shapeArray,\r\n  createElement\r\n) {\r\n  var id = prefix + '_pad-' + code\r\n  var maskIdPrefix = id + '_'\r\n\r\n  var image = shapeArray.reduce(\r\n    function(result, shape, index) {\r\n      var svg\r\n\r\n      switch (shape.type) {\r\n        case 'circle':\r\n          svg = circle(shape.cx, shape.cy, shape.r)\r\n          break\r\n\r\n        case 'ring':\r\n          svg = circle(shape.cx, shape.cy, shape.r, shape.width)\r\n          break\r\n\r\n        case 'rect':\r\n          svg = rect(shape.cx, shape.cy, shape.r, shape.width, shape.height)\r\n          break\r\n\r\n        case 'poly':\r\n          svg = poly(shape.points)\r\n          break\r\n\r\n        case 'clip':\r\n          var clipNodes = clip(\r\n            maskIdPrefix,\r\n            index,\r\n            shape.shape,\r\n            shape.clip,\r\n            createElement\r\n          )\r\n\r\n          result.masks.push(clipNodes.mask)\r\n          svg = clipNodes.layer\r\n          break\r\n\r\n        case 'layer':\r\n          result.count++\r\n          result.last = shape.polarity\r\n\r\n          // if the polarity is clear, wrap the group and start a mask\r\n          if (shape.polarity === 'clear') {\r\n            var nextMaskId = maskIdPrefix + result.count\r\n\r\n            result.maskId = nextMaskId\r\n            result.maskBox = shape.box.slice(0)\r\n            result.maskChildren = []\r\n            result.layers = [\r\n              maskLayer(nextMaskId, result.layers, createElement),\r\n            ]\r\n          } else {\r\n            var mask = createMask(\r\n              result.maskId,\r\n              result.maskBox,\r\n              result.maskChildren,\r\n              createElement\r\n            )\r\n\r\n            result.masks.push(mask)\r\n          }\r\n          break\r\n      }\r\n\r\n      if (svg) {\r\n        if (shapeArray.length === 1) {\r\n          svg.attr.id = id\r\n        }\r\n\r\n        var svgElement = createElement(svg.tag, svg.attr, svg.children)\r\n\r\n        if (result.last === 'dark') {\r\n          result.layers.push(svgElement)\r\n        } else {\r\n          result.maskChildren.push(svgElement)\r\n        }\r\n      }\r\n\r\n      return result\r\n    },\r\n    {\r\n      count: 0,\r\n      last: 'dark',\r\n      layers: [],\r\n      maskId: '',\r\n      maskBox: [],\r\n      maskChildren: [],\r\n      masks: [],\r\n    }\r\n  )\r\n\r\n  if (image.last === 'clear') {\r\n    image.masks.push(\r\n      createMask(image.maskId, image.maskBox, image.maskChildren, createElement)\r\n    )\r\n  }\r\n\r\n  if (shapeArray.length > 1) {\r\n    image.layers = createElement('g', {id: id}, image.layers)\r\n  }\r\n\r\n  return image.masks.concat(image.layers)\r\n}\r\n","// creates the SVG for a pad flash\r\n'use strict'\r\n\r\nvar util = require('./_util')\r\nvar shift = util.shift\r\n\r\nmodule.exports = function flashPad(prefix, tool, x, y, element) {\r\n  var toolId = '#' + prefix + '_pad-' + tool\r\n\r\n  return element('use', {'xlink:href': toolId, x: shift(x), y: shift(y)})\r\n}\r\n","// create a path from a fill or stroke object\r\n'use strict'\r\n\r\nvar util = require('./_util')\r\nvar shift = util.shift\r\n\r\nvar pointsEqual = function(point, target) {\r\n  return point[0] === target[0] && point[1] === target[1]\r\n}\r\n\r\nvar move = function(start) {\r\n  return 'M ' + shift(start[0]) + ' ' + shift(start[1])\r\n}\r\n\r\nvar line = function(lastCmd, end) {\r\n  var cmd = lastCmd === 'L' || lastCmd === 'M' ? '' : 'L '\r\n\r\n  return cmd + shift(end[0]) + ' ' + shift(end[1])\r\n}\r\n\r\nvar arc = function(lastCmd, radius, sweep, dir, end, center) {\r\n  // add zero-length arcs as zero-length lines to render properly across all browsers\r\n  if (sweep === 0) {\r\n    return line(lastCmd, end)\r\n  }\r\n\r\n  // full-circle arcs must be rendered as two separate arcs\r\n  if (sweep === 2 * Math.PI) {\r\n    var half = [2 * center[0] - end[0], 2 * center[1] - end[1]]\r\n\r\n    var arc1 = arc(lastCmd, radius, Math.PI, dir, half, center)\r\n    var arc2 = arc('A', radius, Math.PI, dir, end, center)\r\n\r\n    return arc1 + ' ' + arc2\r\n  }\r\n\r\n  var result = lastCmd === 'A' ? '' : 'A '\r\n\r\n  radius = shift(radius)\r\n  result += radius + ' ' + radius + ' 0 '\r\n  result += sweep > Math.PI ? '1 ' : '0 '\r\n  result += dir === 'ccw' ? '1 ' : '0 '\r\n  result += shift(end[0]) + ' ' + shift(end[1])\r\n\r\n  return result\r\n}\r\n\r\nvar reduceSegments = function(result, segment) {\r\n  var type = segment.type\r\n  var start = segment.start\r\n  var end = segment.end\r\n\r\n  if (!pointsEqual(result.last, start)) {\r\n    result.data += (result.data ? ' ' : '') + move(start)\r\n    result.lastCmd = 'M'\r\n  }\r\n\r\n  result.data += ' '\r\n  if (type === 'line') {\r\n    result.data += line(result.lastCmd, end)\r\n    result.lastCmd = 'L'\r\n  } else {\r\n    result.data += arc(\r\n      result.lastCmd,\r\n      segment.radius,\r\n      segment.sweep,\r\n      segment.dir,\r\n      end,\r\n      segment.center\r\n    )\r\n\r\n    result.lastCmd = 'A'\r\n  }\r\n\r\n  result.last = end\r\n\r\n  return result\r\n}\r\n\r\nmodule.exports = function createPath(segments, width, element) {\r\n  var pathData = segments.reduce(reduceSegments, {last: [], data: ''}).data\r\n  var attr = {d: pathData}\r\n\r\n  if (width != null) {\r\n    attr.fill = 'none'\r\n    attr['stroke-width'] = shift(width)\r\n  }\r\n\r\n  return element('path', attr)\r\n}\r\n","// main pcb stackup function\r\n'use strict'\r\n\r\nvar extend = require('xtend')\r\nvar wtg = require('whats-that-gerber')\r\nvar vb = require('viewbox')\r\n\r\nvar boardColor = require('./lib/board-color')\r\nvar parseOptions = require('./lib/parse-options')\r\nvar sortLayers = require('./lib/sort-layers')\r\nvar stackLayers = require('./lib/stack-layers')\r\n\r\nvar SIDES = [wtg.SIDE_TOP, wtg.SIDE_BOTTOM]\r\n\r\nvar BASE_ATTRIBUTES = {\r\n  version: '1.1',\r\n  xmlns: 'http://www.w3.org/2000/svg',\r\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\r\n  'stroke-linecap': 'round',\r\n  'stroke-linejoin': 'round',\r\n  'stroke-width': 0,\r\n  'fill-rule': 'evenodd',\r\n  'clip-rule': 'evenodd',\r\n}\r\n\r\nmodule.exports = function pcbStackupCore(layers, inputOpts) {\r\n  var options = parseOptions(inputOpts)\r\n  var sorted = sortLayers(layers)\r\n\r\n  var id = options.id\r\n  var color = options.color\r\n  var attributes = options.attributes\r\n  var useOutline = options.useOutline\r\n  var element = options.createElement\r\n\r\n  var stacks = SIDES.map(function(side) {\r\n    return stackLayers(\r\n      element,\r\n      id,\r\n      side,\r\n      sorted[side],\r\n      sorted.drills,\r\n      sorted.outline,\r\n      useOutline\r\n    )\r\n  })\r\n\r\n  var box = stacks.reduce(function(result, stack) {\r\n    return vb.add(result, stack.box)\r\n  }, vb.create())\r\n\r\n  if (box.length !== 4) box = [0, 0, 0, 0]\r\n\r\n  return stacks.reduce(function(result, stack, index) {\r\n    var side = SIDES[index]\r\n    var style = boardColor.getStyleElement(element, id + '_', side, color)\r\n    var units = stack.units\r\n    var mechMaskId = stack.mechMaskId\r\n    var outClipId = stack.outClipId\r\n    var defs = [style].concat(stack.defs)\r\n    var layer = [\r\n      element(\r\n        'g',\r\n        getGroupAttributes(box, side, mechMaskId, outClipId),\r\n        stack.layer\r\n      ),\r\n    ]\r\n\r\n    var defsNode = element('defs', {}, defs)\r\n    var layerNode = element('g', getLayerAttributes(box), layer)\r\n    var sideAttributes = extend(\r\n      BASE_ATTRIBUTES,\r\n      {\r\n        id: id + '_' + side,\r\n        viewBox: vb.asString(box),\r\n        width: box[2] / 1000 + units,\r\n        height: box[3] / 1000 + units,\r\n      },\r\n      attributes\r\n    )\r\n\r\n    result[side] = {\r\n      svg: element('svg', sideAttributes, [defsNode, layerNode]),\r\n      attributes: sideAttributes,\r\n      defs: defs,\r\n      layer: layer,\r\n      viewBox: box,\r\n      width: box[2] / 1000,\r\n      height: box[3] / 1000,\r\n      units: units,\r\n    }\r\n\r\n    return result\r\n  }, options)\r\n}\r\n\r\nfunction getGroupAttributes(box, side, mechMaskId, outClipId) {\r\n  var attr = {mask: 'url(#' + mechMaskId + ')'}\r\n\r\n  if (outClipId) {\r\n    attr['clip-path'] = 'url(#' + outClipId + ')'\r\n  }\r\n\r\n  // flip the bottom render in the x\r\n  if (side === wtg.SIDE_BOTTOM) {\r\n    var xTranslation = 2 * box[0] + box[2]\r\n    attr.transform = 'translate(' + xTranslation + ',0) scale(-1,1)'\r\n  }\r\n\r\n  return attr\r\n}\r\n\r\nfunction getLayerAttributes(box) {\r\n  var yTranslation = 2 * box[1] + box[3]\r\n  return {transform: 'translate(0,' + yTranslation + ') scale(1,-1)'}\r\n}\r\n","/* MIT license */\nvar colorNames = require('color-name');\nvar swizzle = require('simple-swizzle');\n\nvar reverseNames = {};\n\n// create a list of reverse color names\nfor (var name in colorNames) {\n\tif (colorNames.hasOwnProperty(name)) {\n\t\treverseNames[colorNames[name]] = name;\n\t}\n}\n\nvar cs = module.exports = {\n\tto: {},\n\tget: {}\n};\n\ncs.get = function (string) {\n\tvar prefix = string.substring(0, 3).toLowerCase();\n\tvar val;\n\tvar model;\n\tswitch (prefix) {\n\t\tcase 'hsl':\n\t\t\tval = cs.get.hsl(string);\n\t\t\tmodel = 'hsl';\n\t\t\tbreak;\n\t\tcase 'hwb':\n\t\t\tval = cs.get.hwb(string);\n\t\t\tmodel = 'hwb';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tval = cs.get.rgb(string);\n\t\t\tmodel = 'rgb';\n\t\t\tbreak;\n\t}\n\n\tif (!val) {\n\t\treturn null;\n\t}\n\n\treturn {model: model, value: val};\n};\n\ncs.get.rgb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar abbr = /^#([a-f0-9]{3,4})$/i;\n\tvar hex = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i;\n\tvar rgba = /^rgba?\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar keyword = /(\\D+)/;\n\n\tvar rgb = [0, 0, 0, 1];\n\tvar match;\n\tvar i;\n\tvar hexAlpha;\n\n\tif (match = string.match(hex)) {\n\t\thexAlpha = match[2];\n\t\tmatch = match[1];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\t// https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19\n\t\t\tvar i2 = i * 2;\n\t\t\trgb[i] = parseInt(match.slice(i2, i2 + 2), 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = Math.round((parseInt(hexAlpha, 16) / 255) * 100) / 100;\n\t\t}\n\t} else if (match = string.match(abbr)) {\n\t\tmatch = match[1];\n\t\thexAlpha = match[3];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i] + match[i], 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = Math.round((parseInt(hexAlpha + hexAlpha, 16) / 255) * 100) / 100;\n\t\t}\n\t} else if (match = string.match(rgba)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i + 1], 0);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\trgb[3] = parseFloat(match[4]);\n\t\t}\n\t} else if (match = string.match(per)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\trgb[3] = parseFloat(match[4]);\n\t\t}\n\t} else if (match = string.match(keyword)) {\n\t\tif (match[1] === 'transparent') {\n\t\t\treturn [0, 0, 0, 0];\n\t\t}\n\n\t\trgb = colorNames[match[1]];\n\n\t\tif (!rgb) {\n\t\t\treturn null;\n\t\t}\n\n\t\trgb[3] = 1;\n\n\t\treturn rgb;\n\t} else {\n\t\treturn null;\n\t}\n\n\tfor (i = 0; i < 3; i++) {\n\t\trgb[i] = clamp(rgb[i], 0, 255);\n\t}\n\trgb[3] = clamp(rgb[3], 0, 1);\n\n\treturn rgb;\n};\n\ncs.get.hsl = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hsl = /^hsla?\\(\\s*([+-]?(?:\\d*\\.)?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar match = string.match(hsl);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = (parseFloat(match[1]) + 360) % 360;\n\t\tvar s = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar l = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\n\t\treturn [h, s, l, a];\n\t}\n\n\treturn null;\n};\n\ncs.get.hwb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hwb = /^hwb\\(\\s*([+-]?\\d*[\\.]?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar match = string.match(hwb);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar w = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar b = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\t\treturn [h, w, b, a];\n\t}\n\n\treturn null;\n};\n\ncs.to.hex = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn (\n\t\t'#' +\n\t\thexDouble(rgba[0]) +\n\t\thexDouble(rgba[1]) +\n\t\thexDouble(rgba[2]) +\n\t\t(rgba[3] < 1\n\t\t\t? (hexDouble(Math.round(rgba[3] * 255)))\n\t\t\t: '')\n\t);\n};\n\ncs.to.rgb = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ')'\n\t\t: 'rgba(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ', ' + rgba[3] + ')';\n};\n\ncs.to.rgb.percent = function () {\n\tvar rgba = swizzle(arguments);\n\n\tvar r = Math.round(rgba[0] / 255 * 100);\n\tvar g = Math.round(rgba[1] / 255 * 100);\n\tvar b = Math.round(rgba[2] / 255 * 100);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + r + '%, ' + g + '%, ' + b + '%)'\n\t\t: 'rgba(' + r + '%, ' + g + '%, ' + b + '%, ' + rgba[3] + ')';\n};\n\ncs.to.hsl = function () {\n\tvar hsla = swizzle(arguments);\n\treturn hsla.length < 4 || hsla[3] === 1\n\t\t? 'hsl(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%)'\n\t\t: 'hsla(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%, ' + hsla[3] + ')';\n};\n\n// hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\ncs.to.hwb = function () {\n\tvar hwba = swizzle(arguments);\n\n\tvar a = '';\n\tif (hwba.length >= 4 && hwba[3] !== 1) {\n\t\ta = ', ' + hwba[3];\n\t}\n\n\treturn 'hwb(' + hwba[0] + ', ' + hwba[1] + '%, ' + hwba[2] + '%' + a + ')';\n};\n\ncs.to.keyword = function (rgb) {\n\treturn reverseNames[rgb.slice(0, 3)];\n};\n\n// helpers\nfunction clamp(num, min, max) {\n\treturn Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n\tvar str = num.toString(16).toUpperCase();\n\treturn (str.length < 2) ? '0' + str : str;\n}\n","'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","'use strict';\n\nvar isArrayish = require('is-arrayish');\n\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\n\nvar swizzle = module.exports = function swizzle(args) {\n\tvar results = [];\n\n\tfor (var i = 0, len = args.length; i < len; i++) {\n\t\tvar arg = args[i];\n\n\t\tif (isArrayish(arg)) {\n\t\t\t// http://jsperf.com/javascript-array-concat-vs-push/98\n\t\t\tresults = concat.call(results, slice.call(arg));\n\t\t} else {\n\t\t\tresults.push(arg);\n\t\t}\n\t}\n\n\treturn results;\n};\n\nswizzle.wrap = function (fn) {\n\treturn function () {\n\t\treturn fn(swizzle(arguments));\n\t};\n};\n","module.exports = function isArrayish(obj) {\n\tif (!obj || typeof obj === 'string') {\n\t\treturn false;\n\t}\n\n\treturn obj instanceof Array || Array.isArray(obj) ||\n\t\t(obj.length >= 0 && (obj.splice instanceof Function ||\n\t\t\t(Object.getOwnPropertyDescriptor(obj, (obj.length - 1)) && obj.constructor.name !== 'String')));\n};\n","// parse options from input\r\n'use strict'\r\n\r\nvar boardColor = require('./board-color')\r\nvar xid = require('@tracespace/xml-id')\r\nvar xmlElementString = require('xml-element-string')\r\n\r\nmodule.exports = function parseOptions(input) {\r\n  if (typeof input === 'string') {\r\n    input = {id: input}\r\n  } else if (!input) {\r\n    input = {}\r\n  }\r\n\r\n  return {\r\n    id: xid.ensure(input.id),\r\n    color: boardColor.getColor(input.color),\r\n    attributes: input.attributes || {},\r\n    useOutline: input.useOutline != null ? input.useOutline : true,\r\n    createElement: input.createElement || xmlElementString,\r\n  }\r\n}\r\n","// sort layers array into top and bottom\r\n'use strict'\r\n\r\nvar wtg = require('whats-that-gerber')\r\n\r\nmodule.exports = function sortLayers(layers) {\r\n  return layers.filter(acceptLayer).reduce(assignLayer, {\r\n    top: [],\r\n    bottom: [],\r\n    drills: [],\r\n    outline: null,\r\n  })\r\n}\r\n\r\nfunction acceptLayer(layer) {\r\n  return (\r\n    layer != null &&\r\n    layer.type != null &&\r\n    layer.side != null &&\r\n    layer.converter != null &&\r\n    layer.converter.layer != null &&\r\n    layer.converter.layer.length\r\n  )\r\n}\r\n\r\nfunction assignLayer(result, layer) {\r\n  var type = layer.type\r\n  var side = layer.side\r\n\r\n  if (type === wtg.TYPE_DRILL) {\r\n    result.drills.push(layer)\r\n  } else if (type === wtg.TYPE_OUTLINE) {\r\n    result.outline = layer\r\n  } else {\r\n    if (side === wtg.SIDE_TOP) {\r\n      result.top.push(layer)\r\n    } else if (side === wtg.SIDE_BOTTOM) {\r\n      result.bottom.push(layer)\r\n    }\r\n  }\r\n\r\n  return result\r\n}\r\n","// stack layers function (where the magic happens)\r\n'use strict'\r\n\r\nvar viewbox = require('viewbox')\r\nvar wtg = require('whats-that-gerber')\r\n\r\nvar gatherLayers = require('./_gather-layers')\r\n\r\nmodule.exports = function(\r\n  element,\r\n  id,\r\n  side,\r\n  layers,\r\n  drills,\r\n  outline,\r\n  useOutline\r\n) {\r\n  var classPrefix = id + '_'\r\n  var idPrefix = id + '_' + side + '_'\r\n  var mechMaskId = idPrefix + 'mech-mask'\r\n\r\n  var layerProps = gatherLayers(\r\n    element,\r\n    idPrefix,\r\n    layers,\r\n    drills,\r\n    outline,\r\n    useOutline\r\n  )\r\n  var defs = layerProps.defs\r\n  var box = layerProps.box\r\n  var units = layerProps.units\r\n\r\n  layers = layerProps.layerIds\r\n  drills = layerProps.drillIds\r\n\r\n  defs.push(mechMask(element, mechMaskId, box, drills))\r\n\r\n  // build the layer starting with an fr4 rectangle the size of the viewbox\r\n  var layer = [createRect(element, box, 'currentColor', classPrefix + 'fr4')]\r\n  var cuLayerId = findLayerId(layers, wtg.TYPE_COPPER)\r\n  var smLayerId = findLayerId(layers, wtg.TYPE_SOLDERMASK)\r\n  var ssLayerId = findLayerId(layers, wtg.TYPE_SILKSCREEN)\r\n  var spLayerId = findLayerId(layers, wtg.TYPE_SOLDERPASTE)\r\n  var outLayerId = layerProps.outlineId\r\n\r\n  // add copper and copper finish\r\n  if (cuLayerId) {\r\n    var cfMaskId = idPrefix + 'cf-mask'\r\n    var cfMaskShape = smLayerId\r\n      ? [useLayer(element, smLayerId)]\r\n      : [createRect(element, box)]\r\n    var cfMaskGroupAttr = {fill: '#fff', stroke: '#fff'}\r\n    var cfMaskGroup = [element('g', cfMaskGroupAttr, cfMaskShape)]\r\n\r\n    defs.push(element('mask', {id: cfMaskId}, cfMaskGroup))\r\n    layer.push(useLayer(element, cuLayerId, classPrefix + 'cu'))\r\n    layer.push(useLayer(element, cuLayerId, classPrefix + 'cf', cfMaskId))\r\n  }\r\n\r\n  // add soldermask and silkscreen\r\n  // silkscreen will not be added if no soldermask, because that's how it works in RL\r\n  if (smLayerId) {\r\n    // solder mask is... a mask, so mask it\r\n    var smMaskId = idPrefix + 'sm-mask'\r\n    var smMaskShape = [\r\n      createRect(element, box, '#fff'),\r\n      useLayer(element, smLayerId),\r\n    ]\r\n    var smMaskGroupAtrr = {fill: '#000', stroke: '#000'}\r\n    var smMaskGroup = [element('g', smMaskGroupAtrr, smMaskShape)]\r\n\r\n    defs.push(element('mask', {id: smMaskId}, smMaskGroup))\r\n\r\n    // add the layer that gets masked\r\n    var smGroupAttr = {mask: 'url(#' + smMaskId + ')'}\r\n    var smGroupShape = [\r\n      createRect(element, box, 'currentColor', classPrefix + 'sm'),\r\n    ]\r\n\r\n    if (ssLayerId) {\r\n      smGroupShape.push(useLayer(element, ssLayerId, classPrefix + 'ss'))\r\n    }\r\n\r\n    layer.push(element('g', smGroupAttr, smGroupShape))\r\n  }\r\n\r\n  // add solderpaste\r\n  if (spLayerId) {\r\n    layer.push(useLayer(element, spLayerId, classPrefix + 'sp'))\r\n  }\r\n\r\n  // add board outline if necessary\r\n  if (outLayerId && !useOutline) {\r\n    layer.push(useLayer(element, outLayerId, classPrefix + 'out'))\r\n  }\r\n\r\n  return {\r\n    defs: defs,\r\n    layer: layer,\r\n    mechMaskId: mechMaskId,\r\n    outClipId: outLayerId && useOutline ? outLayerId : null,\r\n    box: box,\r\n    units: units,\r\n  }\r\n}\r\n\r\nfunction findLayerId(layers, type) {\r\n  var layer\r\n  var i\r\n\r\n  for (i = 0; i < layers.length; i++) {\r\n    layer = layers[i]\r\n    if (layer.type === type) {\r\n      return layer.id\r\n    }\r\n  }\r\n}\r\n\r\nfunction useLayer(element, id, className, mask) {\r\n  var attr = {'xlink:href': '#' + id}\r\n\r\n  if (className) {\r\n    attr.fill = 'currentColor'\r\n    attr.stroke = 'currentColor'\r\n    attr.class = className\r\n  }\r\n\r\n  if (mask) {\r\n    attr.mask = 'url(#' + mask + ')'\r\n  }\r\n\r\n  return element('use', attr)\r\n}\r\n\r\nfunction createRect(element, box, fill, className) {\r\n  var attr = viewbox.rect(box)\r\n\r\n  if (fill) {\r\n    attr.fill = fill\r\n  }\r\n\r\n  if (className) {\r\n    attr.class = className\r\n  }\r\n\r\n  return element('rect', attr)\r\n}\r\n\r\nfunction mechMask(element, id, box, drills) {\r\n  var children = drills.map(function(layer) {\r\n    return useLayer(element, layer.id)\r\n  })\r\n\r\n  children.unshift(createRect(element, box, '#fff'))\r\n\r\n  var groupAttr = {fill: '#000', stroke: '#000'}\r\n  var group = [element('g', groupAttr, children)]\r\n\r\n  return element('mask', {id: id}, group)\r\n}\r\n","// helper for stack layers that scales, wraps, gathers the defs of layers\r\n'use strict'\r\n\r\nvar viewbox = require('viewbox')\r\nvar wtg = require('whats-that-gerber')\r\n\r\nvar wrapLayer = require('./wrap-layer')\r\n\r\nmodule.exports = function gatherLayers(\r\n  element,\r\n  idPrefix,\r\n  layers,\r\n  drills,\r\n  outline,\r\n  useOutline\r\n) {\r\n  var defs = []\r\n  var layerIds = []\r\n  var drillIds = []\r\n  var units = ''\r\n  var unitsCount = {in: 0, mm: 0}\r\n  var allLayers = layers.concat(drills, outline || [])\r\n\r\n  var drillCount = 0\r\n  var getUniqueId = function(type) {\r\n    var id = idPrefix + type\r\n\r\n    if (type === wtg.TYPE_DRILL) {\r\n      drillCount++\r\n      id += drillCount\r\n    }\r\n\r\n    return id\r\n  }\r\n\r\n  allLayers.forEach(function(layer) {\r\n    if (!layer.externalId) {\r\n      defs = defs.concat(layer.converter.defs)\r\n    }\r\n\r\n    if (layer.converter.units === 'mm') {\r\n      unitsCount.mm++\r\n    } else {\r\n      unitsCount.in++\r\n    }\r\n  })\r\n\r\n  if (unitsCount.in + unitsCount.mm) {\r\n    units = unitsCount.in > unitsCount.mm ? 'in' : 'mm'\r\n  }\r\n\r\n  var viewboxLayers = useOutline && outline ? [outline] : allLayers\r\n\r\n  var box = viewboxLayers.reduce(function(result, layer) {\r\n    var layerBox = layer.converter.viewBox\r\n    var layerUnits = layer.converter.units\r\n\r\n    if (layerUnits && layerBox[2] !== 0 && layerBox[3] !== 0) {\r\n      return viewbox.add(\r\n        result,\r\n        viewbox.scale(layerBox, getScale(units, layerUnits))\r\n      )\r\n    }\r\n\r\n    return result\r\n  }, viewbox.create())\r\n\r\n  var wrapConverterLayer = function(collection) {\r\n    return function(layer) {\r\n      var id = layer.externalId\r\n      var converter = layer.converter\r\n\r\n      if (!id) {\r\n        id = getUniqueId(layer.type)\r\n        defs.push(\r\n          wrapLayer(element, id, converter, getScale(units, converter.units))\r\n        )\r\n      }\r\n\r\n      collection.push({type: layer.type, id: id})\r\n    }\r\n  }\r\n\r\n  layers.forEach(wrapConverterLayer(layerIds))\r\n  drills.forEach(wrapConverterLayer(drillIds))\r\n\r\n  var outlineId\r\n\r\n  // add the outline to defs if it's not defined externally or if we're using it to clip\r\n  if (outline) {\r\n    if (outline.externalId && !useOutline) {\r\n      outlineId = outline.externalId\r\n    } else {\r\n      outlineId = getUniqueId(outline.type)\r\n\r\n      defs.push(\r\n        wrapLayer(\r\n          element,\r\n          outlineId,\r\n          outline.converter,\r\n          getScale(units, outline.converter.units),\r\n          useOutline ? 'clipPath' : 'g'\r\n        )\r\n      )\r\n    }\r\n  }\r\n\r\n  return {\r\n    defs: defs,\r\n    box: box,\r\n    units: units,\r\n    layerIds: layerIds,\r\n    drillIds: drillIds,\r\n    outlineId: outlineId,\r\n  }\r\n}\r\n\r\nfunction getScale(units, layerUnits) {\r\n  var scale = units === 'in' ? 1 / 25.4 : 25.4\r\n  var result = units === layerUnits ? 1 : scale\r\n\r\n  return result\r\n}\r\n","// wrap a layer in a group given the layer's converter object\r\n'use strict'\r\n\r\nmodule.exports = function wrapLayer(element, id, converter, scale, tag) {\r\n  var layer = converter.layer\r\n  var attr = {id: id}\r\n\r\n  if (scale && scale !== 1) {\r\n    attr.transform = 'scale(' + scale + ',' + scale + ')'\r\n  }\r\n\r\n  return element(tag || 'g', attr, layer)\r\n}\r\n","/* global Promise */\r\n// pcb-stackup main\r\n'use strict'\r\n\r\nvar extend = require('xtend')\r\nvar runParallel = require('run-parallel')\r\nvar runWaterfall = require('run-waterfall')\r\nvar gerberToSvg = require('gerber-to-svg')\r\nvar createStackup = require('pcb-stackup-core')\r\nvar wtg = require('whats-that-gerber')\r\n\r\nmodule.exports = function pcbStackup(layers, options, done) {\r\n  var result\r\n\r\n  if (typeof options === 'function') {\r\n    done = options\r\n    options = null\r\n  }\r\n\r\n  validateLayersInput(layers)\r\n\r\n  // promise mode\r\n  if (done == null) {\r\n    if (typeof Promise !== 'function') {\r\n      throw new Error('No callback specified and global Promise not found')\r\n    }\r\n\r\n    result = new Promise(function(resolve, reject) {\r\n      done = function callbackToPromise(error, stackup) {\r\n        if (error) return reject(error)\r\n        resolve(stackup)\r\n      }\r\n    })\r\n  }\r\n\r\n  var layerTypes = wtg(\r\n    layers\r\n      .map(function(layer) {\r\n        return layer.filename\r\n      })\r\n      .filter(Boolean)\r\n  )\r\n\r\n  runWaterfall(\r\n    [\r\n      // render all layers with gerber-to-svg in parallel\r\n      function renderAllLayers(next) {\r\n        var layerTasks = layers.map(makeRenderLayerTask)\r\n        runParallel(layerTasks, next)\r\n      },\r\n      // using the result of renderAllLayers, build the stackup\r\n      function renderStackup(stackupLayers, next) {\r\n        var stackup = createStackup(stackupLayers, options)\r\n        stackup.layers = stackupLayers\r\n        next(null, stackup)\r\n      },\r\n    ],\r\n    function finish(error, stackup) {\r\n      // ensure only error is passed if it exists\r\n      if (error) return done(error)\r\n      done(null, stackup)\r\n    }\r\n  )\r\n\r\n  // if in Promise mode, return the Promise\r\n  return result\r\n\r\n  // map an pcb-stackup input layer into a function that will call a callback\r\n  // once a pcb-stackup-core input layer is ready\r\n  function makeRenderLayerTask(layer) {\r\n    return function renderLayer(next) {\r\n      var stackupLayer = makeBaseStackupLayer(layer)\r\n\r\n      if (stackupLayer.converter) return next(null, stackupLayer)\r\n\r\n      var converter = gerberToSvg(\r\n        stackupLayer.gerber,\r\n        stackupLayer.options,\r\n        function handleLayerDone(error) {\r\n          if (error) return next(error)\r\n          stackupLayer.converter = converter\r\n          next(null, stackupLayer)\r\n        }\r\n      )\r\n    }\r\n  }\r\n\r\n  // extend pcb-stackup input layer with necessary details for pcb-stackup-core\r\n  function makeBaseStackupLayer(layer) {\r\n    var layerSide = layer.side\r\n    var layerType = layer.type\r\n\r\n    if (\r\n      layer.filename &&\r\n      typeof layerSide === 'undefined' &&\r\n      typeof layerType === 'undefined'\r\n    ) {\r\n      var gerberId = layerTypes[layer.filename]\r\n      layerSide = gerberId.side\r\n      layerType = gerberId.type\r\n    }\r\n\r\n    var layerOptions = extend(layer.options)\r\n\r\n    if (layerOptions.plotAsOutline == null && layerType === wtg.TYPE_OUTLINE) {\r\n      layerOptions.plotAsOutline = true\r\n    }\r\n\r\n    if (\r\n      options &&\r\n      options.outlineGapFill != null &&\r\n      layerOptions.plotAsOutline\r\n    ) {\r\n      layerOptions.plotAsOutline = options.outlineGapFill\r\n    }\r\n\r\n    return extend(layer, {\r\n      side: layerSide,\r\n      type: layerType,\r\n      options: layerOptions,\r\n    })\r\n  }\r\n}\r\n\r\nfunction validateLayersInput(layers) {\r\n  if (!Array.isArray(layers)) {\r\n    throw new Error('first argument should be an array of layers')\r\n  }\r\n\r\n  var layerErrors = layers\r\n    .map(getLayerValidationError)\r\n    .filter(Boolean)\r\n    .join(', ')\r\n\r\n  if (layerErrors) throw new Error(layerErrors)\r\n}\r\n\r\nfunction getLayerValidationError(layer, index) {\r\n  var result = wtg.validate(layer)\r\n  var error = null\r\n\r\n  if (!layer.converter && !layer.gerber) {\r\n    error = 'is missing gerber source or cached converter'\r\n  } else if (!layer.filename && !layer.type) {\r\n    error = 'is missing filename or side/type'\r\n  } else if (!layer.filename && !result.valid) {\r\n    error = 'has invalid side/type (' + layer.side + '/' + layer.type + ')'\r\n  }\r\n\r\n  return error ? 'layer ' + index + ' ' + error : null\r\n}\r\n"],"sourceRoot":""}